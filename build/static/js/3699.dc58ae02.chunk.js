"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[3699],{6091:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var n=a(885),s=a(8821),r=a(2791),d=a(7689),i=a(4917),l=a(6218),o=a(7659),c=a(7806),u=a(7340),g=a(8460),m=a(2820),p=a(1260),f=a(4165),b=a(5861),v=a(2982),h=a(4677),x=a(9106),C=a(8386),A=a(184),y=[{id:"name",disablePadding:!1,label:"Name"},{id:"email",disablePadding:!1,label:"Email"},{id:"role",disablePadding:!1,label:"Role"},{id:"createdAt",disablePadding:!1,label:"Onboarded On"},{id:"status",disablePadding:!1,label:"Status"}];var Z=function(e){var t=e.page,a=e.setPage,s=e.makeApiCall,c=e.setMakeApiCall,u=e.search,g=(0,d.s0)(),p=r.useState(10),Z=(0,n.Z)(p,2),k=Z[0],j=Z[1],w=r.useState("desc"),S=(0,n.Z)(w,2),P=S[0],N=S[1],R=r.useState(""),E=(0,n.Z)(R,2),Y=E[0],T=E[1],M=r.useState([]),_=(0,n.Z)(M,2),F=_[0],D=_[1],B=r.useState(0),O=(0,n.Z)(B,2),G=O[0],I=O[1],H=(0,r.useState)([]),U=(0,n.Z)(H,2),L=U[0],z=U[1],K=(0,r.useState)(!0),V=(0,n.Z)(K,2),q=V[0],J=V[1],Q=r.useRef(),W=(0,m.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),X=(0,n.Z)(W,2),$=X[0],ee=X[1],te=function(e){var t=["_id","name","email","role","createdAt","isActive"];i.Y.debug("data before update----",e);var a=e;a.forEach((function(e){var a,n;delete e.updatedAt,delete e.updatedBy,delete e.createdBy,delete e.description,delete e.countryCode,delete e.isDeleted,delete e.isReplaced,delete e.replacedUsers,delete e.__v,delete e.password,delete e.roleId,delete e.salt,delete e.uuid,delete e.phoneNumber,delete e.isCGFAdmin,e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),e.role=null!==(a=null===e||void 0===e||null===(n=e.subRole[0])||void 0===n?void 0:n.name)&&void 0!==a?a:"N/A",delete e.subRole,delete e.subRoleId,t.forEach((function(t){var a=e[t];delete e[t],e[t]=a}))})),i.Y.debug("data in updaterecords method",a),D((0,v.Z)(a))},ae=function(){i.Y.debug("Search",u);var e="".concat(l.mc,"/list/?page=").concat(t,"&size=").concat(k,"&orderBy=").concat(Y,"&order=").concat(P);return u&&(e+="&search=".concat(u)),e},ne=function(){var e=(0,b.Z)((0,f.Z)().mark((function e(){var t,a,n,s,r,d,l,o,c,u,m,p=arguments;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(p.length>0&&void 0!==p[0])||p[0],t=p.length>1&&void 0!==p[1]?p[1]:new AbortController,e.prev=2,a=ae(),J(!0),e.next=7,h.H.get(a,{signal:t.signal});case 7:n=e.sent,I(parseInt(n.headers["x-total-count"])),i.Y.debug("Response from sub admin api get",n),te((0,v.Z)(n.data)),J(!1),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:i.Y.debug("Error from getSubAdmin-------",e.t0),401==(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status)?(ee({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return Q.current()})),setTimeout((function(){g("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.status)?(ee({titleMessage:"Oops!",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(d=e.t0.response)&&void 0!==d&&null!==(l=d.data)&&void 0!==l&&l.message?null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return Q.current()})),setTimeout((function(){g("/home")}),3e3)):ee({titleMessage:"Oops!",descriptionMessage:null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.message,messageType:"error"},(function(){return Q.current()})),J(!1);case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){var e=!0,t=new AbortController;return s&&ne(e,t),i.Y.debug("makeApiCall",s),i.Y.debug("inside use Effect"),function(){e=!1,t.abort()}}),[t,k,Y,P,s,c]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(o.Z,{myRef:Q,titleMessage:$.titleMessage,descriptionMessage:$.descriptionMessage,messageType:$.messageType}),q?(0,A.jsx)(C.Z,{}):(0,A.jsx)(x.Z,{tableHead:y,records:F,handleChangePage1:function(e){a(e)},handleChangeRowsPerPage1:function(e){j(parseInt(e.target.value,10)),a(1)},page:t,rowsPerPage:k,totalRecords:G,orderBy:Y,onClickVisibilityIconHandler1:function(e){return i.Y.debug("id",e),g("view-cgf-admin/".concat(e))},order:P,setOrder:N,setOrderBy:T,setCheckBoxes:!1,setSelected:z,selected:L,onRowClick:!0})]})},k=a(5736),j=[{id:"name",disablePadding:!1,label:"Name"},{id:"email",disablePadding:!1,label:"Email"},{id:"role",disablePadding:!1,label:"Role"},{id:"createdAt",disablePadding:!1,label:"Created At"}];var w=function(e){var t=e.makeApiCall,a=e.setMakeApiCall,s=e.search,o=e.pageForPendingTabCGFAdmin,c=e.setPageForPendingTabCGFAdmin,u=e.myRef,g=e.setPendingCgfToasterDetails,m=(0,r.useState)(!0),p=(0,n.Z)(m,2),y=p[0],Z=p[1],w=(0,d.s0)(),S=r.useState(10),P=(0,n.Z)(S,2),N=P[0],R=P[1],E=r.useState("desc"),Y=(0,n.Z)(E,2),T=Y[0],M=Y[1],_=r.useState("createdAt"),F=(0,n.Z)(_,2),D=F[0],B=F[1],O=r.useState([]),G=(0,n.Z)(O,2),I=G[0],H=G[1],U=r.useState(0),L=(0,n.Z)(U,2),z=L[0],K=L[1],V=["_id","name","email","role","createdAt"],q=function(e){i.Y.debug("data before update----",e);var t=e;t.forEach((function(e){var t,a,n,s,r,d,i;delete e.updatedAt,delete e.data.description,delete e.data.countryCode,delete e.data.isDeleted,delete e.data.isReplaced,delete e.__v,delete e.data.password,delete e.data.roleId,delete e.data.salt,delete e.data.uuid,delete e.data.phoneNumber,delete e.token,delete e.tokenExpiry,delete e.tokenType,e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),e.role=null!==(t=null===e||void 0===e||null===(a=e.subRole)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.name)&&void 0!==t?t:"N/A",e.name=null!==(s=null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.name)&&void 0!==s?s:"N/A",e.email=null!==(d=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.email)&&void 0!==d?d:"N/A",delete e.createdBy,delete e.subRole,delete e.data,delete e.memberData,V.forEach((function(t){var a=e[t];delete e[t],e[t]=a}))})),i.Y.debug("data in updaterecords method in pending method",t),H((0,v.Z)(t))},J=function(){i.Y.debug("Search",s);var e="".concat(l.mc,"/pending/list?page=").concat(o,"&size=").concat(N,"&orderBy=").concat(D,"&order=").concat(T);return s&&(e+="&search=".concat(s)),e},Q=function(){var e=(0,b.Z)((0,f.Z)().mark((function e(){var t,a,n,s=arguments;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(s.length>0&&void 0!==s[0])||s[0],t=s.length>1&&void 0!==s[1]?s[1]:new AbortController,e.prev=2,a=J(),Z(!0),e.next=7,h.H.get(a,{signal:t.signal});case 7:n=e.sent,K(parseInt(n.headers["x-total-count"])),i.Y.debug("Response from sub admin api get for pending tab table",n),q(n.data),Z(!1),e.next=20;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:(0,k.K)(e.t0,g,u,w),i.Y.debug("Error from getSubAdmin pending tab table-------",e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){var e=!0,a=new AbortController;return t&&Q(e,a),i.Y.debug("makeApiCall",t),i.Y.debug("inside use Effect"),function(){e=!1,a.abort()}}),[t,a,o,N,D,T]),i.Y.debug("makeApiCall outside UseEffect ",t),(0,A.jsx)(A.Fragment,{children:y?(0,A.jsx)(C.Z,{}):(0,A.jsx)(x.Z,{tableHead:j,records:I,handleChangePage1:function(e){c(e)},handleChangeRowsPerPage1:function(e){i.Y.debug("rows per page",e),R(parseInt(e.target.value,10)),c(1)},page:o,rowsPerPage:N,totalRecords:z,orderBy:D,onClickVisibilityIconHandler1:function(e){return i.Y.debug("id",e),w("/users/cgf-admin/pending/view-cgf-admin/".concat(e))},order:T,setOrder:M,setOrderBy:B,setCheckBoxes:!1,onRowClick:!0})})};var S=function(){(0,p.j)("CGF Admins");var e=r.useState(0),t=(0,n.Z)(e,2),a=t[0],f=t[1],b=(0,d.TH)().state,v=r.useRef(),h=(0,m.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),x=(0,n.Z)(h,2),C=x[0],y=x[1],k=(0,r.useState)(null),j=(0,n.Z)(k,2),S=j[0],P=j[1],N=(0,r.useState)(!0),R=(0,n.Z)(N,2),E=R[0],Y=R[1],T=(0,d.s0)(),M=(0,r.useState)(""),_=(0,n.Z)(M,2),F=_[0],D=_[1],B=r.useState(1),O=(0,n.Z)(B,2),G=O[0],I=O[1],H=r.useState(1),U=(0,n.Z)(H,2),L=U[0],z=U[1];(0,r.useEffect)((function(){var e=new AbortController;return i.Y.debug("makeApiCall",E),i.Y.debug("inside use Effect"),i.Y.debug("page-",b),f(b||0),T("",{state:0}),function(){clearTimeout(S),e.abort()}}),[]),i.Y.debug("makeApiCall outside UseEffect ",E);return(0,A.jsxs)("div",{className:"page-wrapper",children:[(0,A.jsx)(o.Z,{myRef:v,titleMessage:C.titleMessage,descriptionMessage:C.descriptionMessage,messageType:C.messageType}),(0,A.jsx)("section",{children:(0,A.jsxs)("div",{className:"container",children:[(0,A.jsx)("div",{className:"member-filter-sect"}),(0,A.jsxs)("div",{className:"form-header member-form-header flex-between",children:[(0,A.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,A.jsx)("h2",{className:"heading2",children:"CGF Admins"})}),(0,A.jsxs)("div",{className:"form-header-right-txt",children:[0==a&&(0,A.jsxs)("div",{className:"tertiary-btn-blk mr-20",onClick:function(){return(0,c.j)("CGF Admins",y,!1,v,l.A3,T)},children:[(0,A.jsx)("span",{className:"download-icon",children:(0,A.jsx)(s.Z,{})}),"Download"]}),0===a&&(0,A.jsx)("div",{className:"form-btn",children:(0,A.jsx)("button",{onClick:function(){return T("/users/cgf-admin/add-cgf-admin")},className:"primary-button add-button",children:"Add CGF Admin"})})]})]}),(0,A.jsxs)("div",{className:"member-filter-wrap flex-between",children:[(0,A.jsx)("div",{className:"member-tab-left",children:(0,A.jsx)(u.Z,{value:a,handleChange:function(e,t){f(t),I(1),z(1)}})}),(0,A.jsx)("div",{className:"member-filter-left",children:(0,A.jsxs)("div",{className:"searchbar",children:[(0,A.jsx)("input",{type:"text",placeholder:"Search",onKeyDown:function(e){"Enter"===e.key&&(Y(!0),I(1),z(1))},onChange:function(e){return function(e){i.Y.debug("event",e.key),S&&clearTimeout(S),Y(!1),i.Y.debug("search values",e.target.value),D(e.target.value),P(setTimeout((function(){Y(!0),I(1),z(1)}),1e3))}(e)},name:"search"}),(0,A.jsx)("button",{type:"submit",children:(0,A.jsx)("i",{className:"fa fa-search"})})]})}),(0,A.jsx)("div",{className:"member-filter-right"})]}),(0,A.jsxs)("div",{className:"member-info-wrapper table-content-wrap table-footer-btm-space",children:[(0,A.jsx)(g.x,{value:a,index:0,children:0===a&&(0,A.jsx)(Z,{page:L,setPage:z,makeApiCall:E,setMakeApiCall:Y,search:F})}),(0,A.jsx)(g.x,{value:a,index:1,children:(0,A.jsx)(w,{makeApiCall:E,setMakeApiCall:Y,search:F,myRef:v,pageForPendingTabCGFAdmin:G,setPageForPendingTabCGFAdmin:I,pendingCgftoasterDetails:C,setPendingCgfToasterDetails:y})})]})]})})]})}}}]);
//# sourceMappingURL=3699.dc58ae02.chunk.js.map