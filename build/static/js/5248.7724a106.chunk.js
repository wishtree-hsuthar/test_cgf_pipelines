"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5248],{25248:(e,a,l)=>{l.r(a),l.d(a,{default:()=>S});var r=l(97275),s=l(88970),t=l(85523),n=l(61419),i=l(697),o=l(35527),d=l(39281),c=l(79836),m=l(53382),u=l(35855),h=l(53994),p=l(94454),b=l(72791),x=l(61134),g=l(57689),v=l(11087),f=l(55294),j=l(28386),Z=l(14917),N=l(27181),w=(l(71605),l(12820)),k=l(76218),y=l(1260),M=l(14227),C=l(45736),P=l(80184);const S=()=>{(0,y.j)("Add Role");const e=(0,g.s0)(),a=b.useRef(),[l,S]=(0,w.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"});let R=[],L={};const T={roleName:"",status:"active",description:""},A={roleName:{required:"Enter the role name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},description:{required:"Enter the description",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required"}},[E,q]=(0,b.useState)({...L}),[F,D]=(0,b.useState)(!1),[_,O]=(0,b.useState)(!1),I=e=>{e.map(((e,a)=>R[a]={moduleName:e.name,moduleId:e._id})),R.forEach((e=>L[e.moduleId]={name:e.moduleName,fill:!1,list:!1,add:!1,edit:!1,view:!1,delete:!1,all:!1})),q({...L})},{control:V,reset:G,setValue:H,handleSubmit:Y}=(0,x.cI)({defaultValues:T}),B=async l=>{Z.Y.info("Add role - submitCall handler");try{let e=JSON.parse(JSON.stringify(E));if(Object.keys(e).forEach((a=>{delete e[a].all,delete e[a].name})),d=e,!Object.values(d).some((e=>Object.values(e).some((e=>e)))))return void S({titleMessage:"Hurray!",descriptionMessage:"Select atleast 1 privilege",messageType:"error"},(()=>a.current()));D(!0),O(!0);const r=await f.Z.post(k.Yn+"roles",{name:l.roleName,description:l.description,isActive:"active"===l.status,privileges:e});if(201==r.status)return O(!1),D(!1),S({titleMessage:"Hurray!",descriptionMessage:r.data.message,messageType:"success"},(()=>a.current())),G({...T}),Q(),!0}catch(c){var r,s;if(O(!1),D(!1),401==(null===c||void 0===c||null===(r=c.response)||void 0===r?void 0:r.status))S({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(()=>a.current())),setTimeout((()=>{e("/login")}),3e3);else{if(403!==(null===c||void 0===c||null===(s=c.response)||void 0===s?void 0:s.status))return(e=>{var l,r;Z.Y.info("Add role - setErrorToaster handler"),S({titleMessage:"Error",descriptionMessage:null!==e&&void 0!==e&&null!==(l=e.response)&&void 0!==l&&null!==(r=l.data)&&void 0!==r&&r.message&&"string"===typeof e.response.data.message?e.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>a.current()))})(c),!1;var t,n,i,o;S({titleMessage:"Error",descriptionMessage:null!==c&&void 0!==c&&null!==(t=c.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message?null===c||void 0===c||null===(i=c.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>a.current())),setTimeout((()=>{e("/home")}),3e3)}}var d},Q=async()=>{try{const{data:e}=await f.Z.get(k.Yn+"system-modules");I([...e])}catch(l){if("ERR_CANCELED"===(null===l||void 0===l?void 0:l.code))return;(0,C.K)(l,S,a,e)}};return(0,b.useEffect)((()=>{let e=!0;const a=new AbortController;return e&&Q(),()=>{e=!1,a.abort()}}),[]),(0,P.jsxs)("div",{className:"page-wrapper",children:[(0,P.jsx)(N.Z,{myRef:a,titleMessage:l.titleMessage,descriptionMessage:l.descriptionMessage,messageType:l.messageType}),(0,P.jsx)("div",{className:"breadcrumb-wrapper",children:(0,P.jsx)("div",{className:"container",children:(0,P.jsxs)("ul",{className:"breadcrumb",children:[(0,P.jsx)("li",{children:(0,P.jsx)(v.rU,{to:"/roles",children:"Roles"})}),(0,P.jsx)("li",{children:"Add Role"})]})})}),(0,P.jsx)("section",{children:(0,P.jsxs)("div",{className:"container",children:[(0,P.jsxs)("div",{className:"form-header flex-between",children:[(0,P.jsx)("h2",{className:"heading2",children:"Add Role"}),(0,P.jsx)("div",{className:"form-header-right-txt",children:(0,P.jsxs)("div",{className:"tertiary-btn-blk",onClick:Y((async e=>{B(e)})),children:[(0,P.jsx)("span",{className:"addmore-icon",children:(0,P.jsx)("i",{className:"fa fa-plus"})}),(0,P.jsx)("span",{className:"addmore-txt",children:"Save & Add More"})]})})]}),(0,P.jsx)("form",{onSubmit:Y((async a=>{await B(a)&&setTimeout((()=>e("/roles")),3e3)})),children:_?(0,P.jsx)(j.Z,{}):(0,P.jsxs)("div",{className:"card-wrapper",children:[(0,P.jsxs)("div",{className:"card-blk flex-between",children:[(0,P.jsx)("div",{className:"card-form-field",children:(0,P.jsxs)("div",{className:"form-group",children:[(0,P.jsxs)("label",{htmlFor:"roleName",children:["Role Name ",(0,P.jsx)("span",{className:"mandatory",children:"*"})]}),(0,P.jsx)(x.Qr,{name:"roleName",rules:{required:!0,maxLength:50,minLength:3,pattern:/^[a-zA-Z][a-zA-Z ]*$/},control:V,render:e=>{let{field:a,fieldState:{error:l}}=e;return(0,P.jsx)(r.Z,{...a,onBlur:e=>H("roleName",e.target.value.trim()),inputProps:{maxLength:50},className:"input-field ".concat(l&&"input-error"),id:"outlined-basic",placeholder:"Enter role name",helperText:l?A.roleName[l.type]:" ",variant:"outlined"})}})]})}),(0,P.jsx)("div",{className:"card-form-field",children:(0,P.jsxs)("div",{className:"form-group",children:[(0,P.jsx)("label",{htmlFor:"status",children:"Status"}),(0,P.jsx)("div",{className:"radio-btn-field",children:(0,P.jsx)(x.Qr,{name:"status",control:V,render:e=>{let{field:a}=e;return(0,P.jsxs)(s.Z,{...a,"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",className:"radio-btn",children:[(0,P.jsx)(t.Z,{value:"active",control:(0,P.jsx)(n.Z,{}),label:"Active"}),(0,P.jsx)(t.Z,{value:"inactive",control:(0,P.jsx)(n.Z,{}),label:"Inactive"})]})}})})]})}),(0,P.jsx)("div",{className:"card-form-field fullwidth",children:(0,P.jsxs)("div",{className:"form-group",children:[(0,P.jsxs)("label",{htmlFor:"addrole-description",children:["Description ",(0,P.jsx)("span",{className:"mandatory",children:"*"})]}),(0,P.jsx)(x.Qr,{name:"description",control:V,rules:{required:!0,maxLength:500,minLength:3},render:e=>{let{field:a,fieldState:{error:l}}=e;return(0,P.jsx)(r.Z,{multiline:!0,...a,onBlur:e=>H("description",e.target.value.trim()),inputProps:{maxLength:500},className:"input-textarea ".concat(l&&"input-textarea-error"),id:"outlined-basic",placeholder:"Enter description",helperText:l?A.description[l.type]:" ",variant:"outlined"})}})]})})]}),(0,P.jsx)(i.Z,{sx:{width:"100%"},className:"table-blk table-blk-role",children:(0,P.jsx)(o.Z,{sx:{width:"100%"},children:(0,P.jsx)(d.Z,{children:(0,P.jsxs)(c.Z,{sx:{minWidth:750},children:[(0,P.jsx)(M.Z,{}),(0,P.jsx)(m.Z,{children:Object.keys(E).map(((e,a)=>(0,P.jsxs)(u.Z,{hover:!0,children:[(0,P.jsx)(h.Z,{children:E[e].name}),(0,P.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Assessment"===E[e].name&&(0,P.jsx)(p.Z,{disabled:"Assessment"!=E[e].name,className:"table-checkbox",checked:E[e].fill,onChange:()=>q((a=>({...a,[e]:{...a[e],fill:!a[e].fill,list:a[e].list||!a[e].fill,view:a[e].view||!a[e].fill,all:!a[e].fill&&a[e].add&&a[e].edit&&a[e].delete}})))})}),(0,P.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==E[e].name&&(0,P.jsx)(p.Z,{className:"table-checkbox",checked:E[e].list,onChange:()=>q((a=>({...a,[e]:{...a[e],list:!a[e].list,view:a[e].view&&!a[e].list||!1,edit:a[e].edit&&!a[e].list||!1,delete:a[e].delete&&!a[e].list||!1,add:a[e].add&&!a[e].list||!1,fill:a[e].fill&&!a[e].list||!1,all:!a[e].list&&a[e].add&&a[e].edit&&a[e].view&&a[e].delete}})))})}),(0,P.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==E[e].name&&(0,P.jsx)(p.Z,{className:"table-checkbox",checked:E[e].add,onChange:()=>q((a=>({...a,[e]:{...a[e],add:!a[e].add,list:a[e].list||!a[e].add,view:a[e].view||!a[e].add,all:!a[e].add&&a[e].edit&&a[e].delete}})))})}),(0,P.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==E[e].name&&(0,P.jsx)(p.Z,{className:"table-checkbox",checked:E[e].edit,onChange:()=>q((a=>({...a,[e]:{...a[e],edit:!a[e].edit,list:a[e].list||!a[e].edit,view:a[e].view||!a[e].edit,all:a[e].add&&!a[e].edit&&a[e].delete}})))})}),(0,P.jsx)(h.Z,{align:"center",padding:"checkbox",children:(0,P.jsx)(p.Z,{className:"table-checkbox",checked:E[e].view,onChange:()=>q((a=>({...a,[e]:{...a[e],view:!a[e].view,list:a[e].list||!a[e].view,edit:a[e].edit&&!a[e].view||!1,delete:a[e].delete&&!a[e].view||!1,fill:a[e].fill&&!a[e].view||!1,all:a[e].add&&a[e].edit&&!a[e].view&&a[e].delete}})))})}),(0,P.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==E[e].name&&(0,P.jsx)(p.Z,{className:"table-checkbox",checked:E[e].delete,onChange:()=>q((a=>({...a,[e]:{...a[e],delete:!a[e].delete,list:a[e].list||!a[e].delete,edit:a[e].edit||!a[e].delete,view:a[e].view||!a[e].delete,all:a[e].add&&!a[e].delete}})))})}),(0,P.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==E[e].name&&(0,P.jsx)(p.Z,{className:"table-checkbox",checked:E[e].all,onChange:()=>q((a=>({...a,[e]:{...a[e],all:!a[e].all,list:!a[e].all,view:!a[e].all,add:!a[e].all,edit:!a[e].all,delete:!a[e].all,fill:"Assessment"===E[e].name&&!a[e].all}})))})})]},e)))})]})})})}),(0,P.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,P.jsx)("button",{type:"reset",style:{marginTop:"20px"},className:"secondary-button mr-10",onClick:()=>(G({defaultValues:T}),e("/roles")),children:"Cancel"}),(0,P.jsx)("button",{type:"submit",className:"primary-button",style:{marginTop:"20px"},disabled:F,children:"Save"})]})]})})]})})]})}},14227:(e,a,l)=>{l.d(a,{Z:()=>i});var r=l(56890),s=l(35855),t=l(53994),n=(l(72791),l(80184));const i=()=>(0,n.jsx)(r.Z,{children:(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(t.Z,{align:"left",className:"table-header",width:"16%",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Modules"})}),(0,n.jsx)(t.Z,{className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Fill"})}),(0,n.jsx)(t.Z,{className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"List"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Add"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Edit"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"View"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Delete"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"All"})})]})})},85523:(e,a,l)=>{l.d(a,{Z:()=>w});var r=l(63366),s=l(87462),t=l(72791),n=l(63733),i=l(94419),o=l(52930),d=l(53767),c=l(20890),m=l(14036),u=l(66934),h=l(31402),p=l(75878),b=l(21217);function x(e){return(0,b.Z)("MuiFormControlLabel",e)}const g=(0,p.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);var v=l(76147),f=l(80184);const j=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Z=(0,u.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:l}=e;return[{["& .".concat(g.label)]:a.label},a.root,a["labelPlacement".concat((0,m.Z)(l.labelPlacement))]]}})((e=>{let{theme:a,ownerState:l}=e;return(0,s.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(g.disabled)]:{cursor:"default"}},"start"===l.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===l.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===l.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(g.label)]:{["&.".concat(g.disabled)]:{color:(a.vars||a).palette.text.disabled}}})})),N=(0,u.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,a)=>a.asterisk})((e=>{let{theme:a}=e;return{["&.".concat(g.error)]:{color:(a.vars||a).palette.error.main}}})),w=t.forwardRef((function(e,a){var l,u;const p=(0,h.Z)({props:e,name:"MuiFormControlLabel"}),{className:b,componentsProps:g={},control:w,disabled:k,disableTypography:y,label:M,labelPlacement:C="end",required:P,slotProps:S={}}=p,R=(0,r.Z)(p,j),L=(0,o.Z)(),T=null!=(l=null!=k?k:w.props.disabled)?l:null==L?void 0:L.disabled,A=null!=P?P:w.props.required,E={disabled:T,required:A};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof w.props[e]&&"undefined"!==typeof p[e]&&(E[e]=p[e])}));const q=(0,v.Z)({props:p,muiFormControl:L,states:["error"]}),F=(0,s.Z)({},p,{disabled:T,labelPlacement:C,required:A,error:q.error}),D=(e=>{const{classes:a,disabled:l,labelPlacement:r,error:s,required:t}=e,n={root:["root",l&&"disabled","labelPlacement".concat((0,m.Z)(r)),s&&"error",t&&"required"],label:["label",l&&"disabled"],asterisk:["asterisk",s&&"error"]};return(0,i.Z)(n,x,a)})(F),_=null!=(u=S.typography)?u:g.typography;let O=M;return null==O||O.type===c.Z||y||(O=(0,f.jsx)(c.Z,(0,s.Z)({component:"span"},_,{className:(0,n.Z)(D.label,null==_?void 0:_.className),children:O}))),(0,f.jsxs)(Z,(0,s.Z)({className:(0,n.Z)(D.root,b),ownerState:F,ref:a},R,{children:[t.cloneElement(w,E),A?(0,f.jsxs)(d.Z,{display:"block",children:[O,(0,f.jsxs)(N,{ownerState:F,"aria-hidden":!0,className:D.asterisk,children:["\u2009","*"]})]}):O]}))}))},79012:(e,a,l)=>{l.d(a,{Z:()=>v});var r=l(63366),s=l(87462),t=l(72791),n=l(63733),i=l(94419),o=l(66934),d=l(31402),c=l(75878),m=l(21217);function u(e){return(0,m.Z)("MuiFormGroup",e)}(0,c.Z)("MuiFormGroup",["root","row","error"]);var h=l(52930),p=l(76147),b=l(80184);const x=["className","row"],g=(0,o.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:l}=e;return[a.root,l.row&&a.row]}})((e=>{let{ownerState:a}=e;return(0,s.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},a.row&&{flexDirection:"row"})})),v=t.forwardRef((function(e,a){const l=(0,d.Z)({props:e,name:"MuiFormGroup"}),{className:t,row:o=!1}=l,c=(0,r.Z)(l,x),m=(0,h.Z)(),v=(0,p.Z)({props:l,muiFormControl:m,states:["error"]}),f=(0,s.Z)({},l,{row:o,error:v.error}),j=(e=>{const{classes:a,row:l,error:r}=e,s={root:["root",l&&"row",r&&"error"]};return(0,i.Z)(s,u,a)})(f);return(0,b.jsx)(g,(0,s.Z)({className:(0,n.Z)(j.root,t),ownerState:f,ref:a},c))}))},88970:(e,a,l)=>{l.d(a,{Z:()=>h});var r=l(87462),s=l(63366),t=l(72791),n=l(79012),i=l(42071),o=l(98278),d=l(18672),c=l(67384),m=l(80184);const u=["actions","children","defaultValue","name","onChange","value"],h=t.forwardRef((function(e,a){const{actions:l,children:h,defaultValue:p,name:b,onChange:x,value:g}=e,v=(0,s.Z)(e,u),f=t.useRef(null),[j,Z]=(0,o.Z)({controlled:g,default:p,name:"RadioGroup"});t.useImperativeHandle(l,(()=>({focus:()=>{let e=f.current.querySelector("input:not(:disabled):checked");e||(e=f.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const N=(0,i.Z)(a,f),w=(0,c.Z)(b),k=t.useMemo((()=>({name:w,onChange(e){Z(e.target.value),x&&x(e,e.target.value)},value:j})),[w,x,Z,j]);return(0,m.jsx)(d.Z.Provider,{value:k,children:(0,m.jsx)(n.Z,(0,r.Z)({role:"radiogroup",ref:N},v,{children:h}))})}))}}]);
//# sourceMappingURL=5248.7724a106.chunk.js.map