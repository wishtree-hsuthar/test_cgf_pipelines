(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5209],{96916:(e,s,i)=>{"use strict";i.r(s),i.d(s,{AlphaNumRegEx:()=>O,AlphaRegEx:()=>I,NumericRegEx:()=>B,default:()=>L});var l=i(40600),t=i(52898),n=i(77194),o=i(697),a=i(20068),d=i(97275),r=i(94294),c=i(25228),u=i(43896),v=i(72791),m=i(61134),p=i(59434),h=i(57689),g=i(14917),f=i(76218),b=i(94677),x=i(71300),y=i(27659),j=i(45736),w=i(28386),T=i(47806),k=i(12820),N=i(1260),S=i(43623),R=i(30550),M=i(81213),A=i(80184);R.ZP.register(M.Z),R.ZP.register({id:"customCanvasBackgroundColor",beforeDraw:(e,s,i)=>{const{ctx:l}=e;l.save(),l.globalCompositeOperation="destination-over",l.fillStyle=i.color||"#fff",l.fillRect(0,0,e.width,e.height),l.restore()}});const C=e=>{var s,i,l,t,n,o;let{graphLevelBreakdown:a,chartImages:d,setChartImages:r}=e;const[c,u]=(0,v.useState)(0),m=(0,v.useRef)(null),p={labels:[["Policy"," Commitment","& Governance"],["Assess","Human Rights Potential"," & Actual Impact"],["Integrate","& Act in Order to Prevent","& Mitigate"],["Track the","Effectiveness of Responses"],"Report","Remedy"],datasets:[{backgroundColor:"#f7a823",borderColor:"#f7a823",data:[null!==(s=a["Policy Commitment & Governance"])&&void 0!==s?s:0,null!==(i=a["Assess Human Rights Potential and Actual Impact"])&&void 0!==i?i:0,null!==(l=a["Integrate and Act in Order to Prevent and Mitigate"])&&void 0!==l?l:0,null!==(t=a["Track the Effectiveness of Responses"])&&void 0!==t?t:0,null!==(n=a.Report)&&void 0!==n?n:0,null!==(o=a.Remedy)&&void 0!==o?o:0],barThickness:50}]};return(0,v.useEffect)((()=>{if(c<3){u((e=>e+1));let e={...d};e.levelBreakdownGraph=m.current.toBase64Image(),r(e)}}),[c]),(0,A.jsx)("div",{style:{height:"400px"},className:"card-wrapper",children:(0,A.jsx)(S.$Q,{ref:m,data:p,options:{animation:!1,responsive:!0,maintainAspectRatio:!1,layout:{},plugins:{legend:{display:!1},title:{text:"HRDD Step Level Breakdown",display:!0,font:{weight:"bold",size:16}},datalabels:{color:"black",formatter:e=>e+"%"},tooltip:{enabled:!1}},scales:{y:{grid:{display:!1},min:0,max:100,ticks:{stepSize:10,callback:function(e,s,i){return e+"%"}}},x:{grid:{display:!1},alignToPixels:"center",align:"start"}}}})})};R.ZP.register(M.Z),R.ZP.register({id:"customCanvasBackgroundColor",beforeDraw:(e,s,i)=>{const{ctx:l}=e;l.save(),l.globalCompositeOperation="destination-over",l.fillStyle=i.color||"#fff",l.fillRect(0,0,e.width,e.height),l.restore()}});const E=e=>{var s,i,l,t,n;let{graphResult:o,questionnaireTitle:a,chartImages:d,setChartImages:r}=e;const c=(0,v.useRef)(null),u=()=>{switch(a){case"HEADQUARTERS HRDD REQUIREMENTS (ALL OPERATIONS)":return"HRDD HQ Level Result";case"GLOBAL OPERATION HRDD REQUIREMENTS (SELECTED OPERATION)":return"Global Operation HRDD Result";case"COUNTRY- OPERATION HRDD REQUIREMENTS":return"Country Operation HRDD Result";default:return"HRDD Result"}},m={labels:["Not Initiated","Launched","Established","Leadership","General Result"],datasets:[{label:u(),backgroundColor:"#3498db",borderColor:"#3498db",data:[null!==(s=o["Not Initiated"])&&void 0!==s?s:0,null!==(i=o.Launched)&&void 0!==i?i:0,null!==(l=o.Established)&&void 0!==l?l:0,null!==(t=o.Leadership)&&void 0!==t?t:0,null!==(n=o.General)&&void 0!==n?n:0],barThickness:25}]};return(0,v.useEffect)((()=>{if(void 0===d.resultsGraph){let e={...d};e.resultsGraph=c.current.toBase64Image(),r(e)}})),(0,A.jsx)("div",{style:{height:"400px"},className:"preview-card-wrapper",children:(0,A.jsx)(S.$Q,{ref:c,data:m,options:{animation:!1,indexAxis:"y",responsive:!0,maintainAspectRatio:!1,layout:{padding:10},plugins:{legend:{display:!1},title:{text:u(),display:!0,font:{weight:"bold",size:16}},datalabels:{color:"black",formatter:e=>"    "+e+"%"},tooltip:{enabled:!1}},scales:{y:{grid:{display:!1},alignToPixels:"center",align:"start"},x:{grid:{display:!1},min:0,max:100,ticks:{stepSize:10,callback:function(e,s,i){return e+"%"}}}}}})})},F=e=>{let{graphResult:s,graphLevelBreakdown:i,questionnaireTitle:l,chartImages:t,setChartImages:n}=e;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(E,{graphResult:s,questionnaireTitle:l,chartImages:t,setChartImages:n}),(0,A.jsx)(C,{graphLevelBreakdown:i,chartImages:t,setChartImages:n})]})},D=v.lazy((()=>i.e(4747).then(i.bind(i,4747)))),I=/^[a-zA-Z ]*$/,B=/^[0-9]+$/i,O=/^[a-z0-9 ]+$/i,_=i(89704);function Z(e){const{children:s,value:i,index:l,...t}=e;return(0,A.jsx)("div",{role:"tabpanel",hidden:i!==l,id:"simple-tabpanel-".concat(l),"aria-labelledby":"simple-tab-".concat(l),...t,children:i===l&&(0,A.jsx)(o.Z,{children:s})})}function P(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}const H={comment:{required:"Enter the reason for rejecting assessment.",minLength:"Minimum 3 character required."}};const L=function(){var e,s,i,S,R,M,C,E,L,Y,U,q,Q,G,z;(0,N.j)("Fill Assessment");const[V,K]=(0,v.useState)({}),[$,J]=(0,v.useState)(!1),[W,X]=(0,v.useState)(""),{handleSubmit:ee,control:se,setValue:ie}=(0,m.cI)({}),[le,te]=(0,v.useState)(0),ne=(0,h.UO)(),oe=(0,p.v9)((e=>{var s;return null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.userObj})),ae=(0,h.s0)(),[de,re]=(0,v.useState)({}),[ce,ue]=(0,v.useState)({}),[ve,me]=(0,v.useState)({}),[pe,he]=(0,v.useState)(null),[ge,fe]=(0,v.useState)(null),[be,xe]=(0,v.useState)(""),[ye,je]=(0,v.useState)(""),[we,Te]=(0,v.useState)(!1),[ke,Ne]=(0,v.useState)(!1),[Se,Re]=(0,v.useState)(!0),[Me,Ae]=(0,v.useState)(!1),[Ce,Ee]=(0,v.useState)({}),[Fe,De]=(0,v.useState)(!1),[Ie,Be]=(0,v.useState)(!1),Oe=(0,v.useRef)(null),[_e,Ze]=(0,k.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),Pe=(e,s)=>{g.Y.info("Fill Assessment - handleCatchError handler ".concat(s," ")),(0,j.K)(e,Ze,Ue,ae,"/assessment-list")},[He,Le]=(0,v.useState)(!1),Ye=async(e,s)=>{g.Y.info("Fill Assessment - fetchAssessments handler");try{var i,l,t,n,o,a,d,r,c,u,v,m,p;J(!0);const h=await b.H.get("".concat(f.IG).concat(ne.id),{signal:s.signal});J(!1),Te((null===oe||void 0===oe?void 0:oe._id)===(null===h||void 0===h||null===(i=h.data)||void 0===i||null===(l=i.assignedOperationMember)||void 0===l?void 0:l._id)),e&&re({...h.data}),e&&me({...h.data.answers}),e&&(null===h||void 0===h||null===(t=h.data)||void 0===t?void 0:t.graphResult)&&fe({...null===h||void 0===h||null===(n=h.data)||void 0===n?void 0:n.graphResult}),e&&(null===h||void 0===h||null===(o=h.data)||void 0===o?void 0:o.graphLevelBreakdown)&&he({...null===h||void 0===h||null===(a=h.data)||void 0===a?void 0:a.graphLevelBreakdown}),(async(e,s,i,l,t)=>{g.Y.info("Fill Assessment - fetchQuestionnaire handler ");try{var n,o;const a=await b.H.get("".concat(f.ZW,"/").concat(e),{signal:t.signal});l&&ue({...a.data}),s&&i&&te(null===a||void 0===a||null===(n=a.data)||void 0===n||null===(o=n.sections)||void 0===o?void 0:o.length)}catch(r){var a,d;if("ERR_CANCELED"===(null===r||void 0===r?void 0:r.code))return;g.Y.info("Fill Assessment - fetchQuestionnaire handler catch error - ".concat(null===r||void 0===r||null===(a=r.response)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.message)),(0,j.K)(r,Ze,Ue,ae)}})(null===h||void 0===h||null===(d=h.data)||void 0===d?void 0:d.questionnaireId,null===h||void 0===h||null===(r=h.data)||void 0===r?void 0:r.graphResult,null===h||void 0===h||null===(c=h.data)||void 0===c?void 0:c.graphLevelBreakdown,e,s),De((null===h||void 0===h||null===(u=h.data)||void 0===u?void 0:u.isSubmitted)&&!ne["*"].includes("view")),Le(oe._id===(null===h||void 0===h||null===(v=h.data)||void 0===v||null===(m=v.assignedOperationMember)||void 0===m?void 0:m._id)&&!ne["*"].includes("view")&&"Pending"==(null===h||void 0===h||null===(p=h.data)||void 0===p?void 0:p.assessmentStatus))}catch(N){var h,x,y,w,T,k;if(g.Y.info("Fill Assessment - fetchAssessments handler catch error ".concat(null===N||void 0===N||null===(h=N.response)||void 0===h||null===(x=h.data)||void 0===x?void 0:x.message)),"ERR_CANCELED"===(null===N||void 0===N?void 0:N.code))return;401===(null===N||void 0===N||null===(y=N.response)||void 0===y?void 0:y.status)&&(e&&Ze({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(()=>Ue.current())),setTimeout((()=>{ae("/login")}),3e3)),400===(null===N||void 0===N||null===(w=N.response)||void 0===w?void 0:w.status)&&"Invalid assessment!"===(null===N||void 0===N||null===(T=N.response)||void 0===T||null===(k=T.data)||void 0===k?void 0:k.message)&&(e&&Ze({titleMessage:"Oops!",descriptionMessage:"Oops!! There is some error while saving assessment details. Either someone has removed this assessment or looks like invalid assessment getting submitted. For more details please contact system / CGF admin",messageType:"error"},(()=>Ue.current())),setTimeout((()=>{ae("/assessment-list")}),3e3)),J(!1)}};(0,v.useEffect)((()=>{let e=!0,s=new AbortController;return Ye(e,s),()=>{e=!1,s.abort()}}),[Me]);const Ue=(0,v.useRef)(),qe=async(e,s,i)=>{try{const t=await b.H.post(e?f.FU+ne.id:f.FU+ne.id+"/submit",{...i});var l;if(201==t.status)e&&ge&&Ae(!Me),K({}),!s&&Ze({titleMessage:"Success",descriptionMessage:null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message,messageType:"success"},(()=>Ue.current())),!s&&setTimeout((()=>{!e&&ae("/assessment-list"),Ne(!1)}),5e3)}catch(a){var t,n,o;Ne(!1),400===(null===a||void 0===a||null===(t=a.response)||void 0===t?void 0:t.status)&&"Invalid assessment!"===(null===a||void 0===a||null===(n=a.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)&&(Ze({titleMessage:"Oops!",descriptionMessage:"Oops!! There is some error while saving assessment details. Either someone has removed this assessment or looks like invalid assessment getting submitted. For more details please contact system / CGF admin",messageType:"error"},(()=>Ue.current())),setTimeout((()=>{ae("/assessment-list")}),3e3))}},Qe=(e,s)=>{var i;g.Y.info("Fill assessment - handleFormSubmit handler"),e.preventDefault();const l={};let t=[],n={...ve};null===ce||void 0===ce||null===(i=ce.sections)||void 0===i||i.map(((e,i)=>{var o,a;let d=null!==(o=Ce[null===e||void 0===e?void 0:e.uuid])&&void 0!==o?o:{},r=null!==(a=ve[null===e||void 0===e?void 0:e.uuid])&&void 0!==a?a:{};if("table"===(null===e||void 0===e?void 0:e.layout)){(e=>{let s={};e.forEach((e=>{s[e.uuid]=e}))})(null===e||void 0===e?void 0:e.columnValues);g.Y.info("Fill assessment - handleFormSubmit - transformed column values"),Object.keys(r).forEach((l=>{var o;let a=null===l||void 0===l?void 0:l.split("_")[1];null===e||void 0===e||null===(o=e.columnValues)||void 0===o||o.forEach((l=>{var o,c,u,v;"prefilled"===l.columnType||!1!==s||null===l||void 0===l||!l.isRequired||r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]&&0!==r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)].length?"dropdown"!==l.columnType||!r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]||null!==(o=l.options)&&void 0!==o&&o.includes(r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)])?"date"===l.columnType&&r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]&&isNaN(new Date(r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]).getTime())?(g.Y.info("Fill Assessment - handleFormSubmit - Fetched value not present in column date type"),d["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]='Entered value "'.concat(r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)],'" is not valid date format.\n\n\n                            '),t.push(i),n={...n,[null===e||void 0===e?void 0:e.uuid]:{...n[null===e||void 0===e?void 0:e.uuid],["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]:""}}):"prefilled"!==l.columnType&&"alphabets"==(null===l||void 0===l?void 0:l.validation)&&(null===(c=r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)])||void 0===c?void 0:c.length)>0&&!I.test(r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)])?(d["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]="This is an alphabetic field.",t.push(i)):"prefilled"!==(null===l||void 0===l?void 0:l.columnType)&&"numeric"==(null===l||void 0===l?void 0:l.validation)&&(null===(u=r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)])||void 0===u?void 0:u.length)>0&&!B.test(r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)])?(d["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]="This is a numeric field.",g.Y.info("Fill Assessment - handleFormSubmit - in table numeric only"),t.push(i)):"prefilled"!==l.columnType&&"alphanumeric"==(null===l||void 0===l?void 0:l.validation)&&(null===(v=r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)])||void 0===v?void 0:v.length)>0&&!O.test(r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)])?(d["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]=" This is an alphanumeric field.",g.Y.info("Fill Assessment - handleFormSubmit - in table alphanumeric only"),t.push(i)):delete d["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]:(g.Y.info("Fill Assessment - handleFormSubmit - Fetched value not present in column dropdown options"),d["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]='Entered value "'.concat(r["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)],'" is not part of above list. Please select valid option among listed values from list.\n\n\n                            '),t.push(i),n={...n,[null===e||void 0===e?void 0:e.uuid]:{...n[null===e||void 0===e?void 0:e.uuid],["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]:""}},s||(d["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]="This is required field",t.push(i))):(d["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(a)]="This is required field",t.push(i))}))})),g.Y.info("Fill Assessment - handleFormSubmit - Section errors in table layout ")}else null===e||void 0===e||e.questions.forEach((l=>{if(!l.isRequired||r[null===l||void 0===l?void 0:l.uuid]&&0!==r[null===l||void 0===l?void 0:l.uuid].length||!1!==s)if("radioGroup"!=l.inputType&&"dropdown"!=l.inputType||!r[null===l||void 0===l?void 0:l.uuid]||l.options.includes(r[null===l||void 0===l?void 0:l.uuid]))if("checkbox"==l.inputType&&r[null===l||void 0===l?void 0:l.uuid]){var o;let s=r[null===l||void 0===l?void 0:l.uuid];"string"===typeof s&&(s=r[null===l||void 0===l?void 0:l.uuid].split(",")),g.Y.info("Fill Assessment - handleFormSubmit - error from checkbox question");let a=l.options,c=s&&(null===(o=s)||void 0===o?void 0:o.filter((e=>null===a||void 0===a?void 0:a.includes(e))));0===c.length?(d[null===l||void 0===l?void 0:l.uuid]='\n                        \n                        Entered value\n                        "'.concat(r[null===l||void 0===l?void 0:l.uuid],'" is not part of above list. Please select valid option among listed values from list.\n                        '),t.push(i)):delete d[null===l||void 0===l?void 0:l.uuid],n={...n,[null===e||void 0===e?void 0:e.uuid]:{...n[null===e||void 0===e?void 0:e.uuid],[null===l||void 0===l?void 0:l.uuid]:c}}}else"alphabets"===l.validation&&r[null===l||void 0===l?void 0:l.uuid]&&!1===I.test(r[null===l||void 0===l?void 0:l.uuid])?(g.Y.info("Fill Assessment - handleFormSubmit - error from numric if elese"),d[null===l||void 0===l?void 0:l.uuid]="This is an alphabetic field",t.push(i)):"numeric"===l.validation&&r[null===l||void 0===l?void 0:l.uuid]&&!1===B.test(r[null===l||void 0===l?void 0:l.uuid])?(d[null===l||void 0===l?void 0:l.uuid]="This is a numeric field",t.push(i)):"alphanumeric"===l.validation&&r[null===l||void 0===l?void 0:l.uuid]&&!1===O.test(r[null===l||void 0===l?void 0:l.uuid])?(d[null===l||void 0===l?void 0:l.uuid]=" This is an alphanumeric field",t.push(i)):"date"===l.inputType&&r[null===l||void 0===l?void 0:l.uuid]&&isNaN(new Date(r[null===l||void 0===l?void 0:l.uuid]).getTime())?(g.Y.info("Fill Assessment - handleFormSubmit - error from date question"),d[null===l||void 0===l?void 0:l.uuid]='\n                        \n                        Entered value\n                        "'.concat(r[null===l||void 0===l?void 0:l.uuid],'" is not valid date.\n                        '),n={...n,[null===e||void 0===e?void 0:e.uuid]:{...n[null===e||void 0===e?void 0:e.uuid],[null===l||void 0===l?void 0:l.uuid]:""}},t.push(i)):delete d[null===l||void 0===l?void 0:l.uuid];else g.Y.info("Fill Assessment - handleFormSubmit - error from radio group question"),d[null===l||void 0===l?void 0:l.uuid]='\n                        \n                        Entered value\n                        "'.concat(r[null===l||void 0===l?void 0:l.uuid],'" is not part of above list. Please select valid option among listed values from list.\n                        '),n={...n,[null===e||void 0===e?void 0:e.uuid]:{...n[null===e||void 0===e?void 0:e.uuid],[null===l||void 0===l?void 0:l.uuid]:""}},t.push(i);else g.Y.info("Fill Assessment - handleFormSubmit - error from required"),d[null===l||void 0===l?void 0:l.uuid]="This is required field",t.push(i)}));te(t.length>0?t[0]:0),l[null===e||void 0===e?void 0:e.uuid]={...d}})),me({...n}),(e=>{Ee({...e})})(l);Object.keys(l).every((e=>0===Object.keys(l[e]).length))&&(Ne(!0),qe(s,void 0,n))},[Ge,ze]=(0,v.useState)(!1),Ve=()=>{ae("/assessment-list")},[Ke,$e]=(0,v.useState)(""),[Je,We]=(0,v.useState)(!1),Xe=()=>{X(""),$e(""),J(!1),Re(!0),We(!1)},es=()=>{var e,s;(g.Y.info("Fill Assessment - addTableAssessmentValues handler"),ce&&(null===(e=Object.keys(ce))||void 0===e?void 0:e.length)>0)&&(null===ce||void 0===ce||null===(s=ce.sections)||void 0===s||s.forEach((e=>{if("table"===(null===e||void 0===e?void 0:e.layout)&&(!ve[null===e||void 0===e?void 0:e.uuid]||0===Object.keys(ve[null===e||void 0===e?void 0:e.uuid]).length)){let s={...ve};s[null===e||void 0===e?void 0:e.uuid]={},null===e||void 0===e||e.rowValues.forEach((i=>{var l;null===e||void 0===e||null===(l=e.columnValues)||void 0===l||l.forEach((l=>{s[null===e||void 0===e?void 0:e.uuid]["".concat(null===l||void 0===l?void 0:l.uuid,"_").concat(null===i||void 0===i?void 0:i.uuid)]=""}))})),me(s)}})))};return es(),(0,A.jsxs)("div",{className:"page-wrapper",onClick:()=>Ge&&ze(!1),children:[(0,A.jsx)(x.Z,{title:(0,A.jsx)("p",{children:"Accept/Reject Assessment "}),info1:(0,A.jsxs)("p",{className:"accrej-txtwrap",children:[(0,A.jsxs)("span",{className:"accrej-txtblk",children:[(0,A.jsxs)("span",{className:"accrej-label",children:["Assessment title ",(0,A.jsx)("span",{children:":"})]}),(null===de||void 0===de||null===(e=de.title)||void 0===e?void 0:e.length)<=36?(0,A.jsx)("span",{className:"accrej-desc",children:null===de||void 0===de?void 0:de.title}):(0,A.jsx)(a.Z,{title:null===de||void 0===de?void 0:de.title,children:(0,A.jsxs)("span",{className:"accrej-desc",children:[" ",null===de||void 0===de||null===(s=de.title)||void 0===s?void 0:s.slice(0,39),"..."]})})]}),(0,A.jsxs)("span",{className:"accrej-txtblk",children:[(0,A.jsxs)("span",{className:"accrej-label",children:["Assessment type ",(0,A.jsx)("span",{children:":"})]}),(null===de||void 0===de||null===(i=de.assessmentType)||void 0===i?void 0:i.length)<=36?(0,A.jsx)("span",{className:"accrej-desc",children:null===de||void 0===de?void 0:de.assessmentType}):(0,A.jsx)(a.Z,{title:null===de||void 0===de?void 0:de.assessmentType,children:(0,A.jsxs)("span",{className:"accrej-desc",children:[" ",null===de||void 0===de||null===(S=de.assessmentType)||void 0===S?void 0:S.slice(0,39),"..."]})})]}),(0,A.jsxs)("span",{className:"accrej-txtblk",children:[(0,A.jsxs)("span",{className:"accrej-label",children:["Member company ",(0,A.jsx)("span",{children:":"})]}),(null===de||void 0===de||null===(R=de.assignedMember)||void 0===R||null===(M=R.companyName)||void 0===M?void 0:M.length)<=36?(0,A.jsx)("span",{className:"accrej-desc",children:null===de||void 0===de||null===(C=de.assignedMember)||void 0===C?void 0:C.companyName}):(0,A.jsx)(a.Z,{title:null===de||void 0===de||null===(E=de.assignedMember)||void 0===E?void 0:E.companyName,children:(0,A.jsxs)("span",{className:"accrej-desc",children:[" ",null===de||void 0===de||null===(L=de.assignedMember)||void 0===L||null===(Y=L.companyName)||void 0===Y?void 0:Y.slice(0,39),"..."]})})]}),(0,A.jsxs)("span",{className:"accrej-txtblk",children:[(0,A.jsxs)("span",{className:"accrej-label",children:["Due date ",(0,A.jsx)("span",{children:":"})]}),(0,A.jsx)("span",{className:"accrej-desc",children:new Date(new Date(null===de||void 0===de?void 0:de.dueDate).setDate(new Date(null===de||void 0===de?void 0:de.dueDate).getDate()-1)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})]}),"Click \u201cAccept\u201d if you want to fill out the assessment, or else provide a reason and reject the assessment, if you don\u2019t want to continue with it."]}),info2:(0,A.jsx)(m.Qr,{name:"comment",control:se,rules:{required:!0,minLength:3},render:e=>{let{field:s,fieldState:{error:i}}=e;return(0,A.jsx)(d.Z,{multiline:!0,...s,onBlur:e=>{var s;return ie("comment",null===(s=e.target.value)||void 0===s?void 0:s.trim())},inputProps:{maxLength:250},className:"input-textarea ".concat(i&&"input-textarea-error"),style:{marginBottom:"10px"},id:"outlined-basic",placeholder:"Enter reason",helperText:i?H.comment[i.type]:" ",variant:"outlined"})}}),primaryButtonText:"Accept",secondaryButtonText:"Reject",onPrimaryModalButtonClickHandler:()=>{(async()=>{try{const s=await b.H.post(f.XI+ne.id+"/accept");var e;201==s.status&&(Ze({titleMessage:"Success",descriptionMessage:null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.message,messageType:"success"},(()=>Ue.current())),Le(!1))}catch(s){Pe(s,"onAcceptAssessments"),Le(!1)}})()},onSecondaryModalButtonClickHandler:ee((async e=>{g.Y.info("Fill Assessment - onSubmitReason handler");try{const i=await b.H.post(f.zJ+ne.id+"/decline",{comment:e.comment});var s;if(201==i.status)Ze({titleMessage:"Success",descriptionMessage:null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message,messageType:"success"},(()=>Ue.current())),setTimeout((()=>{ae("/assessment-list")}),3e3)}catch(t){var i,l;g.Y.info("Fill Assessment - onSubmitReason handler - catch error - ".concat(null===t||void 0===t||null===(i=t.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)),Pe(t,"onSubmitReason")}Le(!1)})),openModal:He,setOpenModal:Le,isModalForm:!0,handleCloseRedirect:Ve}),(0,A.jsx)(x.Z,{title:(0,A.jsx)("p",{children:"Re-open Assessment ?"}),info1:" ",info2:(0,A.jsx)("p",{className:"mb-30",children:"Are you sure you want to edit the given submitted assessment?"}),primaryButtonText:"Yes",secondaryButtonText:"No",onPrimaryModalButtonClickHandler:()=>(qe(!0,!0,ve),void De(!1)),onSecondaryModalButtonClickHandler:()=>(De(!1),void ae("/assessment-list")),openModal:Fe,setOpenModal:De,isModalForm:!0,handleCloseRedirect:Ve}),(0,A.jsx)(x.Z,{title:(0,A.jsx)("p",{children:"Data Upload"}),info1:" ",info2:(0,A.jsxs)("div",{className:"upload-file-wrap",children:[(0,A.jsx)(r.Z,{variant:"contained",component:"label",className:"upload-file-btn",children:(0,A.jsxs)("div",{className:W?"upload-file-blk selected-file-blk":"upload-file-blk",children:[(0,A.jsx)("input",{type:"file",hidden:!0,accept:".xls, .xlsx",ref:Oe,onChange:e=>{Re(!1),$e(e.target.files[0].name),X(e.target.files[0]),Oe.current&&(Oe.current.value="")}}),(0,A.jsx)("span",{className:"upload-icon",children:(0,A.jsx)(l.Z,{})}),(0,A.jsx)("span",{className:"file-upload-txt",children:"Click here to choose file (.xlsx)"})]})}),(0,A.jsx)("p",{className:"select-filename",children:Ke})]}),primaryButtonText:"Upload",secondaryButtonText:"Cancel",onPrimaryModalButtonClickHandler:()=>(()=>{J(!0);try{if(!W)return J(!1),J(!1),Ze({titleMessage:"error",descriptionMessage:"Please select excel file",messageType:"error"},(()=>Ue.current()));{let e=new FileReader;if(e.readAsDataURL(W),"application/vnd.ms-excel"!==W.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==W.type)return X(""),$e(""),Se(!0),J(!1),Ze({titleMessage:"error",descriptionMessage:"Invalid file type Please uplaod excel file",messageType:"error"},(()=>Ue.current()));e.onloadend=async()=>{let s=e.result,i=_.AES.encrypt(s,f.kc).toString();try{Re(!0);const e=await b.H.post(f.fh+"".concat(ne.id,"/upload"),{encryptedFile:i});if(201==e.status&&(J(!1),X(""),$e(""),Re(!0),We(!1),Ze({titleMessage:"Success",descriptionMessage:"Successfully imported excel file!",messageType:"success"},(()=>Ue.current())),me(e.data.answers),es(),e.data.containsErrors))try{const s=await b.H.get(f.fh+"".concat(e.data.correctionId,"/corrections"),{responseType:"blob"}),i=window.URL.createObjectURL(new Blob([s.data])),l=document.createElement("a");l.href=i;let t=(0,T.d)();l.setAttribute("download","Corrections - ".concat(t,".xlsx")),document.body.appendChild(l),l.click(),Be(!0),Ze({titleMessage:"error",descriptionMessage:(0,A.jsxs)("p",{children:["Excel file has missing/invalid fields.Please check"," ",(0,A.jsx)("b",{children:"Corrections sheet"}),' attached with it".']}),messageType:"error"},(()=>Ue.current()))}catch(d){J(!1),g.Y.info("Fill Assessment - reUploadAssessment - correctionDocResponse catch error - Error from corections doc download")}}catch(d){var l,t,n,o,a;g.Y.info("Fill Assessment - reUploadAssessment -  ".concat(null===d||void 0===d||null===(l=d.response)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message)),Re(!0),J(!1),$e(""),400===(null===d||void 0===d||null===(n=d.response)||void 0===n?void 0:n.status)&&"Invalid assessment!"===(null===d||void 0===d||null===(o=d.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.message)?Ze({titleMessage:"Oops!",descriptionMessage:"Oops!! There is some error while saving assessment details. Either someone has removed this assessment or looks like invalid assessment getting submitted. For more details please contact system / CGF admin",messageType:"error"},(()=>Ue.current())):(0,j.K)(d,Ze,Ue,ae)}finally{J(!1)}}}}catch(i){var e,s;X(""),$e(""),Re(!0),J(!1),g.Y.info("Fill assessment -reUploadAssessment - ".concat(null===i||void 0===i||null===(e=i.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message))}})(),isDisabledPrimaryButton:Se,onSecondaryModalButtonClickHandler:()=>Xe(),openModal:Je,setOpenModal:We,isModalForm:!0,handleCloseRedirect:Xe}),(0,A.jsx)(x.Z,{title:(0,A.jsx)("p",{children:"Alert"}),info1:" ",info2:(0,A.jsx)("p",{className:"mb-30",children:"Please open the correction sheet, make necessary changes in the imported excel sheet and import again."}),openModal:Ie,setOpenModal:Be,isModalForm:!0,primaryButtonText:"OK",onPrimaryModalButtonClickHandler:()=>Be(!1),handleCloseRedirect:()=>Be(!1)}),(0,A.jsx)(y.Z,{myRef:Ue,titleMessage:_e.titleMessage,descriptionMessage:_e.descriptionMessage,messageType:_e.messageType}),(0,A.jsx)("div",{className:"breadcrumb-wrapper",children:(0,A.jsx)("div",{className:"container",children:(0,A.jsxs)("ul",{className:"breadcrumb",children:[(0,A.jsx)("li",{children:(0,A.jsx)("a",{onClick:()=>ae("/assessment-list"),style:{cursor:"pointer"},children:"Assessments"})}),ne["*"].includes("view")?(0,A.jsx)("li",{children:"View Assessment"}):(0,A.jsx)("li",{children:"Fill Assessment"})]})})}),(0,A.jsx)("section",{children:(0,A.jsxs)("div",{className:"container",children:[(0,A.jsxs)("div",{className:"form-header flex-between preview-assessment-ttl",children:[(0,A.jsx)("h2",{className:"heading2",children:null===ce||void 0===ce?void 0:ce.title}),(0,A.jsxs)("div",{className:"flex-between",children:[(0,A.jsxs)("div",{className:"tertiary-btn-blk mr-20",onClick:()=>{ae("/assessment-list/instructions")},children:[(0,A.jsx)("span",{className:"preview-icon",children:(0,A.jsx)(n.Z,{})}),(0,A.jsx)("span",{className:"addmore-txt",children:"View Instructions"})]}),(0,A.jsxs)("span",{className:"form-header-right-txt",onClick:()=>{ze(!Ge)},children:[(0,A.jsx)("span",{className:"crud-operation",children:(0,A.jsx)(t.Z,{})}),(0,A.jsx)("div",{className:"crud-toggle-wrap assessment-crud-toggle-wrap",style:{display:Ge?"block":"none"},children:(0,A.jsxs)("ul",{className:"crud-toggle-list",children:[(0,A.jsx)("li",{onClick:()=>(async()=>{try{if(pe&&ge){const e=await b.H.post(f.j5+ne.id+"/download",{...V},{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a");i.href=s;let l=(0,T.d)();i.setAttribute("download","Assessment - ".concat(l,".xlsx")),document.body.appendChild(i),i.click(),201==e.status&&Ze({titleMessage:"Success!",descriptionMessage:"Downloaded Successfully!",messageType:"success"},(()=>Ue.current()))}else await(0,T.j)("Assessment",Ze,ne.id,Ue,f.j5,ae)}catch(l){var e,s,i;400===(null===l||void 0===l||null===(e=l.response)||void 0===e?void 0:e.status)&&"Invalid assessment!"===(null===l||void 0===l||null===(s=l.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message)?(Ze({titleMessage:"Oops!",descriptionMessage:"Oops!! There is some error while saving assessment details. Either someone has removed this assessment or looks like invalid assessment getting submitted. For more details please contact system / CGF admin",messageType:"error"},(()=>Ue.current())),setTimeout((()=>{ae("/assessment-list")}),3e3)):(0,j.K)(l,Ze,Ue,ae)}})(),children:"Export to Excel"}),ne["*"].includes("view")||(0,A.jsx)("li",{onClick:()=>We(!0),children:"Import File"})]})})]})]}),(0,A.jsx)("div",{className:"excel-short-name",children:(0,A.jsx)("p",{children:null!==(U=null===ce||void 0===ce?void 0:ce.sheetName)&&void 0!==U?U:""})})]}),(0,A.jsxs)("div",{className:"section-form-sect",children:[(0,A.jsx)("div",{className:"section-tab-blk flex-between preview-tab-blk",children:(0,A.jsx)("div",{className:"section-tab-leftblk",children:(0,A.jsx)(o.Z,{sx:{borderBottom:1,borderColor:"divider"},className:"tabs-sect que-tab-sect",children:(0,A.jsxs)(c.Z,{value:le,onChange:(e,s)=>{te(s)},"aria-label":"basic tabs example",variant:"scrollable",scrollButtons:"auto",children:[null===ce||void 0===ce||null===(q=ce.sections)||void 0===q?void 0:q.map(((e,s,i)=>(0,A.jsx)(a.Z,{title:e.sectionTitle,placement:"bottom-start",children:(0,A.jsx)(u.Z,{className:"section-tab-item",label:"section ".concat(s+1),...P(s)})},null===e||void 0===e?void 0:e.uuid))),ge&&pe&&(0,A.jsx)(u.Z,{className:"section-tab-item",label:"Results",...P(null===ce||void 0===ce||null===(Q=ce.sections)||void 0===Q?void 0:Q.length)})]})})})}),$?(0,A.jsx)(w.Z,{}):(0,A.jsxs)("div",{className:"preview-tab-data",children:[null===ce||void 0===ce||null===(G=ce.sections)||void 0===G?void 0:G.map(((e,s)=>{var i,l;return(0,A.jsx)(Z,{value:le,index:s,children:(0,A.jsx)(D,{assessmentQuestionnaire:ve,disableFillAssessment:ke,setAssessmentQuestionnaire:me,section:e,questionnaireTitle:null===ce||void 0===ce?void 0:ce.title,errorQuestion:be,setErrorQuestion:xe,errorQuestionUUID:ye,setErrorQuestionUUID:je,errors:null!==(i=Ce[null===e||void 0===e?void 0:e.uuid])&&void 0!==i?i:{},handleFormSubmit:Qe,editMode:we,setEditMode:Te,index:s,totalSections:null===ce||void 0===ce||null===(l=ce.sections)||void 0===l?void 0:l.length,setToasterDetails:Ze,myRef:Ue,questionnaireId:null===de||void 0===de?void 0:de.questionnaireId})},null===e||void 0===e?void 0:e.uuid)})),pe&&ge&&(0,A.jsx)(Z,{value:le,index:null===ce||void 0===ce||null===(z=ce.sections)||void 0===z?void 0:z.length,children:(0,A.jsx)(F,{chartImages:V,setChartImages:K,questionnaireTitle:null===ce||void 0===ce?void 0:ce.title,graphResult:ge,graphLevelBreakdown:pe})})]})]})]})})]})}},71300:(e,s,i)=>{"use strict";i.d(s,{Z:()=>c});var l=i(29823),t=i(88447),n=i(52739),o=i(60627),a=i(697),d=i(20068),r=(i(72791),i(80184));const c=e=>{var s,i,c,u,v,m;let{title:p,info1:h,info2:g,primaryButtonText:f,secondaryButtonText:b,onPrimaryModalButtonClickHandler:x,isDisabledPrimaryButton:y=!1,onSecondaryModalButtonClickHandler:j,openModal:w,setOpenModal:T,isModalForm:k,handleCloseRedirect:N,hideCloseIcon:S=!1}=e;const R=(e,s)=>{s&&"backdropClick"===s||T(!1)},M=()=>{j()};let A="";return"object"===typeof(null===p||void 0===p||null===(s=p.props)||void 0===s?void 0:s.children)?null===p||void 0===p||null===(i=p.props)||void 0===i||null===(c=i.children)||void 0===c||c.map((e=>A+=e)):A=null===p||void 0===p||null===(u=p.props)||void 0===u?void 0:u.children,(0,r.jsx)(t.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:w,onClose:R,closeAfterTransition:!0,disableEscapeKeyDown:!!k,BackdropComponent:n.Z,BackdropProps:{timeout:500},className:"popup-blk",children:(0,r.jsx)(o.Z,{in:w,children:(0,r.jsx)(a.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},className:"popup-box",children:(0,r.jsxs)("div",{className:"popup-innerblk",children:[(0,r.jsxs)("div",{id:"transition-modal-title",className:"popup-ttl-blk",children:[(null===(v=A)||void 0===v?void 0:v.length)<=47?(0,r.jsx)("h2",{className:"popup-ttl heading2",children:p}):(0,r.jsx)(d.Z,{title:A,children:(0,r.jsxs)("h2",{className:"popup-ttl heading2",children:[" ",null===(m=A)||void 0===m?void 0:m.slice(0,50),'..."']})}),(0,r.jsx)("span",{hidden:S,className:"popup-close-icon",onClick:k?N:R,children:(0,r.jsx)(l.Z,{})})]}),(0,r.jsx)("div",{id:"transition-modal-description",className:"popup-body",children:(0,r.jsxs)("div",{className:"popup-content-blk text-center",children:[h,k?(0,r.jsx)("form",{onSubmit:M,children:g}):g,(0,r.jsxs)("div",{className:"form-btn flex-center",children:[b&&(0,r.jsx)("button",{type:"submit",onClick:M,className:"secondary-button mr-10",children:b}),(0,r.jsx)("button",{type:"submit",onClick:()=>{x()},disabled:y,className:"primary-button",children:f})]})]})})]})})})})}},47806:(e,s,i)=>{"use strict";i.d(s,{d:()=>o,j:()=>a});var l=i(94677),t=i(14917),n=i(45736);const o=()=>{let e=(new Date).getMonth()<10?"0"+((new Date).getMonth()+1).toString():(new Date).getMonth().toString(),s=(new Date).getDate()<10?"0"+(new Date).getDate().toString():(new Date).getDate().toString(),i=(new Date).getHours();return e+s+(new Date).getFullYear().toString()+"_"+i+(new Date).getMinutes()+(new Date).getSeconds()},a=async(e,s,i,a,d,r)=>{try{const n=await l.H.get(i?d+i+"/download":d,{responseType:"blob"});t.Y.info(" download function -  from ".concat(e,"  assessment "));const r=window.URL.createObjectURL(new Blob([n.data])),c=document.createElement("a");c.href=r;let u=o();c.setAttribute("download","".concat(e," - ").concat(u,".xlsx")),document.body.appendChild(c),c.click(),200==n.status&&s({titleMessage:"Success!",descriptionMessage:"Downloaded Successfully!",messageType:"success"},(()=>a.current()))}catch(v){var c,u;return t.Y.info("downlaod function - error ".concat(null===v||void 0===v||null===(c=v.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message)),(0,n.K)(v,s,a,r),v}}},1260:(e,s,i)=>{"use strict";i.d(s,{j:()=>t});var l=i(72791);const t=e=>((0,l.useEffect)((()=>{document.title="HRDD System - ".concat(e)}),[e]),null)},42480:()=>{}}]);
//# sourceMappingURL=5209.e73dc683.chunk.js.map