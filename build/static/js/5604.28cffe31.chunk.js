"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5604],{7005:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var r=a(885),n=a(2791),i=a(7689),o=a(8821),d=a(2820),l=a(7659),s=a(4165),c=a(5861),u=a(2982),m=a(9106),p=a(4677),v=a(1300),b=a(6218),g=a(1189),f=a(8386),h=a(4917),y=a(5736),x=a(184),C=JSON.parse(JSON.stringify(g.si));var M=function(e){var t=e.makeApiCall,a=e.pageForPendingOperationMemberTab,o=e.setPageForPendingOperationMemberTab,d=e.setMakeApiCall,l=e.search,g=e.filters,M=e.myRef,S=e.setToasterDetails,w=(0,i.s0)(),j=(0,n.useState)(!0),k=(0,r.Z)(j,2),Z=k[0],N=k[1],T=(0,n.useState)(!1),O=(0,r.Z)(T,2),A=O[0],E=O[1],P=(0,n.useState)(""),B=(0,r.Z)(P,2),Y=B[0],D=B[1],R=n.useState(10),I=(0,r.Z)(R,2),F=I[0],q=I[1],_=n.useState("desc"),H=(0,r.Z)(_,2),L=H[0],J=H[1],K=n.useState(""),G=(0,r.Z)(K,2),U=G[0],z=G[1],V=n.useState([]),X=(0,r.Z)(V,2),W=X[0],Q=X[1],$=n.useState(0),ee=(0,r.Z)($,2),te=ee[0],ae=ee[1],re=["_id","name","email","memberCompany","companyType","createdByName","createdAt"],ne=function(e){h.Y.debug("data before update----",e);var t=e;t.forEach((function(e){var t,a,r,n,i,o;delete e.updatedAt,delete e.data.description,delete e.data.countryCode,delete e.data.isDeleted,delete e.__v,delete e.data.password,delete e.data.roleId,delete e.data.role,delete e.data.salt,delete e.data.uuid,delete e.data.phoneNumber,delete e.token,delete e.tokenExpiry,delete e.tokenType,e.name=null===(t=e.data)||void 0===t?void 0:t.name,e.email=null===(a=e.data)||void 0===a?void 0:a.email,e.memberCompany=null===e||void 0===e||null===(r=e.memberData)||void 0===r?void 0:r.companyName,e.companyType=null!==(n=null===e||void 0===e||null===(i=e.memberData)||void 0===i?void 0:i.companyType)&&void 0!==n?n:"N/A",e.createdAt=new Date(null===e||void 0===e?void 0:e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),e.createdByName=null===(o=e.createdBy)||void 0===o?void 0:o.name,delete e.createdBy,delete e.subRole,delete e.data,delete e.memberData,re.forEach((function(t){var a=e[t];delete e[t],e[t]=a}))})),h.Y.debug("data in updaterecords method in pending method",t),Q((0,u.Z)(t))},ie=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.H.delete(b.lf+Y);case 3:200==(t=e.sent).status&&(h.Y.debug("operation member  invite withdrawn successfully"),S({titleMessage:"Success",descriptionMessage:null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,messageType:"success"},(function(){return M.current()})),de(),E(!1)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),h.Y.debug("error from withdrawInvite id operation member",e.t0),(0,y.K)(e.t0,S,M,w);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){h.Y.debug("filters",g),h.Y.debug("Search",l);var e="".concat(b.uX,"/pending/list?page=").concat(a,"&size=").concat(F,"&orderBy=").concat(U,"&order=").concat(L);return l.length>0&&(e+="&search=".concat(l)),e},de=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,a,r,n,i,o,d,l,c,u,m,v,b=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(b.length>0&&void 0!==b[0])||b[0],a=b.length>1&&void 0!==b[1]?b[1]:new AbortController,e.prev=2,r=oe(),N(!0),e.next=7,p.H.get(r,{signal:a.signal});case 7:n=e.sent,ae(parseInt(n.headers["x-total-count"])),h.Y.debug("Response from operation member api get for pending tab table",n),ne(n.data),N(!1),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:N(!1),h.Y.debug("Error from get all pending operation member  tab table-------",e.t0),401==(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i?void 0:i.status)?(t&&S({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return M.current()})),setTimeout((function(){w("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.status)?(t&&S({titleMessage:"Oops!",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(d=e.t0.response)&&void 0!==d&&null!==(l=d.data)&&void 0!==l&&l.message?null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return M.current()})),setTimeout((function(){w("/home")}),3e3)):t&&S({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(m=e.t0.response)&&void 0!==m&&null!==(v=m.data)&&void 0!==v&&v.message&&"string"===typeof e.t0.response.data.message?e.t0.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return M.current()}));case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){var e=!0,a=new AbortController;return t&&de(e,a),h.Y.debug("makeApiCall",t),h.Y.debug("inside use Effect"),function(){e=!1,a.abort()}}),[g,t,d,a,F,U,L]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(v.Z,{title:(0,x.jsx)("p",{children:"Withdraw Operation Member Invitation"}),info1:(0,x.jsx)("p",{children:"On withdrawal, operation member will not be able to verify their account."}),info2:(0,x.jsx)("p",{children:"Do you want to withdraw the invitation?"}),primaryButtonText:"Yes",secondaryButtonText:"No",onPrimaryModalButtonClickHandler:function(){ie()},onSecondaryModalButtonClickHandler:function(){E(!1)},openModal:A,setOpenModal:E,isModalForm:!1}),Z?(0,x.jsx)(f.Z,{}):(0,x.jsx)(m.Z,{tableHead:C,records:W,handleChangePage1:function(e){o(e)},handleChangeRowsPerPage1:function(e){h.Y.debug("rows per page",e),q(parseInt(e.target.value,10)),o(1)},page:a,rowsPerPage:F,totalRecords:te,orderBy:U,onRowClick:!0,onClickVisibilityIconHandler1:function(e){return h.Y.debug("id",e),w("/users/operation-member/pending/view-operation-member/".concat(e))},onClickDeleteIconHandler1:function(e){h.Y.debug("id for delete",e),E(!0),D(e)},order:L,setOrder:J,setOrderBy:z,setCheckBoxes:!1})]})},S=a(9434),w=JSON.parse(JSON.stringify(g.si));w.push({id:"isActive",disablePadding:!1,label:"Status"});var j=function(e){var t,a,o=e.pageForOnboardedOperationMemberTab,d=e.setPageForOnboardedOperationMemberTab,l=e.makeApiCall,v=e.setMakeApiCall,g=e.search,C=e.filters,M=e.myRef,j=(e.toasterDetails,e.setToasterDetails),k=e.searchTimeout,Z=(e.setSearchTimeout,(0,n.useState)(!0)),N=(0,r.Z)(Z,2),T=N[0],O=N[1],A=(0,S.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.privilege})),E="Super Admin"===(null===A||void 0===A?void 0:A.name),P=(A?Object.values(null===A||void 0===A?void 0:A.privileges):[]).filter((function(e){var t;return"Operation Members"===(null===e||void 0===e||null===(t=e.moduleId)||void 0===t?void 0:t.name)})).map((function(e){return{operationMember:{list:null===e||void 0===e?void 0:e.list,view:null===e||void 0===e?void 0:e.view,edit:null===e||void 0===e?void 0:e.edit,delete:null===e||void 0===e?void 0:e.delete,add:null===e||void 0===e?void 0:e.add}}}));h.Y.info("member operation privilege",null===(t=P[0])||void 0===t?void 0:t.operationMember),h.Y.info("privilege",A);var B=(0,i.s0)(),Y=n.useState(10),D=(0,r.Z)(Y,2),R=D[0],I=D[1],F=n.useState("desc"),q=(0,r.Z)(F,2),_=q[0],H=q[1],L=n.useState(""),J=(0,r.Z)(L,2),K=J[0],G=J[1],U=n.useState([]),z=(0,r.Z)(U,2),V=z[0],X=z[1],W=n.useState(0),Q=(0,r.Z)(W,2),$=Q[0],ee=Q[1],te=(0,n.useState)([]),ae=(0,r.Z)(te,2),re=ae[0],ne=ae[1],ie=function(e){var t=["_id","name","email","memberCompany","companyType","createdByName","createdAt","isActive"];h.Y.debug("data before update----",e);var a=e;a.forEach((function(e){var a,r,n,i,o,d;delete e.updatedAt,delete e.description,delete e.countryCode,delete e.isDeleted,delete e.__v,delete e.password,delete e.roleId,delete e.role,delete e.salt,delete e.uuid,delete e.phoneNumber,delete e.token,delete e.tokenExpiry,delete e.tokenType,delete e.address,delete e.isMemberRepresentative,delete e.isCGFStaff,delete e.isOperationMember,e.memberCompany=null!==(a=null===e||void 0===e||null===(r=e.memberData)||void 0===r?void 0:r.companyName)&&void 0!==a?a:"N/A",e.companyType=null!==(n=null===e||void 0===e||null===(i=e.memberData)||void 0===i?void 0:i.companyType)&&void 0!==n?n:"N/A",e.createdByName=null!==(o=null===e||void 0===e||null===(d=e.createdBy)||void 0===d?void 0:d.name)&&void 0!==o?o:"N/A",e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),delete e.replacedUsers,delete e.isReplaced,delete e.department,delete e.title,delete e.salutation,delete e.createdBy,delete e.updatedBy,delete e.subRole,delete e.data,delete e.memberData,delete e.operationType,delete e.reportingManager,delete e.memberId,delete e.assessmentCount,t.forEach((function(t){var a=e[t];delete e[t],e[t]=a}))})),h.Y.debug("data in updaterecords method",a),X((0,u.Z)(a))},oe=function(){h.Y.debug("filters in onboarded table----",C),h.Y.debug("Search",g);var e="".concat(b.uX,"/list?page=").concat(o,"&size=").concat(R,"&orderBy=").concat(K,"&order=").concat(_);return g&&(e+="&search=".concat(g)),e},de=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,a,r,n=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(n.length>0&&void 0!==n[0])||n[0],t=n.length>1&&void 0!==n[1]?n[1]:new AbortController,e.prev=2,a=oe(),O(!0),e.next=7,p.H.get(a,{signal:t.signal});case 7:r=e.sent,ee(parseInt(r.headers["x-total-count"])),h.Y.debug("Response from sub admin api get",r),ie((0,u.Z)(r.data)),O(!1),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:O(!1),h.Y.debug("Error from getSubAdmin-------",e.t0),(0,y.K)(e.t0,j,M,B);case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){var e=!0,t=new AbortController;return l&&de(e,t),h.Y.debug("makeApiCall",l),h.Y.debug("inside use Effect"),function(){e=!1,clearTimeout(k),t.abort()}}),[o,R,K,_,l,v,k]),(0,x.jsx)(x.Fragment,{children:T?(0,x.jsx)(f.Z,{}):(0,x.jsx)(m.Z,{tableHead:w,records:V,handleChangePage1:function(e){d(e)},handleChangeRowsPerPage1:function(e){I(parseInt(e.target.value,10)),d(1)},page:o,rowsPerPage:R,totalRecords:$,orderBy:K,onClickVisibilityIconHandler1:function(e){return h.Y.debug("id",e),B("/users/operation-member/view-operation-member/".concat(e))},order:_,setOrder:H,setOrderBy:G,setCheckBoxes:!1,setSelected:ne,selected:re,onRowClick:!0===E||(null===(a=P[0])||void 0===a?void 0:a.operationMember.view)})})},k=a(1260),Z=a(8460),N=a(7806),T=a(7340);var O=function(){var e;(0,k.j)("Operation Members");var t=(0,d.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),a=(0,r.Z)(t,2),s=a[0],c=a[1],u=n.useState(1),m=(0,r.Z)(u,2),p=m[0],v=m[1],g=n.useState(1),f=(0,r.Z)(g,2),y=f[0],C=f[1],w=(0,n.useRef)(),O=(0,n.useState)(""),A=(0,r.Z)(O,2),E=A[0],P=A[1],B=n.useState(0),Y=(0,r.Z)(B,2),D=Y[0],R=Y[1],I=(0,n.useState)(!0),F=(0,r.Z)(I,2),q=F[0],_=F[1],H=(0,n.useState)(null),L=(0,r.Z)(H,2),J=L[0],K=L[1],G=(0,S.v9)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.privilege})),U="Super Admin"===(null===G||void 0===G?void 0:G.name),z=(0,i.TH)().state,V=(G?Object.values(null===G||void 0===G?void 0:G.privileges):[]).filter((function(e){var t;return"Operation Members"===(null===e||void 0===e||null===(t=e.moduleId)||void 0===t?void 0:t.name)})).map((function(e){return{operationMember:{list:e.list,view:e.view,edit:e.edit,delete:e.delete,add:e.add}}}));h.Y.debug("member operation privilege",null===(e=V[0])||void 0===e?void 0:e.operationMember);var X=(0,n.useState)({companyType:"",createdBy:"",status:""}),W=(0,r.Z)(X,2),Q=W[0],$=W[1],ee=(0,i.s0)();return(0,n.useEffect)((function(){R(z||0),ee("",{state:0})}),[]),(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"page-wrapper",children:[(0,x.jsx)(l.Z,{myRef:w,titleMessage:s.titleMessage,descriptionMessage:s.descriptionMessage,messageType:s.messageType}),(0,x.jsx)("section",{children:(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("div",{className:"member-filter-sect"}),(0,x.jsxs)("div",{className:"form-header member-form-header flex-between",children:[(0,x.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,x.jsx)("h2",{className:"heading2 mr-40",children:"Operation Members"})}),(0,x.jsxs)("div",{className:"form-header-right-txt",children:[0==D&&(0,x.jsxs)("div",{className:"tertiary-btn-blk mr-20",onClick:function(){return(0,N.j)("Operation Members",c,!1,w,b.MM,ee)},children:[(0,x.jsx)("span",{className:"download-icon",children:(0,x.jsx)(o.Z,{})}),"Download"]}),(!0===U||!0===V[0].operationMember.add)&&0===D&&(0,x.jsx)("div",{className:"form-btn",children:(0,x.jsx)("button",{onClick:function(){return ee("/users/operation-members/add-operation-member")},className:"primary-button add-button",children:"Add Operation Member"})})]})]}),(0,x.jsxs)("div",{className:"member-filter-wrap flex-between",children:[(0,x.jsx)("div",{className:"member-tab-left",children:(0,x.jsx)(T.Z,{value:D,handleChange:function(e,t){R(t),v(1),C(1)}})}),(0,x.jsx)("div",{className:"member-filter-left",children:(0,x.jsxs)("div",{className:"searchbar",children:[(0,x.jsx)("input",{type:"text",placeholder:"Search",value:E,onKeyDown:function(e){"Enter"===e.key&&(_(!0),v(1),C(1))},onChange:function(e){return function(e){h.Y.debug("event",e.key),J&&clearTimeout(J),_(!1),h.Y.debug("search values",e.target.value),P(e.target.value),K(setTimeout((function(){_(!0),v(1),C(1)}),1e3))}(e)},name:"search"}),(0,x.jsx)("button",{type:"submit",children:(0,x.jsx)("i",{className:"fa fa-search"})})]})}),(0,x.jsx)("div",{className:"member-filter-right"})]}),(0,x.jsxs)("div",{className:"member-info-wrapper table-content-wrap",children:[(0,x.jsx)(Z.x,{value:D,index:0,children:(0,x.jsx)(j,{pageForOnboardedOperationMemberTab:p,setPageForOnboardedOperationMemberTab:v,makeApiCall:q,setMakeApiCall:_,search:E,filters:Q,setSearch:P,setFilters:$,searchTimeout:J,setSearchTimeout:K,setToasterDetails:c,myRef:w})}),(0,x.jsx)(Z.x,{value:D,index:1,children:(0,x.jsx)(M,{pageForPendingOperationMemberTab:y,setPageForPendingOperationMemberTab:C,makeApiCall:q,setMakeApiCall:_,search:E,filters:Q,setSearch:P,setFilters:$,setToasterDetails:c,myRef:w})})]})]})})]})})}},1300:function(e,t,a){var r=a(9823),n=a(9444),i=a(5112),o=a(7962),d=a(6015),l=a(5814),s=(a(2791),a(184));t.Z=function(e){var t,a,c,u,m,p,v=e.title,b=e.info1,g=e.info2,f=e.primaryButtonText,h=e.secondaryButtonText,y=void 0===h?void 0:h,x=e.onPrimaryModalButtonClickHandler,C=e.isDisabledPrimaryButton,M=void 0!==C&&C,S=e.onSecondaryModalButtonClickHandler,w=e.openModal,j=e.setOpenModal,k=e.isModalForm,Z=e.handleCloseRedirect,N=function(e,t){t&&"backdropClick"===t||j(!1)},T=function(){S()},O="";return"object"===typeof(null===v||void 0===v||null===(t=v.props)||void 0===t?void 0:t.children)?null===v||void 0===v||null===(a=v.props)||void 0===a||null===(c=a.children)||void 0===c||c.map((function(e){return O+=e})):O=null===v||void 0===v||null===(u=v.props)||void 0===u?void 0:u.children,(0,s.jsx)(n.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:w,onClose:N,closeAfterTransition:!0,disableEscapeKeyDown:!!k,BackdropComponent:i.Z,BackdropProps:{timeout:500},className:"popup-blk",children:(0,s.jsx)(o.Z,{in:w,children:(0,s.jsx)(d.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},className:"popup-box",children:(0,s.jsxs)("div",{className:"popup-innerblk",children:[(0,s.jsxs)("div",{id:"transition-modal-title",className:"popup-ttl-blk",children:[(null===(m=O)||void 0===m?void 0:m.length)<=47?(0,s.jsx)("h2",{className:"popup-ttl heading2",children:v}):(0,s.jsx)(l.Z,{title:O,children:(0,s.jsxs)("h2",{className:"popup-ttl heading2",children:[" ",null===(p=O)||void 0===p?void 0:p.slice(0,50),'..."']})}),(0,s.jsx)("span",{className:"popup-close-icon",onClick:k?Z:N,children:(0,s.jsx)(r.Z,{})})]}),(0,s.jsx)("div",{id:"transition-modal-description",className:"popup-body",children:(0,s.jsxs)("div",{className:"popup-content-blk text-center",children:[b,k?(0,s.jsx)("form",{onSubmit:T,children:g}):g,(0,s.jsxs)("div",{className:"form-btn flex-center",children:[y&&(0,s.jsx)("button",{type:"submit",onClick:T,className:"secondary-button mr-10",children:y}),(0,s.jsx)("button",{type:"submit",onClick:function(){x()},disabled:M,className:"primary-button",children:f})]})]})})]})})})})}},1189:function(e,t,a){a.d(t,{Sn:function(){return s},eZ:function(){return u},si:function(){return c}});var r=a(4165),n=a(5861),i=a(4569),o=a.n(i),d=a(6218),l=a(4917),s={salutation:{required:"Select salutation"},name:{required:"Enter the operation member name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},department:{maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},title:{maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},email:{required:"Enter the email",pattern:"Invalid format"},countryCode:{required:"Enter country code",validate:"Select country code"},phoneNumber:{required:"Enter the phone number",maxLength:"Max digits limit exceed",minLength:"Enter the valid phone number (Eg: 1234567890)",validate:"Enter the valid phone number (Eg: 1234567890)"},memberCompany:{required:"Select member company"},operationType:{required:"Select the operation type"},memberId:{required:"Select the member company"},companyType:{required:"Enter company type"},address:{required:"Enter address",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},roleId:{required:"Select the role"},reportingManager:{required:"Select the reporting manager "},isCGFStaff:{required:"Select the CGFSTaff"}},c=[{id:"name",disablePadding:!1,label:"Operation Member"},{id:"email",disablePadding:!1,label:"Email"},{id:"memberCompany",disablePadding:!1,label:"Member Company"},{id:"companyType",disablePadding:!1,label:"Company Type"},{id:"createdByName",disablePadding:!1,label:"Created By"},{id:"createdAt",disablePadding:!1,label:"Created At"}],u=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get(d.NH);case 3:return t=e.sent,l.Y.debug("response",t),e.abrupt("return",null===t||void 0===t?void 0:t.data);case 8:e.prev=8,e.t0=e.catch(0),l.Y.debug("Error:- ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=5604.28cffe31.chunk.js.map