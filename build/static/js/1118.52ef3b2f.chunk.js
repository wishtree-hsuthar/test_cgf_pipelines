"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[1118],{4227:function(e,t,n){var r=n(9827),s=n(807),a=n(4390),i=(n(2791),n(184));t.Z=function(){return(0,i.jsx)(r.Z,{children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(a.Z,{align:"left",className:"table-header",width:"16%",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Modules"})}),(0,i.jsx)(a.Z,{className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Fill"})}),(0,i.jsx)(a.Z,{className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"List"})}),(0,i.jsx)(a.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Add"})}),(0,i.jsx)(a.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Edit"})}),(0,i.jsx)(a.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"View"})}),(0,i.jsx)(a.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Delete"})}),(0,i.jsx)(a.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"All"})})]})})}},1118:function(e,t,n){n.r(t);var r=n(4942),s=n(4165),a=n(5861),i=n(1413),l=n(885),c=n(8588),o=n(7265),d=n(2900),u=n(6321),h=n(6015),m=n(6650),f=n(9963),p=n(1680),v=n(9773),x=n(807),Z=n(4390),b=n(5473),j=n(2791),g=n(1134),k=n(7689),N=n(1087),w=n(4569),y=n.n(w),S=n(4917),C=n(7659),M=(n(1605),n(2820)),E=n(6218),O=n(1260),R=n(4227),T=n(8386),I=n(5736),z=n(184);t.default=function(){(0,O.j)("Edit Role");var e=(0,k.UO)(),t=(0,j.useState)(!1),n=(0,l.Z)(t,2),w=n[0],P=n[1],A=(0,k.s0)(),L=(0,M.Z)({titleMessage:"",descriptionMessage:"",messageType:""}),_=(0,l.Z)(L,2),B=_[0],F=_[1],H=j.useRef(),V={},Y=(0,j.useState)((0,i.Z)({},V)),D=(0,l.Z)(Y,2),q=D[0],U=D[1],K=(0,j.useState)(!1),Q=(0,l.Z)(K,2),J=Q[0],W=Q[1],G=(0,g.cI)({defaultValues:{roleName:"",status:"",description:""}}),X=G.control,$=G.reset,ee=G.setValue,te=G.handleSubmit,ne={description:{required:"Enter the description",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required"}},re=function(e){return Object.values(e).some((function(e){return Object.values(e).some((function(e){return e}))}))},se=function(){var t=(0,a.Z)((0,s.Z)().mark((function t(n){var r,a,i,l;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,S.Y.info("Edit role - onSubmit1 handler"),r=JSON.parse(JSON.stringify(q)),Object.keys(r).forEach((function(e){delete r[e].all,delete r[e].name})),re(r)){t.next=7;break}return F({titleMessage:"Hurray!",descriptionMessage:"Select atleast 1 privilege",messageType:"error"},(function(){return H.current()})),t.abrupt("return");case 7:return P(!0),W(!0),t.next=11,y().put(E.Yn+"roles/".concat(e.id),{description:n.description,isActive:"active"===n.status,privileges:r});case 11:200==(a=t.sent).status&&(P(!1),F({titleMessage:"Success!",descriptionMessage:a.data.message,messageType:"success"},(function(){return H.current()})),$({roleName:"",status:"active",description:""}),setTimeout((function(){return A("/roles/view-role/".concat(e.id))}),3e3)),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),S.Y.info("Edit role - onSubmit1 handler ".concat(null===t.t0||void 0===t.t0||null===(i=t.t0.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)),W(!1),(0,I.K)(t.t0,F,H,A);case 20:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),ae=function(e){var t;S.Y.info("Edit role - updateEditFields handler"),$({roleName:e.name,status:e.isActive?"active":"inactive",description:e.description}),t=e.privileges,S.Y.info("Edit role - createPrevileges handler"),Object.keys(t).forEach((function(e){V[e]={add:t[e].add,fill:t[e].fill,delete:t[e].delete,edit:t[e].edit,list:t[e].list,view:t[e].view,all:t[e].add&&t[e].delete&&t[e].edit&&t[e].view&&t[e].list&&("Assessment"!==t[e].moduleId.name||t[e].fill),name:t[e].moduleId.name}})),U((0,i.Z)({},V))},ie=function(){var t=(0,a.Z)((0,s.Z)().mark((function t(n,r){var a,i,l;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,P(!0),t.next=4,y().get(E.Yn+"roles/".concat(e.id),{signal:r.signal});case 4:a=t.sent,S.Y.info("Edit role - getRoleById handler"),ae(a.data),P(!1),t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),S.Y.info("Edit role - getRoleById handler catch error ".concat(null===t.t0||void 0===t.t0||null===(i=t.t0.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)),"ERR_CANCELED"!==(null===t.t0||void 0===t.t0?void 0:t.t0.code)){t.next=15;break}return t.abrupt("return");case 15:P(!1),(0,I.K)(t.t0,F,H,A);case 17:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}();return(0,j.useEffect)((function(){var e=!0,t=new AbortController;return e&&ie(e,t),function(){e=!1,t.abort()}}),[]),(0,z.jsxs)("div",{className:"page-wrapper",children:[(0,z.jsx)(C.Z,{myRef:H,titleMessage:B.titleMessage,descriptionMessage:B.descriptionMessage,messageType:B.messageType}),(0,z.jsx)("div",{className:"breadcrumb-wrapper",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsxs)("ul",{className:"breadcrumb",children:[(0,z.jsx)("li",{children:(0,z.jsx)(N.rU,{to:"/roles",children:"Roles"})}),(0,z.jsx)("li",{children:(0,z.jsx)(N.rU,{to:"/roles/view-role/".concat(e.id),children:"View Role"})}),(0,z.jsx)("li",{children:"Edit Role"})]})})}),(0,z.jsx)("section",{children:(0,z.jsxs)("div",{className:"container",children:[(0,z.jsx)("div",{className:"form-header flex-between",children:(0,z.jsx)("h2",{className:"heading2",children:"Edit Role"})}),w?(0,z.jsx)(T.Z,{}):(0,z.jsx)("form",{onSubmit:te(se),children:(0,z.jsxs)("div",{className:"card-wrapper",children:[(0,z.jsxs)("div",{className:"card-blk flex-between",children:[(0,z.jsx)("div",{className:"card-form-field",children:(0,z.jsxs)("div",{className:"form-group",children:[(0,z.jsxs)("label",{htmlFor:"roleName",children:["Role Name ",(0,z.jsx)("span",{className:"mandatory",children:"*"})]}),(0,z.jsx)(g.Qr,{name:"roleName",control:X,render:function(e){var t=e.field,n=e.fieldState.error;return(0,z.jsx)(c.Z,(0,i.Z)((0,i.Z)({disabled:!0},t),{},{className:"input-field ".concat(n&&"input-error"),id:"outlined-basic",placeholder:"Enter role name",variant:"outlined",helperText:" "}))}})]})}),(0,z.jsx)("div",{className:"card-form-field",children:(0,z.jsxs)("div",{className:"form-group",children:[(0,z.jsx)("label",{htmlFor:"status",children:"Status"}),(0,z.jsx)("div",{className:"radio-btn-field",children:(0,z.jsx)(g.Qr,{name:"status",control:X,render:function(e){var t=e.field;return(0,z.jsxs)(o.Z,(0,i.Z)((0,i.Z)({},t),{},{"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",className:"radio-btn",children:[(0,z.jsx)(d.Z,{value:"active",control:(0,z.jsx)(u.Z,{}),label:"Active"}),(0,z.jsx)(d.Z,{value:"inactive",control:(0,z.jsx)(u.Z,{}),label:"Inactive"})]}))}})})]})}),(0,z.jsx)("div",{className:"card-form-field fullwidth",children:(0,z.jsxs)("div",{className:"form-group",children:[(0,z.jsxs)("label",{htmlFor:"description",children:["Description ",(0,z.jsx)("span",{className:"mandatory",children:"*"})]}),(0,z.jsx)(g.Qr,{name:"description",rules:{required:!0,maxLength:500,minLength:3},control:X,render:function(e){var t=e.field,n=e.fieldState.error;return(0,z.jsx)(c.Z,(0,i.Z)((0,i.Z)({multiline:!0},t),{},{onBlur:function(e){return ee("description",e.target.value.trim())},inputProps:{maxLength:500},className:"input-textarea ".concat(n&&"input-textarea-error"),id:"outlined-basic",placeholder:"Enter description",helperText:n?ne.description[n.type]:" ",variant:"outlined"}))}})]})})]}),(0,z.jsx)(h.Z,{sx:{width:"100%"},className:"table-blk table-blk-role",children:(0,z.jsx)(m.Z,{sx:{width:"100%"},children:(0,z.jsx)(f.Z,{children:(0,z.jsxs)(p.Z,{sx:{minWidth:750},children:[(0,z.jsx)(R.Z,{}),(0,z.jsx)(v.Z,{children:Object.keys(q).map((function(e,t){return(0,z.jsxs)(x.Z,{hover:!0,children:[(0,z.jsx)(Z.Z,{children:q[e].name}),(0,z.jsx)(Z.Z,{align:"center",padding:"checkbox",children:"Assessment"===q[e].name&&(0,z.jsx)(b.Z,{className:"table-checkbox",checked:q[e].fill,onChange:function(){return U((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},e,(0,i.Z)((0,i.Z)({},t[e]),{},{fill:!t[e].fill,list:t[e].list||!t[e].fill,view:t[e].view||!t[e].fill,all:!t[e].fill&&t[e].add&&t[e].edit&&t[e].delete})))}))}})}),(0,z.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,z.jsx)(b.Z,{className:"table-checkbox",checked:q[e].list,onChange:function(){return U((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},e,(0,i.Z)((0,i.Z)({},t[e]),{},{list:!t[e].list,view:t[e].view&&!t[e].list||!1,edit:t[e].edit&&!t[e].list||!1,delete:t[e].delete&&!t[e].list||!1,add:t[e].add&&!t[e].list||!1,fill:t[e].fill&&!t[e].list||!1,all:!t[e].list&&t[e].add&&t[e].edit&&t[e].view&&t[e].delete})))}))}})}),(0,z.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,z.jsx)(b.Z,{className:"table-checkbox",checked:q[e].add,onChange:function(){return U((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},e,(0,i.Z)((0,i.Z)({},t[e]),{},{add:!t[e].add,list:t[e].list||!t[e].add,view:t[e].view||!t[e].add,all:!t[e].add&&t[e].edit&&t[e].delete})))}))}})}),(0,z.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,z.jsx)(b.Z,{className:"table-checkbox",checked:q[e].edit,onChange:function(){return U((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},e,(0,i.Z)((0,i.Z)({},t[e]),{},{edit:!t[e].edit,list:t[e].list||!t[e].edit,view:t[e].view||!t[e].edit,all:t[e].add&&!t[e].edit&&t[e].delete})))}))}})}),(0,z.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,z.jsx)(b.Z,{className:"table-checkbox",checked:q[e].view,onChange:function(){return U((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},e,(0,i.Z)((0,i.Z)({},t[e]),{},{view:!t[e].view,list:t[e].list||!t[e].view,edit:t[e].edit&&!t[e].view||!1,delete:t[e].delete&&!t[e].view||!1,fill:t[e].fill&&!t[e].view||!1,all:t[e].add&&t[e].edit&&!t[e].view&&t[e].delete})))}))}})}),(0,z.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,z.jsx)(b.Z,{className:"table-checkbox",checked:q[e].delete,onChange:function(){return U((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},e,(0,i.Z)((0,i.Z)({},t[e]),{},{delete:!t[e].delete,list:t[e].list||!t[e].delete,edit:t[e].edit||!t[e].delete,view:t[e].view||!t[e].delete,all:t[e].add&&!t[e].delete})))}))}})}),(0,z.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,z.jsx)(b.Z,{className:"table-checkbox",checked:q[e].all,onChange:function(){return U((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},e,(0,i.Z)((0,i.Z)({},t[e]),{},{all:!t[e].all,list:!t[e].all,view:!t[e].all,add:!t[e].all,edit:!t[e].all,delete:!t[e].all,fill:"Assessment"===q[e].name&&!t[e].all})))}))}})})]},e)}))})]})})})}),(0,z.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,z.jsx)("button",{type:"reset",style:{marginTop:"20px"},className:"secondary-button mr-10",onClick:function(){A("/roles/view-role/".concat(e.id))},children:"Cancel"}),(0,z.jsx)("button",{type:"submit",className:"primary-button",style:{marginTop:"20px"},disabled:J,children:"Update"})]})]})})]})})]})}},7659:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(2131),s=n(5130),a=n(2791),i=n(5985),l=(n(5462),n(184));var c=function(e){e.titleMessage;var t=e.descriptionMessage,n=e.messageType,c=e.myRef,o=(e.key,function(){(0,i.Am)(d,{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"toastId"})}),d=function(){return(0,l.jsxs)("div",{className:"toaster-blk flex-start ".concat("success"===n&&"toaster-blk-success"),children:[(0,l.jsx)("div",{className:"toaster-left ".concat("success"===n&&"toaster-left-success"),children:(0,l.jsxs)("div",{className:"toaster-icon",children:["success"===n&&(0,l.jsx)(r.Z,{}),"error"===n&&(0,l.jsx)(s.Z,{})]})}),(0,l.jsx)("div",{className:"toaster-right",children:(0,l.jsx)("p",{children:t})})]})};return(0,a.useEffect)((function(){c.current=o}),[o,c]),(0,l.jsxs)("div",{className:"toaster-sect",children:[(0,l.jsx)("button",{style:{display:"none"},children:"Show Toast !"}),(0,l.jsx)(i.Ix,{className:"toaster-wrap ".concat("success"===n&&"toaster-wrap-success"," ")})]})}},5736:function(e,t,n){n.d(t,{K:function(){return a}});var r=n(4165),s=n(5861),a=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n,s,a,i){var l,c,o,d,u,h,m,f,p,v,x=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=x.length>5&&void 0!==x[5]?x[5]:0,401==t.response.status?(n({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again!",messageType:"error"},(function(){return s.current()})),setTimeout((function(){a("/login")}),3e3)):403===(null===t||void 0===t||null===(l=t.response)||void 0===l?void 0:l.status)?(n({titleMessage:"Oops!",descriptionMessage:null!==t&&void 0!==t&&null!==(o=t.response)&&void 0!==o&&null!==(d=o.data)&&void 0!==d&&d.message?null===t||void 0===t||null===(u=t.response)||void 0===u||null===(h=u.data)||void 0===h?void 0:h.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return s.current()})),setTimeout((function(){a("/home")}),3e3)):(n({titleMessage:"Oops!",descriptionMessage:null!==t&&void 0!==t&&null!==(m=t.response)&&void 0!==m&&null!==(f=m.data)&&void 0!==f&&f.message?null===t||void 0===t||null===(p=t.response)||void 0===p||null===(v=p.data)||void 0===v?void 0:v.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return s.current()})),i&&setTimeout((function(){a(i,{state:c})}),3e3));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,s,a){return e.apply(this,arguments)}}()},2820:function(e,t,n){var r=n(885),s=n(2791);t.Z=function(e){var t=(0,s.useState)(e),n=(0,r.Z)(t,2),a=n[0],i=n[1],l=(0,s.useRef)([]);(0,s.useEffect)((function(){l.current.forEach((function(e){return e(a)})),l.current=[]}),[a]);return[a,function(e,t){i(e),t&&"function"===typeof t&&l.current.push(t)}]}},1260:function(e,t,n){n.d(t,{j:function(){return s}});var r=n(2791),s=function(e){return(0,r.useEffect)((function(){document.title="HRDD System - ".concat(e)}),[e]),null}},5473:function(e,t,n){n.d(t,{Z:function(){return M}});var r=n(4942),s=n(3366),a=n(7462),i=n(2791),l=n(8182),c=n(4419),o=n(2065),d=n(7278),u=n(1245),h=n(184),m=(0,u.Z)((0,h.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),f=(0,u.Z)((0,h.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),p=(0,u.Z)((0,h.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),v=n(9853),x=n(5513),Z=n(277),b=n(5878),j=n(1217);function g(e){return(0,j.Z)("MuiCheckbox",e)}var k=(0,b.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),N=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],w=(0,Z.ZP)(d.Z,{shouldForwardProp:function(e){return(0,Z.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t["color".concat((0,v.Z)(n.color))]]}})((function(e){var t,n=e.theme,s=e.ownerState;return(0,a.Z)({color:(n.vars||n).palette.text.secondary},!s.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat("default"===s.color?n.vars.palette.action.activeChannel:n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,o.Fq)("default"===s.color?n.palette.action.active:n.palette[s.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==s.color&&(t={},(0,r.Z)(t,"&.".concat(k.checked,", &.").concat(k.indeterminate),{color:(n.vars||n).palette[s.color].main}),(0,r.Z)(t,"&.".concat(k.disabled),{color:(n.vars||n).palette.action.disabled}),t))})),y=(0,h.jsx)(f,{}),S=(0,h.jsx)(m,{}),C=(0,h.jsx)(p,{}),M=i.forwardRef((function(e,t){var n,r,o=(0,x.Z)({props:e,name:"MuiCheckbox"}),d=o.checkedIcon,u=void 0===d?y:d,m=o.color,f=void 0===m?"primary":m,p=o.icon,Z=void 0===p?S:p,b=o.indeterminate,j=void 0!==b&&b,k=o.indeterminateIcon,M=void 0===k?C:k,E=o.inputProps,O=o.size,R=void 0===O?"medium":O,T=o.className,I=(0,s.Z)(o,N),z=j?M:Z,P=j?M:u,A=(0,a.Z)({},o,{color:f,indeterminate:j,size:R}),L=function(e){var t=e.classes,n=e.indeterminate,r=e.color,s={root:["root",n&&"indeterminate","color".concat((0,v.Z)(r))]},i=(0,c.Z)(s,g,t);return(0,a.Z)({},t,i)}(A);return(0,h.jsx)(w,(0,a.Z)({type:"checkbox",inputProps:(0,a.Z)({"data-indeterminate":j},E),icon:i.cloneElement(z,{fontSize:null!=(n=z.props.fontSize)?n:R}),checkedIcon:i.cloneElement(P,{fontSize:null!=(r=P.props.fontSize)?r:R}),ownerState:A,ref:t,className:(0,l.Z)(L.root,T)},I,{classes:L}))}))},1605:function(){}}]);
//# sourceMappingURL=1118.52ef3b2f.chunk.js.map