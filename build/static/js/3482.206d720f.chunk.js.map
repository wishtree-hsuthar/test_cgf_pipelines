{"version":3,"file":"static/js/3482.206d720f.chunk.js","mappings":"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","sources":["Pages/Login.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\n\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { TextField } from \"@mui/material\";\nimport OutlinedInput from \"@mui/material/OutlinedInput\";\nimport axios from \"axios\";\nimport { useForm } from \"react-hook-form\";\nimport { useDispatch } from \"react-redux\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport * as yup from \"yup\";\nimport { Logger } from \"../Logger/Logger\";\nimport { GET_USER, LOGIN_URL } from \"../api/Url\";\nimport { publicAxios } from \"../api/axios\";\nimport Toaster from \"../components/Toaster\";\nimport { setPrivileges, setUser } from \"../redux/UserSlice\";\nimport CustomInputAdornment from \"../utils/CustomInputAdornment\";\nimport useCallbackState from \"../utils/useCallBackState\";\nimport { useDocumentTitle } from \"../utils/useDocumentTitle\";\nimport Slider from \"./Slider\";\nconst loginFormSchema = yup.object().shape({\n  email: yup\n    .string()\n    .email(\"Invalid input\")\n    .required(\"Enter the email address\"),\n  password: yup.string().required(\"Enter the password\"),\n});\nconst Login = (prop) => {\n  //custom hook to set title of page\n  useDocumentTitle(\"Login\");\n  const [loginToasterDetails, setLoginToasterDetails] = useCallbackState({\n    titleMessage: \"\",\n    descriptionMessage: \"\",\n    messageType: \"error\",\n  });\n  const loginToasterRef = useRef();\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const {\n    register,\n    setValue,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({\n    resolver: yupResolver(loginFormSchema),\n  });\n  useEffect(() => {\n    document.body.classList.add(\"login-page\");\n\n    const controller = new AbortController();\n    const fetchUser = async () => {\n      Logger.info(\"Login - Fetch user handler\");\n      try {\n        const { status, data } = await axios.get(GET_USER, {\n          withCredentials: true,\n          signal: controller.signal,\n        });\n        if (status == 200) {\n          navigate(\"/home\");\n        }\n      } catch (error) {\n        if (error?.response?.status == 401) {\n          Logger.info(\"Login - Fetch user hanller catch error\");\n        }\n      }\n    };\n    fetchUser();\n\n    return () => {\n      document.body.classList.remove(\"login-page\");\n      controller.abort();\n    };\n  }, []);\n\n  const [values, setValues] = React.useState({\n    password: \"\",\n    showPassword: false,\n  });\n\n  const handleClickShowPassword = () => {\n    setValues({\n      ...values,\n      showPassword: !values.showPassword,\n    });\n  };\n  const handleMouseDownPassword = (event) => {\n    event.preventDefault();\n  };\n\n  const navigateToforgetPasswordPage = () => {\n    navigate(\"/forget-password\");\n  };\n  const submitLoginData = async (data) => {\n    Logger.info(\"Login - Submit login data handler\");\n    try {\n      const response = await publicAxios.post(LOGIN_URL, data, {\n        withCredentials: true,\n      });\n      if (response.status == 201) {\n        dispatch(setUser(response?.data?.user));\n        dispatch(setPrivileges(response?.data?.user?.role));\n        navigate(`/verification-code`);\n        localStorage.setItem(\"token\", response?.data?.token);\n      }\n    } catch (error) {\n      Logger.info(\n        `Login - Submit login data handler catch error - ${error?.response?.data?.message}`\n      );\n      if (\n        error.response.status == 401 &&\n        error.response.data.message === \"Unauthorized\"\n      ) {\n        return setLoginToasterDetails(\n          {\n            titleMessage: \"Invalid Credentials\",\n            descriptionMessage: \"Invalid email or password!\",\n            messageType: \"error\",\n          },\n          () => loginToasterRef.current()\n        );\n      }\n      if (\n        error.response.status == 401 &&\n        error.response.data.message ===\n          \"Access denied. Kindly contact system admin.\"\n      ) {\n        return setLoginToasterDetails(\n          {\n            titleMessage: \"Invalid Credentials\",\n            descriptionMessage: error?.response?.data?.message,\n            messageType: \"error\",\n          },\n          () => loginToasterRef.current()\n        );\n      }\n      if (error.response.status == 400) {\n        return setLoginToasterDetails(\n          {\n            titleMessage: \"Session Active\",\n            descriptionMessage: error?.response?.data?.message,\n            messageType: \"error\",\n          },\n          () => loginToasterRef.current()\n        );\n      }\n    }\n  };\n\n  return (\n    <div className=\"page-wrapper login-page-wrap\">\n      <Toaster\n        myRef={loginToasterRef}\n        titleMessage={loginToasterDetails.titleMessage}\n        descriptionMessage={loginToasterDetails.descriptionMessage}\n        messageType={loginToasterDetails.messageType}\n      />\n      <div className=\"login-section\">\n        <div className=\"container\">\n          <div className=\"login-wrapper\">\n            <div className=\"login-leftblk\">\n              <div className=\"login-slider\">\n                <Slider />\n              </div>\n            </div>\n            <div className=\"login-rightblk\">\n              <div className=\"login-blk\">\n                <div className=\"logo\">\n                  <img\n                    src={process.env.PUBLIC_URL + \"/images/logo.png\"}\n                    alt=\"\"\n                    className=\"img-fluid\"\n                  />\n                </div>\n                <h2 className=\"heading1 text-uppercase\">Log in</h2>\n                <div className=\"login-form\">\n                  <form onSubmit={handleSubmit(submitLoginData)}>\n                    <div className=\"form-group\">\n                      <label htmlFor=\"emailid\">\n                        Email <span className=\"mandatory\">*</span>\n                      </label>\n                      <TextField\n                        className={`input-field ${\n                          errors.email && \"input-error\"\n                        }`}\n                        id=\"outlined-basic\"\n                        placeholder=\"example@domain.com\"\n                        variant=\"outlined\"\n                        {...register(\"email\")}\n                        onBlur={(e) => setValue(\"email\", e.target.value.trim())}\n                        helperText={errors.email ? errors.email.message : \" \"}\n                      />\n                    </div>\n                    <div className=\"form-group\">\n                      <label htmlFor=\"password\">\n                        Password <span className=\"mandatory\">*</span>\n                      </label>\n                      <div className=\"password-field\">\n                        <OutlinedInput\n                          fullWidth\n                          id=\"outlined-adornment-password\"\n                          type={values.showPassword ? \"text\" : \"password\"}\n                          placeholder=\"Enter password\"\n                          className={`input-field ${\n                            errors.password && \"input-error\"\n                          }`}\n                          endAdornment={\n                            <CustomInputAdornment\n                              show={values?.showPassword}\n                              onClickHandler={handleClickShowPassword}\n                              mouseDownHandler={handleMouseDownPassword}\n                            />\n                          }\n                          {...register(\"password\")}\n                          onBlur={(e) =>\n                            setValue(\"password\", e.target.value.trim())\n                          }\n                        />\n                        <p className={`password-error`}>\n                          {errors?.password ? (\n                            errors.password?.message\n                          ) : (\n                            <span>&nbsp;</span>\n                          )}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"form-btn flex-between\">\n                      <button type=\"submit\" className=\"primary-button\">\n                        Log In\n                      </button>\n                      <div\n                        className=\"tertiary-btn-blk\"\n                        onClick={navigateToforgetPasswordPage}\n                      >\n                        Forgot Password?\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"names":["loginFormSchema","yup","shape","email","required","password","prop","_errors$password","useDocumentTitle","loginToasterDetails","setLoginToasterDetails","useCallbackState","titleMessage","descriptionMessage","messageType","loginToasterRef","useRef","dispatch","useDispatch","navigate","useLocation","useNavigate","register","setValue","handleSubmit","formState","errors","useForm","resolver","yupResolver","useEffect","document","body","classList","add","controller","AbortController","async","Logger","info","status","data","axios","get","GET_USER","withCredentials","signal","error","_error$response","response","fetchUser","remove","abort","values","setValues","React","showPassword","_jsxs","className","children","_jsx","Toaster","myRef","Slider","src","alt","onSubmit","publicAxios","post","LOGIN_URL","_response$data","_response$data2","_response$data2$user","_response$data3","setUser","user","setPrivileges","role","localStorage","setItem","token","_error$response2","_error$response2$data","_error$response3","_error$response3$data","_error$response4","_error$response4$data","concat","message","current","htmlFor","TextField","id","placeholder","variant","onBlur","e","target","value","trim","helperText","OutlinedInput","fullWidth","type","endAdornment","CustomInputAdornment","show","onClickHandler","handleClickShowPassword","mouseDownHandler","event","preventDefault","onClick","navigateToforgetPasswordPage"],"sourceRoot":""}