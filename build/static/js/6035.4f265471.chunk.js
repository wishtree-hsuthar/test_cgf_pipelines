"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[6035],{26035:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var n=t(72791),i=t(57689),l=t(53073),a=t(59434),d=t(94677),o=t(76218),r=t(12820),c=t(1260),u=t(77194),m=t(27659),h=t(28386),v=t(14917),g=t(80184);const p={width:"30%",disablePadding:!1},b=[{...p,id:"title",label:"Title"},{...p,id:"assessmentType",label:"Assessment Type"},{...p,id:"assignedMember.name",label:"Assigned Member"},{...p,id:"assignedOperationMember.name",label:"Assigned To"},{...p,id:"region",label:"Region"},{...p,id:"country",label:"Country"},{...p,id:"assessmentStatus",label:"Status"},{...p,id:"submissionDate",label:"Submitted Date"},{...p,id:"dueDate",label:"Due Date"},{...p,id:"action",label:"Actions"}],x=()=>{var e,s,t,p;(0,c.j)("Assessments");const x=n.useRef(),[j,f]=(0,r.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),y=["uuid","_id","title","assessmentType","assignedMember.name","assignedOperationMember.name","region","country","assessmentStatus","submissionDate","dueDate","isUserAuthorizedToFillAssessment"],w=(0,i.s0)(),[k,A]=(0,n.useState)(!1),[N,C]=(0,n.useState)(null),[Z,S]=(0,n.useState)(!0),[D,M]=(0,n.useState)(""),[T,_]=(0,n.useState)(1),[O,P]=(0,n.useState)(10),[R,E]=(0,n.useState)("desc"),[B,F]=(0,n.useState)(""),[I,U]=(0,n.useState)([]),[H,L]=(0,n.useState)(0);let z=["download"];const q=async function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new AbortController;try{let s=(()=>{let e="".concat(o.jE,"?page=").concat(T,"&size=").concat(O,"&orderBy=").concat(B,"&order=").concat(R);return(null===D||void 0===D?void 0:D.length)>=3&&(e+="&search=".concat(D)),e})();A(!0);const t=await d.H.get(s,{signal:e.signal});L(parseInt(t.headers["x-total-count"])),V([...t.data]),A(!1)}catch(h){var s,t;if("ERR_CANCELED"===(null===h||void 0===h?void 0:h.code))return;if(401==(null===h||void 0===h||null===(s=h.response)||void 0===s?void 0:s.status))f({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(()=>x.current())),setTimeout((()=>{w("/login")}),3e3);else if(403==(null===h||void 0===h||null===(t=h.response)||void 0===t?void 0:t.status)){var n,i,l,a;f({titleMessage:"Error",descriptionMessage:null!==h&&void 0!==h&&null!==(n=h.response)&&void 0!==n&&null!==(i=n.data)&&void 0!==i&&i.message?null===h||void 0===h||null===(l=h.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>x.current())),setTimeout((()=>{w("/home")}),3e3)}else{var r,c,u,m;f({titleMessage:"Error",descriptionMessage:null!==h&&void 0!==h&&null!==(r=h.response)&&void 0!==r&&null!==(c=r.data)&&void 0!==c&&c.message?null===h||void 0===h||null===(u=h.response)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>x.current()))}A(!1)}},V=e=>{e.forEach((e=>{var s,t,n,i;delete e.updatedAt,delete e.__v,delete e.isDraft,delete e.isPublished,delete e.isActive,delete e.isDeleted,delete e.isSubmitted,delete e.updatedAt,delete e.updatedBy,delete e.createdBy,delete e.createdAt,delete e.remarks,e["assignedMember.name"]=null!==(s=null===e||void 0===e||null===(t=e.assignedMember)||void 0===t?void 0:t.name)&&void 0!==s?s:"N/A",e["assignedOperationMember.name"]=null!==(n=null===e||void 0===e||null===(i=e.assignedOperationMember)||void 0===i?void 0:i.name)&&void 0!==n?n:"N/A",e.isUserAuthorizedToFillAssessment=Y._id===e.assignedOperationMember._id,delete e.assignedOperationMember,delete e.assignedMember,delete e.memberCompany,delete e.questionnaireId,delete e.isMemberRepresentative,delete e.actionPlan,e.dueDate=new Date(new Date(e.dueDate).setDate(new Date(e.dueDate).getDate()-1)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),e.submissionDate=e.submissionDate?new Date(new Date(e.submissionDate).setDate(new Date(e.submissionDate).getDate()-1)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"N/A",y.forEach((s=>{const t=e[s];delete e[s],e[s]=t}))})),U([...e])};(0,n.useEffect)((()=>{let e=!0;const s=new AbortController;return Z&&q(e,s),()=>{e=!1,clearTimeout(N),s.abort()}}),[T,O,B,R,Z]);const K=(0,a.v9)((e=>{var s;return null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.privilege})),Y=(0,a.v9)((e=>{var s;return null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.userObj})),Q="Super Admin"===(null===K||void 0===K?void 0:K.name);let W=("Super Admin"===(null===Y||void 0===Y||null===(e=Y.roleId)||void 0===e?void 0:e.name)?[]:Object.values(null===K||void 0===K?void 0:K.privileges)).filter((e=>{var s;return"Assessment"===(null===e||void 0===e||null===(s=e.moduleId)||void 0===s?void 0:s.name)})).map((e=>({assessment:{list:null===e||void 0===e?void 0:e.list,visibility:null===e||void 0===e?void 0:e.view,edit:null===e||void 0===e?void 0:e.edit,add:null===e||void 0===e?void 0:e.add,fill:null===e||void 0===e?void 0:e.fill}}))),G={...null===(s=W[0])||void 0===s?void 0:s.assessment};return(0,g.jsxs)("div",{children:[(0,g.jsx)(m.Z,{messageType:j.messageType,descriptionMessage:j.descriptionMessage,myRef:x,titleMessage:j.titleMessage}),(0,g.jsx)("div",{className:"page-wrapper",children:(0,g.jsx)("section",{children:(0,g.jsxs)("div",{className:"container",children:[(0,g.jsxs)("div",{className:"form-header member-form-header flex-between mb-0",children:[(0,g.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,g.jsx)("h2",{className:"heading2 mr-40",children:"Assessments"})}),(0,g.jsxs)("div",{className:"form-header-right-txt search-and-btn-field-right view-instruct-field-right",children:[(0,g.jsx)("div",{className:"search-and-btn-field-blk mr-0",children:(0,g.jsxs)("div",{className:"searchbar",children:[(0,g.jsx)("input",{type:"text",value:D,name:"search",placeholder:"Search",onKeyDown:e=>{"Enter"===e.key&&(S(!0),_(1))},onChange:e=>{v.Y.info("Assessment list - onSearchChangeHandler handler"),N&&clearTimeout(N),S(!1),M(e.target.value),C(setTimeout((()=>{S(!0),_(1)}),1e3))}}),(0,g.jsx)("button",{type:"submit",children:(0,g.jsx)("i",{className:"fa fa-search"})})]})}),(Q||(null===(t=W[0])||void 0===t||null===(p=t.assessment)||void 0===p?void 0:p.add))&&(0,g.jsx)("div",{className:"form-btn ml-20",children:(0,g.jsx)("button",{type:"submit",className:"primary-button add-button",onClick:()=>{w("/assessment-list/add-assessment")},children:"Add Assessment"})}),(0,g.jsxs)("div",{className:"tertiary-btn-blk ml-20",onClick:()=>{w("/assessment-list/instructions")},children:[(0,g.jsx)("span",{className:"preview-icon",children:(0,g.jsx)(u.Z,{})}),(0,g.jsx)("span",{className:"addmore-txt",children:"View Instructions"})]})]})]}),(0,g.jsx)("div",{className:"member-info-wrapper table-content-wrap",children:(0,g.jsx)("div",{className:"member-info-wrapper table-content-wrap table-footer-btm-space assessment-list-table",children:k?(0,g.jsx)(h.Z,{}):(0,g.jsx)(l.Z,{tableHead:b,records:I,handleChangePage1:e=>{_(e)},handleChangeRowsPerPage1:e=>{P(parseInt(e.target.value,10)),_(1)},page:T,rowsPerPage:O,totalRecords:H,orderBy:B,icons:(()=>{Object.entries(G).filter((e=>!0===e[1]&&z.push(e[0])));return console.log("icons - assessment",z),Q?(z=["edit","visibility","download"],z):z.includes("fill")?(z.push("send"),z.push("download"),z):z})(),onClickVisibilityIconHandler1:e=>w("/assessment-list/view-assessment/".concat(e)),onClickEditAssesmentFunction:e=>w("/assessment-list/edit-assessment/".concat(e)),order:R,setOrder:E,setOrderBy:F,setCheckBoxes:!1,onClickAssignAssesmentFunction:e=>w("/assessment-list/assign-assessment/".concat(e)),onClickFillAssessmentFunction:e=>w("/assessment-list/fill-assessment/".concat(e)),viewAssessment:!0,onClickActionPlanDownload:async e=>{try{const s=await d.H.get(o.qK+e+"/action-plan",{responseType:"blob"});v.Y.info(" download function -  from   assessment "),console.log("response-download = ",s);const t=window.URL.createObjectURL(new Blob([s.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","".concat(s.headers["file-name"])),document.body.appendChild(n),n.click(),200==s.status&&f({titleMessage:"Success!",descriptionMessage:"Downloaded Successfully!",messageType:"success"},(()=>x.current()))}catch(s){console.log("error from action plan download",s)}}})})})]})})})]})}},53073:(e,s,t)=>{t.d(s,{Z:()=>C});var n=t(7195),i=t(59140),l=t(77194),a=t(697),d=t(94454),o=t(35527),r=t(79836),c=t(53382),u=t(53994),m=t(39281),h=t(56890),v=t(35855),g=t(80720),p=(t(72791),t(50922)),b=t(61419),x=t(96816),j=(t(14917),t(20068)),f=t(58406),y=t(63903),w=t(53767),k=t(57246),A=(t(71605),t(80184));function N(e){const{onSelectAllClick:s,order:t,orderBy:n,tableHead:i,numSelected:l,rowCount:a,onRequestSort:o,setCheckBoxes:r}=e;return(0,A.jsx)(h.Z,{children:(0,A.jsxs)(v.Z,{children:[r&&(0,A.jsx)(u.Z,{padding:"checkbox",className:"table-checkbox",children:(0,A.jsx)(d.Z,{color:"primary",indeterminate:l>0&&l<a,checked:a>0&&l===a,onChange:s,inputProps:{"aria-label":"select all desserts"},className:"checkbox-mui"})}),i.map((e=>{return(0,A.jsxs)(u.Z,{width:null===e||void 0===e?void 0:e.width,align:"left",padding:e.disablePadding?"none":"normal",className:"table-header",children:["action"!==e.id&&(0,A.jsx)(g.Z,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(s=e.id,e=>{o(e,s)}),className:"sorted-blk",children:e.label}),"action"===e.id&&(0,A.jsx)("span",{className:"sorted-blk",children:e.label})]},e.id);var s}))]})})}function C(e){let{tableHead:s,records:t,page:h=1,rowsPerPage:g=10,handleChangeRowsPerPage1:C,handleChangePage1:Z,totalRecords:S,orderBy:D,setOrderBy:M,icons:T,onClickVisibilityIconHandler1:_,onClickDeleteIconHandler1:O,selected:P=[],setSelected:R,order:E="asc",setOrder:B,setCheckBoxes:F=!0,setSingleSelect:I=!1,handleSingleUserSelect:U,selectedUser:H,onRowClick:L=!1,isQuestionnare:z=!1,onClickEditAssesmentFunction:q,onClickAssignAssesmentFunction:V,onClickFillAssessmentFunction:K,viewAssessment:Y=!1,onClickActionPlanDownload:Q}=e;console.log("icons - ",T);const W=(e,s)=>{_(e,s||!1)};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(a.Z,{sx:{width:"100%"},className:F?"table-blk":"table-blk table-blk-without-checkbox",children:(0,A.jsx)(o.Z,{sx:{width:"100%",mb:2},children:(0,A.jsx)(m.Z,{children:(0,A.jsxs)(r.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,A.jsx)(N,{numSelected:P.length,order:E,orderBy:D,tableHead:s,onSelectAllClick:e=>{if(e.target.checked){const e=t.map((e=>e._id));R(e)}else R([])},onRequestSort:(e,s)=>{B(D===s&&"asc"===E?"desc":"asc"),M(s)},rowCount:t.length,setCheckBoxes:F}),(null===t||void 0===t?void 0:t.length)>0?(0,A.jsx)(c.Z,{children:t.map(((e,s)=>{const t=(a=e._id,-1!==P.indexOf(a));var a;const o="enhanced-table-checkbox-".concat(s);return(0,A.jsxs)(v.Z,{hover:!0,onClick:()=>L&&W(z?e.uuid:e._id,(null===e||void 0===e?void 0:e.isOperationMember)||(null===e||void 0===e?void 0:e.isMemberRepresentative)),style:{cursor:L&&"pointer"},role:"checkbox","aria-checked":t,tabIndex:-1,selected:t,children:[F&&(0,A.jsx)(u.Z,{padding:"checkbox",children:(0,A.jsx)(d.Z,{className:"table-checkbox",color:"primary",onClick:s=>((e,s)=>{const t=P.indexOf(s);let n=[];-1===t?n=n.concat(P,s):0===t?n=n.concat(P.slice(1)):t===P.length-1?n=n.concat(P.slice(0,-1)):t>0&&(n=n.concat(P.slice(0,t),P.slice(t+1))),R(n)})(0,e._id),checked:t,inputProps:{"aria-labelledby":o}})}),I&&(0,A.jsx)(u.Z,{children:(0,A.jsx)("div",{className:"radio-btn-field",children:(0,A.jsx)(b.Z,{className:"radio-btn",color:"primary",value:e._id,onChange:()=>(e=>{U(e)})(e._id),checked:H==e._id,inputProps:{"aria-labelledby":o}})})}),Object.keys(e).map(((s,t)=>{var n,i,l,a,d,o;return"_id"!==s&&"uuid"!==s&&"isActive"!==s&&"isUserAuthorizedToFillAssessment"!==s&&"isOperationMember"!==s&&"isMemberRepresentative"!==s&&"dueDate"!==s?(null===(n=e[s])||void 0===n?void 0:n.length)<=28||"undefined"===typeof e[s]?(0,A.jsxs)(u.Z,{children:[" ",("undefined"===typeof e[s]||""===e[s])&&"N/A","string"===typeof e[s]&&(null===(i=e[s])||void 0===i?void 0:i.length)>0&&"email"!==s?e[s][0].toUpperCase()+(null===(l=e[s])||void 0===l?void 0:l.slice(1)):e[s]]},s):(0,A.jsx)(j.Z,{placement:"bottom-start",enterDelay:1e3,title:e[s],children:(0,A.jsx)(u.Z,{children:"string"===typeof e[s]&&"email"!==s?e[s][0].toUpperCase()+"".concat(null===(a=e[s])||void 0===a?void 0:a.slice(1,28),"..."):"".concat(null===(d=e[s])||void 0===d?void 0:d.slice(0,28),"...")},s)},s):"isActive"===s?(0,A.jsx)(u.Z,{className:"button-style ".concat(e[s]&&"button-style-success"),children:(0,A.jsx)("span",{children:e[s]?"Active":"Inactive"})},s):"dueDate"===s?(0,A.jsx)(u.Z,{className:"due-date-style ".concat(new Date(new Date(e[s]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()&&"due-date-style-success"),children:(0,A.jsx)("span",{children:null!==(o=e[s])&&void 0!==o?o:e[s]})},s):void 0})),(null===T||void 0===T?void 0:T.length)>0&&(0,A.jsxs)(u.Z,{children:[T.includes("visibility")&&(0,A.jsx)("span",{className:"icon",children:(0,A.jsx)(j.Z,{title:"View Assessment",children:(0,A.jsx)(l.Z,{onClick:()=>W(Y?e.uuid:e._id)})})}),T.includes("delete")&&(0,A.jsx)("span",{className:"icon",children:(0,A.jsx)(j.Z,{title:"Delete",children:(0,A.jsx)("img",{src:"/images/delete-icon.svg",onClick:()=>(e=>{O(e)})(e._id)})})}),T.includes("edit")&&(0,A.jsx)("span",{className:"icon",children:(0,A.jsx)(j.Z,{title:"Edit",children:(0,A.jsx)(n.Z,{onClick:()=>{return s=e.uuid,void q(s);var s}})})}),T.includes("send")&&("In Progress"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Re-opened"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Accepted"==(null===e||void 0===e?void 0:e.assessmentStatus))&&e.isUserAuthorizedToFillAssessment&&(0,A.jsx)("span",{className:"icon",children:(0,A.jsx)(j.Z,{title:"Assign to Operation Member",children:(0,A.jsx)(p.Z,{onClick:()=>V(e.uuid)})})}),T.includes("fill")&&e.isUserAuthorizedToFillAssessment&&(0,A.jsx)("span",{className:"icon",children:(0,A.jsx)(j.Z,{title:"Fill Assessment",children:(0,A.jsx)(i.Z,{onClick:()=>{return s=e.uuid,void K(s);var s}})})}),T.includes("download")&&(0,A.jsx)("span",{className:"icon",children:(0,A.jsx)(j.Z,{title:"Action plan",children:(0,A.jsx)(x.Z,{onClick:()=>{return s=e.uuid,void Q(s);var s}})})})]})]},null===e||void 0===e?void 0:e._id)}))}):(0,A.jsx)(c.Z,{children:(0,A.jsx)("tr",{children:(0,A.jsx)("td",{colSpan:"10",children:(0,A.jsx)("div",{className:"no-records-blk",children:(0,A.jsx)("h2",{className:"heading2",children:"No records available"})})})})})]})})})}),(null===t||void 0===t?void 0:t.length)>0&&(0,A.jsxs)("div",{className:"table-footer flex-between",children:[(0,A.jsxs)("div",{className:"table-footer-left",children:[(0,A.jsxs)("div",{className:"per-page-blk",children:[(0,A.jsx)("span",{className:"per-page-txt",children:"Records"}),(0,A.jsx)("div",{className:"per-page-dropdown",children:(0,A.jsx)("div",{className:"per-page-select-field",children:(0,A.jsxs)(f.Z,{value:g,onChange:e=>{C(e)},children:[(0,A.jsx)(y.Z,{value:"5",children:"05"}),(0,A.jsx)(y.Z,{value:"10",selected:!0,children:"10"}),(0,A.jsx)(y.Z,{value:"20",children:"20"})]})})})]}),(0,A.jsxs)("div",{className:"show-entries-txt",children:["showing ",(h-1)*g+1,"-",(h-1)*g+(null===t||void 0===t?void 0:t.length)," out of ",S]})]}),(0,A.jsx)("div",{className:"table-footer-right",children:(0,A.jsx)(w.Z,{spacing:2,className:"pagination-blk",children:(0,A.jsx)(k.Z,{page:h,count:Math.ceil(S/g),onChange:(e,s)=>{Z(s)},variant:"outlined",shape:"rounded"})})})]})]})}},27659:(e,s,t)=>{t.d(s,{Z:()=>o});var n=t(92131),i=t(5130),l=t(72791),a=t(29655),d=(t(5462),t(80184));const o=function(e){let{titleMessage:s,descriptionMessage:t,messageType:o,myRef:r,key:c}=e;const u=()=>{(0,a.Am)(m,{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"toastId"})},m=()=>(0,d.jsxs)("div",{className:"toaster-blk flex-start ".concat("success"===o&&"toaster-blk-success"),children:[(0,d.jsx)("div",{className:"toaster-left ".concat("success"===o&&"toaster-left-success"),children:(0,d.jsxs)("div",{className:"toaster-icon",children:["success"===o&&(0,d.jsx)(n.Z,{}),"error"===o&&(0,d.jsx)(i.Z,{})]})}),(0,d.jsx)("div",{className:"toaster-right",children:(0,d.jsx)("p",{children:t})})]});return(0,l.useEffect)((()=>{r.current=u}),[u,r]),(0,d.jsxs)("div",{className:"toaster-sect",children:[(0,d.jsx)("button",{style:{display:"none"},children:"Show Toast !"}),(0,d.jsx)(a.Ix,{className:"toaster-wrap ".concat("success"===o&&"toaster-wrap-success"," ")})]})}},12820:(e,s,t)=>{t.d(s,{Z:()=>i});var n=t(72791);const i=e=>{const[s,t]=(0,n.useState)(e),i=(0,n.useRef)([]);(0,n.useEffect)((()=>{i.current.forEach((e=>e(s))),i.current=[]}),[s]);return[s,(e,s)=>{t(e),s&&"function"===typeof s&&i.current.push(s)}]}},1260:(e,s,t)=>{t.d(s,{j:()=>i});var n=t(72791);const i=e=>((0,n.useEffect)((()=>{document.title="HRDD System - ".concat(e)}),[e]),null)},71605:()=>{}}]);
//# sourceMappingURL=6035.4f265471.chunk.js.map