"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5741],{4851:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var a=n(2982),r=n(4942),i=n(1413),s=n(885),l=n(8821),o=n(1346),d=n(9407),c=n(5473),u=n(2791),m=n(7689),v=n(9434),p=n(4917),g=n(6218),h=n(7659),f=n(7806),b=n(7340),y=n(8460),x=n(2820),Z=n(1260),j=n(4165),M=n(5861),w=n(4569),C=n.n(w),N=n(9106),A=n(8386),T=n(184),P={disablePadding:!1},S=[(0,i.Z)((0,i.Z)({id:"companyName"},P),{},{label:"Company"}),(0,i.Z)((0,i.Z)({id:"name"},P),{},{label:"Representative"}),(0,i.Z)((0,i.Z)({id:"email"},P),{},{label:"Email"}),(0,i.Z)((0,i.Z)({id:"companyType"},P),{},{label:"Company Type"}),(0,i.Z)((0,i.Z)({id:"totalOperationMembers"},P),{},{label:"Ops. Members"}),(0,i.Z)((0,i.Z)({id:"createdBy"},P),{},{label:"Created By"}),(0,i.Z)((0,i.Z)({id:"createdAt"},P),{},{label:"Created At"}),(0,i.Z)((0,i.Z)({id:"isActive"},P),{},{label:"Status"})],k=function(e){var t=e.onboardedPage,n=e.setOnboardedPage,r=e.makeApiCallMemberList,i=e.searchMember,l=e.searchTimeoutMemberList,o=e.setToasterDetailsMemberList,d=e.memberRef,c=e.checkViewAccess,v=(0,m.s0)(),h=(0,u.useState)(!1),f=(0,s.Z)(h,2),b=f[0],y=f[1],x=["_id","companyName","name","email","companyType","totalOperationMembers","createdBy","createdAt","isActive"],Z=(0,u.useState)(10),w=(0,s.Z)(Z,2),P=w[0],k=w[1],R=(0,u.useState)("asc"),B=(0,s.Z)(R,2),E=B[0],O=B[1],L=(0,u.useState)("initialRender"),D=(0,s.Z)(L,2),_=D[0],I=D[1],H=(0,u.useState)([]),V=(0,s.Z)(H,2),Y=V[0],F=V[1],z=(0,u.useState)(0),U=(0,s.Z)(z,2),J=U[0],K=U[1],q=function(){var e="".concat(g.Dl,"/list?page=").concat(t,"&size=").concat(P,"&orderBy=").concat({initialRender:"",companyName:"name",name:"representativeName",email:"representativeEmail",companyType:"companyType",totalOperationMembers:"operationMembersCount",createdBy:"createdBy",createdAt:"createdAt",isActive:"status"}[_],"&order=").concat(E);return i&&(e+="&search=".concat(i)),e},G=function(){var e=(0,M.Z)((0,j.Z)().mark((function e(t,n){var r,i,s,l,c,u,m,g,h,f,b,Z;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=q(),y(!0),e.next=5,C().get(r,{signal:n.signal});case 5:i=e.sent,K(parseInt(i.headers["x-total-count"])),p.Y.info("Onboarded members - getMembers handler"),y(!1),(j=null===i||void 0===i?void 0:i.data).forEach((function(e){var t,n,a,r,i,s,l,o;delete e.address,delete e.cgfActivity,delete e.cgfCategory,delete e.cgfOffice,delete e.cgfOfficeCountry,delete e.cgfOfficeRegion,delete e.city,delete e.corporateEmail,delete e.country,delete e.countryCode,delete e.parentCompany,delete e.phoneNumber,delete e.region,delete e.state,delete e.updatedAt,delete e.updatedBy,delete e.website,delete e.isDeleted,delete e.isReplaced,delete e.isMemberRepresentative,delete e.memberRepresentativeRole,delete e.__v,e.createdAt=null===(t=new Date(e.createdAt))||void 0===t?void 0:t.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),"object"===typeof e.createdBy?e.createdBy=null!==(a=null===e||void 0===e||null===(r=e.createdBy)||void 0===r?void 0:r.name)&&void 0!==a?a:"N/A":e.createdBy="N/A",e.representative?(e.email=null!==(i=null===(s=e.representative)||void 0===s?void 0:s.email)&&void 0!==i?i:"N/A",e.name=null!==(l=null===(o=e.representative)||void 0===o?void 0:o.name)&&void 0!==l?l:"N/A"):(e.email="N/A",e.name="N/A"),e.totalOperationMembers=null===(n=e.totalOperationMembers)||void 0===n?void 0:n.toString(),delete e.representative,delete e.memberRepresentativeId,x.forEach((function(t){var n=e[t];delete e[t],e[t]=n}))})),F((0,a.Z)(j)),e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(0),p.Y.info("Onboarded members - getMembers handler catch error ".concat(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=17;break}return e.abrupt("return");case 17:401===(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status)?(o({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return d.current()})),setTimeout((function(){v("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.status)?(o({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(m=e.t0.response)&&void 0!==m&&null!==(g=m.data)&&void 0!==g&&g.message?null===e.t0||void 0===e.t0||null===(h=e.t0.response)||void 0===h||null===(f=h.data)||void 0===f?void 0:f.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return d.current()})),setTimeout((function(){v("/home")}),3e3)):(y(!1),t&&o({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(b=e.t0.response)&&void 0!==b&&null!==(Z=b.data)&&void 0!==Z&&Z.message&&"string"===typeof e.t0.response.data.message?e.t0.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return d.current()})));case 18:case"end":return e.stop()}var j}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){var e=!0,t=new AbortController;return r&&G(e,t),function(){e=!1,clearTimeout(l),t.abort()}}),[t,P,_,E,r]),(0,T.jsx)(T.Fragment,{children:b?(0,T.jsx)(A.Z,{}):(0,T.jsx)(N.Z,{tableHead:S,records:Y,handleChangePage1:function(e){n(e)},handleChangeRowsPerPage1:function(e){k(parseInt(e.target.value,10)),n(1)},page:t,rowsPerPage:P,totalRecords:J,orderBy:_,onClickVisibilityIconHandler1:function(e){return v("/users/members/view-member/".concat(e))},order:E,setOrder:O,setOrderBy:I,setCheckBoxes:!1,onRowClick:c})})},R=n(4677),B=[{id:"name",disablePadding:!1,label:"Company"},{id:"representativeName",disablePadding:!1,label:"Representative"},{id:"representativeEmail",disablePadding:!1,label:"Email"},{id:"companyType",disablePadding:!1,label:"Company Type"},{id:"createdBy",disablePadding:!1,label:"Created By"},{id:"createdAt",disablePadding:!1,label:"Created At"}],E=function(e){var t=e.pendingPage,n=e.setPendingPage,a=e.makeApiCallMemberList,r=e.searchMember,i=(e.searchTimeoutMemberList,e.setToasterDetailsMemberList),l=e.memberRef,o=e.checkViewAccess,d=(0,m.s0)(),c=(0,u.useState)(!1),v=(0,s.Z)(c,2),h=v[0],f=v[1],b=(0,u.useState)(10),y=(0,s.Z)(b,2),x=y[0],Z=y[1],w=u.useState("desc"),C=(0,s.Z)(w,2),P=C[0],S=C[1],k=u.useState(""),E=(0,s.Z)(k,2),O=E[0],L=E[1],D=u.useState([]),_=(0,s.Z)(D,2),I=_[0],H=_[1],V=u.useState(0),Y=(0,s.Z)(V,2),F=Y[0],z=Y[1],U=["_id","companyName","name","email","companyType","createdBy","createdAt"],J=function(e){p.Y.info("Pending members - updatePendingRecords handler");var t=e;t.forEach((function(e){var t,n,a,r,i,s;e.email=null!==(t=null===e||void 0===e||null===(n=e.invite)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.email)&&void 0!==t?t:"N/A",e.name=null!==(r=null===e||void 0===e||null===(i=e.invite)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.name)&&void 0!==r?r:"N/A",e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),delete e.invite,delete e.updatedAt,U.forEach((function(t){var n=e[t];delete e[t],e[t]=n}))})),H(t)},K=function(){var e="".concat(g.Dl,"/pending/list?page=").concat(t,"&size=").concat(x,"&orderBy=").concat(O,"&order=").concat(P);return r.length>0&&(e+="&search=".concat(r)),e},q=function(){var e=(0,M.Z)((0,j.Z)().mark((function e(){var t,n,a,r,s,o,c,u,m,v,g,h,b,y,x=arguments;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(x.length>0&&void 0!==x[0])||x[0],n=x.length>1&&void 0!==x[1]?x[1]:new AbortController,e.prev=2,a=K(),f(!0),e.next=7,R.H.get(a,{signal:n.signal});case 7:r=e.sent,z(parseInt(r.headers["x-total-count"])),J(null===r||void 0===r?void 0:r.data),e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=16;break}return e.abrupt("return");case 16:p.Y.info("Pending member - getPendingMember catch error- ".concat(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message," ")),401==(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status)?(t&&i({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return l.current()})),setTimeout((function(){d("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.status)?(t&&i({titleMessage:"Oops!",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(m=e.t0.response)&&void 0!==m&&null!==(v=m.data)&&void 0!==v&&v.message?null===e.t0||void 0===e.t0||null===(g=e.t0.response)||void 0===g||null===(h=g.data)||void 0===h?void 0:h.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return l.current()})),setTimeout((function(){d("/home")}),3e3)):t&&i({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(b=e.t0.response)&&void 0!==b&&null!==(y=b.data)&&void 0!==y&&y.message&&"string"===typeof e.t0.response.data.message?e.t0.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return l.current()}));case 18:return e.prev=18,f(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,12,18,21]])})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){var e=!0,t=new AbortController;return a&&q(e,t),function(){e=!1,t.abort()}}),[a,t,x,O,P]),(0,T.jsx)(T.Fragment,{children:h?(0,T.jsx)(A.Z,{}):(0,T.jsx)(N.Z,{tableHead:B,records:I,handleChangePage1:function(e){n(e)},handleChangeRowsPerPage1:function(e){p.Y.info("Pending member - rowsPerPageChange handler"),Z(parseInt(e.target.value,10)),n(1)},onClickVisibilityIconHandler1:function(e){return d("/users/members/view-member/pending/".concat(e))},page:t,rowsPerPage:x,totalRecords:F,orderBy:O,setOrderBy:L,order:P,setOrder:S,setCheckBoxes:!1,onRowClick:o})})},O=["Erin","John","Maria","Rajkumar"],L=function(){var e,t,n,j;(0,Z.j)("Members");var M=(0,m.TH)().state,w=u.useState(M||0),C=(0,s.Z)(w,2),N=C[0],A=C[1],P=(0,m.s0)(),S=u.useRef(),R=(0,x.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),B=(0,s.Z)(R,2),L=B[0],D=B[1],_=(0,v.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.privilege})),I="Super Admin"===(null===_||void 0===_?void 0:_.name),H=(_?Object.values(null===_||void 0===_?void 0:_.privileges):[]).filter((function(e){var t;return"Members"===(null===e||void 0===e||null===(t=e.moduleId)||void 0===t?void 0:t.name)})).map((function(e){return{member:{list:null===e||void 0===e?void 0:e.list,view:null===e||void 0===e?void 0:e.view,edit:null===e||void 0===e?void 0:e.edit,delete:null===e||void 0===e?void 0:e.delete,add:null===e||void 0===e?void 0:e.add}}})),V=!!I||(null===(e=H[0])||void 0===e||null===(t=e.member)||void 0===t?void 0:t.view),Y=(0,u.useState)(1),F=(0,s.Z)(Y,2),z=F[0],U=F[1],J=(0,u.useState)(1),K=(0,s.Z)(J,2),q=K[0],G=K[1],Q=(0,u.useState)(null),W=(0,s.Z)(Q,2),X=W[0],$=W[1],ee=(0,u.useState)(!0),te=(0,s.Z)(ee,2),ne=te[0],ae=te[1],re=(0,u.useState)(""),ie=(0,s.Z)(re,2),se=ie[0],le=ie[1],oe=(0,u.useState)({companyType:"none",status:"none"}),de=(0,s.Z)(oe,2),ce=de[0],ue=de[1],me=(0,u.useState)(["none"]),ve=(0,s.Z)(me,2),pe=ve[0],ge=ve[1],he=(0,u.useState)(""),fe=(0,s.Z)(he,2),be=fe[0],ye=fe[1],xe=pe.length>1&&pe.length-1===O.length,Ze=function(e){ye(e)},je=function(e){var t=e.target,n=t.name,a=t.value;ue((0,i.Z)((0,i.Z)({},ce),{},(0,r.Z)({},n,a)))};return(0,u.useEffect)((function(){A(M||0),P("",{state:0})}),[]),(0,T.jsxs)("div",{className:"page-wrapper",children:[(0,T.jsx)(h.Z,{myRef:S,titleMessage:L.titleMessage,descriptionMessage:L.descriptionMessage,messageType:L.messageType}),(0,T.jsx)("section",{children:(0,T.jsxs)("div",{className:"container",children:[(0,T.jsxs)("div",{className:"form-header member-form-header flex-between",children:[(0,T.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,T.jsx)("h2",{className:"heading2 mr-40",children:"Members"})}),(0,T.jsxs)("div",{className:"form-header-right-txt",children:[0===N&&(0,T.jsxs)("div",{className:"tertiary-btn-blk mr-20",onClick:function(){return(0,f.j)("Members",D,!1,S,g.MZ,P)},children:[(0,T.jsx)("span",{className:"download-icon",children:(0,T.jsx)(l.Z,{})}),"Download"]}),(I||(null===(n=H[0])||void 0===n||null===(j=n.member)||void 0===j?void 0:j.add))&&0===N&&(0,T.jsx)("div",{className:"form-btn",children:(0,T.jsx)("button",{type:"submit",className:"primary-button add-button",onClick:function(){return P("/users/members/add-member")},children:"Add Member"})})]})]}),(0,T.jsx)("div",{className:"member-filter-sect",children:(0,T.jsxs)("div",{className:"member-filter-wrap flex-between",children:[(0,T.jsx)("div",{className:"member-tab-left",children:(0,T.jsx)(b.Z,{value:N,handleChange:function(e,t){G(1),U(1),A(t)}})}),(0,T.jsx)("div",{className:"member-filter-left",children:(0,T.jsxs)("div",{className:"searchbar",children:[(0,T.jsx)("input",{type:"text",value:se,name:"search",placeholder:"Search",onKeyDown:function(e){"Enter"===e.key&&(ae(!0),U(1))},onChange:function(e){p.Y.info("Member list - onSearchChangeHandler handler"),X&&clearTimeout(X),ae(!1),le(e.target.value),$(setTimeout((function(){ae(!0),U(1),G(1)}),1e3))}}),(0,T.jsx)("button",{type:"submit",children:(0,T.jsx)("i",{className:"fa fa-search"})})]})}),(0,T.jsx)("div",{className:"member-filter-right",children:(0,T.jsxs)("div",{className:"filter-select-wrap flex-between",children:[(0,T.jsx)("div",{className:"filter-select-field",children:(0,T.jsx)("div",{className:"dropdown-field",children:(0,T.jsxs)(o.Z,{sx:{display:"none"},name:"companyType",value:ce.companyType,onChange:je,onFocus:function(e){return Ze("companyType")},children:[(0,T.jsx)(d.Z,{value:"none",sx:{display:"companyType"===be&&"none"},children:"Company Type"}),(0,T.jsx)(d.Z,{value:"Internal",children:"Internal"}),(0,T.jsx)(d.Z,{value:"External",children:"External"})]})})}),(0,T.jsx)("div",{className:"filter-select-field",children:(0,T.jsx)("div",{className:"dropdown-field",children:(0,T.jsxs)(o.Z,{sx:{display:"none"},name:"createdBy",multiple:!0,value:pe,onChange:function(e){var t=e.target,n=(t.name,t.value);if(""===n[n.length-1])return pe.length-1===O.length?ge(["none"]):ge(["none"].concat(O));ge((0,a.Z)(n))},onFocus:function(e){return Ze("createdBy")},renderValue:function(e){return pe.length>1?e.slice(1).join(", "):"Created By"},children:[(0,T.jsx)(d.Z,{value:"none",sx:{display:"createdBy"===be&&"none"},children:"Created By"}),(0,T.jsxs)(d.Z,{value:"",children:[(0,T.jsx)(c.Z,{className:"table-checkbox",checked:xe,indeterminate:pe.length>1&&pe.length-1<O.length}),"Select All"]}),O.map((function(e){return(0,T.jsxs)(d.Z,{value:e,children:[(0,T.jsx)(c.Z,{className:"table-checkbox",checked:(null===pe||void 0===pe?void 0:pe.indexOf(e))>-1}),e]},e)}))]})})}),(0,T.jsx)("div",{className:"filter-select-field",children:(0,T.jsx)("div",{className:"dropdown-field",children:(0,T.jsxs)(o.Z,{sx:{display:"none"},name:"status",value:ce.status,onChange:je,onFocus:function(e){return Ze("status")},children:[(0,T.jsx)(d.Z,{value:"none",sx:{display:"status"===be&&"none"},children:"Status"}),(0,T.jsx)(d.Z,{value:"active",children:"Active"}),(0,T.jsx)(d.Z,{value:"inactive",children:"Inactive"})]})})})]})})]})}),(0,T.jsxs)("div",{className:"member-info-wrapper table-content-wrap table-footer-btm-space",children:[(0,T.jsx)(y.x,{value:N,index:0,children:(0,T.jsx)(k,{onboardedPage:z,setOnboardedPage:U,makeApiCallMemberList:ne,searchMember:se,searchTimeoutMemberList:X,setToasterDetailsMemberList:D,memberRef:S,checkViewAccess:V})}),(0,T.jsx)(y.x,{value:N,index:1,children:(0,T.jsx)(E,{pendingPage:q,setPendingPage:G,makeApiCallMemberList:ne,searchMember:se,searchTimeoutMemberList:X,setToasterDetailsMemberList:D,memberRef:S,checkViewAccess:V})})]})]})})]})}}}]);
//# sourceMappingURL=5741.e06b0331.chunk.js.map