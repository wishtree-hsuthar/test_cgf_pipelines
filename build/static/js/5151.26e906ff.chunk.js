"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5151],{15151:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var l=t(58406),a=t(63903),n=t(74569),i=t.n(n),r=t(72791),c=t(57689),d=t(53073),o=(t(71605),t(76218)),u=t(27659),h=t(12820),m=t(1260),v=t(14917),x=t(28386),g=t(80184);const p=[{id:"name",disablePadding:!1,label:"Roles"},{id:"totalCgfAdmins",disablePadding:!1,label:"Users"},{id:"createdAt",disablePadding:!1,label:"Created On"},{id:"isActive",disablePadding:!1,label:"Status"}],j=()=>{(0,m.j)("Roles");const e=r.useRef(),[s,t]=(0,h.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),[n,j]=(0,r.useState)(!1),[b,f]=(0,r.useState)("none"),[k,y]=(0,r.useState)(!0),C=(0,c.s0)(),N=["_id","name","totalCgfAdmins","createdAt","isActive"],[Z,w]=(0,r.useState)(""),[S,A]=(0,r.useState)({status:"none"}),[R,P]=(0,r.useState)("none"===S.status),[_,M]=r.useState(1),[T,D]=r.useState(10),[E,O]=r.useState("desc"),[B,F]=r.useState(""),[H,I]=r.useState([]),[U,z]=r.useState(0),L=async function(){let s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new AbortController;try{let e=(()=>{let e="".concat(o.Yn,"roles/list?page=").concat(_,"&size=").concat(T,"&orderBy=").concat(B,"&order=").concat(E);return Z&&(e+="&search=".concat(Z)),"none"!==(null===S||void 0===S?void 0:S.status)&&"all"!==(null===S||void 0===S?void 0:S.status)&&(e+="&status=".concat(S.status)),e})();j(!0);const s=await i().get(e,{signal:l.signal});v.Y.info("Role list - getRoles handler"),z(parseInt(s.headers["x-total-count"])),(x=s.data).forEach((e=>{var s,t;delete e.updatedAt,delete e.description,delete e.isDeleted,delete e.__v,delete e.cgfAdmins,e.totalCgfAdmins=null!==(s=null===e||void 0===e||null===(t=e.totalCgfAdmins)||void 0===t?void 0:t.toString())&&void 0!==s?s:"0",e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),N.forEach((s=>{const t=e[s];delete e[s],e[s]=t}))})),I([...x]),j(!1)}catch(g){var a,n;if("ERR_CANCELED"===(null===g||void 0===g?void 0:g.code))return;if(401===(null===g||void 0===g||null===(a=g.response)||void 0===a?void 0:a.status))t({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(()=>e.current())),setTimeout((()=>{C("/login")}),3e3);else if(403===(null===g||void 0===g||null===(n=g.response)||void 0===n?void 0:n.status)){var r,c,d,u;t({titleMessage:"Error",descriptionMessage:null!==g&&void 0!==g&&null!==(r=g.response)&&void 0!==r&&null!==(c=r.data)&&void 0!==c&&c.message?null===g||void 0===g||null===(d=g.response)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>e.current())),setTimeout((()=>{C("/home")}),3e3)}else{var h,m;s&&t({titleMessage:"Error",descriptionMessage:null!==g&&void 0!==g&&null!==(h=g.response)&&void 0!==h&&null!==(m=h.data)&&void 0!==m&&m.message&&"string"===typeof g.response.data.message?g.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>e.current())),j(!1)}}var x};return(0,r.useEffect)((()=>{let e=!0;const s=new AbortController;return k&&L(e,s),()=>{e=!1,clearTimeout(b),s.abort()}}),[_,T,B,E,S,k]),(0,g.jsxs)("div",{className:"page-wrapper",children:[(0,g.jsx)(u.Z,{myRef:e,titleMessage:s.titleMessage,descriptionMessage:s.descriptionMessage,messageType:s.messageType}),(0,g.jsx)("section",{children:(0,g.jsx)("div",{className:"container",children:(0,g.jsxs)("div",{className:"member-filter-sect",children:[(0,g.jsxs)("div",{className:"form-header member-form-header flex-between mb-0",children:[(0,g.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,g.jsx)("h2",{className:"heading2 mr-40",children:"Roles"})}),(0,g.jsxs)("div",{className:"form-header-right-txt search-and-btn-field-right",children:[(0,g.jsx)("div",{className:"search-and-btn-field-blk",children:(0,g.jsxs)("div",{className:"searchbar",children:[(0,g.jsx)("input",{type:"text",placeholder:"Search",onChange:e=>{v.Y.info("Role list - onSearchChangeHandler handler"),b&&clearTimeout(b),y(!1),w(e.target.value),f(setTimeout((()=>{y(!0),M(1)}),1e3))},onKeyDown:e=>{"Enter"===e.key&&(y(!0),M(1))},value:Z,name:"search"}),(0,g.jsx)("button",{type:"submit",children:(0,g.jsx)("i",{className:"fa fa-search"})})]})}),(0,g.jsx)("div",{className:"form-btn",children:(0,g.jsx)("button",{type:"submit",className:"primary-button add-button",onClick:()=>C("/roles/add-role"),children:"Add Role"})})]})]}),(0,g.jsx)("div",{className:"member-filter-wrap flex-between",children:(0,g.jsx)("div",{className:"member-filter-right",children:(0,g.jsx)("div",{className:"filter-select-wrap flex-between",children:(0,g.jsx)("div",{className:"filter-select-field",children:(0,g.jsx)("div",{className:"dropdown-field",children:(0,g.jsxs)(l.Z,{sx:{display:"none"},displayEmpty:!0,name:"status",value:S.status,onChange:e=>{v.Y.info("Role list - onFilterChangeHandler handler"),M(1),A({...S,[e.target.name]:e.target.value})},onFocus:e=>P(!1),onClose:e=>P(void 0===e.target.value),children:[(0,g.jsx)(a.Z,{value:"none",disabled:!0,sx:{display:!R&&"none"},children:"Status"}),(0,g.jsx)(a.Z,{value:"active",children:"active"}),(0,g.jsx)(a.Z,{value:"inactive",children:"inactive"}),(0,g.jsx)(a.Z,{value:"all",children:"All"})]})})})})})}),n?(0,g.jsx)(x.Z,{}):(0,g.jsx)("div",{className:"member-info-wrapper table-content-wrap table-content-width table-footer-btm-space",children:(0,g.jsx)(d.Z,{tableHead:p,records:H,handleChangePage1:e=>{M(e)},handleChangeRowsPerPage1:e=>{D(parseInt(e.target.value,10)),M(1)},page:_,rowsPerPage:T,totalRecords:U,orderBy:B,onClickVisibilityIconHandler1:e=>C("view-role/".concat(e)),order:E,setOrder:O,setOrderBy:F,setCheckBoxes:!1,onRowClick:!0})})]})})})]})}},53073:(e,s,t)=>{t.d(s,{Z:()=>w});var l=t(7195),a=t(59140),n=t(77194),i=t(697),r=t(94454),c=t(35527),d=t(79836),o=t(53382),u=t(53994),h=t(39281),m=t(56890),v=t(35855),x=t(80720),g=(t(72791),t(50922)),p=t(61419),j=t(96816),b=(t(14917),t(20068)),f=t(58406),k=t(63903),y=t(53767),C=t(57246),N=(t(71605),t(80184));function Z(e){const{onSelectAllClick:s,order:t,orderBy:l,tableHead:a,numSelected:n,rowCount:i,onRequestSort:c,setCheckBoxes:d}=e;return(0,N.jsx)(m.Z,{children:(0,N.jsxs)(v.Z,{children:[d&&(0,N.jsx)(u.Z,{padding:"checkbox",className:"table-checkbox",children:(0,N.jsx)(r.Z,{color:"primary",indeterminate:n>0&&n<i,checked:i>0&&n===i,onChange:s,inputProps:{"aria-label":"select all desserts"},className:"checkbox-mui"})}),a.map((e=>{return(0,N.jsxs)(u.Z,{width:null===e||void 0===e?void 0:e.width,align:"left",padding:e.disablePadding?"none":"normal",className:"table-header",children:["action"!==e.id&&(0,N.jsx)(x.Z,{active:l===e.id,direction:l===e.id?t:"asc",onClick:(s=e.id,e=>{c(e,s)}),className:"sorted-blk",children:e.label}),"action"===e.id&&(0,N.jsx)("span",{className:"sorted-blk",children:e.label})]},e.id);var s}))]})})}function w(e){let{tableHead:s,records:t,page:m=1,rowsPerPage:x=10,handleChangeRowsPerPage1:w,handleChangePage1:S,totalRecords:A,orderBy:R,setOrderBy:P,icons:_,onClickVisibilityIconHandler1:M,onClickDeleteIconHandler1:T,selected:D=[],setSelected:E,order:O="asc",setOrder:B,setCheckBoxes:F=!0,setSingleSelect:H=!1,handleSingleUserSelect:I,selectedUser:U,onRowClick:z=!1,isQuestionnare:L=!1,onClickEditAssesmentFunction:Y,onClickAssignAssesmentFunction:V,onClickFillAssessmentFunction:q,viewAssessment:K=!1,onClickActionPlanDownload:Q}=e;console.log("icons - ",_);const W=(e,s)=>{M(e,s||!1)};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i.Z,{sx:{width:"100%"},className:F?"table-blk":"table-blk table-blk-without-checkbox",children:(0,N.jsx)(c.Z,{sx:{width:"100%",mb:2},children:(0,N.jsx)(h.Z,{children:(0,N.jsxs)(d.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,N.jsx)(Z,{numSelected:D.length,order:O,orderBy:R,tableHead:s,onSelectAllClick:e=>{if(e.target.checked){const e=t.map((e=>e._id));E(e)}else E([])},onRequestSort:(e,s)=>{B(R===s&&"asc"===O?"desc":"asc"),P(s)},rowCount:t.length,setCheckBoxes:F}),(null===t||void 0===t?void 0:t.length)>0?(0,N.jsx)(o.Z,{children:t.map(((e,s)=>{const t=(i=e._id,-1!==D.indexOf(i));var i;const c="enhanced-table-checkbox-".concat(s);return(0,N.jsxs)(v.Z,{hover:!0,onClick:()=>z&&W(L?e.uuid:e._id,(null===e||void 0===e?void 0:e.isOperationMember)||(null===e||void 0===e?void 0:e.isMemberRepresentative)),style:{cursor:z&&"pointer"},role:"checkbox","aria-checked":t,tabIndex:-1,selected:t,children:[F&&(0,N.jsx)(u.Z,{padding:"checkbox",children:(0,N.jsx)(r.Z,{className:"table-checkbox",color:"primary",onClick:s=>((e,s)=>{const t=D.indexOf(s);let l=[];-1===t?l=l.concat(D,s):0===t?l=l.concat(D.slice(1)):t===D.length-1?l=l.concat(D.slice(0,-1)):t>0&&(l=l.concat(D.slice(0,t),D.slice(t+1))),E(l)})(0,e._id),checked:t,inputProps:{"aria-labelledby":c}})}),H&&(0,N.jsx)(u.Z,{children:(0,N.jsx)("div",{className:"radio-btn-field",children:(0,N.jsx)(p.Z,{className:"radio-btn",color:"primary",value:e._id,onChange:()=>(e=>{I(e)})(e._id),checked:U==e._id,inputProps:{"aria-labelledby":c}})})}),Object.keys(e).map(((s,t)=>{var l,a,n,i,r,c;return"_id"!==s&&"uuid"!==s&&"isActive"!==s&&"isUserAuthorizedToFillAssessment"!==s&&"isOperationMember"!==s&&"isMemberRepresentative"!==s&&"dueDate"!==s?(null===(l=e[s])||void 0===l?void 0:l.length)<=28||"undefined"===typeof e[s]?(0,N.jsxs)(u.Z,{children:[" ",("undefined"===typeof e[s]||""===e[s])&&"N/A","string"===typeof e[s]&&(null===(a=e[s])||void 0===a?void 0:a.length)>0&&"email"!==s?e[s][0].toUpperCase()+(null===(n=e[s])||void 0===n?void 0:n.slice(1)):e[s]]},s):(0,N.jsx)(b.Z,{placement:"bottom-start",enterDelay:1e3,title:e[s],children:(0,N.jsx)(u.Z,{children:"string"===typeof e[s]&&"email"!==s?e[s][0].toUpperCase()+"".concat(null===(i=e[s])||void 0===i?void 0:i.slice(1,28),"..."):"".concat(null===(r=e[s])||void 0===r?void 0:r.slice(0,28),"...")},s)},s):"isActive"===s?(0,N.jsx)(u.Z,{className:"button-style ".concat(e[s]&&"button-style-success"),children:(0,N.jsx)("span",{children:e[s]?"Active":"Inactive"})},s):"dueDate"===s?(0,N.jsx)(u.Z,{className:"due-date-style ".concat(new Date(new Date(e[s]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()&&"due-date-style-success"),children:(0,N.jsx)("span",{children:null!==(c=e[s])&&void 0!==c?c:e[s]})},s):void 0})),(null===_||void 0===_?void 0:_.length)>0&&(0,N.jsxs)(u.Z,{children:[_.includes("visibility")&&(0,N.jsx)("span",{className:"icon",children:(0,N.jsx)(b.Z,{title:"View Assessment",children:(0,N.jsx)(n.Z,{onClick:()=>W(K?e.uuid:e._id)})})}),_.includes("delete")&&(0,N.jsx)("span",{className:"icon",children:(0,N.jsx)(b.Z,{title:"Delete",children:(0,N.jsx)("img",{src:"/images/delete-icon.svg",onClick:()=>(e=>{T(e)})(e._id)})})}),_.includes("edit")&&(0,N.jsx)("span",{className:"icon",children:(0,N.jsx)(b.Z,{title:"Edit",children:(0,N.jsx)(l.Z,{onClick:()=>{return s=e.uuid,void Y(s);var s}})})}),_.includes("send")&&("In Progress"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Re-opened"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Accepted"==(null===e||void 0===e?void 0:e.assessmentStatus))&&e.isUserAuthorizedToFillAssessment&&(0,N.jsx)("span",{className:"icon",children:(0,N.jsx)(b.Z,{title:"Assign to Operation Member",children:(0,N.jsx)(g.Z,{onClick:()=>V(e.uuid)})})}),_.includes("fill")&&e.isUserAuthorizedToFillAssessment&&(0,N.jsx)("span",{className:"icon",children:(0,N.jsx)(b.Z,{title:"Fill Assessment",children:(0,N.jsx)(a.Z,{onClick:()=>{return s=e.uuid,void q(s);var s}})})}),_.includes("download")&&(0,N.jsx)("span",{className:"icon",children:(0,N.jsx)(b.Z,{title:"Action plan",children:(0,N.jsx)(j.Z,{onClick:()=>{return s=e.uuid,void Q(s);var s}})})})]})]},null===e||void 0===e?void 0:e._id)}))}):(0,N.jsx)(o.Z,{children:(0,N.jsx)("tr",{children:(0,N.jsx)("td",{colSpan:"10",children:(0,N.jsx)("div",{className:"no-records-blk",children:(0,N.jsx)("h2",{className:"heading2",children:"No records available"})})})})})]})})})}),(null===t||void 0===t?void 0:t.length)>0&&(0,N.jsxs)("div",{className:"table-footer flex-between",children:[(0,N.jsxs)("div",{className:"table-footer-left",children:[(0,N.jsxs)("div",{className:"per-page-blk",children:[(0,N.jsx)("span",{className:"per-page-txt",children:"Records"}),(0,N.jsx)("div",{className:"per-page-dropdown",children:(0,N.jsx)("div",{className:"per-page-select-field",children:(0,N.jsxs)(f.Z,{value:x,onChange:e=>{w(e)},children:[(0,N.jsx)(k.Z,{value:"5",children:"05"}),(0,N.jsx)(k.Z,{value:"10",selected:!0,children:"10"}),(0,N.jsx)(k.Z,{value:"20",children:"20"})]})})})]}),(0,N.jsxs)("div",{className:"show-entries-txt",children:["showing ",(m-1)*x+1,"-",(m-1)*x+(null===t||void 0===t?void 0:t.length)," out of ",A]})]}),(0,N.jsx)("div",{className:"table-footer-right",children:(0,N.jsx)(y.Z,{spacing:2,className:"pagination-blk",children:(0,N.jsx)(C.Z,{page:m,count:Math.ceil(A/x),onChange:(e,s)=>{S(s)},variant:"outlined",shape:"rounded"})})})]})]})}},27659:(e,s,t)=>{t.d(s,{Z:()=>c});var l=t(92131),a=t(5130),n=t(72791),i=t(29655),r=(t(5462),t(80184));const c=function(e){let{titleMessage:s,descriptionMessage:t,messageType:c,myRef:d,key:o}=e;const u=()=>{(0,i.Am)(h,{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"toastId"})},h=()=>(0,r.jsxs)("div",{className:"toaster-blk flex-start ".concat("success"===c&&"toaster-blk-success"),children:[(0,r.jsx)("div",{className:"toaster-left ".concat("success"===c&&"toaster-left-success"),children:(0,r.jsxs)("div",{className:"toaster-icon",children:["success"===c&&(0,r.jsx)(l.Z,{}),"error"===c&&(0,r.jsx)(a.Z,{})]})}),(0,r.jsx)("div",{className:"toaster-right",children:(0,r.jsx)("p",{children:t})})]});return(0,n.useEffect)((()=>{d.current=u}),[u,d]),(0,r.jsxs)("div",{className:"toaster-sect",children:[(0,r.jsx)("button",{style:{display:"none"},children:"Show Toast !"}),(0,r.jsx)(i.Ix,{className:"toaster-wrap ".concat("success"===c&&"toaster-wrap-success"," ")})]})}},12820:(e,s,t)=>{t.d(s,{Z:()=>a});var l=t(72791);const a=e=>{const[s,t]=(0,l.useState)(e),a=(0,l.useRef)([]);(0,l.useEffect)((()=>{a.current.forEach((e=>e(s))),a.current=[]}),[s]);return[s,(e,s)=>{t(e),s&&"function"===typeof s&&a.current.push(s)}]}},1260:(e,s,t)=>{t.d(s,{j:()=>a});var l=t(72791);const a=e=>((0,l.useEffect)((()=>{document.title="HRDD System - ".concat(e)}),[e]),null)},71605:()=>{}}]);
//# sourceMappingURL=5151.26e906ff.chunk.js.map