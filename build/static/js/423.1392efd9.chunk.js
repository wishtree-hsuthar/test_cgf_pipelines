"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[423],{1118:function(e,t,n){n.r(t);var r=n(4942),i=n(4165),a=n(5861),l=n(1413),s=n(885),c=n(8588),o=n(7265),d=n(2900),u=n(6321),m=n(6015),h=n(6650),p=n(9963),x=n(1680),v=n(9773),f=n(807),Z=n(4390),b=n(5473),g=n(2791),j=n(1134),k=n(7689),w=n(1087),N=n(4569),y=n.n(N),C=n(4917),S=n(7444),M=(n(1605),n(2820)),E=(n(385),n(6218)),R=n(1260),Y=n(4227),z=n(8386),O=n(5736),I=n(184);t.default=function(){(0,R.j)("Edit Role");var e=(0,k.UO)(),t=(0,g.useState)(!1),n=(0,s.Z)(t,2),N=n[0],T=n[1],P=(0,k.s0)(),_=(0,M.Z)({titleMessage:"",descriptionMessage:"",messageType:""}),A=(0,s.Z)(_,2),L=A[0],V=A[1],F=g.useRef(),H={roleName:"",status:"",description:""},B={},q=(0,g.useState)((0,l.Z)({},B)),D=(0,s.Z)(q,2),U=D[0],Q=D[1],J=(0,g.useState)(!1),K=(0,s.Z)(J,2),W=K[0],G=K[1],X=(0,g.useState)(!1),$=(0,s.Z)(X,2),ee=($[0],$[1],(0,j.cI)({defaultValues:H})),te=ee.control,ne=ee.reset,re=ee.setValue,ie=ee.handleSubmit,ae={description:{required:"Enter the description",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required"}},le=function(e){return Object.values(e).some((function(e){return Object.values(e).some((function(e){return e}))}))},se=function(){var t=(0,a.Z)((0,i.Z)().mark((function t(n){var r,a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,C.Y.debug("input Data: ",n,"Previleges: ",U),r=JSON.parse(JSON.stringify(U)),Object.keys(r).forEach((function(e){delete r[e].all,delete r[e].name})),le(r)){t.next=7;break}return V({titleMessage:"Hurray!",descriptionMessage:"Select atleast 1 privilege",messageType:"error"},(function(){return F.current()})),t.abrupt("return");case 7:return T(!0),C.Y.debug("previleges : ",r),G(!0),t.next=12,y().put(E.Yn+"roles/".concat(e.id),{description:n.description,isActive:"active"===n.status,privileges:r});case 12:a=t.sent,C.Y.debug("response",a),200==a.status&&(T(!1),V({titleMessage:"Success!",descriptionMessage:a.data.message,messageType:"success"},(function(){return F.current()})),C.Y.debug("Default Values",H),ne({roleName:"",status:"active",description:""}),setTimeout((function(){return P("/roles/view-role/".concat(e.id))}),3e3)),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(0),C.Y.debug("error",t.t0),G(!1),(0,O.K)(t.t0,V,F,P);case 22:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),ce=function(e){var t;C.Y.debug("previleges",e.privileges),ne({roleName:e.name,status:e.isActive?"active":"inactive",description:e.description}),t=e.privileges,C.Y.debug("temp data",t),Object.keys(t).forEach((function(e){B[e]={add:t[e].add,fill:t[e].fill,delete:t[e].delete,edit:t[e].edit,list:t[e].list,view:t[e].view,all:t[e].add&&t[e].delete&&t[e].edit&&t[e].view&&t[e].list&&("Assessment"!==t[e].moduleId.name||t[e].fill),name:t[e].moduleId.name}})),C.Y.debug("temp",B),Q((0,l.Z)({},B))},oe=function(){var t=(0,a.Z)((0,i.Z)().mark((function t(n,r){var a;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,T(!0),t.next=4,y().get(E.Yn+"roles/".concat(e.id),{signal:r.signal});case 4:a=t.sent,C.Y.debug("response: ",a),ce(a.data),T(!1),t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),C.Y.debug("Error",t.t0),"ERR_CANCELED"!==(null===t.t0||void 0===t.t0?void 0:t.t0.code)){t.next=15;break}return t.abrupt("return");case 15:T(!1),(0,O.K)(t.t0,V,F,P);case 17:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}();return(0,g.useEffect)((function(){var e=!0,t=new AbortController;return e&&oe(e,t),function(){e=!1,t.abort()}}),[]),C.Y.debug("Privilege",U),(0,I.jsxs)("div",{className:"page-wrapper",children:[(0,I.jsx)(S.Z,{myRef:F,titleMessage:L.titleMessage,descriptionMessage:L.descriptionMessage,messageType:L.messageType}),(0,I.jsx)("div",{className:"breadcrumb-wrapper",children:(0,I.jsx)("div",{className:"container",children:(0,I.jsxs)("ul",{className:"breadcrumb",children:[(0,I.jsx)("li",{children:(0,I.jsx)(w.rU,{to:"/roles",children:"Roles"})}),(0,I.jsx)("li",{children:(0,I.jsx)(w.rU,{to:"/roles/view-role/".concat(e.id),children:"View Role"})}),(0,I.jsx)("li",{children:"Edit Role"})]})})}),(0,I.jsx)("section",{children:(0,I.jsxs)("div",{className:"container",children:[(0,I.jsx)("div",{className:"form-header flex-between",children:(0,I.jsx)("h2",{className:"heading2",children:"Edit Role"})}),N?(0,I.jsx)(z.Z,{}):(0,I.jsx)("form",{onSubmit:ie(se),children:(0,I.jsxs)("div",{className:"card-wrapper",children:[(0,I.jsxs)("div",{className:"card-blk flex-between",children:[(0,I.jsx)("div",{className:"card-form-field",children:(0,I.jsxs)("div",{className:"form-group",children:[(0,I.jsxs)("label",{htmlFor:"roleName",children:["Role Name ",(0,I.jsx)("span",{className:"mandatory",children:"*"})]}),(0,I.jsx)(j.Qr,{name:"roleName",control:te,render:function(e){var t=e.field,n=e.fieldState.error;return(0,I.jsx)(c.Z,(0,l.Z)((0,l.Z)({disabled:!0},t),{},{className:"input-field ".concat(n&&"input-error"),id:"outlined-basic",placeholder:"Enter role name",variant:"outlined",helperText:" "}))}})]})}),(0,I.jsx)("div",{className:"card-form-field",children:(0,I.jsxs)("div",{className:"form-group",children:[(0,I.jsx)("label",{htmlFor:"status",children:"Status"}),(0,I.jsx)("div",{className:"radio-btn-field",children:(0,I.jsx)(j.Qr,{name:"status",control:te,render:function(e){var t=e.field;return(0,I.jsxs)(o.Z,(0,l.Z)((0,l.Z)({},t),{},{"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",className:"radio-btn",children:[(0,I.jsx)(d.Z,{value:"active",control:(0,I.jsx)(u.Z,{}),label:"Active"}),(0,I.jsx)(d.Z,{value:"inactive",control:(0,I.jsx)(u.Z,{}),label:"Inactive"})]}))}})})]})}),(0,I.jsx)("div",{className:"card-form-field fullwidth",children:(0,I.jsxs)("div",{className:"form-group",children:[(0,I.jsxs)("label",{htmlFor:"description",children:["Description ",(0,I.jsx)("span",{className:"mandatory",children:"*"})]}),(0,I.jsx)(j.Qr,{name:"description",rules:{required:!0,maxLength:500,minLength:3},control:te,render:function(e){var t=e.field,n=e.fieldState.error;return(0,I.jsx)(c.Z,(0,l.Z)((0,l.Z)({multiline:!0},t),{},{onBlur:function(e){return re("description",e.target.value.trim())},inputProps:{maxLength:500},className:"input-textarea ".concat(n&&"input-textarea-error"),id:"outlined-basic",placeholder:"Enter description",helperText:n?ae.description[n.type]:" ",variant:"outlined"}))}})]})})]}),(0,I.jsx)(m.Z,{sx:{width:"100%"},className:"table-blk table-blk-role",children:(0,I.jsx)(h.Z,{sx:{width:"100%"},children:(0,I.jsx)(p.Z,{children:(0,I.jsxs)(x.Z,{sx:{minWidth:750},children:[(0,I.jsx)(Y.Z,{}),(0,I.jsx)(v.Z,{children:Object.keys(U).map((function(e,t){return(0,I.jsxs)(f.Z,{hover:!0,children:[(0,I.jsx)(Z.Z,{children:U[e].name}),(0,I.jsx)(Z.Z,{align:"center",padding:"checkbox",children:"Assessment"===U[e].name&&(0,I.jsx)(b.Z,{className:"table-checkbox",checked:U[e].fill,onChange:function(){return Q((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},e,(0,l.Z)((0,l.Z)({},t[e]),{},{fill:!t[e].fill,list:t[e].list||!t[e].fill,view:t[e].view||!t[e].fill,all:!t[e].fill&&t[e].add&&t[e].edit&&t[e].delete})))}))}})}),(0,I.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,I.jsx)(b.Z,{className:"table-checkbox",checked:U[e].list,onChange:function(){return Q((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},e,(0,l.Z)((0,l.Z)({},t[e]),{},{list:!t[e].list,view:t[e].view&&!t[e].list||!1,edit:t[e].edit&&!t[e].list||!1,delete:t[e].delete&&!t[e].list||!1,add:t[e].add&&!t[e].list||!1,fill:t[e].fill&&!t[e].list||!1,all:!t[e].list&&t[e].add&&t[e].edit&&t[e].view&&t[e].delete})))}))}})}),(0,I.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,I.jsx)(b.Z,{className:"table-checkbox",checked:U[e].add,onChange:function(){return Q((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},e,(0,l.Z)((0,l.Z)({},t[e]),{},{add:!t[e].add,list:t[e].list||!t[e].add,view:t[e].view||!t[e].add,all:!t[e].add&&t[e].edit&&t[e].delete})))}))}})}),(0,I.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,I.jsx)(b.Z,{className:"table-checkbox",checked:U[e].edit,onChange:function(){return Q((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},e,(0,l.Z)((0,l.Z)({},t[e]),{},{edit:!t[e].edit,list:t[e].list||!t[e].edit,view:t[e].view||!t[e].edit,all:t[e].add&&!t[e].edit&&t[e].delete})))}))}})}),(0,I.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,I.jsx)(b.Z,{className:"table-checkbox",checked:U[e].view,onChange:function(){return Q((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},e,(0,l.Z)((0,l.Z)({},t[e]),{},{view:!t[e].view,list:t[e].list||!t[e].view,edit:t[e].edit&&!t[e].view||!1,delete:t[e].delete&&!t[e].view||!1,fill:t[e].fill&&!t[e].view||!1,all:t[e].add&&t[e].edit&&!t[e].view&&t[e].delete})))}))}})}),(0,I.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,I.jsx)(b.Z,{className:"table-checkbox",checked:U[e].delete,onChange:function(){return Q((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},e,(0,l.Z)((0,l.Z)({},t[e]),{},{delete:!t[e].delete,list:t[e].list||!t[e].delete,edit:t[e].edit||!t[e].delete,view:t[e].view||!t[e].delete,all:t[e].add&&!t[e].delete})))}))}})}),(0,I.jsx)(Z.Z,{align:"center",padding:"checkbox",children:(0,I.jsx)(b.Z,{className:"table-checkbox",checked:U[e].all,onChange:function(){return Q((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},e,(0,l.Z)((0,l.Z)({},t[e]),{},{all:!t[e].all,list:!t[e].all,view:!t[e].all,add:!t[e].all,edit:!t[e].all,delete:!t[e].all,fill:"Assessment"===U[e].name&&!t[e].all})))}))}})})]},e)}))})]})})})}),(0,I.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,I.jsx)("button",{type:"reset",style:{marginTop:"20px"},className:"secondary-button mr-10",onClick:function(){P("/roles/view-role/".concat(e.id))},children:"Cancel"}),(0,I.jsx)("button",{type:"submit",className:"primary-button",style:{marginTop:"20px"},disabled:W,children:"Update"})]})]})})]})})]})}},5473:function(e,t,n){n.d(t,{Z:function(){return M}});var r=n(4942),i=n(3366),a=n(7462),l=n(2791),s=n(8182),c=n(4419),o=n(2065),d=n(7278),u=n(1245),m=n(184),h=(0,u.Z)((0,m.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,u.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),x=(0,u.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),v=n(9853),f=n(5513),Z=n(277),b=n(5878),g=n(1217);function j(e){return(0,g.Z)("MuiCheckbox",e)}var k=(0,b.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),w=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],N=(0,Z.ZP)(d.Z,{shouldForwardProp:function(e){return(0,Z.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t["color".concat((0,v.Z)(n.color))]]}})((function(e){var t,n=e.theme,i=e.ownerState;return(0,a.Z)({color:(n.vars||n).palette.text.secondary},!i.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat("default"===i.color?n.vars.palette.action.activeChannel:n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,o.Fq)("default"===i.color?n.palette.action.active:n.palette[i.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==i.color&&(t={},(0,r.Z)(t,"&.".concat(k.checked,", &.").concat(k.indeterminate),{color:(n.vars||n).palette[i.color].main}),(0,r.Z)(t,"&.".concat(k.disabled),{color:(n.vars||n).palette.action.disabled}),t))})),y=(0,m.jsx)(p,{}),C=(0,m.jsx)(h,{}),S=(0,m.jsx)(x,{}),M=l.forwardRef((function(e,t){var n,r,o=(0,f.Z)({props:e,name:"MuiCheckbox"}),d=o.checkedIcon,u=void 0===d?y:d,h=o.color,p=void 0===h?"primary":h,x=o.icon,Z=void 0===x?C:x,b=o.indeterminate,g=void 0!==b&&b,k=o.indeterminateIcon,M=void 0===k?S:k,E=o.inputProps,R=o.size,Y=void 0===R?"medium":R,z=o.className,O=(0,i.Z)(o,w),I=g?M:Z,T=g?M:u,P=(0,a.Z)({},o,{color:p,indeterminate:g,size:Y}),_=function(e){var t=e.classes,n=e.indeterminate,r=e.color,i={root:["root",n&&"indeterminate","color".concat((0,v.Z)(r))]},l=(0,c.Z)(i,j,t);return(0,a.Z)({},t,l)}(P);return(0,m.jsx)(N,(0,a.Z)({type:"checkbox",inputProps:(0,a.Z)({"data-indeterminate":g},E),icon:l.cloneElement(I,{fontSize:null!=(n=I.props.fontSize)?n:Y}),checkedIcon:l.cloneElement(T,{fontSize:null!=(r=T.props.fontSize)?r:Y}),ownerState:P,ref:t,className:(0,s.Z)(_.root,z)},O,{classes:_}))}))}}]);
//# sourceMappingURL=423.1392efd9.chunk.js.map