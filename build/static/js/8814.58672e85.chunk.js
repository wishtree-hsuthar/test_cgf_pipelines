"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[8814],{28814:(e,a,r)=>{r.r(a),r.d(a,{default:()=>A});var n=r(72791),s=r(57689),d=r(11087),t=r(45904),l=r(35527),i=r(97275),o=r(61134),c=r(55294),m=r(94677),u=r(76218),h=r(27181),p=r(12820),v=r(12104),x=r(48086),g=r(46363),b=r(1260),f=r(28386),j=r(14917),N=r(45736),y=r(80184);const C={countryCode:{validate:"Select the country code"},phoneNumber:{maxLength:"Max digits limit exceed",minLength:"Enter the valid phone number (Eg: 1234567890)",validate:"Enter the valid phone number (Eg: 1234567890)",pattern:"Invalid format"},name:{required:"Enter the CGF admin name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},email:{required:"Enter the email",pattern:"Invalid format",minLength:"minimum 3 characters required"},subRoleId:{required:"Select the role"}},A=()=>{var e;(0,b.j)("Add Admin");const[a,r]=(0,n.useState)(!1),A=(0,s.s0)(),{handleSubmit:E,watch:S,formState:{errors:w},reset:Z,control:L,trigger:R,setValue:I}=(0,o.cI)({defaultValues:{name:"",email:"",subRoleId:"",phoneNumber:"",countryCode:""}}),[_,F]=((0,s.TH)(),(0,n.useState)([])),[M,k]=(0,n.useState)([]),[q,H]=(0,n.useState)(!1),T=(0,n.useRef)(),[Y,D]=(0,p.Z)({titleMessage:"",descriptionMessage:"",messageType:"error"});(0,n.useEffect)((()=>{let e=new AbortController;(async()=>{try{const a=await m.H.get(u.Lp,{signal:e.signal});j.Y.info("Add Sub Admin - fetchRoles handler"),k(a.data),a.data.filter((e=>"CGF Admin"===e.name&&Z({subRoleId:e._id})))}catch(n){var a,r;if("ERR_CANCELED"===(null===n||void 0===n?void 0:n.code))return;j.Y.info("Add Sub Admin - fetchRoles handler catch error ".concat(null===n||void 0===n||null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)),(0,N.K)(n,D,T,A)}})(),(async()=>{try{const a=await c.Z.get(u.od,{signal:e.signal});j.Y.info("Add sub admin - addCGFAdminFetchCountries handler ");{let e=null===a||void 0===a?void 0:a.data.map((e=>e.countryCode)),r=new Set(e);F([...r])}}catch(n){var a,r;if("ERR_CANCELED"===(null===n||void 0===n?void 0:n.code))return;j.Y.info("Add sub admin - addCGFAdminFetchCountries handler catch error ".concat(null===n||void 0===n||null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message))}})()}),[]);const G=async e=>{j.Y.info("Add sub admin - addSubAdminData handler"),H(!0),r(!0);try{const a=await c.Z.post(u.mc,e);201==a.status&&(H(!1),D({titleMessage:"Hurray!",descriptionMessage:a.data.message,messageType:"success"},(()=>T.current())),r(!1),Z())}catch(s){var a,n;if("ERR_CANCELED"===(null===s||void 0===s?void 0:s.code))return;j.Y.info("Add sub admin - addSubAdminData handler catch error ".concat(null===s||void 0===s||null===(a=s.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)),H(!1),r(!1),(0,N.K)(s,D,T,A)}};return(0,y.jsxs)("div",{className:"page-wrapper",children:[(0,y.jsx)(h.Z,{myRef:T,titleMessage:Y.titleMessage,descriptionMessage:Y.descriptionMessage,messageType:Y.messageType}),(0,y.jsx)("div",{className:"breadcrumb-wrapper",children:(0,y.jsx)("div",{className:"container",children:(0,y.jsxs)("ul",{className:"breadcrumb",children:[(0,y.jsx)("li",{children:(0,y.jsx)(d.rU,{to:"/users/cgf-admin/",children:"Admins"})}),(0,y.jsx)("li",{children:"Add Admin"})]})})}),(0,y.jsx)("section",{children:(0,y.jsx)("div",{className:"container",children:(0,y.jsxs)("form",{onSubmit:E((async e=>{G(e),setTimeout((()=>{A("/users/cgf-admin/",{state:1})}),3e3)})),children:[(0,y.jsxs)("div",{className:"form-header flex-between",children:[(0,y.jsx)("h2",{className:"heading2",children:"Add Admin"}),(0,y.jsx)("div",{className:"form-header-right-txt",children:(0,y.jsxs)("div",{className:"tertiary-btn-blk",onClick:E((e=>{G(e),Z(),I("")})),children:[(0,y.jsx)("span",{className:"addmore-icon",children:(0,y.jsx)("i",{className:"fa fa-plus"})}),(0,y.jsx)("span",{className:"addmore-txt",children:"Save & Add More"})]})})]}),q?(0,y.jsx)(f.Z,{}):(0,y.jsx)("div",{className:"card-wrapper",children:(0,y.jsxs)("div",{className:"card-blk flex-between",children:[(0,y.jsx)("div",{className:"card-form-field",children:(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsxs)("label",{htmlFor:"name",children:["Admin Name ",(0,y.jsx)("span",{className:"mandatory",children:"*"})]}),(0,y.jsx)(x.Z,{control:L,onBlur:e=>{var a;return I("name",null===(a=e.target.value)||void 0===a?void 0:a.trim())},name:"name",placeholder:"Enter CGF admin name",myHelper:C,rules:{maxLength:50,minLength:3,required:!0,pattern:/^[a-zA-Z][a-zA-Z ]*$/}})]})}),(0,y.jsx)("div",{className:"card-form-field",children:(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsxs)("label",{htmlFor:"email",children:["Email ",(0,y.jsx)("span",{className:"mandatory",children:"*"})]}),(0,y.jsx)(x.Z,{name:"email",onBlur:e=>{var a;return I("email",null===(a=e.target.value)||void 0===a?void 0:a.trim())},control:L,placeholder:"example@domain.com",myHelper:C,rules:{required:!0,maxLength:50,minLength:3,pattern:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}})]})}),(0,y.jsx)("div",{className:"card-form-field",children:(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsx)("label",{htmlFor:"phoneNumber",children:"Phone Number"}),(0,y.jsxs)("div",{className:"phone-number-field",children:[(0,y.jsx)("div",{className:"select-field country-code",children:(0,y.jsx)(o.Qr,{control:L,name:"countryCode",rules:{validate:()=>{if(!S("countryCode")&&S("phoneNumber"))return"Invalid input"}},render:e=>{let{field:a,fieldState:{error:r}}=e;return(0,y.jsx)(t.Z,{...a,className:"".concat(r&&"autocomplete-error"),PaperComponent:e=>{let{children:a}=e;return(0,y.jsx)(l.Z,{className:(null===_||void 0===_?void 0:_.length)>5?"autocomplete-option-txt autocomplete-option-limit":"autocomplete-option-txt",children:a})},popupIcon:(0,y.jsx)(v.Z,{}),onChange:(e,a)=>{I("countryCode",a&&"object"===typeof a?a.name:a),R("countryCode"),R("phoneNumber")},autoHighlight:!0,options:_||[],getOptionLabel:e=>e,renderOption:(e,a)=>(0,y.jsx)("li",{...e,children:a}),renderInput:e=>(0,y.jsx)(i.Z,{...e,inputProps:{...e.inputProps},placeholder:"+00",onChange:()=>R("countryCode"),helperText:r?C.countryCode[null===r||void 0===r?void 0:r.type]:" "})})}})}),(0,y.jsx)(x.Z,{name:"phoneNumber",control:L,placeholder:"1234567890",myOnChange:e=>((e,a,r)=>{I(a,e.target.value),R(a),R(r)})(e,"phoneNumber","countryCode"),onBlur:e=>{var a;return I("phoneNumber",null===(a=e.target.value)||void 0===a?void 0:a.trim())},myHelper:C,rules:{minLength:7,maxLength:15,validate:e=>!S("phoneNumber")&&S("countryCode")?"invalid input":e&&!Number(e)?"Invalid input":void 0}})]})]})}),(0,y.jsx)("div",{className:"card-form-field",children:(0,y.jsxs)("div",{className:"form-group",children:[(0,y.jsxs)("label",{htmlFor:"role",children:["Role ",(0,y.jsx)("span",{className:"mandatory",children:"*"})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)(g.Z,{name:"subRoleId",control:L,options:M,rules:{required:!0},myHelper:C,placeholder:"Select role"}),(0,y.jsx)("p",{className:"password-error",children:null===(e=w.subRoleId)||void 0===e?void 0:e.message})]})]})}),(0,y.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,y.jsx)("button",{type:"reset",onClick:()=>{A("/users/cgf-admin/",{state:0})},className:"secondary-button mr-10",children:"Cancel"}),(0,y.jsx)("button",{type:"submit",className:"primary-button add-button",disabled:a,children:"Save"})]})]})})]})})})]})}}}]);
//# sourceMappingURL=8814.58672e85.chunk.js.map