"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5741],{4851:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var a=n(2982),r=n(4942),s=n(1413),i=n(885),l=n(8821),o=n(1346),d=n(9407),c=n(5473),u=n(2791),m=n(7689),v=n(9434),p=n(4917),g=n(6218),b=n(7659),f=n(7806),h=n(7340),y=n(8460),x=n(2820),Z=n(1260),j=n(4165),w=n(5861),M=n(4569),C=n.n(M),A=n(9106),N=n(8386),T=n(184),k={disablePadding:!1},S=[(0,s.Z)((0,s.Z)({id:"companyName"},k),{},{label:"Company"}),(0,s.Z)((0,s.Z)({id:"name"},k),{},{label:"Representative"}),(0,s.Z)((0,s.Z)({id:"email"},k),{},{label:"Email"}),(0,s.Z)((0,s.Z)({id:"companyType"},k),{},{label:"Company Type"}),(0,s.Z)((0,s.Z)({id:"totalOperationMembers"},k),{},{label:"Ops. Members"}),(0,s.Z)((0,s.Z)({id:"createdBy"},k),{},{label:"Created By"}),(0,s.Z)((0,s.Z)({id:"createdAt"},k),{},{label:"Created At"}),(0,s.Z)((0,s.Z)({id:"isActive"},k),{},{label:"Status"})],P=function(e){var t=e.onboardedPage,n=e.setOnboardedPage,r=e.makeApiCallMemberList,s=e.searchMember,l=e.searchTimeoutMemberList,o=e.setToasterDetailsMemberList,d=e.memberRef,c=e.checkViewAccess,v=(0,m.s0)(),b=(0,u.useState)(!1),f=(0,i.Z)(b,2),h=f[0],y=f[1],x=["_id","companyName","name","email","companyType","totalOperationMembers","createdBy","createdAt","isActive"],Z=(0,u.useState)(10),M=(0,i.Z)(Z,2),k=M[0],P=M[1],E=(0,u.useState)("asc"),R=(0,i.Z)(E,2),B=R[0],O=R[1],L=(0,u.useState)("initialRender"),D=(0,i.Z)(L,2),_=D[0],Y=D[1],I=(0,u.useState)([]),V=(0,i.Z)(I,2),H=V[0],F=V[1],z=(0,u.useState)(0),U=(0,i.Z)(z,2),J=U[0],K=U[1],q=function(){var e="".concat(g.Dl,"/list?page=").concat(t,"&size=").concat(k,"&orderBy=").concat({initialRender:"",companyName:"name",name:"representativeName",email:"representativeEmail",companyType:"companyType",totalOperationMembers:"operationMembersCount",createdBy:"createdBy",createdAt:"createdAt",isActive:"status"}[_],"&order=").concat(B);return s&&(e+="&search=".concat(s)),e},G=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(t,n){var r,s,i,l,c,u,m,g,b,f;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=q(),y(!0),e.next=5,C().get(r,{signal:n.signal});case 5:s=e.sent,K(parseInt(s.headers["x-total-count"])),p.Y.debug("response from backend",s),y(!1),(h=null===s||void 0===s?void 0:s.data).forEach((function(e){var t,n,a,r,s,i,l,o;delete e.address,delete e.cgfActivity,delete e.cgfCategory,delete e.cgfOffice,delete e.cgfOfficeCountry,delete e.cgfOfficeRegion,delete e.city,delete e.corporateEmail,delete e.country,delete e.countryCode,delete e.parentCompany,delete e.phoneNumber,delete e.region,delete e.state,delete e.updatedAt,delete e.updatedBy,delete e.website,delete e.isDeleted,delete e.isReplaced,delete e.isMemberRepresentative,delete e.memberRepresentativeRole,delete e.__v,e.createdAt=null===(t=new Date(e.createdAt))||void 0===t?void 0:t.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),"object"===typeof e.createdBy?e.createdBy=null!==(a=null===e||void 0===e||null===(r=e.createdBy)||void 0===r?void 0:r.name)&&void 0!==a?a:"N/A":e.createdBy="N/A",e.representative?(e.email=null!==(s=null===(i=e.representative)||void 0===i?void 0:i.email)&&void 0!==s?s:"N/A",e.name=null!==(l=null===(o=e.representative)||void 0===o?void 0:o.name)&&void 0!==l?l:"N/A"):(e.email="N/A",e.name="N/A"),e.totalOperationMembers=null===(n=e.totalOperationMembers)||void 0===n?void 0:n.toString(),delete e.representative,delete e.memberRepresentativeId,x.forEach((function(t){var n=e[t];delete e[t],e[t]=n}))})),F((0,a.Z)(h)),e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(0),p.Y.debug("error from get members api - ",e.t0),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=17;break}return e.abrupt("return");case 17:401===(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i?void 0:i.status)?(o({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return d.current()})),setTimeout((function(){v("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status)?(o({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(c=e.t0.response)&&void 0!==c&&null!==(u=c.data)&&void 0!==u&&u.message?null===e.t0||void 0===e.t0||null===(m=e.t0.response)||void 0===m||null===(g=m.data)||void 0===g?void 0:g.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return d.current()})),setTimeout((function(){v("/home")}),3e3)):(y(!1),t&&o({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(b=e.t0.response)&&void 0!==b&&null!==(f=b.data)&&void 0!==f&&f.message&&"string"===typeof e.t0.response.data.message?e.t0.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return d.current()})));case 18:case"end":return e.stop()}var h}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){var e=!0,t=new AbortController;return r&&G(e,t),function(){e=!1,clearTimeout(l),t.abort()}}),[t,k,_,B,r]),(0,T.jsx)(T.Fragment,{children:h?(0,T.jsx)(N.Z,{}):(0,T.jsx)(A.Z,{tableHead:S,records:H,handleChangePage1:function(e){n(e)},handleChangeRowsPerPage1:function(e){P(parseInt(e.target.value,10)),n(1)},page:t,rowsPerPage:k,totalRecords:J,orderBy:_,onClickVisibilityIconHandler1:function(e){return p.Y.debug("id",e),v("/users/members/view-member/".concat(e))},order:B,setOrder:O,setOrderBy:Y,setCheckBoxes:!1,onRowClick:c})})},E=n(4677),R=[{id:"name",disablePadding:!1,label:"Company"},{id:"representativeName",disablePadding:!1,label:"Representative"},{id:"representativeEmail",disablePadding:!1,label:"Email"},{id:"companyType",disablePadding:!1,label:"Company Type"},{id:"createdBy",disablePadding:!1,label:"Created By"},{id:"createdAt",disablePadding:!1,label:"Created At"}],B=function(e){var t=e.pendingPage,n=e.setPendingPage,a=e.makeApiCallMemberList,r=e.searchMember,s=(e.searchTimeoutMemberList,e.setToasterDetailsMemberList),l=e.memberRef,o=e.checkViewAccess,d=(0,m.s0)(),c=(0,u.useState)(!1),v=(0,i.Z)(c,2),b=v[0],f=v[1],h=(0,u.useState)(10),y=(0,i.Z)(h,2),x=y[0],Z=y[1],M=u.useState("desc"),C=(0,i.Z)(M,2),k=C[0],S=C[1],P=u.useState(""),B=(0,i.Z)(P,2),O=B[0],L=B[1],D=u.useState([]),_=(0,i.Z)(D,2),Y=_[0],I=_[1],V=u.useState(0),H=(0,i.Z)(V,2),F=H[0],z=H[1],U=["_id","companyName","name","email","companyType","createdBy","createdAt"],J=function(e){p.Y.debug("data before update----",e);var t=e;t.forEach((function(e){var t,n,a,r,s,i;e.email=null!==(t=null===e||void 0===e||null===(n=e.invite)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.email)&&void 0!==t?t:"N/A",e.name=null!==(r=null===e||void 0===e||null===(s=e.invite)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.name)&&void 0!==r?r:"N/A",e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),delete e.invite,delete e.updatedAt,U.forEach((function(t){var n=e[t];delete e[t],e[t]=n}))})),p.Y.debug("data in updaterecords method in pending method",t),I(t)},K=function(){var e="".concat(g.Dl,"/pending/list?page=").concat(t,"&size=").concat(x,"&orderBy=").concat(O,"&order=").concat(k);return r.length>0&&(e+="&search=".concat(r)),e},q=function(){var e=(0,w.Z)((0,j.Z)().mark((function e(){var t,n,a,r,i,o,c,u,m,v,g,b,h=arguments;return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(h.length>0&&void 0!==h[0])||h[0],n=h.length>1&&void 0!==h[1]?h[1]:new AbortController,e.prev=2,a=K(),f(!0),e.next=7,E.H.get(a,{signal:n.signal});case 7:r=e.sent,z(parseInt(r.headers["x-total-count"])),J(null===r||void 0===r?void 0:r.data),e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=16;break}return e.abrupt("return");case 16:p.Y.debug("Error from get all pending operation member  tab table-------",e.t0),401==(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i?void 0:i.status)?(t&&s({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return l.current()})),setTimeout((function(){d("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.status)?(t&&s({titleMessage:"Oops!",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(c=e.t0.response)&&void 0!==c&&null!==(u=c.data)&&void 0!==u&&u.message?null===e.t0||void 0===e.t0||null===(m=e.t0.response)||void 0===m||null===(v=m.data)||void 0===v?void 0:v.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return l.current()})),setTimeout((function(){d("/home")}),3e3)):t&&s({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(g=e.t0.response)&&void 0!==g&&null!==(b=g.data)&&void 0!==b&&b.message&&"string"===typeof e.t0.response.data.message?e.t0.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return l.current()}));case 18:return e.prev=18,f(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,12,18,21]])})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){var e=!0,t=new AbortController;return a&&q(e,t),function(){e=!1,t.abort()}}),[a,t,x,O,k]),(0,T.jsx)(T.Fragment,{children:b?(0,T.jsx)(N.Z,{}):(0,T.jsx)(A.Z,{tableHead:R,records:Y,handleChangePage1:function(e){n(e)},handleChangeRowsPerPage1:function(e){p.Y.debug("rows per page",e),Z(parseInt(e.target.value,10)),n(1)},onClickVisibilityIconHandler1:function(e){return d("/users/members/view-member/pending/".concat(e))},page:t,rowsPerPage:x,totalRecords:F,orderBy:O,setOrderBy:L,order:k,setOrder:S,setCheckBoxes:!1,onRowClick:o})})},O=["Erin","John","Maria","Rajkumar"],L=function(){var e,t,n,j,w;(0,Z.j)("Members");var M=(0,m.TH)().state,C=u.useState(M||0),A=(0,i.Z)(C,2),N=A[0],k=A[1],S=(0,m.s0)(),E=u.useRef(),R=(0,x.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),L=(0,i.Z)(R,2),D=L[0],_=L[1],Y=(0,v.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.privilege})),I="Super Admin"===(null===Y||void 0===Y?void 0:Y.name),V=(Y?Object.values(null===Y||void 0===Y?void 0:Y.privileges):[]).filter((function(e){var t;return"Members"===(null===e||void 0===e||null===(t=e.moduleId)||void 0===t?void 0:t.name)})).map((function(e){return{member:{list:null===e||void 0===e?void 0:e.list,view:null===e||void 0===e?void 0:e.view,edit:null===e||void 0===e?void 0:e.edit,delete:null===e||void 0===e?void 0:e.delete,add:null===e||void 0===e?void 0:e.add}}})),H=!!I||(null===(e=V[0])||void 0===e||null===(t=e.member)||void 0===t?void 0:t.view);console.log("check View Access:- ",H),p.Y.debug("module access member in view member",null===(n=V[0])||void 0===n?void 0:n.member);var F=(0,u.useState)(1),z=(0,i.Z)(F,2),U=z[0],J=z[1],K=(0,u.useState)(1),q=(0,i.Z)(K,2),G=q[0],Q=q[1],W=(0,u.useState)(null),X=(0,i.Z)(W,2),$=X[0],ee=X[1],te=(0,u.useState)(!0),ne=(0,i.Z)(te,2),ae=ne[0],re=ne[1],se=(0,u.useState)(""),ie=(0,i.Z)(se,2),le=ie[0],oe=ie[1],de=(0,u.useState)({companyType:"none",status:"none"}),ce=(0,i.Z)(de,2),ue=ce[0],me=ce[1],ve=(0,u.useState)(["none"]),pe=(0,i.Z)(ve,2),ge=pe[0],be=pe[1],fe=(0,u.useState)(""),he=(0,i.Z)(fe,2),ye=he[0],xe=he[1],Ze=ge.length>1&&ge.length-1===O.length,je=function(e){xe(e)},we=function(e){var t=e.target,n=t.name,a=t.value;p.Y.debug("name",n,"Value ",a),me((0,s.Z)((0,s.Z)({},ue),{},(0,r.Z)({},n,a)))};return(0,u.useEffect)((function(){k(M||0),S("",{state:0})}),[]),(0,T.jsxs)("div",{className:"page-wrapper",children:[(0,T.jsx)(b.Z,{myRef:E,titleMessage:D.titleMessage,descriptionMessage:D.descriptionMessage,messageType:D.messageType}),(0,T.jsx)("section",{children:(0,T.jsxs)("div",{className:"container",children:[(0,T.jsxs)("div",{className:"form-header member-form-header flex-between",children:[(0,T.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,T.jsx)("h2",{className:"heading2 mr-40",children:"Members"})}),(0,T.jsxs)("div",{className:"form-header-right-txt",children:[0===N&&(0,T.jsxs)("div",{className:"tertiary-btn-blk mr-20",onClick:function(){return(0,f.j)("Members",_,!1,E,g.MZ,S)},children:[(0,T.jsx)("span",{className:"download-icon",children:(0,T.jsx)(l.Z,{})}),"Download"]}),(I||(null===(j=V[0])||void 0===j||null===(w=j.member)||void 0===w?void 0:w.add))&&0===N&&(0,T.jsx)("div",{className:"form-btn",children:(0,T.jsx)("button",{type:"submit",className:"primary-button add-button",onClick:function(){return S("/users/members/add-member")},children:"Add Member"})})]})]}),(0,T.jsx)("div",{className:"member-filter-sect",children:(0,T.jsxs)("div",{className:"member-filter-wrap flex-between",children:[(0,T.jsx)("div",{className:"member-tab-left",children:(0,T.jsx)(h.Z,{value:N,handleChange:function(e,t){Q(1),J(1),k(t)}})}),(0,T.jsx)("div",{className:"member-filter-left",children:(0,T.jsxs)("div",{className:"searchbar",children:[(0,T.jsx)("input",{type:"text",value:le,name:"search",placeholder:"Search",onKeyDown:function(e){"Enter"===e.key&&(re(!0),J(1))},onChange:function(e){p.Y.debug("event",e.key),$&&clearTimeout($),re(!1),p.Y.debug("searchMember values",e.target.value),oe(e.target.value),ee(setTimeout((function(){re(!0),J(1),Q(1)}),1e3))}}),(0,T.jsx)("button",{type:"submit",children:(0,T.jsx)("i",{className:"fa fa-search"})})]})}),(0,T.jsx)("div",{className:"member-filter-right",children:(0,T.jsxs)("div",{className:"filter-select-wrap flex-between",children:[(0,T.jsx)("div",{className:"filter-select-field",children:(0,T.jsx)("div",{className:"dropdown-field",children:(0,T.jsxs)(o.Z,{sx:{display:"none"},name:"companyType",value:ue.companyType,onChange:we,onFocus:function(e){return je("companyType")},children:[(0,T.jsx)(d.Z,{value:"none",sx:{display:"companyType"===ye&&"none"},children:"Company Type"}),(0,T.jsx)(d.Z,{value:"Internal",children:"Internal"}),(0,T.jsx)(d.Z,{value:"External",children:"External"})]})})}),(0,T.jsx)("div",{className:"filter-select-field",children:(0,T.jsx)("div",{className:"dropdown-field",children:(0,T.jsxs)(o.Z,{sx:{display:"none"},name:"createdBy",multiple:!0,value:ge,onChange:function(e){var t=e.target,n=t.name,r=t.value;if(p.Y.debug("name",n,"value",r),""===r[r.length-1])return ge.length-1===O.length?be(["none"]):be(["none"].concat(O));be((0,a.Z)(r))},onFocus:function(e){return je("createdBy")},renderValue:function(e){return ge.length>1?e.slice(1).join(", "):"Created By"},children:[(0,T.jsx)(d.Z,{value:"none",sx:{display:"createdBy"===ye&&"none"},children:"Created By"}),(0,T.jsxs)(d.Z,{value:"",children:[(0,T.jsx)(c.Z,{className:"table-checkbox",checked:Ze,indeterminate:ge.length>1&&ge.length-1<O.length}),"Select All"]}),O.map((function(e){return(0,T.jsxs)(d.Z,{value:e,children:[(0,T.jsx)(c.Z,{className:"table-checkbox",checked:(null===ge||void 0===ge?void 0:ge.indexOf(e))>-1}),e]},e)}))]})})}),(0,T.jsx)("div",{className:"filter-select-field",children:(0,T.jsx)("div",{className:"dropdown-field",children:(0,T.jsxs)(o.Z,{sx:{display:"none"},name:"status",value:ue.status,onChange:we,onFocus:function(e){return je("status")},children:[(0,T.jsx)(d.Z,{value:"none",sx:{display:"status"===ye&&"none"},children:"Status"}),(0,T.jsx)(d.Z,{value:"active",children:"Active"}),(0,T.jsx)(d.Z,{value:"inactive",children:"Inactive"})]})})})]})})]})}),(0,T.jsxs)("div",{className:"member-info-wrapper table-content-wrap table-footer-btm-space",children:[(0,T.jsx)(y.x,{value:N,index:0,children:(0,T.jsx)(P,{onboardedPage:U,setOnboardedPage:J,makeApiCallMemberList:ae,searchMember:le,searchTimeoutMemberList:$,setToasterDetailsMemberList:_,memberRef:E,checkViewAccess:H})}),(0,T.jsx)(y.x,{value:N,index:1,children:(0,T.jsx)(B,{pendingPage:G,setPendingPage:Q,makeApiCallMemberList:ae,searchMember:le,searchTimeoutMemberList:$,setToasterDetailsMemberList:_,memberRef:E,checkViewAccess:H})})]})]})})]})}}}]);
//# sourceMappingURL=5741.08e3c970.chunk.js.map