"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5604],{7005:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var a=n(885),r=n(2791),i=n(7689),o=n(8821),d=n(2820),l=n(7659),s=n(4165),c=n(5861),u=n(2982),m=n(9106),p=n(4677),v=n(1300),h=n(6218),b=n(1189),f=n(8386),g=n(4917),y=n(5736),x=n(184),M=JSON.parse(JSON.stringify(b.si));var C=function(e){var t=e.makeApiCall,n=e.pageForPendingOperationMemberTab,o=e.setPageForPendingOperationMemberTab,d=e.setMakeApiCall,l=e.search,b=e.filters,C=e.myRef,S=e.setToasterDetails,j=(0,i.s0)(),w=(0,r.useState)(!0),k=(0,a.Z)(w,2),Z=k[0],O=k[1],N=(0,r.useState)(!1),T=(0,a.Z)(N,2),A=T[0],P=T[1],B=(0,r.useState)(""),E=(0,a.Z)(B,2),D=E[0],I=E[1],R=r.useState(10),F=(0,a.Z)(R,2),q=F[0],_=F[1],H=r.useState("desc"),L=(0,a.Z)(H,2),Y=L[0],J=L[1],K=r.useState(""),G=(0,a.Z)(K,2),U=G[0],z=G[1],V=r.useState([]),X=(0,a.Z)(V,2),W=X[0],Q=X[1],$=r.useState(0),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1],ae=["_id","name","email","memberCompany","companyType","createdByName","createdAt"],re=function(e){var t=e;t.forEach((function(e){var t,n,a,r,i,o;delete e.updatedAt,delete e.data.description,delete e.data.countryCode,delete e.data.isDeleted,delete e.__v,delete e.data.password,delete e.data.roleId,delete e.data.role,delete e.data.salt,delete e.data.uuid,delete e.data.phoneNumber,delete e.token,delete e.tokenExpiry,delete e.tokenType,e.name=null===(t=e.data)||void 0===t?void 0:t.name,e.email=null===(n=e.data)||void 0===n?void 0:n.email,e.memberCompany=null===e||void 0===e||null===(a=e.memberData)||void 0===a?void 0:a.companyName,e.companyType=null!==(r=null===e||void 0===e||null===(i=e.memberData)||void 0===i?void 0:i.companyType)&&void 0!==r?r:"N/A",e.createdAt=new Date(null===e||void 0===e?void 0:e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),e.createdByName=null===(o=e.createdBy)||void 0===o?void 0:o.name,delete e.createdBy,delete e.subRole,delete e.data,delete e.memberData,ae.forEach((function(t){var n=e[t];delete e[t],e[t]=n}))})),Q((0,u.Z)(t))},ie=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,a,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g.Y.info("Pending Operation Members - withdrawInviteById handler"),e.next=4,p.H.delete(h.lf+D);case 4:200==(t=e.sent).status&&(S({titleMessage:"Success",descriptionMessage:null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,messageType:"success"},(function(){return C.current()})),de(),P(!1)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),g.Y.info("Onboarded Operation Member - getSubAdmin handler - catch error - ".concat(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)),(0,y.K)(e.t0,S,C,j);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e="".concat(h.uX,"/pending/list?page=").concat(n,"&size=").concat(q,"&orderBy=").concat(U,"&order=").concat(Y);return l.length>0&&(e+="&search=".concat(l)),e},de=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,a,r,i,o,d,l,c,u,m,v,h,b,f=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(f.length>0&&void 0!==f[0])||f[0],n=f.length>1&&void 0!==f[1]?f[1]:new AbortController,e.prev=2,a=oe(),O(!0),g.Y.info("Pending Operation Member - getPendingOperationMember handler"),e.next=8,p.H.get(a,{signal:n.signal});case 8:r=e.sent,ne(parseInt(r.headers["x-total-count"])),re(r.data),O(!1),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:O(!1),g.Y.info("Pending Operation Member - getPendingOperationMember handler - catch error - ".concat(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)),401==(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)?(t&&S({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return C.current()})),setTimeout((function(){j("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status)?(t&&S({titleMessage:"Oops!",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(c=e.t0.response)&&void 0!==c&&null!==(u=c.data)&&void 0!==u&&u.message?null===e.t0||void 0===e.t0||null===(m=e.t0.response)||void 0===m||null===(v=m.data)||void 0===v?void 0:v.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return C.current()})),setTimeout((function(){j("/home")}),3e3)):t&&S({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(h=e.t0.response)&&void 0!==h&&null!==(b=h.data)&&void 0!==b&&b.message&&"string"===typeof e.t0.response.data.message?e.t0.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return C.current()}));case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){var e=!0,n=new AbortController;return t&&de(e,n),function(){e=!1,n.abort()}}),[b,t,d,n,q,U,Y]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(v.Z,{title:(0,x.jsx)("p",{children:"Withdraw Operation Member Invitation"}),info1:(0,x.jsx)("p",{children:"On withdrawal, operation member will not be able to verify their account."}),info2:(0,x.jsx)("p",{children:"Do you want to withdraw the invitation?"}),primaryButtonText:"Yes",secondaryButtonText:"No",onPrimaryModalButtonClickHandler:function(){ie()},onSecondaryModalButtonClickHandler:function(){P(!1)},openModal:A,setOpenModal:P,isModalForm:!1}),Z?(0,x.jsx)(f.Z,{}):(0,x.jsx)(m.Z,{tableHead:M,records:W,handleChangePage1:function(e){o(e)},handleChangeRowsPerPage1:function(e){_(parseInt(e.target.value,10)),o(1)},page:n,rowsPerPage:q,totalRecords:te,orderBy:U,onRowClick:!0,onClickVisibilityIconHandler1:function(e){return j("/users/operation-member/pending/view-operation-member/".concat(e))},onClickDeleteIconHandler1:function(e){P(!0),I(e)},order:Y,setOrder:J,setOrderBy:z,setCheckBoxes:!1})]})},S=n(9434),j=JSON.parse(JSON.stringify(b.si));j.push({id:"isActive",disablePadding:!1,label:"Status"});var w=function(e){var t,n=e.pageForOnboardedOperationMemberTab,o=e.setPageForOnboardedOperationMemberTab,d=e.makeApiCall,l=e.setMakeApiCall,v=e.search,b=(e.filters,e.myRef),M=(e.toasterDetails,e.setToasterDetails),C=e.searchTimeout,w=(e.setSearchTimeout,(0,r.useState)(!0)),k=(0,a.Z)(w,2),Z=k[0],O=k[1],N=(0,S.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.privilege})),T="Super Admin"===(null===N||void 0===N?void 0:N.name),A=(N?Object.values(null===N||void 0===N?void 0:N.privileges):[]).filter((function(e){var t;return"Operation Members"===(null===e||void 0===e||null===(t=e.moduleId)||void 0===t?void 0:t.name)})).map((function(e){return{operationMember:{list:null===e||void 0===e?void 0:e.list,view:null===e||void 0===e?void 0:e.view,edit:null===e||void 0===e?void 0:e.edit,delete:null===e||void 0===e?void 0:e.delete,add:null===e||void 0===e?void 0:e.add}}})),P=(0,i.s0)(),B=r.useState(10),E=(0,a.Z)(B,2),D=E[0],I=E[1],R=r.useState("desc"),F=(0,a.Z)(R,2),q=F[0],_=F[1],H=r.useState(""),L=(0,a.Z)(H,2),Y=L[0],J=L[1],K=r.useState([]),G=(0,a.Z)(K,2),U=G[0],z=G[1],V=r.useState(0),X=(0,a.Z)(V,2),W=X[0],Q=X[1],$=(0,r.useState)([]),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1],ae=function(e){var t=["_id","name","email","memberCompany","companyType","createdByName","createdAt","isActive"],n=e;n.forEach((function(e){var n,a,r,i,o,d;delete e.updatedAt,delete e.description,delete e.countryCode,delete e.isDeleted,delete e.__v,delete e.password,delete e.roleId,delete e.role,delete e.salt,delete e.uuid,delete e.phoneNumber,delete e.token,delete e.tokenExpiry,delete e.tokenType,delete e.address,delete e.isMemberRepresentative,delete e.isCGFStaff,delete e.isOperationMember,e.memberCompany=null!==(n=null===e||void 0===e||null===(a=e.memberData)||void 0===a?void 0:a.companyName)&&void 0!==n?n:"N/A",e.companyType=null!==(r=null===e||void 0===e||null===(i=e.memberData)||void 0===i?void 0:i.companyType)&&void 0!==r?r:"N/A",e.createdByName=null!==(o=null===e||void 0===e||null===(d=e.createdBy)||void 0===d?void 0:d.name)&&void 0!==o?o:"N/A",e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),delete e.replacedUsers,delete e.isReplaced,delete e.department,delete e.title,delete e.salutation,delete e.createdBy,delete e.updatedBy,delete e.subRole,delete e.data,delete e.memberData,delete e.operationType,delete e.reportingManager,delete e.memberId,delete e.assessmentCount,t.forEach((function(t){var n=e[t];delete e[t],e[t]=n}))})),z((0,u.Z)(n))},re=function(){var e="".concat(h.uX,"/list?page=").concat(n,"&size=").concat(D,"&orderBy=").concat(Y,"&order=").concat(q);return v&&(e+="&search=".concat(v)),e},ie=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n,a,r,i,o=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(o.length>0&&void 0!==o[0])||o[0],t=o.length>1&&void 0!==o[1]?o[1]:new AbortController,e.prev=2,n=re(),O(!0),g.Y.info("Onboarded Operation Member - getSubAdmin handler"),e.next=8,p.H.get(n,{signal:t.signal});case 8:a=e.sent,Q(parseInt(a.headers["x-total-count"])),ae((0,u.Z)(a.data)),O(!1),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:O(!1),g.Y.info("Onboarded Operation Member - getSubAdmin handler catch error - ".concat(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)),(0,y.K)(e.t0,M,b,P);case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){var e=!0,t=new AbortController;return d&&ie(e,t),function(){e=!1,clearTimeout(C),t.abort()}}),[n,D,Y,q,d,l,C]),(0,x.jsx)(x.Fragment,{children:Z?(0,x.jsx)(f.Z,{}):(0,x.jsx)(m.Z,{tableHead:j,records:U,handleChangePage1:function(e){o(e)},handleChangeRowsPerPage1:function(e){I(parseInt(e.target.value,10)),o(1)},page:n,rowsPerPage:D,totalRecords:W,orderBy:Y,onClickVisibilityIconHandler1:function(e){return P("/users/operation-member/view-operation-member/".concat(e))},order:q,setOrder:_,setOrderBy:J,setCheckBoxes:!1,setSelected:ne,selected:te,onRowClick:!0===T||(null===(t=A[0])||void 0===t?void 0:t.operationMember.view)})})},k=n(1260),Z=n(8460),O=n(7806),N=n(7340);var T=function(){(0,k.j)("Operation Members");var e=(0,d.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),t=(0,a.Z)(e,2),n=t[0],s=t[1],c=r.useState(1),u=(0,a.Z)(c,2),m=u[0],p=u[1],v=r.useState(1),b=(0,a.Z)(v,2),f=b[0],g=b[1],y=(0,r.useRef)(),M=(0,r.useState)(""),j=(0,a.Z)(M,2),T=j[0],A=j[1],P=r.useState(0),B=(0,a.Z)(P,2),E=B[0],D=B[1],I=(0,r.useState)(!0),R=(0,a.Z)(I,2),F=R[0],q=R[1],_=(0,r.useState)(null),H=(0,a.Z)(_,2),L=H[0],Y=H[1],J=(0,S.v9)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.privilege})),K="Super Admin"===(null===J||void 0===J?void 0:J.name),G=(0,i.TH)().state,U=(J?Object.values(null===J||void 0===J?void 0:J.privileges):[]).filter((function(e){var t;return"Operation Members"===(null===e||void 0===e||null===(t=e.moduleId)||void 0===t?void 0:t.name)})).map((function(e){return{operationMember:{list:e.list,view:e.view,edit:e.edit,delete:e.delete,add:e.add}}})),z=(0,r.useState)({companyType:"",createdBy:"",status:""}),V=(0,a.Z)(z,2),X=V[0],W=V[1],Q=(0,i.s0)();return(0,r.useEffect)((function(){D(G||0),Q("",{state:0})}),[]),(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"page-wrapper",children:[(0,x.jsx)(l.Z,{myRef:y,titleMessage:n.titleMessage,descriptionMessage:n.descriptionMessage,messageType:n.messageType}),(0,x.jsx)("section",{children:(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("div",{className:"member-filter-sect"}),(0,x.jsxs)("div",{className:"form-header member-form-header flex-between",children:[(0,x.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,x.jsx)("h2",{className:"heading2 mr-40",children:"Operation Members"})}),(0,x.jsxs)("div",{className:"form-header-right-txt",children:[0==E&&(0,x.jsxs)("div",{className:"tertiary-btn-blk mr-20",onClick:function(){return(0,O.j)("Operation Members",s,!1,y,h.MM,Q)},children:[(0,x.jsx)("span",{className:"download-icon",children:(0,x.jsx)(o.Z,{})}),"Download"]}),(!0===K||!0===U[0].operationMember.add)&&0===E&&(0,x.jsx)("div",{className:"form-btn",children:(0,x.jsx)("button",{onClick:function(){return Q("/users/operation-members/add-operation-member")},className:"primary-button add-button",children:"Add Operation Member"})})]})]}),(0,x.jsxs)("div",{className:"member-filter-wrap flex-between",children:[(0,x.jsx)("div",{className:"member-tab-left",children:(0,x.jsx)(N.Z,{value:E,handleChange:function(e,t){D(t),p(1),g(1)}})}),(0,x.jsx)("div",{className:"member-filter-left",children:(0,x.jsxs)("div",{className:"searchbar",children:[(0,x.jsx)("input",{type:"text",placeholder:"Search",value:T,onKeyDown:function(e){"Enter"===e.key&&(q(!0),p(1),g(1))},onChange:function(e){return function(e){L&&clearTimeout(L),q(!1),A(e.target.value),Y(setTimeout((function(){q(!0),p(1),g(1)}),1e3))}(e)},name:"search"}),(0,x.jsx)("button",{type:"submit",children:(0,x.jsx)("i",{className:"fa fa-search"})})]})}),(0,x.jsx)("div",{className:"member-filter-right"})]}),(0,x.jsxs)("div",{className:"member-info-wrapper table-content-wrap",children:[(0,x.jsx)(Z.x,{value:E,index:0,children:(0,x.jsx)(w,{pageForOnboardedOperationMemberTab:m,setPageForOnboardedOperationMemberTab:p,makeApiCall:F,setMakeApiCall:q,search:T,filters:X,setSearch:A,setFilters:W,searchTimeout:L,setSearchTimeout:Y,setToasterDetails:s,myRef:y})}),(0,x.jsx)(Z.x,{value:E,index:1,children:(0,x.jsx)(C,{pageForPendingOperationMemberTab:f,setPageForPendingOperationMemberTab:g,makeApiCall:F,setMakeApiCall:q,search:T,filters:X,setSearch:A,setFilters:W,setToasterDetails:s,myRef:y})})]})]})})]})})}},1300:function(e,t,n){var a=n(9823),r=n(9444),i=n(5112),o=n(7962),d=n(6015),l=n(5814),s=(n(2791),n(184));t.Z=function(e){var t,n,c,u,m,p,v=e.title,h=e.info1,b=e.info2,f=e.primaryButtonText,g=e.secondaryButtonText,y=void 0===g?void 0:g,x=e.onPrimaryModalButtonClickHandler,M=e.isDisabledPrimaryButton,C=void 0!==M&&M,S=e.onSecondaryModalButtonClickHandler,j=e.openModal,w=e.setOpenModal,k=e.isModalForm,Z=e.handleCloseRedirect,O=e.hideCloseIcon,N=void 0!==O&&O,T=function(e,t){t&&"backdropClick"===t||w(!1)},A=function(){S()},P="";return"object"===typeof(null===v||void 0===v||null===(t=v.props)||void 0===t?void 0:t.children)?null===v||void 0===v||null===(n=v.props)||void 0===n||null===(c=n.children)||void 0===c||c.map((function(e){return P+=e})):P=null===v||void 0===v||null===(u=v.props)||void 0===u?void 0:u.children,(0,s.jsx)(r.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:j,onClose:T,closeAfterTransition:!0,disableEscapeKeyDown:!!k,BackdropComponent:i.Z,BackdropProps:{timeout:500},className:"popup-blk",children:(0,s.jsx)(o.Z,{in:j,children:(0,s.jsx)(d.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},className:"popup-box",children:(0,s.jsxs)("div",{className:"popup-innerblk",children:[(0,s.jsxs)("div",{id:"transition-modal-title",className:"popup-ttl-blk",children:[(null===(m=P)||void 0===m?void 0:m.length)<=47?(0,s.jsx)("h2",{className:"popup-ttl heading2",children:v}):(0,s.jsx)(l.Z,{title:P,children:(0,s.jsxs)("h2",{className:"popup-ttl heading2",children:[" ",null===(p=P)||void 0===p?void 0:p.slice(0,50),'..."']})}),(0,s.jsx)("span",{hidden:N,className:"popup-close-icon",onClick:k?Z:T,children:(0,s.jsx)(a.Z,{})})]}),(0,s.jsx)("div",{id:"transition-modal-description",className:"popup-body",children:(0,s.jsxs)("div",{className:"popup-content-blk text-center",children:[h,k?(0,s.jsx)("form",{onSubmit:A,children:b}):b,(0,s.jsxs)("div",{className:"form-btn flex-center",children:[y&&(0,s.jsx)("button",{type:"submit",onClick:A,className:"secondary-button mr-10",children:y}),(0,s.jsx)("button",{type:"submit",onClick:function(){x()},disabled:C,className:"primary-button",children:f})]})]})})]})})})})}},1189:function(e,t,n){n.d(t,{Sn:function(){return s},eZ:function(){return u},si:function(){return c}});var a=n(4165),r=n(5861),i=n(4569),o=n.n(i),d=n(6218),l=n(4917),s={salutation:{required:"Select salutation"},name:{required:"Enter the operation member name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},department:{maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},title:{maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},email:{required:"Enter the email",pattern:"Invalid format"},countryCode:{required:"Enter country code",validate:"Select country code"},phoneNumber:{required:"Enter the phone number",maxLength:"Max digits limit exceed",minLength:"Enter the valid phone number (Eg: 1234567890)",validate:"Enter the valid phone number (Eg: 1234567890)"},memberCompany:{required:"Select member company"},operationType:{required:"Select the operation type"},memberId:{required:"Select the member company"},companyType:{required:"Enter company type"},address:{required:"Enter address",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},roleId:{required:"Select the role"},reportingManager:{required:"Select the reporting manager "},isCGFStaff:{required:"Select the CGFSTaff"}},c=[{id:"name",disablePadding:!1,label:"Operation Member"},{id:"email",disablePadding:!1,label:"Email"},{id:"memberCompany",disablePadding:!1,label:"Member Company"},{id:"companyType",disablePadding:!1,label:"Company Type"},{id:"createdByName",disablePadding:!1,label:"Created By"},{id:"createdAt",disablePadding:!1,label:"Created At"}],u=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t,n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get(d.NH);case 3:return t=e.sent,l.Y.info("Operation member module - getOperationTypes handler"),e.abrupt("return",null===t||void 0===t?void 0:t.data);case 8:e.prev=8,e.t0=e.catch(0),l.Y.info("Operation member module - getOperationTypes handler catch error ".concat(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=5604.658594d9.chunk.js.map