"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[6035],{6035:function(e,s,n){n.r(s);var t=n(4165),i=n(2982),a=n(5861),l=n(885),r=n(1413),o=n(2791),d=n(7689),c=n(9106),u=n(9434),v=n(4677),m=n(6218),h=n(2820),g=n(1260),f=n(7194),p=n(7659),b=n(8386),x=n(4917),j=n(184),Z={width:"30%",disablePadding:!1},k=[(0,r.Z)((0,r.Z)({},Z),{},{id:"title",label:"Title"}),(0,r.Z)((0,r.Z)({},Z),{},{id:"assessmentType",label:"Assessment Type"}),(0,r.Z)((0,r.Z)({},Z),{},{id:"assignedMember.name",label:"Assigned Member"}),(0,r.Z)((0,r.Z)({},Z),{},{id:"assignedOperationMember.name",label:"Assigned To"}),(0,r.Z)((0,r.Z)({},Z),{},{id:"assessmentStatus",label:"Status"}),(0,r.Z)((0,r.Z)({},Z),{},{id:"dueDate",label:"Due Date"}),(0,r.Z)((0,r.Z)({},Z),{},{id:"action",label:"Actions"})];s.default=function(){var e,s,n,Z;(0,g.j)("Assessments");var y=o.useRef(),w=(0,h.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),N=(0,l.Z)(w,2),A=N[0],C=N[1],S=["uuid","_id","title","assessmentType","assignedMember.name","assignedOperationMember.name","assessmentStatus","dueDate","isUserAuthorizedToFillAssessment"],D=(0,d.s0)(),M=(0,o.useState)(!1),T=(0,l.Z)(M,2),_=T[0],O=T[1],P=(0,o.useState)(null),R=(0,l.Z)(P,2),E=R[0],I=R[1],F=(0,o.useState)(!0),B=(0,l.Z)(F,2),H=B[0],U=B[1],L=(0,o.useState)(""),Y=(0,l.Z)(L,2),z=Y[0],V=Y[1],q=(0,o.useState)(1),K=(0,l.Z)(q,2),Q=K[0],W=K[1],G=(0,o.useState)(10),J=(0,l.Z)(G,2),X=J[0],$=J[1],ee=(0,o.useState)("desc"),se=(0,l.Z)(ee,2),ne=se[0],te=se[1],ie=(0,o.useState)(""),ae=(0,l.Z)(ie,2),le=ae[0],re=ae[1],oe=(0,o.useState)([]),de=(0,l.Z)(oe,2),ce=de[0],ue=de[1],ve=(0,o.useState)(0),me=(0,l.Z)(ve,2),he=me[0],ge=me[1],fe=[],pe=function(){var e="".concat(m.jE,"?page=").concat(Q,"&size=").concat(X,"&orderBy=").concat(le,"&order=").concat(ne);return(null===z||void 0===z?void 0:z.length)>=3&&(e+="&search=".concat(z)),e},be=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var s,n,a,l,r,o,d,c,u,m,h,g,f,p=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(p.length>0&&void 0!==p[0])||p[0],s=p.length>1&&void 0!==p[1]?p[1]:new AbortController,e.prev=2,n=pe(),O(!0),e.next=7,v.H.get(n,{signal:s.signal});case 7:a=e.sent,ge(parseInt(a.headers["x-total-count"])),xe((0,i.Z)(a.data)),O(!1),e.next=19;break;case 13:if(e.prev=13,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=17;break}return e.abrupt("return");case 17:401==(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status)?(C({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return y.current()})),setTimeout((function(){D("/login")}),3e3)):403==(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.status)?(C({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(o=e.t0.response)&&void 0!==o&&null!==(d=o.data)&&void 0!==d&&d.message?null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return y.current()})),setTimeout((function(){D("/home")}),3e3)):C({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(m=e.t0.response)&&void 0!==m&&null!==(h=m.data)&&void 0!==h&&h.message?null===e.t0||void 0===e.t0||null===(g=e.t0.response)||void 0===g||null===(f=g.data)||void 0===f?void 0:f.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return y.current()})),O(!1);case 19:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),xe=function(e){e.forEach((function(e){var s,n,t,i;delete e.updatedAt,delete e.__v,delete e.isDraft,delete e.isPublished,delete e.isActive,delete e.isDeleted,delete e.isSubmitted,delete e.updatedAt,delete e.updatedBy,delete e.createdBy,delete e.createdAt,delete e.remarks,e["assignedMember.name"]=null!==(s=null===e||void 0===e||null===(n=e.assignedMember)||void 0===n?void 0:n.name)&&void 0!==s?s:"N/A",e["assignedOperationMember.name"]=null!==(t=null===e||void 0===e||null===(i=e.assignedOperationMember)||void 0===i?void 0:i.name)&&void 0!==t?t:"N/A",e.isUserAuthorizedToFillAssessment=Ze._id===e.assignedOperationMember._id,delete e.assignedOperationMember,delete e.assignedMember,delete e.memberCompany,delete e.questionnaireId,delete e.isMemberRepresentative,e.dueDate=new Date(new Date(e.dueDate).setDate(new Date(e.dueDate).getDate()-1)).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),S.forEach((function(s){var n=e[s];delete e[s],e[s]=n}))})),ue((0,i.Z)(e))};(0,o.useEffect)((function(){var e=!0,s=new AbortController;return H&&be(e,s),function(){e=!1,clearTimeout(E),s.abort()}}),[Q,X,le,ne,H]);var je=(0,u.v9)((function(e){var s;return null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.privilege})),Ze=(0,u.v9)((function(e){var s;return null===e||void 0===e||null===(s=e.user)||void 0===s?void 0:s.userObj})),ke="Super Admin"===(null===je||void 0===je?void 0:je.name),ye=("Super Admin"===(null===Ze||void 0===Ze||null===(e=Ze.roleId)||void 0===e?void 0:e.name)?[]:Object.values(null===je||void 0===je?void 0:je.privileges)).filter((function(e){var s;return"Assessment"===(null===e||void 0===e||null===(s=e.moduleId)||void 0===s?void 0:s.name)})).map((function(e){return{assessment:{list:null===e||void 0===e?void 0:e.list,visibility:null===e||void 0===e?void 0:e.view,edit:null===e||void 0===e?void 0:e.edit,add:null===e||void 0===e?void 0:e.add,fill:null===e||void 0===e?void 0:e.fill}}})),we=(0,r.Z)({},null===(s=ye[0])||void 0===s?void 0:s.assessment);return(0,j.jsxs)("div",{children:[(0,j.jsx)(p.Z,{messageType:A.messageType,descriptionMessage:A.descriptionMessage,myRef:y,titleMessage:A.titleMessage}),(0,j.jsx)("div",{className:"page-wrapper",children:(0,j.jsx)("section",{children:(0,j.jsxs)("div",{className:"container",children:[(0,j.jsxs)("div",{className:"form-header member-form-header flex-between mb-0",children:[(0,j.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,j.jsx)("h2",{className:"heading2 mr-40",children:"Assessments"})}),(0,j.jsxs)("div",{className:"form-header-right-txt search-and-btn-field-right view-instruct-field-right",children:[(0,j.jsx)("div",{className:"search-and-btn-field-blk mr-0",children:(0,j.jsxs)("div",{className:"searchbar",children:[(0,j.jsx)("input",{type:"text",value:z,name:"search",placeholder:"Search",onKeyDown:function(e){"Enter"===e.key&&(U(!0),W(1))},onChange:function(e){x.Y.debug("event",e.key),E&&clearTimeout(E),U(!1),x.Y.debug("search values",e.target.value),V(e.target.value),I(setTimeout((function(){U(!0),W(1)}),1e3))}}),(0,j.jsx)("button",{type:"submit",children:(0,j.jsx)("i",{className:"fa fa-search"})})]})}),(ke||(null===(n=ye[0])||void 0===n||null===(Z=n.assessment)||void 0===Z?void 0:Z.add))&&(0,j.jsx)("div",{className:"form-btn ml-20",children:(0,j.jsx)("button",{type:"submit",className:"primary-button add-button",onClick:function(){D("/assessment-list/add-assessment")},children:"Add Assessment"})}),(0,j.jsxs)("div",{className:"tertiary-btn-blk ml-20",onClick:function(){D("/assessment-list/instructions")},children:[(0,j.jsx)("span",{className:"preview-icon",children:(0,j.jsx)(f.Z,{})}),(0,j.jsx)("span",{className:"addmore-txt",children:"View Instructions"})]})]})]}),(0,j.jsx)("div",{className:"member-info-wrapper table-content-wrap",children:(0,j.jsx)("div",{className:"member-info-wrapper table-content-wrap table-footer-btm-space assessment-list-table",children:_?(0,j.jsx)(b.Z,{}):(0,j.jsx)(c.Z,{tableHead:k,records:ce,handleChangePage1:function(e){W(e)},handleChangeRowsPerPage1:function(e){$(parseInt(e.target.value,10)),W(1)},page:Q,rowsPerPage:X,totalRecords:he,orderBy:le,icons:function(){var e=Object.entries(we).filter((function(e){return!0===e[1]&&fe.push(e[0])}));return x.Y.debug(e),ke?fe=["edit","visibility"]:fe.includes("fill")?(fe.push("send"),fe):fe}(),onClickVisibilityIconHandler1:function(e){return D("/assessment-list/view-assessment/".concat(e))},onClickEditAssesmentFunction:function(e){return D("/assessment-list/edit-assessment/".concat(e))},order:ne,setOrder:te,setOrderBy:re,setCheckBoxes:!1,onClickAssignAssesmentFunction:function(e){return D("/assessment-list/assign-assessment/".concat(e))},onClickFillAssessmentFunction:function(e){return D("/assessment-list/fill-assessment/".concat(e))},viewAssessment:!0})})})]})})})]})}},9106:function(e,s,n){n.d(s,{Z:function(){return A}});var t=n(7195),i=n(3372),a=n(7194),l=n(6015),r=n(5473),o=n(6650),d=n(1680),c=n(9773),u=n(4390),v=n(9963),m=n(9827),h=n(807),g=n(3769),f=(n(2791),n(922)),p=n(6321),b=n(4917),x=n(5814),j=n(1346),Z=n(9407),k=n(4162),y=n(4585),w=(n(1605),n(184));function N(e){var s=e.onSelectAllClick,n=e.order,t=e.orderBy,i=e.tableHead,a=e.numSelected,l=e.rowCount,o=e.onRequestSort,d=e.setCheckBoxes;return(0,w.jsx)(m.Z,{children:(0,w.jsxs)(h.Z,{children:[d&&(0,w.jsx)(u.Z,{padding:"checkbox",className:"table-checkbox",children:(0,w.jsx)(r.Z,{color:"primary",indeterminate:a>0&&a<l,checked:l>0&&a===l,onChange:s,inputProps:{"aria-label":"select all desserts"},className:"checkbox-mui"})}),i.map((function(e){return(0,w.jsxs)(u.Z,{width:null===e||void 0===e?void 0:e.width,align:"left",padding:e.disablePadding?"none":"normal",className:"table-header",children:["action"!==e.id&&(0,w.jsx)(g.Z,{active:t===e.id,direction:t===e.id?n:"asc",onClick:(s=e.id,function(e){o(e,s)}),className:"sorted-blk",children:e.label}),"action"===e.id&&(0,w.jsx)("span",{className:"sorted-blk",children:e.label})]},e.id);var s}))]})})}function A(e){var s=e.tableHead,n=e.records,m=e.page,g=void 0===m?1:m,A=e.rowsPerPage,C=void 0===A?10:A,S=e.handleChangeRowsPerPage1,D=e.handleChangePage1,M=e.totalRecords,T=e.orderBy,_=e.setOrderBy,O=e.icons,P=e.onClickVisibilityIconHandler1,R=e.onClickDeleteIconHandler1,E=e.selected,I=void 0===E?[]:E,F=e.setSelected,B=e.order,H=void 0===B?"asc":B,U=e.setOrder,L=e.setCheckBoxes,Y=void 0===L||L,z=e.setSingleSelect,V=void 0!==z&&z,q=e.handleSingleUserSelect,K=e.selectedUser,Q=e.onRowClick,W=void 0!==Q&&Q,G=e.isQuestionnare,J=void 0!==G&&G,X=e.onClickEditAssesmentFunction,$=e.onClickAssignAssesmentFunction,ee=e.onClickFillAssessmentFunction,se=e.viewAssessment,ne=void 0!==se&&se,te=function(e,s){b.Y.debug("Inside on click handler",s),P(e,s||!1)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.Z,{sx:{width:"100%"},className:Y?"table-blk":"table-blk table-blk-without-checkbox",children:(0,w.jsx)(o.Z,{sx:{width:"100%",mb:2},children:(0,w.jsx)(v.Z,{children:(0,w.jsxs)(d.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,w.jsx)(N,{numSelected:I.length,order:H,orderBy:T,tableHead:s,onSelectAllClick:function(e){if(e.target.checked){var s=n.map((function(e){return e._id}));F(s)}else F([])},onRequestSort:function(e,s){U(T===s&&"asc"===H?"desc":"asc"),_(s)},rowCount:n.length,setCheckBoxes:Y}),(null===n||void 0===n?void 0:n.length)>0?(0,w.jsx)(c.Z,{children:n.map((function(e,s){b.Y.debug("row",e);var n,l=(n=e._id,-1!==I.indexOf(n)),o="enhanced-table-checkbox-".concat(s);return(0,w.jsxs)(h.Z,{hover:!0,onClick:function(){return W&&te(J?e.uuid:e._id,(null===e||void 0===e?void 0:e.isOperationMember)||(null===e||void 0===e?void 0:e.isMemberRepresentative))},style:{cursor:W&&"pointer"},role:"checkbox","aria-checked":l,tabIndex:-1,selected:l,children:[Y&&(0,w.jsx)(u.Z,{padding:"checkbox",children:(0,w.jsx)(r.Z,{className:"table-checkbox",color:"primary",onClick:function(s){return function(e,s){var n=I.indexOf(s),t=[];-1===n?t=t.concat(I,s):0===n?t=t.concat(I.slice(1)):n===I.length-1?t=t.concat(I.slice(0,-1)):n>0&&(t=t.concat(I.slice(0,n),I.slice(n+1))),F(t)}(0,e._id)},checked:l,inputProps:{"aria-labelledby":o}})}),V&&(0,w.jsx)(u.Z,{children:(0,w.jsx)("div",{className:"radio-btn-field",children:(0,w.jsx)(p.Z,{className:"radio-btn",color:"primary",value:e._id,onChange:function(){return function(e){q(e)}(e._id)},checked:K==e._id,inputProps:{"aria-labelledby":o}})})}),Object.keys(e).map((function(s,n){var t,i,a,l,r,o;return"_id"!==s&&"uuid"!==s&&"isActive"!==s&&"isUserAuthorizedToFillAssessment"!==s&&"isOperationMember"!==s&&"isMemberRepresentative"!==s&&"dueDate"!==s?(null===(t=e[s])||void 0===t?void 0:t.length)<=28||"undefined"===typeof e[s]?(0,w.jsxs)(u.Z,{children:[" ",("undefined"===typeof e[s]||""===e[s])&&"N/A","string"===typeof e[s]&&(null===(i=e[s])||void 0===i?void 0:i.length)>0&&"email"!==s?e[s][0].toUpperCase()+(null===(a=e[s])||void 0===a?void 0:a.slice(1)):e[s]]},s):(0,w.jsx)(x.Z,{placement:"bottom-start",enterDelay:1e3,title:e[s],children:(0,w.jsx)(u.Z,{children:"string"===typeof e[s]&&"email"!==s?e[s][0].toUpperCase()+"".concat(null===(l=e[s])||void 0===l?void 0:l.slice(1,28),"..."):"".concat(null===(r=e[s])||void 0===r?void 0:r.slice(0,28),"...")},s)},s):"isActive"===s?(0,w.jsx)(u.Z,{className:"button-style ".concat(e[s]&&"button-style-success"),children:(0,w.jsx)("span",{children:e[s]?"Active":"Inactive"})},s):"dueDate"===s?(b.Y.debug("due date  = ",new Date(e[s]).toLocaleDateString("en")),b.Y.debug("current date  = ",(new Date).toLocaleDateString("en")),b.Y.debug("Comparison = ",new Date(new Date(e[s]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()),(0,w.jsx)(u.Z,{className:"due-date-style ".concat(new Date(new Date(e[s]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()&&"due-date-style-success"),children:(0,w.jsx)("span",{children:null!==(o=e[s])&&void 0!==o?o:e[s]})},s)):void 0})),(null===O||void 0===O?void 0:O.length)>0&&(0,w.jsxs)(u.Z,{children:[O.includes("visibility")&&(0,w.jsx)("span",{className:"icon",children:(0,w.jsx)(x.Z,{title:"View Assessment",children:(0,w.jsx)(a.Z,{onClick:function(){return te(ne?e.uuid:e._id)}})})}),O.includes("delete")&&(0,w.jsx)("span",{className:"icon",children:(0,w.jsx)(x.Z,{title:"Delete",children:(0,w.jsx)("img",{src:"/images/delete-icon.svg",onClick:function(){return function(e){R(e)}(e._id)}})})}),O.includes("edit")&&(0,w.jsx)("span",{className:"icon",children:(0,w.jsx)(x.Z,{title:"Edit",children:(0,w.jsx)(t.Z,{onClick:function(){return s=e.uuid,void X(s);var s}})})}),O.includes("send")&&("In Progress"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Re-opened"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Accepted"==(null===e||void 0===e?void 0:e.assessmentStatus))&&e.isUserAuthorizedToFillAssessment&&(0,w.jsx)("span",{className:"icon",children:(0,w.jsx)(x.Z,{title:"Assign to Operation Member",children:(0,w.jsx)(f.Z,{onClick:function(){return $(e.uuid)}})})}),O.includes("fill")&&e.isUserAuthorizedToFillAssessment&&(0,w.jsx)("span",{className:"icon",children:(0,w.jsx)(x.Z,{title:"Fill Assessment",children:(0,w.jsx)(i.Z,{onClick:function(){return s=e.uuid,void ee(s);var s}})})})]})]},null===e||void 0===e?void 0:e._id)}))}):(0,w.jsx)(c.Z,{children:(0,w.jsx)("tr",{children:(0,w.jsx)("td",{colSpan:"10",children:(0,w.jsx)("div",{className:"no-records-blk",children:(0,w.jsx)("h2",{className:"heading2",children:"No records available"})})})})})]})})})}),(null===n||void 0===n?void 0:n.length)>0&&(0,w.jsxs)("div",{className:"table-footer flex-between",children:[(0,w.jsxs)("div",{className:"table-footer-left",children:[(0,w.jsxs)("div",{className:"per-page-blk",children:[(0,w.jsx)("span",{className:"per-page-txt",children:"Records"}),(0,w.jsx)("div",{className:"per-page-dropdown",children:(0,w.jsx)("div",{className:"per-page-select-field",children:(0,w.jsxs)(j.Z,{value:C,onChange:function(e){S(e)},children:[(0,w.jsx)(Z.Z,{value:"5",children:"05"}),(0,w.jsx)(Z.Z,{value:"10",selected:!0,children:"10"}),(0,w.jsx)(Z.Z,{value:"20",children:"20"})]})})})]}),(0,w.jsxs)("div",{className:"show-entries-txt",children:["showing ",(g-1)*C+1,"-",(g-1)*C+(null===n||void 0===n?void 0:n.length)," out of ",M]})]}),(0,w.jsx)("div",{className:"table-footer-right",children:(0,w.jsx)(k.Z,{spacing:2,className:"pagination-blk",children:(0,w.jsx)(y.Z,{page:g,count:Math.ceil(M/C),onChange:function(e,s){D(s)},variant:"outlined",shape:"rounded"})})})]})]})}},7659:function(e,s,n){n.d(s,{Z:function(){return o}});var t=n(2131),i=n(5130),a=n(2791),l=n(5985),r=(n(5462),n(184));var o=function(e){e.titleMessage;var s=e.descriptionMessage,n=e.messageType,o=e.myRef,d=(e.key,function(){(0,l.Am)(c,{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"toastId"})}),c=function(){return(0,r.jsxs)("div",{className:"toaster-blk flex-start ".concat("success"===n&&"toaster-blk-success"),children:[(0,r.jsx)("div",{className:"toaster-left ".concat("success"===n&&"toaster-left-success"),children:(0,r.jsxs)("div",{className:"toaster-icon",children:["success"===n&&(0,r.jsx)(t.Z,{}),"error"===n&&(0,r.jsx)(i.Z,{})]})}),(0,r.jsx)("div",{className:"toaster-right",children:(0,r.jsx)("p",{children:s})})]})};return(0,a.useEffect)((function(){o.current=d}),[d,o]),(0,r.jsxs)("div",{className:"toaster-sect",children:[(0,r.jsx)("button",{style:{display:"none"},children:"Show Toast !"}),(0,r.jsx)(l.Ix,{className:"toaster-wrap ".concat("success"===n&&"toaster-wrap-success"," ")})]})}},2820:function(e,s,n){var t=n(885),i=n(2791);s.Z=function(e){var s=(0,i.useState)(e),n=(0,t.Z)(s,2),a=n[0],l=n[1],r=(0,i.useRef)([]);(0,i.useEffect)((function(){r.current.forEach((function(e){return e(a)})),r.current=[]}),[a]);return[a,function(e,s){l(e),s&&"function"===typeof s&&r.current.push(s)}]}},1260:function(e,s,n){n.d(s,{j:function(){return i}});var t=n(2791),i=function(e){return(0,t.useEffect)((function(){document.title="HRDD System - ".concat(e)}),[e]),null}},1605:function(){}}]);
//# sourceMappingURL=6035.8268c075.chunk.js.map