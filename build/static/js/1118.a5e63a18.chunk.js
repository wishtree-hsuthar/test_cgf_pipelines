"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[1118],{14227:(e,l,a)=>{a.d(l,{Z:()=>n});var s=a(56890),r=a(35855),t=a(53994),i=(a(72791),a(80184));const n=()=>(0,i.jsx)(s.Z,{children:(0,i.jsxs)(r.Z,{children:[(0,i.jsx)(t.Z,{align:"left",className:"table-header",width:"16%",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Modules"})}),(0,i.jsx)(t.Z,{className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Fill"})}),(0,i.jsx)(t.Z,{className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"List"})}),(0,i.jsx)(t.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Add"})}),(0,i.jsx)(t.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Edit"})}),(0,i.jsx)(t.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"View"})}),(0,i.jsx)(t.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Delete"})}),(0,i.jsx)(t.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"All"})})]})})},51118:(e,l,a)=>{a.r(l),a.d(l,{default:()=>P});var s=a(97275),r=a(88970),t=a(85523),i=a(61419),n=a(697),o=a(35527),d=a(39281),c=a(79836),m=a(53382),u=a(35855),h=a(53994),p=a(94454),b=a(72791),v=a(61134),x=a(57689),g=a(11087),f=a(74569),j=a.n(f),Z=a(14917),w=a(27659),N=(a(71605),a(12820)),y=a(76218),k=a(1260),C=a(14227),R=a(28386),M=a(45736),S=a(80184);const P=()=>{(0,k.j)("Edit Role");const e=(0,x.UO)(),[l,a]=(0,b.useState)(!1),f=(0,x.s0)(),[P,E]=(0,N.Z)({titleMessage:"",descriptionMessage:"",messageType:""}),T=b.useRef();let F={};const[L,D]=(0,b.useState)({...F}),[q,A]=(0,b.useState)(!1),{control:O,reset:_,setValue:I,handleSubmit:Y}=(0,v.cI)({defaultValues:{roleName:"",status:"",description:""}}),V={description:{required:"Enter the description",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required"}},G=e=>{var l;Z.Y.info("Edit role - updateEditFields handler"),_({roleName:e.name,status:e.isActive?"active":"inactive",description:e.description}),l=e.privileges,Z.Y.info("Edit role - createPrevileges handler"),Object.keys(l).forEach((e=>{console.log("tempPriv",e),F[e]={add:l[e].add,fill:l[e].fill,delete:l[e].delete,edit:l[e].edit,list:l[e].list,view:l[e].view,all:l[e].add&&l[e].delete&&l[e].edit&&l[e].view&&l[e].list&&("Assessment"!==l[e].moduleId.name||l[e].fill),name:l[e].moduleId.name}})),console.log("temp object",F),D({...F})};return(0,b.useEffect)((()=>{let l=!0;const s=new AbortController;return l&&(async(l,s)=>{try{a(!0);const l=await j().get(y.Yn+"roles/".concat(e.id),{signal:s.signal});Z.Y.info("Edit role - getRoleById handler"),console.log("edit get role by id",l),G(l.data),a(!1)}catch(i){var r,t;if(Z.Y.info("Edit role - getRoleById handler catch error ".concat(null===i||void 0===i||null===(r=i.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)),"ERR_CANCELED"===(null===i||void 0===i?void 0:i.code))return;a(!1),(0,M.K)(i,E,T,f)}})(0,s),()=>{l=!1,s.abort()}}),[]),(0,S.jsxs)("div",{className:"page-wrapper",children:[(0,S.jsx)(w.Z,{myRef:T,titleMessage:P.titleMessage,descriptionMessage:P.descriptionMessage,messageType:P.messageType}),(0,S.jsx)("div",{className:"breadcrumb-wrapper",children:(0,S.jsx)("div",{className:"container",children:(0,S.jsxs)("ul",{className:"breadcrumb",children:[(0,S.jsx)("li",{children:(0,S.jsx)(g.rU,{to:"/roles",children:"Roles"})}),(0,S.jsx)("li",{children:(0,S.jsx)(g.rU,{to:"/roles/view-role/".concat(e.id),children:"View Role"})}),(0,S.jsx)("li",{children:"Edit Role"})]})})}),(0,S.jsx)("section",{children:(0,S.jsxs)("div",{className:"container",children:[(0,S.jsx)("div",{className:"form-header flex-between",children:(0,S.jsx)("h2",{className:"heading2",children:"Edit Role"})}),l?(0,S.jsx)(R.Z,{}):(0,S.jsx)("form",{onSubmit:Y((async l=>{try{Z.Y.info("Edit role - onSubmit1 handler");let s=JSON.parse(JSON.stringify(L));if(Object.keys(s).forEach((e=>{delete s[e].all,delete s[e].name})),!(e=>Object.values(e).some((e=>Object.values(e).some((e=>e)))))(s))return void E({titleMessage:"Hurray!",descriptionMessage:"Select atleast 1 privilege",messageType:"error"},(()=>T.current()));a(!0),A(!0);const r=await j().put(y.Yn+"roles/".concat(e.id),{description:l.description,isActive:"active"===l.status,privileges:s});200==r.status&&(a(!1),E({titleMessage:"Success!",descriptionMessage:r.data.message,messageType:"success"},(()=>T.current())),_({roleName:"",status:"active",description:""}),setTimeout((()=>f("/roles/view-role/".concat(e.id))),3e3))}catch(t){var s,r;Z.Y.info("Edit role - onSubmit1 handler ".concat(null===t||void 0===t||null===(s=t.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)),A(!1),(0,M.K)(t,E,T,f)}})),children:(0,S.jsxs)("div",{className:"card-wrapper",children:[(0,S.jsxs)("div",{className:"card-blk flex-between",children:[(0,S.jsx)("div",{className:"card-form-field",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsxs)("label",{htmlFor:"roleName",children:["Role Name ",(0,S.jsx)("span",{className:"mandatory",children:"*"})]}),(0,S.jsx)(v.Qr,{name:"roleName",control:O,render:e=>{let{field:l,fieldState:{error:a}}=e;return(0,S.jsx)(s.Z,{disabled:!0,...l,className:"input-field ".concat(a&&"input-error"),id:"outlined-basic",placeholder:"Enter role name",variant:"outlined",helperText:" "})}})]})}),(0,S.jsx)("div",{className:"card-form-field",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"status",children:"Status"}),(0,S.jsx)("div",{className:"radio-btn-field",children:(0,S.jsx)(v.Qr,{name:"status",control:O,render:e=>{let{field:l}=e;return(0,S.jsxs)(r.Z,{...l,"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",className:"radio-btn",children:[(0,S.jsx)(t.Z,{value:"active",control:(0,S.jsx)(i.Z,{}),label:"Active"}),(0,S.jsx)(t.Z,{value:"inactive",control:(0,S.jsx)(i.Z,{}),label:"Inactive"})]})}})})]})}),(0,S.jsx)("div",{className:"card-form-field fullwidth",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsxs)("label",{htmlFor:"description",children:["Description ",(0,S.jsx)("span",{className:"mandatory",children:"*"})]}),(0,S.jsx)(v.Qr,{name:"description",rules:{required:!0,maxLength:500,minLength:3},control:O,render:e=>{let{field:l,fieldState:{error:a}}=e;return(0,S.jsx)(s.Z,{multiline:!0,...l,onBlur:e=>I("description",e.target.value.trim()),inputProps:{maxLength:500},className:"input-textarea ".concat(a&&"input-textarea-error"),id:"outlined-basic",placeholder:"Enter description",helperText:a?V.description[a.type]:" ",variant:"outlined"})}})]})})]}),(0,S.jsx)(n.Z,{sx:{width:"100%"},className:"table-blk table-blk-role",children:(0,S.jsx)(o.Z,{sx:{width:"100%"},children:(0,S.jsx)(d.Z,{children:(0,S.jsxs)(c.Z,{sx:{minWidth:750},children:[(0,S.jsx)(C.Z,{}),(0,S.jsx)(m.Z,{children:Object.keys(L).map(((e,l)=>(0,S.jsxs)(u.Z,{hover:!0,children:[(0,S.jsx)(h.Z,{children:L[e].name}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Assessment"===L[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:L[e].fill,onChange:()=>D((l=>({...l,[e]:{...l[e],fill:!l[e].fill,list:l[e].list||!l[e].fill,view:l[e].view||!l[e].fill,all:!l[e].fill&&l[e].add&&l[e].edit&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==L[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:L[e].list,onChange:()=>D((l=>({...l,[e]:{...l[e],list:!l[e].list,view:l[e].view&&!l[e].list||!1,edit:l[e].edit&&!l[e].list||!1,delete:l[e].delete&&!l[e].list||!1,add:l[e].add&&!l[e].list||!1,fill:l[e].fill&&!l[e].list||!1,all:!l[e].list&&l[e].add&&l[e].edit&&l[e].view&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==L[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:L[e].add,onChange:()=>D((l=>({...l,[e]:{...l[e],add:!l[e].add,list:l[e].list||!l[e].add,view:l[e].view||!l[e].add,all:!l[e].add&&l[e].edit&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==L[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:L[e].edit,onChange:()=>D((l=>({...l,[e]:{...l[e],edit:!l[e].edit,list:l[e].list||!l[e].edit,view:l[e].view||!l[e].edit,all:l[e].add&&!l[e].edit&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:(0,S.jsx)(p.Z,{className:"table-checkbox",checked:L[e].view,onChange:()=>D((l=>({...l,[e]:{...l[e],view:!l[e].view,list:l[e].list||!l[e].view,edit:l[e].edit&&!l[e].view||!1,delete:l[e].delete&&!l[e].view||!1,fill:l[e].fill&&!l[e].view||!1,all:l[e].add&&l[e].edit&&!l[e].view&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==L[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:L[e].delete,onChange:()=>D((l=>({...l,[e]:{...l[e],delete:!l[e].delete,list:l[e].list||!l[e].delete,edit:l[e].edit||!l[e].delete,view:l[e].view||!l[e].delete,all:l[e].add&&!l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==L[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:L[e].all,onChange:()=>D((l=>({...l,[e]:{...l[e],all:!l[e].all,list:!l[e].all,view:!l[e].all,add:!l[e].all,edit:!l[e].all,delete:!l[e].all,fill:"Assessment"===L[e].name&&!l[e].all}})))})})]},e)))})]})})})}),(0,S.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,S.jsx)("button",{type:"reset",style:{marginTop:"20px"},className:"secondary-button mr-10",onClick:()=>{f("/roles/view-role/".concat(e.id))},children:"Cancel"}),(0,S.jsx)("button",{type:"submit",className:"primary-button",style:{marginTop:"20px"},disabled:q,children:"Update"})]})]})})]})})]})}},45736:(e,l,a)=>{a.d(l,{K:()=>s});const s=async function(e,l,a,s,r){var t,i;let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if("ERR_CANCELED"===(null===e||void 0===e?void 0:e.code))return null;if(401==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))l({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again!",messageType:"error"},(()=>a.current())),setTimeout((()=>{s("/login")}),3e3);else if(403===(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status)){var o,d,c,m;l({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(d=o.data)&&void 0!==d&&d.message?null===e||void 0===e||null===(c=e.response)||void 0===c||null===(m=c.data)||void 0===m?void 0:m.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>a.current())),setTimeout((()=>{s("/home")}),3e3)}else{var u,h,p,b;console.log("error - ",e),l({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(u=e.response)&&void 0!==u&&null!==(h=u.data)&&void 0!==h&&h.message?null===e||void 0===e||null===(p=e.response)||void 0===p||null===(b=p.data)||void 0===b?void 0:b.message:null!==e&&void 0!==e&&e.message?"File not uploaded yet":"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>a.current())),r&&setTimeout((()=>{s(r,{state:n})}),3e3)}}},1260:(e,l,a)=>{a.d(l,{j:()=>r});var s=a(72791);const r=e=>((0,s.useEffect)((()=>{document.title="HRDD System - ".concat(e)}),[e]),null)},85523:(e,l,a)=>{a.d(l,{Z:()=>N});var s=a(63366),r=a(87462),t=a(72791),i=a(63733),n=a(94419),o=a(52930),d=a(53767),c=a(20890),m=a(14036),u=a(66934),h=a(31402),p=a(75878),b=a(21217);function v(e){return(0,b.Z)("MuiFormControlLabel",e)}const x=(0,p.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);var g=a(76147),f=a(80184);const j=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Z=(0,u.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,l)=>{const{ownerState:a}=e;return[{["& .".concat(x.label)]:l.label},l.root,l["labelPlacement".concat((0,m.Z)(a.labelPlacement))]]}})((e=>{let{theme:l,ownerState:a}=e;return(0,r.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(x.disabled)]:{cursor:"default"}},"start"===a.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===a.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===a.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(x.label)]:{["&.".concat(x.disabled)]:{color:(l.vars||l).palette.text.disabled}}})})),w=(0,u.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,l)=>l.asterisk})((e=>{let{theme:l}=e;return{["&.".concat(x.error)]:{color:(l.vars||l).palette.error.main}}})),N=t.forwardRef((function(e,l){var a,u;const p=(0,h.Z)({props:e,name:"MuiFormControlLabel"}),{className:b,componentsProps:x={},control:N,disabled:y,disableTypography:k,label:C,labelPlacement:R="end",required:M,slotProps:S={}}=p,P=(0,s.Z)(p,j),E=(0,o.Z)(),T=null!=(a=null!=y?y:N.props.disabled)?a:null==E?void 0:E.disabled,F=null!=M?M:N.props.required,L={disabled:T,required:F};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof N.props[e]&&"undefined"!==typeof p[e]&&(L[e]=p[e])}));const D=(0,g.Z)({props:p,muiFormControl:E,states:["error"]}),q=(0,r.Z)({},p,{disabled:T,labelPlacement:R,required:F,error:D.error}),A=(e=>{const{classes:l,disabled:a,labelPlacement:s,error:r,required:t}=e,i={root:["root",a&&"disabled","labelPlacement".concat((0,m.Z)(s)),r&&"error",t&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",r&&"error"]};return(0,n.Z)(i,v,l)})(q),O=null!=(u=S.typography)?u:x.typography;let _=C;return null==_||_.type===c.Z||k||(_=(0,f.jsx)(c.Z,(0,r.Z)({component:"span"},O,{className:(0,i.Z)(A.label,null==O?void 0:O.className),children:_}))),(0,f.jsxs)(Z,(0,r.Z)({className:(0,i.Z)(A.root,b),ownerState:q,ref:l},P,{children:[t.cloneElement(N,L),F?(0,f.jsxs)(d.Z,{display:"block",children:[_,(0,f.jsxs)(w,{ownerState:q,"aria-hidden":!0,className:A.asterisk,children:["\u2009","*"]})]}):_]}))}))},79012:(e,l,a)=>{a.d(l,{Z:()=>g});var s=a(63366),r=a(87462),t=a(72791),i=a(63733),n=a(94419),o=a(66934),d=a(31402),c=a(75878),m=a(21217);function u(e){return(0,m.Z)("MuiFormGroup",e)}(0,c.Z)("MuiFormGroup",["root","row","error"]);var h=a(52930),p=a(76147),b=a(80184);const v=["className","row"],x=(0,o.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,l)=>{const{ownerState:a}=e;return[l.root,a.row&&l.row]}})((e=>{let{ownerState:l}=e;return(0,r.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},l.row&&{flexDirection:"row"})})),g=t.forwardRef((function(e,l){const a=(0,d.Z)({props:e,name:"MuiFormGroup"}),{className:t,row:o=!1}=a,c=(0,s.Z)(a,v),m=(0,h.Z)(),g=(0,p.Z)({props:a,muiFormControl:m,states:["error"]}),f=(0,r.Z)({},a,{row:o,error:g.error}),j=(e=>{const{classes:l,row:a,error:s}=e,r={root:["root",a&&"row",s&&"error"]};return(0,n.Z)(r,u,l)})(f);return(0,b.jsx)(x,(0,r.Z)({className:(0,i.Z)(j.root,t),ownerState:f,ref:l},c))}))},88970:(e,l,a)=>{a.d(l,{Z:()=>h});var s=a(87462),r=a(63366),t=a(72791),i=a(79012),n=a(42071),o=a(98278),d=a(18672),c=a(67384),m=a(80184);const u=["actions","children","defaultValue","name","onChange","value"],h=t.forwardRef((function(e,l){const{actions:a,children:h,defaultValue:p,name:b,onChange:v,value:x}=e,g=(0,r.Z)(e,u),f=t.useRef(null),[j,Z]=(0,o.Z)({controlled:x,default:p,name:"RadioGroup"});t.useImperativeHandle(a,(()=>({focus:()=>{let e=f.current.querySelector("input:not(:disabled):checked");e||(e=f.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const w=(0,n.Z)(l,f),N=(0,c.Z)(b),y=t.useMemo((()=>({name:N,onChange(e){Z(e.target.value),v&&v(e,e.target.value)},value:j})),[N,v,Z,j]);return(0,m.jsx)(d.Z.Provider,{value:y,children:(0,m.jsx)(i.Z,(0,s.Z)({role:"radiogroup",ref:w},g,{children:h}))})}))}}]);
//# sourceMappingURL=1118.a5e63a18.chunk.js.map