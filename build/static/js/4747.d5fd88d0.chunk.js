"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[4747],{4747:(e,i,l)=>{l.r(i),l.d(i,{default:()=>c});var n=l(72791),o=l(57689),s=l(71300),d=l(14917),t=l(59418),r=l(80184);const u=n.lazy((()=>Promise.all([l.e(1807),l.e(3453)]).then(l.bind(l,83453)))),a=n.lazy((()=>l.e(1257).then(l.bind(l,61257))));const c=function(e){let{myRef:i,setToasterDetails:l,section:c,setAssessmentQuestionnaire:v,assessmentQuestionnaire:m,errorQuestion:h,setErrorQuestion:p,errorQuestionUUID:b,setErrorQuestionUUID:k,errors:x,handleSetErrors:y,handleFormSubmit:g,editMode:j,setEditMode:w,disableFillAssessment:f,totalSections:N,index:C,questionnaireId:M}=e;const U=(0,o.s0)(),I=(0,o.UO)(),[T,Q]=(0,n.useState)(!1),Z=(e,i)=>{v({...m,[null===c||void 0===c?void 0:c.uuid]:{...m[null===c||void 0===c?void 0:c.uuid],[e]:i}})},D=(e,i)=>{d.Y.info("Fill Assessment section - handleAnswersBlur handler"),v({...m,[null===c||void 0===c?void 0:c.uuid]:{...m[null===c||void 0===c?void 0:c.uuid],[e]:null===i||void 0===i?void 0:i.trim()}})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{title:(0,r.jsx)("p",{children:"Cancel Assessment"}),info1:(0,r.jsx)("p",{children:"On canceling, all the unsaved details of the sections will be removed."}),info2:(0,r.jsx)("p",{children:"Do you still want to cancel it?"}),primaryButtonText:"Yes",secondaryButtonText:"No",onPrimaryModalButtonClickHandler:()=>{U("/assessment-list")},onSecondaryModalButtonClickHandler:()=>{Q(!1)},openModal:T,setOpenModal:Q}),(0,r.jsxs)("div",{className:"preview-sect-ttl-wrap",children:[(0,r.jsx)("div",{className:"preview-sect-card-ttl-blk",children:(0,r.jsx)("h2",{className:"subheading",children:null===c||void 0===c?void 0:c.sectionTitle})}),(0,r.jsx)("div",{className:"preview-sect-txt",children:null===c||void 0===c?void 0:c.description})]}),(0,r.jsxs)("div",{className:"preview-card-wrapper",children:[(0,r.jsx)("div",{className:"preview-que-wrap",children:"form"===c.layout?c.questions.map((e=>{var i;return(0,r.jsx)(u,{assessmentQuestionnaire:m,setAssessmentQuestionnaire:v,sectionUUID:null===c||void 0===c?void 0:c.uuid,question:e,errorQuestion:h,setErrorQuestion:p,errorQuestionUUID:b,setErrorQuestionUUID:k,answer:m[null===c||void 0===c?void 0:c.uuid]&&m[null===c||void 0===c?void 0:c.uuid][null===e||void 0===e?void 0:e.uuid]?m[null===c||void 0===c?void 0:c.uuid][null===e||void 0===e?void 0:e.uuid]:"checkbox"===(null===e||void 0===e?void 0:e.inputType)?[]:"",error:null!==(i=x[null===e||void 0===e?void 0:e.uuid])&&void 0!==i?i:"",handleAnswersChange:Z,handleAnswersBlur:D,editMode:j,setEditMode:w},null===e||void 0===e?void 0:e.uuid)})):"documents"===(null===c||void 0===c?void 0:c.layout)?c.documents.map((e=>(0,r.jsx)(t.Z,{sectionUUID:null===c||void 0===c?void 0:c.uuid,questionnaireId:M,documentObj:e}))):(0,r.jsx)(a,{setAssessmentQuestionnaire:v,assessmentQuestionnaire:m,sectionUUID:null===c||void 0===c?void 0:c.uuid,columnValues:null===c||void 0===c?void 0:c.columnValues,rowValues:null===c||void 0===c?void 0:c.rowValues,handleAnswersChange:Z,handleAnswersBlur:D,errors:null!==x&&void 0!==x?x:{},editMode:j,myRef:i,setToasterDetails:l})}),j&&!I["*"].includes("view")?(0,r.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,r.jsx)("button",{type:"reset",onClick:()=>Q(!0),className:"secondary-button mr-10",disabled:f,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",onClick:e=>g(e,!0),disabled:f,className:"outlined-button add-button mr-10",children:"Save as draft"}),(0,r.jsx)("button",{type:"submit",onClick:e=>g(e,!1),disabled:f,className:"primary-button add-button",hidden:N!==C+1,children:"Submit assessment"})]}):(0,r.jsx)("div",{className:"form-btn flex-between add-members-btn",children:(0,r.jsx)("button",{type:"reset",onClick:()=>U("/assessment-list"),className:"secondary-button",children:"Cancel"})})]})]})}},59418:(e,i,l)=>{l.d(i,{Z:()=>x});var n=l(72791),o=l(94677),s=l(76218),d=l(57689),t=l(12820),r=l(27659),u=l(45736),a=l(79836),c=l(53382),v=l(53994),m=l(39281),h=l(35855),p=l(35527),b=l(20068),k=l(80184);const x=function(e){var i,l,x,y,g,j,w,f,N,C;let{key:M,documentObj:U={},doc:I={},sectionUUID:T="",questionnaireId:Q=""}=e;function Z(e,i){return e.length<=i?e:e.substring(0,i-3)+"..."}console.log("qid",Q),console.log("documentObj",U),console.log("doc",I),console.log("LINK ",null===U||void 0===U?void 0:U.link);const D=(0,d.s0)(),[A,L]=(0,t.Z)({titleMessage:"",descriptionMessage:"",messageType:"error"}),E=(0,n.useRef)();return(0,k.jsxs)("div",{children:[(0,k.jsx)(r.Z,{myRef:E,titleMessage:A.titleMessage,descriptionMessage:A.descriptionMessage,messageType:A.messageType}),(0,k.jsx)(m.Z,{component:p.Z,children:(0,k.jsx)(a.Z,{sx:{minWidth:650},"aria-label":"simple table",children:(0,k.jsx)(c.Z,{children:(0,k.jsxs)(h.Z,{children:[(0,k.jsx)(v.Z,{align:"left",style:{width:"50%"},children:null!==(i=null!==(l=null!==(x=null===U||void 0===U?void 0:U.documentTitle)&&void 0!==x?x:null===U||void 0===U?void 0:U.linkTitle)&&void 0!==l?l:null===I||void 0===I?void 0:I.documentTitle)&&void 0!==i?i:null===I||void 0===I?void 0:I.linkTitle}),(0,k.jsx)(v.Z,{align:"left",children:"Link"===(null===I||void 0===I?void 0:I.type)||"Link"===(null===U||void 0===U?void 0:U.type)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("a",{href:null!==U&&void 0!==U&&U.link?null!==U&&void 0!==U&&U.link.toLowerCase().startsWith("http")?null===U||void 0===U?void 0:U.link:"https://"+(null===U||void 0===U?void 0:U.link):null!==I&&void 0!==I&&I.link.toLowerCase().startsWith("https")?null===I||void 0===I?void 0:I.link:"https://"+(null===I||void 0===I?void 0:I.link),onClick:()=>{var e;return console.log("LINK ON ONCLICK",null!==(e="https://"+(null===I||void 0===I?void 0:I.link))&&void 0!==e?e:null===U||void 0===U?void 0:U.link)},target:"_blank",children:(0,k.jsx)(b.Z,{title:null!==(y=null!==(g=null===U||void 0===U?void 0:U.link)&&void 0!==g?g:I.link)&&void 0!==y?y:null===I||void 0===I?void 0:I.link,children:Z(null!==(j=null===I||void 0===I?void 0:I.link)&&void 0!==j?j:null===U||void 0===U?void 0:U.link,70)})}),(0,k.jsx)("button",{onClick:async()=>{try{await navigator.clipboard.writeText((null===I||void 0===I?void 0:I.link)||(null===U||void 0===U?void 0:U.link)),L({titleMessage:"Hurray!",descriptionMessage:"Link copied successfully!",messageType:"success"},(()=>E.current()))}catch(e){console.error("Failed to copy link: ",e)}},children:"Copy Link"})]}):(0,k.jsx)("div",{href:"#",onClick:e=>{e.preventDefault(),(async()=>{try{var e,i;const l=await o.H.post(s.uj,{questionnaireId:Q,sectionId:T,documentId:null!==(e=null===U||void 0===U?void 0:U.uuid)&&void 0!==e?e:I.uuid},{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([l.data])),d=document.createElement("a");d.href=n,d.setAttribute("download","".concat(null!==(i=null===U||void 0===U?void 0:U.originalName)&&void 0!==i?i:I.originalName)),document.body.appendChild(d),d.click(),201===l.status&&L({titleMessage:"Hurray!",descriptionMessage:"File downloaded successfully!",messageType:"success"},(()=>E.current()))}catch(l){(0,u.K)(l,L,E,D),console.log("Error from download other doc",l)}})()},style:{color:null!==I&&void 0!==I&&I.link?"none":"#4596D1",cursor:null!==I&&void 0!==I&&I.link?"default":"pointer"},children:(0,k.jsx)(b.Z,{title:null!==(w=null!==(f=null===U||void 0===U?void 0:U.originalName)&&void 0!==f?f:I.originalName)&&void 0!==w?w:null===I||void 0===I?void 0:I.link,children:Z(null!==(N=null!==(C=null===U||void 0===U?void 0:U.originalName)&&void 0!==C?C:I.originalName)&&void 0!==N?N:null===I||void 0===I?void 0:I.link,70)})})})]})})})})]})}}}]);
//# sourceMappingURL=4747.d5fd88d0.chunk.js.map