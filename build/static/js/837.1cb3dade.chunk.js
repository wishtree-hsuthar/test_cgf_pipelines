"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[837],{2700:function(e,n,t){t.r(n),t.d(n,{AlphaNumRegEx:function(){return F},AlphaRegEx:function(){return D},NumericRegEx:function(){return _}});var o=t(1413),i=t(4165),a=t(7762),l=t(2982),r=t(5861),s=t(885),c=t(9823),d=t(600),u=t(7954),p=t(2104),v=t(7205),h=t(1898),m=t(7924),f=t(5814),g=t(8588),x=t(1346),y=t(9407),Z=t(6571),j=t(8723),b=t(7792),w=t(2791),k=t(7689),M=t(4677),C=t(6218),N=t(385),T=t(1300),S=t(7659),A=t(4917),B=t(2820),E=t(184),D=/^[a-zA-Z ]*$/,_=/^[0-9]+$/i,F=/^[a-z0-9]+$/i,R=[".jpg",".jpeg",".png",".doc",".txt",".pdf",".docx",".xlsx",".xls",".ppt",".pptx",".mp4",".mp3",".zip",".rar"];n.default=function(e){var n,t,c,I,O,P,z,L,H=e.isPrefilled,U=e.assessmentQuestionnaire,Y=e.cell,$=e.columnId,Q=e.sectionUUID,G=e.rowId,J=e.setAssessmentQuestionnaire,K=e.answer,V=e.transformedColumns,q=e.error,X=e.editMode,ee=e.handleAnswersChange,ne=e.handleAnswersBlur,te=(0,w.useState)(!1),oe=(0,s.Z)(te,2),ie=oe[0],ae=oe[1],le=(0,w.useState)(!1),re=(0,s.Z)(le,2),se=re[0],ce=re[1],de=w.useRef(),ue=(0,k.s0)(),pe=(0,k.UO)(),ve=(0,w.useState)(!1),he=(0,s.Z)(ve,2),me=he[0],fe=he[1],ge=(0,w.useState)(!1),xe=(0,s.Z)(ge,2),ye=xe[0],Ze=xe[1],je=(0,w.useState)([]),be=(0,s.Z)(je,2),we=(be[0],be[1]),ke=(0,w.useState)(!1),Me=(0,s.Z)(ke,2),Ce=Me[0],Ne=Me[1],Te=function(e){e.preventDefault()},Se=(0,w.useState)(!1),Ae=(0,s.Z)(Se,2),Be=Ae[0],Ee=Ae[1],De=(0,B.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),_e=(0,s.Z)(De,2),Fe=_e[0],Re=_e[1],We=(0,w.useState)([]),Ie=(0,s.Z)(We,2),Oe=Ie[0],Pe=Ie[1],ze=H||!H&&U&&!Object.keys(U).length>0?null===Y||void 0===Y?void 0:Y.columnId:$,Le=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){var t,o,r,s,c,d,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,l.Z)(Oe),o=0,Ee(!0),r=(0,a.Z)(n),e.prev=4,r.s();case 6:if((s=r.n()).done){e.next=26;break}if(c=s.value,e.prev=8,10485760,!((null===c||void 0===c?void 0:c.size)>10485760)){e.next=13;break}return o+=1,e.abrupt("continue",24);case 13:if(d=null===c||void 0===c?void 0:c.name.split("."),u="."+d[(null===d||void 0===d?void 0:d.length)-1],R.includes(u)){e.next=18;break}return o+=1,e.abrupt("continue",24);case 18:t.push(c),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),Ee(!1);case 24:e.next=6;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(4),r.e(e.t1);case 31:return e.prev=31,r.f(),e.finish(31);case 34:Pe(t),o&&Re({titleMessage:"Error",descriptionMessage:"".concat(o," ").concat(o>1?"files":"file"," couldn't be uploaded"),messageType:"error"},(function(){return de.current()})),Ee(!1);case 37:case"end":return e.stop()}}),e,null,[[4,28,31,34],[8,21]])})));return function(n){return e.apply(this,arguments)}}(),He=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){var t,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===n||void 0===n||null===(t=n.target)||void 0===t?void 0:t.files;case 2:if(a=e.sent,!((null===(o=Object.keys(a))||void 0===o?void 0:o.length)>100)){e.next=6;break}return Re({titleMessage:"",descriptionMessage:"Max file count 100 reached",messageType:"error"},(function(){return de.current()})),e.abrupt("return");case 6:Le(a);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ue=function(e){var n,t=new FormData,o=(0,a.Z)(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.append("files[]",i)}}catch(l){o.e(l)}finally{o.f()}return t.append("dummy","dummy Content"),t},Ye=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var n,t,a,r,s,c,d,u,p,v,h,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A.Y.debug("Current Selected files:- ",Oe),Ne(!0),e.prev=2,n=Oe.filter((function(e){return!(null!==e&&void 0!==e&&e.location)})),t=Ue(n),A.Y.debug("newly Added files:- ",n),a=Oe.filter((function(e){return null===e||void 0===e?void 0:e.location})),r=C.A+"/".concat(null===pe||void 0===pe?void 0:pe.id,"/attachments/").concat(Q,"/").concat(ze+"_"+G),e.next=10,M.H.post(r,t);case 10:return s=e.sent,A.Y.debug("old files:- ",a,"new files",s.data),e.next=14,M.H.put(r,{attachments:[].concat((0,l.Z)(a),(0,l.Z)(null===s||void 0===s?void 0:s.data))});case 14:Ne(!1),(c=(0,o.Z)({},U))[Q]["".concat(ze,"_").concat(G)]=[].concat((0,l.Z)(a),(0,l.Z)(null===s||void 0===s?void 0:s.data)),Re({titleMessage:"",descriptionMessage:"Attachments saved!",messageType:"success"},(function(){return de.current()})),J(c),Pe([]),fe(!1),Ze(!1),e.next=30;break;case 24:if(e.prev=24,e.t0=e.catch(2),Ne(!1),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=29;break}return e.abrupt("return");case 29:400===(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)&&"Invalid assessment id!"===(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u||null===(p=u.data)||void 0===p?void 0:p.message)?(console.log("in 400"),Re({titleMessage:"Oops!",descriptionMessage:"Oops!! There is some error while saving assessment details. Either someone has removed this assessment or looks like invalid assessment getting submitted. For more details please contact system / CGF admin",messageType:"error"},(function(){return de.current()})),setTimeout((function(){ue("/assessment-list")}),3e3)):401===(null===e.t0||void 0===e.t0||null===(v=e.t0.response)||void 0===v?void 0:v.status)?(Re({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return de.current()})),setTimeout((function(){ue("/login")}),3e3)):Re({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(h=e.t0.response)&&void 0!==h&&null!==(m=h.data)&&void 0!==m&&m.message&&"string"===typeof e.t0.response.data.message?e.t0.response.data.message:"Oops! Something went wrong. Please try again later.!",messageType:"error"},(function(){return de.current()}));case 30:case"end":return e.stop()}}),e,null,[[2,24]])})));return function(){return e.apply(this,arguments)}}(),$e=function(){Pe([]),Ze(!1),fe(!1)};return(0,w.useEffect)((function(){var e;if(K&&(null===K||void 0===K?void 0:K.length)>0&&Array.isArray(K)&&0===(null===Oe||void 0===Oe?void 0:Oe.length)&&!ye&&we((0,l.Z)(K)),"attachments"===(null===(e=V[ze])||void 0===e?void 0:e.columnType)&&"string"===typeof K){var n=(0,o.Z)({},U);n[Q]["".concat(ze,"_").concat(G)]=[],J(n)}}),[]),(0,w.useEffect)((function(){K&&(null===K||void 0===K?void 0:K.length)>0&&Array.isArray(K)&&0===(null===Oe||void 0===Oe?void 0:Oe.length)&&!ye&&Pe((0,l.Z)(K))}),[Oe]),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(S.Z,{myRef:de,titleMessage:Fe.titleMessage,descriptionMessage:Fe.descriptionMessage,messageType:Fe.messageType}),(0,E.jsx)(T.Z,{title:(0,E.jsx)("p",{children:"Add Attachments"}),info1:" ",info2:Be?(0,E.jsx)("div",{className:"loader-blk",children:(0,E.jsx)("img",{src:N.Z,alt:"Loading"})}):(0,E.jsxs)("div",{className:"upload-file-wrap",children:[(0,E.jsx)(v.Z,{variant:"contained",component:"label",className:"upload-file-btn",children:(0,E.jsxs)("div",{className:(null===Oe||void 0===Oe?void 0:Oe.length)>0?"upload-file-blk selected-file-blk":"upload-file-blk",children:[(0,E.jsx)("input",{type:"file",hidden:!0,accept:".jpg, .jpeg, .png, .doc, .txt, .pdf, .docx, .xlsx, .xls, .ppt, .pptx, .mp4, .mp3, .zip, .rar",name:"files[]",onChange:He,multiple:!0}),(0,E.jsx)("span",{className:"upload-icon",children:(0,E.jsx)(d.Z,{})}),(0,E.jsxs)("span",{className:"file-upload-txt",children:["Click here to choose files (max file size"," ","".concat("10"," MB"),")"]})]})}),(0,E.jsx)("p",{style:{color:"#f7a823",fontFamily:"ProximaNova-Semibold, serif, sans-serif",margin:"10px 0px"},children:"Uploading large files may take some time"}),(null===Oe||void 0===Oe?void 0:Oe.length)>0&&(0,E.jsx)(W,{currentSelectedFiles:Oe,setCurrentSelectedFiles:Pe,setIsFileRemoved:Ze})]}),primaryButtonText:"Save",secondaryButtonText:"Cancel",onPrimaryModalButtonClickHandler:Ye,isDisabledPrimaryButton:Ce,onSecondaryModalButtonClickHandler:$e,openModal:me,setOpenModal:fe,isModalForm:!0,handleCloseRedirect:$e}),H&&V[ze]&&"prefilled"===V[ze].columnType&&(0,E.jsx)("p",{className:"text-justify",children:ie?(0,E.jsxs)("span",{children:[(0,E.jsx)("span",{children:null===Y||void 0===Y?void 0:Y.value}),(0,E.jsx)("br",{}),(0,E.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),ae(!1)},className:"show-more-less-txt",children:"Show Less"})]}):(0,E.jsx)("span",{children:(null===Y||void 0===Y?void 0:Y.value.length)>100?(0,E.jsxs)("span",{children:[(0,E.jsxs)("span",{children:[null===Y||void 0===Y?void 0:Y.value.slice(0,100),"..."]}),(0,E.jsx)("br",{}),(0,E.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),ae(!0)},className:"show-more-less-txt",children:"Show More"})]}):null===Y||void 0===Y?void 0:Y.value})}),V[ze]&&"attachments"===(null===(n=V[ze])||void 0===n?void 0:n.columnType)&&(0,E.jsxs)(h.Z,{children:[(0,E.jsx)("a",{href:"#",onClick:function(){return fe(!0)},style:{color:"#f7a823",textDecoration:"none",pointerEvents:"".concat((X&&pe["*"].includes("view")||!X)&&"none")},children:"Add/Edit Attachments"}),(0,E.jsx)(m.Z,{children:K&&0!==(null===K||void 0===K?void 0:K.length)||!q||0===(null===q||void 0===q?void 0:q.length)?"":q})]}),(0,E.jsx)("span",{className:"list-uploaded-file",children:V[ze]&&"attachments"===(null===(t=V[ze])||void 0===t?void 0:t.columnType)&&K&&(null===K||void 0===K?void 0:K.length)>0&&Array.isArray(K)&&(0,E.jsxs)(E.Fragment,{children:[console.log("answer: ",K),K.map((function(e,n){var t,o,i,a;return(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.length)<=30?(n<=1||se)&&(0,E.jsx)("a",{href:null!==(o=C.Wy+pe.id+"/attachments?id="+(null===e||void 0===e?void 0:e.location))&&void 0!==o?o:"#",style:{textDecoration:"none",display:"table",color:"".concat(null!==(i=e.location)&&void 0!==i?i:"#1e1e1e"),pointerEvents:"".concat(!e.location&&"none")},children:(0,E.jsx)(E.Fragment,{children:"".concat(null===e||void 0===e?void 0:e.name)})},n):(n<=1||se)&&(0,E.jsx)(f.Z,{title:null===e||void 0===e?void 0:e.name,style:{textDecoration:"none"},placement:"bottom-start",children:(0,E.jsx)("a",{href:e.location?C.Wy+pe.id+"/attachments?id="+(null===e||void 0===e?void 0:e.location):"#",style:{display:"table",textDecoration:"none",color:"".concat(!e.location&&"#1e1e1e"),cursor:"".concat(e.location?"pointer":"default")},children:"".concat(null===e||void 0===e||null===(a=e.name)||void 0===a?void 0:a.slice(0,30),"...")})},n)})),se?(0,E.jsx)("a",{href:"#",onClick:function(e){ce(!1)},className:"show-more-less-txt",style:{marginTop:"5px",display:"inline-block"},children:(null===K||void 0===K?void 0:K.length)>2&&"Show Less"}):(0,E.jsx)("a",{href:"#",onClick:function(e){ce(!0)},className:"show-more-less-txt",style:{marginTop:"5px",display:"inline-block"},children:(null===K||void 0===K?void 0:K.length)>2&&"Show More"})]})}),V[ze]&&"textbox"===V[ze].columnType&&(0,E.jsx)(g.Z,{className:"input-field ".concat(!K&&q&&0!==(null===q||void 0===q?void 0:q.length)||K&&q&&"alphabets"===(null===(c=V[ze])||void 0===c?void 0:c.validation)&&!D.test(K)||K&&q&&"alphanumeric"===(null===(I=V[ze])||void 0===I?void 0:I.validation)&&!F.test(K)||K&&q&&"numeric"===(null===(O=V[ze])||void 0===O?void 0:O.validation)&&!_.test(K)?"input-error":""),disabled:X&&pe["*"].includes("view")||!X,placeholder:"Enter text here",value:K,name:"".concat(ze,"_").concat(G),onChange:function(e){return ee(e.target.name,e.target.value)},onBlur:function(e){return ne(e.target.name,e.target.value)},helperText:!K&&q&&0!==(null===q||void 0===q?void 0:q.length)||K&&"alphabets"===(null===(P=V[ze])||void 0===P?void 0:P.validation)&&!D.test(K)||K&&"numeric"===(null===(z=V[ze])||void 0===z?void 0:z.validation)&&!_.test(K)||K&&"alphanumeric"===(null===(L=V[ze])||void 0===L?void 0:L.validation)&&!F.test(K)?q:" "}),V[ze]&&"dropdown"===V[ze].columnType&&(0,E.jsx)("div",{className:"select-field",children:(0,E.jsxs)(h.Z,{className:"fullwidth-field",children:[(0,E.jsx)(x.Z,{IconComponent:function(e){return(0,E.jsx)(p.Z,(0,o.Z)({},e))},name:"".concat(ze,"_").concat(G),displayEmpty:!0,disabled:X&&pe["*"].includes("view")||!X,value:K,className:"".concat(!K&&q&&0!==(null===q||void 0===q?void 0:q.length)?"select-field-error":""),onChange:function(e){ee(e.target.name,e.target.value)},renderValue:""!==K?void 0:function(){return(0,E.jsx)("div",{className:"select-placeholder",children:"Choose dropdown value"})},children:V[ze].options.map((function(e){return(0,E.jsx)(y.Z,{value:e,children:(null===e||void 0===e?void 0:e.length)<=40?e:(0,E.jsx)(f.Z,{title:e,children:(0,E.jsx)("span",{children:(null===e||void 0===e?void 0:e.slice(0,40))+"..."})})},e)}))}),(0,E.jsx)(m.Z,{children:!K&&q&&0!==(null===q||void 0===q?void 0:q.length)?q:" "})]})}),V[ze]&&"date"===V[ze].columnType&&(0,E.jsx)(h.Z,{fullWidth:!0,children:(0,E.jsxs)(Z._,{dateAdapter:b.y,children:[(0,E.jsx)(j.M,{disabled:X&&pe["*"].includes("view")||!X,value:K,className:"datepicker-blk",components:{OpenPickerIcon:u.Z},onChange:function(e){ee("".concat(ze,"_").concat(G),new Date(new Date(e)).toLocaleDateString("en"))},renderInput:function(e){return(0,E.jsx)(g.Z,(0,o.Z)((0,o.Z)({},e),{},{autoComplete:"off",onKeyDown:Te,className:"input-field".concat(!K&&q&&0!==(null===q||void 0===q?void 0:q.length)&&"input-error")}))}}),(0,E.jsx)(m.Z,{children:!K&&q&&0!==(null===q||void 0===q?void 0:q.length)?q:" "})]})})]})};var W=function(e){var n=e.currentSelectedFiles,t=e.setCurrentSelectedFiles,o=e.setIsFileRemoved,i=function(e){var i=(0,l.Z)(n);i.splice(e,1),t(i),o(!0)};return(0,E.jsx)(E.Fragment,{children:n.map((function(e,n){var t,o,a,l;return(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.length)<=40?(0,E.jsxs)("p",{className:"select-filename",children:[(0,E.jsx)("a",{href:null!==(o=null===e||void 0===e?void 0:e.location)&&void 0!==o?o:"#",style:{textDecoration:"none",color:"".concat(!(null!==e&&void 0!==e&&e.location)&&"#1e1e1e"),pointerEvents:"".concat(!(null!==e&&void 0!==e&&e.location)&&"none")},children:null===e||void 0===e?void 0:e.name}),(0,E.jsxs)("span",{className:"file-close-icon",style:{cursor:"pointer"},onClick:function(){return i(n)},children:[" ",(0,E.jsx)(c.Z,{})]})]},n):(0,E.jsx)(f.Z,{title:null===e||void 0===e?void 0:e.name,children:(0,E.jsxs)("p",{className:"select-filename",children:[(0,E.jsx)("a",{href:null!==(a=null===e||void 0===e?void 0:e.location)&&void 0!==a?a:"#",style:{textDecoration:"none",color:"".concat(!(null!==e&&void 0!==e&&e.location)&&"#1e1e1e"),pointerEvents:"".concat(!(null!==e&&void 0!==e&&e.location)&&"none")},children:(null===e||void 0===e||null===(l=e.name)||void 0===l?void 0:l.slice(0,30))+"..."}),(0,E.jsxs)("span",{className:"file-close-icon",style:{cursor:"pointer"},onClick:function(){return i(n)},children:[" ",(0,E.jsx)(c.Z,{})]})]})},n)}))})}},4565:function(e,n,t){t.d(n,{Z:function(){return Z}});var o=t(3366),i=t(7462),a=t(2791),l=t(8182),r=t(8519),s=t(4419),c=t(277),d=t(5513),u=t(9853),p=t(5878),v=t(1217);function h(e){return(0,v.Z)("MuiTypography",e)}(0,p.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var m=t(184),f=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],g=(0,c.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.variant&&n[t.variant],"inherit"!==t.align&&n["align".concat((0,u.Z)(t.align))],t.noWrap&&n.noWrap,t.gutterBottom&&n.gutterBottom,t.paragraph&&n.paragraph]}})((function(e){var n=e.theme,t=e.ownerState;return(0,i.Z)({margin:0},t.variant&&n.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})})),x={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},y={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Z=a.forwardRef((function(e,n){var t=(0,d.Z)({props:e,name:"MuiTypography"}),a=function(e){return y[e]||e}(t.color),c=(0,r.Z)((0,i.Z)({},t,{color:a})),p=c.align,v=void 0===p?"inherit":p,Z=c.className,j=c.component,b=c.gutterBottom,w=void 0!==b&&b,k=c.noWrap,M=void 0!==k&&k,C=c.paragraph,N=void 0!==C&&C,T=c.variant,S=void 0===T?"body1":T,A=c.variantMapping,B=void 0===A?x:A,E=(0,o.Z)(c,f),D=(0,i.Z)({},c,{align:v,color:a,className:Z,component:j,gutterBottom:w,noWrap:M,paragraph:N,variant:S,variantMapping:B}),_=j||(N?"p":B[S]||x[S])||"span",F=function(e){var n=e.align,t=e.gutterBottom,o=e.noWrap,i=e.paragraph,a=e.variant,l=e.classes,r={root:["root",a,"inherit"!==e.align&&"align".concat((0,u.Z)(n)),t&&"gutterBottom",o&&"noWrap",i&&"paragraph"]};return(0,s.Z)(r,h,l)}(D);return(0,m.jsx)(g,(0,i.Z)({as:_,ref:n,ownerState:D,className:(0,l.Z)(F.root,Z)},E))}))}}]);
//# sourceMappingURL=837.1cb3dade.chunk.js.map