"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5151],{5151:function(e,s,t){t.r(s);var n=t(4165),i=t(5861),a=t(2982),l=t(4942),r=t(1413),c=t(885),o=t(1346),d=t(9407),u=t(4569),h=t.n(u),v=t(2791),m=t(7689),f=t(9106),x=(t(1605),t(6218)),g=t(7659),p=t(2820),b=t(1260),j=t(4917),Z=t(8386),k=t(184),y=[{id:"name",disablePadding:!1,label:"Roles"},{id:"totalCgfAdmins",disablePadding:!1,label:"Users"},{id:"createdAt",disablePadding:!1,label:"Created On"},{id:"isActive",disablePadding:!1,label:"Status"}];s.default=function(){(0,b.j)("Roles");var e=v.useRef(),s=(0,p.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),t=(0,c.Z)(s,2),u=t[0],N=t[1],C=(0,v.useState)(!1),w=(0,c.Z)(C,2),S=w[0],A=w[1],R=(0,v.useState)("none"),P=(0,c.Z)(R,2),_=P[0],M=P[1],T=(0,v.useState)(!0),D=(0,c.Z)(T,2),E=D[0],O=D[1],B=(0,m.s0)(),F=["_id","name","totalCgfAdmins","createdAt","isActive"],H=(0,v.useState)(""),I=(0,c.Z)(H,2),U=I[0],z=I[1],L=(0,v.useState)({status:"none"}),Y=(0,c.Z)(L,2),V=Y[0],q=Y[1],K=(0,v.useState)("none"===V.status),Q=(0,c.Z)(K,2),W=Q[0],G=Q[1],J=v.useState(1),X=(0,c.Z)(J,2),$=X[0],ee=X[1],se=v.useState(10),te=(0,c.Z)(se,2),ne=te[0],ie=te[1],ae=v.useState("desc"),le=(0,c.Z)(ae,2),re=le[0],ce=le[1],oe=v.useState(""),de=(0,c.Z)(oe,2),ue=de[0],he=de[1],ve=v.useState([]),me=(0,c.Z)(ve,2),fe=me[0],xe=me[1],ge=v.useState(0),pe=(0,c.Z)(ge,2),be=pe[0],je=pe[1],Ze=function(e){e.forEach((function(e){var s,t;delete e.updatedAt,delete e.description,delete e.isDeleted,delete e.__v,delete e.cgfAdmins,e.totalCgfAdmins=null!==(s=null===e||void 0===e||null===(t=e.totalCgfAdmins)||void 0===t?void 0:t.toString())&&void 0!==s?s:"0",e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),F.forEach((function(s){var t=e[s];delete e[s],e[s]=t}))})),xe((0,a.Z)(e))},ke=function(){var e="".concat(x.Yn,"roles/list?page=").concat($,"&size=").concat(ne,"&orderBy=").concat(ue,"&order=").concat(re);return U&&(e+="&search=".concat(U)),"none"!==(null===V||void 0===V?void 0:V.status)&&"all"!==(null===V||void 0===V?void 0:V.status)&&(e+="&status=".concat(V.status)),e},ye=function(){var s=(0,i.Z)((0,n.Z)().mark((function s(){var t,i,a,l,r,c,o,d,u,v,m,f,x=arguments;return(0,n.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=!(x.length>0&&void 0!==x[0])||x[0],i=x.length>1&&void 0!==x[1]?x[1]:new AbortController,s.prev=2,a=ke(),A(!0),s.next=7,h().get(a,{signal:i.signal});case 7:l=s.sent,j.Y.info("Role list - getRoles handler"),je(parseInt(l.headers["x-total-count"])),Ze(l.data),A(!1),s.next=19;break;case 14:if(s.prev=14,s.t0=s.catch(2),"ERR_CANCELED"!==(null===s.t0||void 0===s.t0?void 0:s.t0.code)){s.next=18;break}return s.abrupt("return");case 18:401===(null===s.t0||void 0===s.t0||null===(r=s.t0.response)||void 0===r?void 0:r.status)?(N({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return e.current()})),setTimeout((function(){B("/login")}),3e3)):403===(null===s.t0||void 0===s.t0||null===(c=s.t0.response)||void 0===c?void 0:c.status)?(N({titleMessage:"Error",descriptionMessage:null!==s.t0&&void 0!==s.t0&&null!==(o=s.t0.response)&&void 0!==o&&null!==(d=o.data)&&void 0!==d&&d.message?null===s.t0||void 0===s.t0||null===(u=s.t0.response)||void 0===u||null===(v=u.data)||void 0===v?void 0:v.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return e.current()})),setTimeout((function(){B("/home")}),3e3)):(t&&N({titleMessage:"Error",descriptionMessage:null!==s.t0&&void 0!==s.t0&&null!==(m=s.t0.response)&&void 0!==m&&null!==(f=m.data)&&void 0!==f&&f.message&&"string"===typeof s.t0.response.data.message?s.t0.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return e.current()})),A(!1));case 19:case"end":return s.stop()}}),s,null,[[2,14]])})));return function(){return s.apply(this,arguments)}}();return(0,v.useEffect)((function(){var e=!0,s=new AbortController;return E&&ye(e,s),function(){e=!1,clearTimeout(_),s.abort()}}),[$,ne,ue,re,V,E]),(0,k.jsxs)("div",{className:"page-wrapper",children:[(0,k.jsx)(g.Z,{myRef:e,titleMessage:u.titleMessage,descriptionMessage:u.descriptionMessage,messageType:u.messageType}),(0,k.jsx)("section",{children:(0,k.jsx)("div",{className:"container",children:(0,k.jsxs)("div",{className:"member-filter-sect",children:[(0,k.jsxs)("div",{className:"form-header member-form-header flex-between mb-0",children:[(0,k.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,k.jsx)("h2",{className:"heading2 mr-40",children:"Roles"})}),(0,k.jsxs)("div",{className:"form-header-right-txt search-and-btn-field-right",children:[(0,k.jsx)("div",{className:"search-and-btn-field-blk",children:(0,k.jsxs)("div",{className:"searchbar",children:[(0,k.jsx)("input",{type:"text",placeholder:"Search",onChange:function(e){j.Y.info("Role list - onSearchChangeHandler handler"),_&&clearTimeout(_),O(!1),z(e.target.value),M(setTimeout((function(){O(!0),ee(1)}),1e3))},onKeyDown:function(e){"Enter"===e.key&&(O(!0),ee(1))},value:U,name:"search"}),(0,k.jsx)("button",{type:"submit",children:(0,k.jsx)("i",{className:"fa fa-search"})})]})}),(0,k.jsx)("div",{className:"form-btn",children:(0,k.jsx)("button",{type:"submit",className:"primary-button add-button",onClick:function(){return B("/roles/add-role")},children:"Add Role"})})]})]}),(0,k.jsx)("div",{className:"member-filter-wrap flex-between",children:(0,k.jsx)("div",{className:"member-filter-right",children:(0,k.jsx)("div",{className:"filter-select-wrap flex-between",children:(0,k.jsx)("div",{className:"filter-select-field",children:(0,k.jsx)("div",{className:"dropdown-field",children:(0,k.jsxs)(o.Z,{sx:{display:"none"},displayEmpty:!0,name:"status",value:V.status,onChange:function(e){j.Y.info("Role list - onFilterChangeHandler handler"),ee(1),q((0,r.Z)((0,r.Z)({},V),{},(0,l.Z)({},e.target.name,e.target.value)))},onFocus:function(e){return G(!1)},onClose:function(e){return G(void 0===e.target.value)},children:[(0,k.jsx)(d.Z,{value:"none",disabled:!0,sx:{display:!W&&"none"},children:"Status"}),(0,k.jsx)(d.Z,{value:"active",children:"active"}),(0,k.jsx)(d.Z,{value:"inactive",children:"inactive"}),(0,k.jsx)(d.Z,{value:"all",children:"All"})]})})})})})}),S?(0,k.jsx)(Z.Z,{}):(0,k.jsx)("div",{className:"member-info-wrapper table-content-wrap table-content-width table-footer-btm-space",children:(0,k.jsx)(f.Z,{tableHead:y,records:fe,handleChangePage1:function(e){ee(e)},handleChangeRowsPerPage1:function(e){ie(parseInt(e.target.value,10)),ee(1)},page:$,rowsPerPage:ne,totalRecords:be,orderBy:ue,onClickVisibilityIconHandler1:function(e){return B("view-role/".concat(e))},order:re,setOrder:ce,setOrderBy:he,setCheckBoxes:!1,onRowClick:!0})})]})})})]})}},9106:function(e,s,t){t.d(s,{Z:function(){return C}});var n=t(7195),i=t(3372),a=t(7194),l=t(6015),r=t(5473),c=t(6650),o=t(1680),d=t(9773),u=t(4390),h=t(9963),v=t(9827),m=t(807),f=t(3769),x=(t(2791),t(922)),g=t(6321),p=(t(4917),t(5814)),b=t(1346),j=t(9407),Z=t(4162),k=t(4585),y=(t(1605),t(184));function N(e){var s=e.onSelectAllClick,t=e.order,n=e.orderBy,i=e.tableHead,a=e.numSelected,l=e.rowCount,c=e.onRequestSort,o=e.setCheckBoxes;return(0,y.jsx)(v.Z,{children:(0,y.jsxs)(m.Z,{children:[o&&(0,y.jsx)(u.Z,{padding:"checkbox",className:"table-checkbox",children:(0,y.jsx)(r.Z,{color:"primary",indeterminate:a>0&&a<l,checked:l>0&&a===l,onChange:s,inputProps:{"aria-label":"select all desserts"},className:"checkbox-mui"})}),i.map((function(e){return(0,y.jsxs)(u.Z,{width:null===e||void 0===e?void 0:e.width,align:"left",padding:e.disablePadding?"none":"normal",className:"table-header",children:["action"!==e.id&&(0,y.jsx)(f.Z,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(s=e.id,function(e){c(e,s)}),className:"sorted-blk",children:e.label}),"action"===e.id&&(0,y.jsx)("span",{className:"sorted-blk",children:e.label})]},e.id);var s}))]})})}function C(e){var s=e.tableHead,t=e.records,v=e.page,f=void 0===v?1:v,C=e.rowsPerPage,w=void 0===C?10:C,S=e.handleChangeRowsPerPage1,A=e.handleChangePage1,R=e.totalRecords,P=e.orderBy,_=e.setOrderBy,M=e.icons,T=e.onClickVisibilityIconHandler1,D=e.onClickDeleteIconHandler1,E=e.selected,O=void 0===E?[]:E,B=e.setSelected,F=e.order,H=void 0===F?"asc":F,I=e.setOrder,U=e.setCheckBoxes,z=void 0===U||U,L=e.setSingleSelect,Y=void 0!==L&&L,V=e.handleSingleUserSelect,q=e.selectedUser,K=e.onRowClick,Q=void 0!==K&&K,W=e.isQuestionnare,G=void 0!==W&&W,J=e.onClickEditAssesmentFunction,X=e.onClickAssignAssesmentFunction,$=e.onClickFillAssessmentFunction,ee=e.viewAssessment,se=void 0!==ee&&ee,te=function(e,s){T(e,s||!1)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l.Z,{sx:{width:"100%"},className:z?"table-blk":"table-blk table-blk-without-checkbox",children:(0,y.jsx)(c.Z,{sx:{width:"100%",mb:2},children:(0,y.jsx)(h.Z,{children:(0,y.jsxs)(o.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,y.jsx)(N,{numSelected:O.length,order:H,orderBy:P,tableHead:s,onSelectAllClick:function(e){if(e.target.checked){var s=t.map((function(e){return e._id}));B(s)}else B([])},onRequestSort:function(e,s){I(P===s&&"asc"===H?"desc":"asc"),_(s)},rowCount:t.length,setCheckBoxes:z}),(null===t||void 0===t?void 0:t.length)>0?(0,y.jsx)(d.Z,{children:t.map((function(e,s){var t,l=(t=e._id,-1!==O.indexOf(t)),c="enhanced-table-checkbox-".concat(s);return(0,y.jsxs)(m.Z,{hover:!0,onClick:function(){return Q&&te(G?e.uuid:e._id,(null===e||void 0===e?void 0:e.isOperationMember)||(null===e||void 0===e?void 0:e.isMemberRepresentative))},style:{cursor:Q&&"pointer"},role:"checkbox","aria-checked":l,tabIndex:-1,selected:l,children:[z&&(0,y.jsx)(u.Z,{padding:"checkbox",children:(0,y.jsx)(r.Z,{className:"table-checkbox",color:"primary",onClick:function(s){return function(e,s){var t=O.indexOf(s),n=[];-1===t?n=n.concat(O,s):0===t?n=n.concat(O.slice(1)):t===O.length-1?n=n.concat(O.slice(0,-1)):t>0&&(n=n.concat(O.slice(0,t),O.slice(t+1))),B(n)}(0,e._id)},checked:l,inputProps:{"aria-labelledby":c}})}),Y&&(0,y.jsx)(u.Z,{children:(0,y.jsx)("div",{className:"radio-btn-field",children:(0,y.jsx)(g.Z,{className:"radio-btn",color:"primary",value:e._id,onChange:function(){return function(e){V(e)}(e._id)},checked:q==e._id,inputProps:{"aria-labelledby":c}})})}),Object.keys(e).map((function(s,t){var n,i,a,l,r,c;return"_id"!==s&&"uuid"!==s&&"isActive"!==s&&"isUserAuthorizedToFillAssessment"!==s&&"isOperationMember"!==s&&"isMemberRepresentative"!==s&&"dueDate"!==s?(null===(n=e[s])||void 0===n?void 0:n.length)<=28||"undefined"===typeof e[s]?(0,y.jsxs)(u.Z,{children:[" ",("undefined"===typeof e[s]||""===e[s])&&"N/A","string"===typeof e[s]&&(null===(i=e[s])||void 0===i?void 0:i.length)>0&&"email"!==s?e[s][0].toUpperCase()+(null===(a=e[s])||void 0===a?void 0:a.slice(1)):e[s]]},s):(0,y.jsx)(p.Z,{placement:"bottom-start",enterDelay:1e3,title:e[s],children:(0,y.jsx)(u.Z,{children:"string"===typeof e[s]&&"email"!==s?e[s][0].toUpperCase()+"".concat(null===(l=e[s])||void 0===l?void 0:l.slice(1,28),"..."):"".concat(null===(r=e[s])||void 0===r?void 0:r.slice(0,28),"...")},s)},s):"isActive"===s?(0,y.jsx)(u.Z,{className:"button-style ".concat(e[s]&&"button-style-success"),children:(0,y.jsx)("span",{children:e[s]?"Active":"Inactive"})},s):"dueDate"===s?(0,y.jsx)(u.Z,{className:"due-date-style ".concat(new Date(new Date(e[s]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()&&"due-date-style-success"),children:(0,y.jsx)("span",{children:null!==(c=e[s])&&void 0!==c?c:e[s]})},s):void 0})),(null===M||void 0===M?void 0:M.length)>0&&(0,y.jsxs)(u.Z,{children:[M.includes("visibility")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(p.Z,{title:"View Assessment",children:(0,y.jsx)(a.Z,{onClick:function(){return te(se?e.uuid:e._id)}})})}),M.includes("delete")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(p.Z,{title:"Delete",children:(0,y.jsx)("img",{src:"/images/delete-icon.svg",onClick:function(){return function(e){D(e)}(e._id)}})})}),M.includes("edit")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(p.Z,{title:"Edit",children:(0,y.jsx)(n.Z,{onClick:function(){return s=e.uuid,void J(s);var s}})})}),M.includes("send")&&("In Progress"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Re-opened"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Accepted"==(null===e||void 0===e?void 0:e.assessmentStatus))&&e.isUserAuthorizedToFillAssessment&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(p.Z,{title:"Assign to Operation Member",children:(0,y.jsx)(x.Z,{onClick:function(){return X(e.uuid)}})})}),M.includes("fill")&&e.isUserAuthorizedToFillAssessment&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(p.Z,{title:"Fill Assessment",children:(0,y.jsx)(i.Z,{onClick:function(){return s=e.uuid,void $(s);var s}})})})]})]},null===e||void 0===e?void 0:e._id)}))}):(0,y.jsx)(d.Z,{children:(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:"10",children:(0,y.jsx)("div",{className:"no-records-blk",children:(0,y.jsx)("h2",{className:"heading2",children:"No records available"})})})})})]})})})}),(null===t||void 0===t?void 0:t.length)>0&&(0,y.jsxs)("div",{className:"table-footer flex-between",children:[(0,y.jsxs)("div",{className:"table-footer-left",children:[(0,y.jsxs)("div",{className:"per-page-blk",children:[(0,y.jsx)("span",{className:"per-page-txt",children:"Records"}),(0,y.jsx)("div",{className:"per-page-dropdown",children:(0,y.jsx)("div",{className:"per-page-select-field",children:(0,y.jsxs)(b.Z,{value:w,onChange:function(e){S(e)},children:[(0,y.jsx)(j.Z,{value:"5",children:"05"}),(0,y.jsx)(j.Z,{value:"10",selected:!0,children:"10"}),(0,y.jsx)(j.Z,{value:"20",children:"20"})]})})})]}),(0,y.jsxs)("div",{className:"show-entries-txt",children:["showing ",(f-1)*w+1,"-",(f-1)*w+(null===t||void 0===t?void 0:t.length)," out of ",R]})]}),(0,y.jsx)("div",{className:"table-footer-right",children:(0,y.jsx)(Z.Z,{spacing:2,className:"pagination-blk",children:(0,y.jsx)(k.Z,{page:f,count:Math.ceil(R/w),onChange:function(e,s){A(s)},variant:"outlined",shape:"rounded"})})})]})]})}},7659:function(e,s,t){t.d(s,{Z:function(){return c}});var n=t(2131),i=t(5130),a=t(2791),l=t(5985),r=(t(5462),t(184));var c=function(e){e.titleMessage;var s=e.descriptionMessage,t=e.messageType,c=e.myRef,o=(e.key,function(){(0,l.Am)(d,{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"toastId"})}),d=function(){return(0,r.jsxs)("div",{className:"toaster-blk flex-start ".concat("success"===t&&"toaster-blk-success"),children:[(0,r.jsx)("div",{className:"toaster-left ".concat("success"===t&&"toaster-left-success"),children:(0,r.jsxs)("div",{className:"toaster-icon",children:["success"===t&&(0,r.jsx)(n.Z,{}),"error"===t&&(0,r.jsx)(i.Z,{})]})}),(0,r.jsx)("div",{className:"toaster-right",children:(0,r.jsx)("p",{children:s})})]})};return(0,a.useEffect)((function(){c.current=o}),[o,c]),(0,r.jsxs)("div",{className:"toaster-sect",children:[(0,r.jsx)("button",{style:{display:"none"},children:"Show Toast !"}),(0,r.jsx)(l.Ix,{className:"toaster-wrap ".concat("success"===t&&"toaster-wrap-success"," ")})]})}},2820:function(e,s,t){var n=t(885),i=t(2791);s.Z=function(e){var s=(0,i.useState)(e),t=(0,n.Z)(s,2),a=t[0],l=t[1],r=(0,i.useRef)([]);(0,i.useEffect)((function(){r.current.forEach((function(e){return e(a)})),r.current=[]}),[a]);return[a,function(e,s){l(e),s&&"function"===typeof s&&r.current.push(s)}]}},1260:function(e,s,t){t.d(s,{j:function(){return i}});var n=t(2791),i=function(e){return(0,n.useEffect)((function(){document.title="HRDD System - ".concat(e)}),[e]),null}},1605:function(){}}]);
//# sourceMappingURL=5151.450037c1.chunk.js.map