"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[3699],{6091:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var n=a(885),r=a(8821),s=a(2791),d=a(7689),i=a(4917),l=a(6218),o=a(7659),c=a(7806),u=a(7340),g=a(8460),m=a(2820),f=a(1260),v=a(4165),p=a(5861),h=a(2982),b=a(4677),x=a(9106),C=a(8386),A=a(184),y=[{id:"name",disablePadding:!1,label:"Name"},{id:"email",disablePadding:!1,label:"Email"},{id:"role",disablePadding:!1,label:"Role"},{id:"createdAt",disablePadding:!1,label:"Onboarded On"},{id:"status",disablePadding:!1,label:"Status"}];var P=function(e){var t=e.page,a=e.setPage,r=e.makeApiCall,c=e.setMakeApiCall,u=e.search,g=(0,d.s0)(),f=s.useState(10),P=(0,n.Z)(f,2),Z=P[0],j=P[1],w=s.useState("desc"),S=(0,n.Z)(w,2),k=S[0],N=S[1],R=s.useState(""),T=(0,n.Z)(R,2),M=T[0],F=T[1],E=s.useState([]),_=(0,n.Z)(E,2),D=_[0],G=_[1],O=s.useState(0),B=(0,n.Z)(O,2),I=B[0],H=B[1],Y=(0,s.useState)([]),L=(0,n.Z)(Y,2),U=L[0],z=L[1],K=(0,s.useState)(!0),V=(0,n.Z)(K,2),q=V[0],J=V[1],Q=s.useRef(),W=(0,m.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),X=(0,n.Z)(W,2),$=X[0],ee=X[1],te=function(e){var t=["_id","name","email","role","createdAt","isActive"];i.Y.info("Onboarded sub admin - updateRecords handler");var a=e;a.forEach((function(e){var a,n;delete e.updatedAt,delete e.updatedBy,delete e.createdBy,delete e.description,delete e.countryCode,delete e.isDeleted,delete e.isReplaced,delete e.replacedUsers,delete e.__v,delete e.password,delete e.roleId,delete e.salt,delete e.uuid,delete e.phoneNumber,delete e.isCGFAdmin,e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),e.role=null!==(a=null===e||void 0===e||null===(n=e.subRole[0])||void 0===n?void 0:n.name)&&void 0!==a?a:"N/A",delete e.subRole,delete e.subRoleId,t.forEach((function(t){var a=e[t];delete e[t],e[t]=a}))})),G((0,h.Z)(a))},ae=function(){var e="".concat(l.mc,"/list/?page=").concat(t,"&size=").concat(Z,"&orderBy=").concat(M,"&order=").concat(k);return u&&(e+="&search=".concat(u)),e},ne=function(){var e=(0,p.Z)((0,v.Z)().mark((function e(){var t,a,n,r,s,d,l,o,c,u,m,f,p,x=arguments;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(x.length>0&&void 0!==x[0])||x[0],t=x.length>1&&void 0!==x[1]?x[1]:new AbortController,e.prev=2,a=ae(),J(!0),e.next=7,b.H.get(a,{signal:t.signal});case 7:n=e.sent,H(parseInt(n.headers["x-total-count"])),i.Y.info("Onboarded sub admin - getSubAdmin handler"),te((0,h.Z)(n.data)),J(!1),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:i.Y.info("Onboarded sub admin - getSubAdmin handler catch error ".concat(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)),401==(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)?(ee({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return Q.current()})),setTimeout((function(){g("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status)?(ee({titleMessage:"Oops!",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(o=e.t0.response)&&void 0!==o&&null!==(c=o.data)&&void 0!==c&&c.message?null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return Q.current()})),setTimeout((function(){g("/home")}),3e3)):ee({titleMessage:"Oops!",descriptionMessage:null===e.t0||void 0===e.t0||null===(f=e.t0.response)||void 0===f||null===(p=f.data)||void 0===p?void 0:p.message,messageType:"error"},(function(){return Q.current()})),J(!1);case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=!0,t=new AbortController;return r&&ne(e,t),function(){e=!1,t.abort()}}),[t,Z,M,k,r,c]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(o.Z,{myRef:Q,titleMessage:$.titleMessage,descriptionMessage:$.descriptionMessage,messageType:$.messageType}),q?(0,A.jsx)(C.Z,{}):(0,A.jsx)(x.Z,{tableHead:y,records:D,handleChangePage1:function(e){a(e)},handleChangeRowsPerPage1:function(e){j(parseInt(e.target.value,10)),a(1)},page:t,rowsPerPage:Z,totalRecords:I,orderBy:M,onClickVisibilityIconHandler1:function(e){return g("view-cgf-admin/".concat(e))},order:k,setOrder:N,setOrderBy:F,setCheckBoxes:!1,setSelected:z,selected:U,onRowClick:!0})]})},Z=a(5736),j=[{id:"name",disablePadding:!1,label:"Name"},{id:"email",disablePadding:!1,label:"Email"},{id:"role",disablePadding:!1,label:"Role"},{id:"createdAt",disablePadding:!1,label:"Created At"}];var w=function(e){var t=e.makeApiCall,a=e.setMakeApiCall,r=e.search,o=e.pageForPendingTabCGFAdmin,c=e.setPageForPendingTabCGFAdmin,u=e.myRef,g=e.setPendingCgfToasterDetails,m=(0,s.useState)(!0),f=(0,n.Z)(m,2),y=f[0],P=f[1],w=(0,d.s0)(),S=s.useState(10),k=(0,n.Z)(S,2),N=k[0],R=k[1],T=s.useState("desc"),M=(0,n.Z)(T,2),F=M[0],E=M[1],_=s.useState("createdAt"),D=(0,n.Z)(_,2),G=D[0],O=D[1],B=s.useState([]),I=(0,n.Z)(B,2),H=I[0],Y=I[1],L=s.useState(0),U=(0,n.Z)(L,2),z=U[0],K=U[1],V=["_id","name","email","role","createdAt"],q=function(e){i.Y.info("Pending cgf admin - updatePendingRecordsCGFAdmin handler ");var t=e;t.forEach((function(e){var t,a,n,r,s,d,i;delete e.updatedAt,delete e.data.description,delete e.data.countryCode,delete e.data.isDeleted,delete e.data.isReplaced,delete e.__v,delete e.data.password,delete e.data.roleId,delete e.data.salt,delete e.data.uuid,delete e.data.phoneNumber,delete e.token,delete e.tokenExpiry,delete e.tokenType,e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),e.role=null!==(t=null===e||void 0===e||null===(a=e.subRole)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.name)&&void 0!==t?t:"N/A",e.name=null!==(r=null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.name)&&void 0!==r?r:"N/A",e.email=null!==(d=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.email)&&void 0!==d?d:"N/A",delete e.createdBy,delete e.subRole,delete e.data,delete e.memberData,V.forEach((function(t){var a=e[t];delete e[t],e[t]=a}))})),Y((0,h.Z)(t))},J=function(){var e="".concat(l.mc,"/pending/list?page=").concat(o,"&size=").concat(N,"&orderBy=").concat(G,"&order=").concat(F);return r&&(e+="&search=".concat(r)),e},Q=function(){var e=(0,p.Z)((0,v.Z)().mark((function e(){var t,a,n,r,s,d=arguments;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(d.length>0&&void 0!==d[0])||d[0],t=d.length>1&&void 0!==d[1]?d[1]:new AbortController,e.prev=2,a=J(),P(!0),e.next=7,b.H.get(a,{signal:t.signal});case 7:n=e.sent,K(parseInt(n.headers["x-total-count"])),i.Y.info("Pending cgf admin - getSubAdminPendingCGFAdmin handler"),q(n.data),P(!1),e.next=20;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:(0,Z.K)(e.t0,g,u,w),i.Y.info("Pending cgf admin - getSubAdminPendingCGFAdmin handler catch error ".concat(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message));case 20:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=!0,a=new AbortController;return t&&Q(e,a),function(){e=!1,a.abort()}}),[t,a,o,N,G,F]),(0,A.jsx)(A.Fragment,{children:y?(0,A.jsx)(C.Z,{}):(0,A.jsx)(x.Z,{tableHead:j,records:H,handleChangePage1:function(e){c(e)},handleChangeRowsPerPage1:function(e){i.Y.info("Pending cgf admin - handleRowsPerPageChangeForPendingTabCGFAdmin handler"),R(parseInt(e.target.value,10)),c(1)},page:o,rowsPerPage:N,totalRecords:z,orderBy:G,onClickVisibilityIconHandler1:function(e){return w("/users/cgf-admin/pending/view-cgf-admin/".concat(e))},order:F,setOrder:E,setOrderBy:O,setCheckBoxes:!1,onRowClick:!0})})};var S=function(){(0,f.j)("CGF Admins");var e=s.useState(0),t=(0,n.Z)(e,2),a=t[0],v=t[1],p=(0,d.TH)().state,h=s.useRef(),b=(0,m.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),x=(0,n.Z)(b,2),C=x[0],y=x[1],Z=(0,s.useState)(null),j=(0,n.Z)(Z,2),S=j[0],k=j[1],N=(0,s.useState)(!0),R=(0,n.Z)(N,2),T=R[0],M=R[1],F=(0,d.s0)(),E=(0,s.useState)(""),_=(0,n.Z)(E,2),D=_[0],G=_[1],O=s.useState(1),B=(0,n.Z)(O,2),I=B[0],H=B[1],Y=s.useState(1),L=(0,n.Z)(Y,2),U=L[0],z=L[1];(0,s.useEffect)((function(){var e=new AbortController;return v(p||0),F("",{state:0}),function(){clearTimeout(S),e.abort()}}),[]);return(0,A.jsxs)("div",{className:"page-wrapper",children:[(0,A.jsx)(o.Z,{myRef:h,titleMessage:C.titleMessage,descriptionMessage:C.descriptionMessage,messageType:C.messageType}),(0,A.jsx)("section",{children:(0,A.jsxs)("div",{className:"container",children:[(0,A.jsx)("div",{className:"member-filter-sect"}),(0,A.jsxs)("div",{className:"form-header member-form-header flex-between",children:[(0,A.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,A.jsx)("h2",{className:"heading2",children:"CGF Admins"})}),(0,A.jsxs)("div",{className:"form-header-right-txt",children:[0==a&&(0,A.jsxs)("div",{className:"tertiary-btn-blk mr-20",onClick:function(){return(0,c.j)("CGF Admins",y,!1,h,l.A3,F)},children:[(0,A.jsx)("span",{className:"download-icon",children:(0,A.jsx)(r.Z,{})}),"Download"]}),0===a&&(0,A.jsx)("div",{className:"form-btn",children:(0,A.jsx)("button",{onClick:function(){return F("/users/cgf-admin/add-cgf-admin")},className:"primary-button add-button",children:"Add CGF Admin"})})]})]}),(0,A.jsxs)("div",{className:"member-filter-wrap flex-between",children:[(0,A.jsx)("div",{className:"member-tab-left",children:(0,A.jsx)(u.Z,{value:a,handleChange:function(e,t){v(t),H(1),z(1)}})}),(0,A.jsx)("div",{className:"member-filter-left",children:(0,A.jsxs)("div",{className:"searchbar",children:[(0,A.jsx)("input",{type:"text",placeholder:"Search",onKeyDown:function(e){"Enter"===e.key&&(M(!0),H(1),z(1))},onChange:function(e){return function(e){i.Y.info("Subadmin list - onSearchChangeHandler handler"),S&&clearTimeout(S),M(!1),G(e.target.value),k(setTimeout((function(){M(!0),H(1),z(1)}),1e3))}(e)},name:"search"}),(0,A.jsx)("button",{type:"submit",children:(0,A.jsx)("i",{className:"fa fa-search"})})]})}),(0,A.jsx)("div",{className:"member-filter-right"})]}),(0,A.jsxs)("div",{className:"member-info-wrapper table-content-wrap table-footer-btm-space",children:[(0,A.jsx)(g.x,{value:a,index:0,children:0===a&&(0,A.jsx)(P,{page:U,setPage:z,makeApiCall:T,setMakeApiCall:M,search:D})}),(0,A.jsx)(g.x,{value:a,index:1,children:(0,A.jsx)(w,{makeApiCall:T,setMakeApiCall:M,search:D,myRef:h,pageForPendingTabCGFAdmin:I,setPageForPendingTabCGFAdmin:H,pendingCgftoasterDetails:C,setPendingCgfToasterDetails:y})})]})]})})]})}}}]);
//# sourceMappingURL=3699.34edb65c.chunk.js.map