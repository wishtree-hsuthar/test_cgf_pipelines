"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5033],{95033:(e,s,t)=>{t.r(s),t.d(s,{default:()=>v});var n=t(72791),l=t(57689),i=t(11087),a=t(94677),r=t(76218),o=t(53073),d=t(27659),c=t(28386),m=t(12820),h=t(1260),u=t(14917),p=t(80184);const g=[{id:"",disablePadding:!0,label:""},{id:"name",disablePadding:!0,label:"Operation Member"},{id:"email",disablePadding:!1,label:"Email"}],v=()=>{(0,h.j)("Assign Assessment");const e=["_id","name","email"],[s,t]=n.useState(1),[v,b]=n.useState(10),[x,j]=(0,n.useState)(!1),{id:f}=(0,l.UO)(),[y,k]=(0,n.useState)(null),[C,w]=n.useState([]),[A,Z]=n.useState("asc"),[N,S]=n.useState("operationalMember"),[M,T]=(0,n.useState)(""),[_,D]=(0,n.useState)(!0),[P,O]=n.useState([]),[R,B]=n.useState(0),[E,F]=(0,n.useState)({}),[I,U]=(0,n.useState)(""),[H,Y]=(0,n.useState)(""),G=(0,l.s0)(),z=n.useRef(),[L,q]=(0,m.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"});let V;const Q=async function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new AbortController;u.Y.info("Assign assessment to operation member - getOperationMembers handler");try{let t=(()=>{let e="".concat(r.IG).concat(window.location.pathname.split("/").at(-1),"/reassignto/list?page=").concat(s,"&size=").concat(v,"&orderBy=").concat(N,"&order=").concat(A);return(null===I||void 0===I?void 0:I.length)>=3&&(e="".concat(r.IG).concat(window.location.pathname.split("/").at(-1),"/reassignto/list?page=").concat(s,"&size=").concat(v,"&orderBy=").concat(N,"&order=").concat(A,"&search=").concat(I)),V&&e})();j(!0);const l=await a.H.get(V&&t,{signal:n.signal});B(parseInt(l.headers["x-total-count"])),(s=>{u.Y.info("Assign assessment to operation member - updateRecords handler");let t=s;t.forEach((s=>{delete s.updatedAt,delete s.description,delete s.countryCode,delete s.isDeleted,delete s.__v,delete s.password,delete s.roleId,delete s.salt,delete s.uuid,delete s.phoneNumber,delete s.createdAt,delete s.memberData,delete s.department,delete s.isDeleted,delete s.isActive,delete s.createdBy,delete s.updatedBy,delete s.isReplaced,delete s.memberId,delete s.salutation,delete s.title,delete s.address,delete s.operationType,delete s.reportingManager,delete s.isCGFStaff,delete s.isOperationMember,delete s.isMemberRepresentative,delete s.assessmentCount,e.forEach((e=>{const t=s[e];delete s[e],s[e]=t}))})),O([...t])})(null===l||void 0===l?void 0:l.data),j(!1)}catch(o){var l,i;if(u.Y.info("Assign assessment to operation member - getOperationMembers handler catch error"),"ERR_CANCELED"===(null===o||void 0===o?void 0:o.code))return;t&&q({titleMessage:"Error",descriptionMessage:null!==o&&void 0!==o&&null!==(l=o.response)&&void 0!==l&&null!==(i=l.data)&&void 0!==i&&i.error&&"string"===typeof o.response.data.error?o.response.data.error:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>z.current())),j(!1)}};return(0,n.useEffect)((()=>{let e=!0;const s=new AbortController;return _&&(async()=>{await async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new AbortController;u.Y.info("Assign assessment to operation member - fetchAssessment handler");try{var t,n;const l=await a.H.get(r.IG+f,{signal:s.signal});e&&F(l.data),V=null===l||void 0===l||null===(t=l.data)||void 0===t||null===(n=t.assignedMember)||void 0===n?void 0:n._id}catch(d){var l,i,o;u.Y.info("Assign assessment to operation member - fetchAssessment handler catch error"),400===(null===d||void 0===d||null===(l=d.response)||void 0===l?void 0:l.status)&&"Invalid assessment!"===(null===d||void 0===d||null===(i=d.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)&&(q({titleMessage:"Oops!",descriptionMessage:"Oops!! There is some error while saving assessment details. Either someone has removed this assessment or looks like invalid assessment getting submitted. For more details please contact system / CGF admin",messageType:"error"},(()=>z.current())),setTimeout((()=>{G("/assessment-list")}),3e3))}}(e,s),await Q(e,s)})(),()=>{e=!1,s.abort()}}),[_,N,A,s,v]),(0,p.jsxs)("div",{className:"page-wrapper",children:[(0,p.jsx)(d.Z,{myRef:z,messageType:L.messageType,descriptionMessage:L.descriptionMessage,titleMessage:L.titleMessage}),(0,p.jsx)("div",{className:"breadcrumb-wrapper",children:(0,p.jsx)("div",{className:"container",children:(0,p.jsxs)("ul",{className:"breadcrumb",children:[(0,p.jsx)("li",{children:(0,p.jsx)(i.rU,{to:"/assessment-list",children:"Assessments"})}),(0,p.jsx)("li",{children:"Assign Assessment"})]})})}),(0,p.jsx)("section",{children:(0,p.jsxs)("div",{className:"container",children:[(0,p.jsxs)("div",{className:"form-header flex-between ",children:[(0,p.jsx)("h2",{className:"heading2",children:"Assign Assessment"}),(0,p.jsx)("div",{className:"member-filter-left",children:(0,p.jsxs)("div",{className:"searchbar",children:[(0,p.jsx)("input",{type:"text",placeholder:"Search",onChange:e=>(e=>{e.preventDefault(),u.Y.info("Assign assessment to operation member - onSearchChangeHandler handler"),y&&clearTimeout(y),D(!1),U(e.target.value),k(setTimeout((()=>{D(!0),t(1)}),1e3))})(e),name:"search"}),(0,p.jsx)("button",{type:"submit",children:(0,p.jsx)("i",{className:"fa fa-search"})})]})})]}),x?(0,p.jsx)(c.Z,{}):(0,p.jsx)("div",{className:"member-info-wrapper table-content-wrap replace-admin-table",children:(0,p.jsx)("div",{className:"member-data-sect",children:(0,p.jsx)(o.Z,{tableHead:g,records:P,handleChangePage1:e=>{u.Y.info("Assign assessment to operation member - handleTableTesterPageChange handler"),t(e)},handleChangeRowsPerPage1:e=>{b(parseInt(e.target.value,10)),t(1)},page:s,rowsPerPage:v,totalRecords:R,orderBy:N,order:A,setOrder:Z,setOrderBy:S,selected:C,setSelected:w,setCheckBoxes:!1,setSingleSelect:!0,handleSingleUserSelect:e=>{T(e),Y(e)},selectedUser:M})})}),(0,p.jsxs)("div",{className:"form-btn flex-between add-members-btn mb-20 replace-cgf-admin-btnblk",children:[(0,p.jsx)("button",{onClick:()=>G("/assessment-list"),className:"secondary-button mr-10",children:"Cancel"}),(0,p.jsx)("button",{onClick:async()=>{u.Y.info("Assign assessment to operation member - handleReassignAssessment handler");try{const s=await a.H.post(r.oN+f+"/reassign",{reassignTo:H});var e;if(201==s.status)q({titleMessage:"Success",descriptionMessage:null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.message,messageType:"success"},(()=>z.current())),setTimeout((()=>{G("/assessment-list")}),2e3)}catch(d){var s,t,n,l,i,o;if(u.Y.info("Assign assessment to operation member - handleReassignAssessment handler catch error"),400==(null===d||void 0===d||null===(s=d.response)||void 0===s?void 0:s.status))q({titleMessage:"Error",descriptionMessage:null!==d&&void 0!==d&&null!==(i=d.response)&&void 0!==i&&null!==(o=i.data)&&void 0!==o&&o.error&&"string"===typeof d.response.data.error?d.response.data.error:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>z.current()));400===(null===d||void 0===d||null===(t=d.response)||void 0===t?void 0:t.status)&&"Invalid assessment!"===(null===d||void 0===d||null===(n=d.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)&&(q({titleMessage:"Oops!",descriptionMessage:"Oops!! There is some error while saving assessment details. Either someone has removed this assessment or looks like invalid assessment getting submitted. For more details please contact system / CGF admin",messageType:"error"},(()=>z.current())),setTimeout((()=>{G("/assessment-list")}),3e3))}},disabled:""==M,className:"primary-button add-button replace-assign-btn",children:"Assign"})]})]})})]})}},53073:(e,s,t)=>{t.d(s,{Z:()=>Z});var n=t(7195),l=t(59140),i=t(77194),a=t(697),r=t(94454),o=t(35527),d=t(79836),c=t(53382),m=t(53994),h=t(39281),u=t(56890),p=t(35855),g=t(80720),v=(t(72791),t(50922)),b=t(61419),x=t(96816),j=(t(14917),t(20068)),f=t(58406),y=t(63903),k=t(53767),C=t(57246),w=(t(71605),t(80184));function A(e){const{onSelectAllClick:s,order:t,orderBy:n,tableHead:l,numSelected:i,rowCount:a,onRequestSort:o,setCheckBoxes:d}=e;return(0,w.jsx)(u.Z,{children:(0,w.jsxs)(p.Z,{children:[d&&(0,w.jsx)(m.Z,{padding:"checkbox",className:"table-checkbox",children:(0,w.jsx)(r.Z,{color:"primary",indeterminate:i>0&&i<a,checked:a>0&&i===a,onChange:s,inputProps:{"aria-label":"select all desserts"},className:"checkbox-mui"})}),l.map((e=>{return(0,w.jsxs)(m.Z,{width:null===e||void 0===e?void 0:e.width,align:"left",padding:e.disablePadding?"none":"normal",className:"table-header",children:["action"!==e.id&&(0,w.jsx)(g.Z,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(s=e.id,e=>{o(e,s)}),className:"sorted-blk",children:e.label}),"action"===e.id&&(0,w.jsx)("span",{className:"sorted-blk",children:e.label})]},e.id);var s}))]})})}function Z(e){let{tableHead:s,records:t,page:u=1,rowsPerPage:g=10,handleChangeRowsPerPage1:Z,handleChangePage1:N,totalRecords:S,orderBy:M,setOrderBy:T,icons:_,onClickVisibilityIconHandler1:D,onClickDeleteIconHandler1:P,selected:O=[],setSelected:R,order:B="asc",setOrder:E,setCheckBoxes:F=!0,setSingleSelect:I=!1,handleSingleUserSelect:U,selectedUser:H,onRowClick:Y=!1,isQuestionnare:G=!1,onClickEditAssesmentFunction:z,onClickAssignAssesmentFunction:L,onClickFillAssessmentFunction:q,viewAssessment:V=!1,onClickActionPlanDownload:Q}=e;console.log("icons - ",_);const W=(e,s)=>{D(e,s||!1)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(a.Z,{sx:{width:"100%"},className:F?"table-blk":"table-blk table-blk-without-checkbox",children:(0,w.jsx)(o.Z,{sx:{width:"100%",mb:2},children:(0,w.jsx)(h.Z,{children:(0,w.jsxs)(d.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,w.jsx)(A,{numSelected:O.length,order:B,orderBy:M,tableHead:s,onSelectAllClick:e=>{if(e.target.checked){const e=t.map((e=>e._id));R(e)}else R([])},onRequestSort:(e,s)=>{E(M===s&&"asc"===B?"desc":"asc"),T(s)},rowCount:t.length,setCheckBoxes:F}),(null===t||void 0===t?void 0:t.length)>0?(0,w.jsx)(c.Z,{children:t.map(((e,s)=>{const t=(a=e._id,-1!==O.indexOf(a));var a;const o="enhanced-table-checkbox-".concat(s);return(0,w.jsxs)(p.Z,{hover:!0,onClick:()=>Y&&W(G?e.uuid:e._id,(null===e||void 0===e?void 0:e.isOperationMember)||(null===e||void 0===e?void 0:e.isMemberRepresentative)),style:{cursor:Y&&"pointer"},role:"checkbox","aria-checked":t,tabIndex:-1,selected:t,children:[F&&(0,w.jsx)(m.Z,{padding:"checkbox",children:(0,w.jsx)(r.Z,{className:"table-checkbox",color:"primary",onClick:s=>((e,s)=>{const t=O.indexOf(s);let n=[];-1===t?n=n.concat(O,s):0===t?n=n.concat(O.slice(1)):t===O.length-1?n=n.concat(O.slice(0,-1)):t>0&&(n=n.concat(O.slice(0,t),O.slice(t+1))),R(n)})(0,e._id),checked:t,inputProps:{"aria-labelledby":o}})}),I&&(0,w.jsx)(m.Z,{children:(0,w.jsx)("div",{className:"radio-btn-field",children:(0,w.jsx)(b.Z,{className:"radio-btn",color:"primary",value:e._id,onChange:()=>(e=>{U(e)})(e._id),checked:H==e._id,inputProps:{"aria-labelledby":o}})})}),Object.keys(e).map(((s,t)=>{var n,l,i,a,r,o,d,c,h,u,p,g,v;return"_id"!==s&&"uuid"!==s&&"isActive"!==s&&"isUserAuthorizedToFillAssessment"!==s&&"isOperationMember"!==s&&"isMemberRepresentative"!==s&&"dueDate"!==s&&"submissionDate"!==s&&"title"!==s&&"country"!==s?(console.log("cell",s),(null===(n=e[s])||void 0===n?void 0:n.length)<=28||"undefined"===typeof e[s]?(0,w.jsxs)(m.Z,{children:[" ",("undefined"===typeof e[s]||""===e[s])&&"N/A","string"===typeof e[s]&&(null===(l=e[s])||void 0===l?void 0:l.length)>0&&"email"!==s?e[s][0].toUpperCase()+(null===(i=e[s])||void 0===i?void 0:i.slice(1)):e[s]]},s):(0,w.jsx)(j.Z,{placement:"bottom-start",enterDelay:1e3,title:e[s],children:(0,w.jsx)(m.Z,{children:"string"===typeof e[s]&&"email"!==s?e[s][0].toUpperCase()+"".concat(null===(a=e[s])||void 0===a?void 0:a.slice(1,28),"..."):"".concat(null===(r=e[s])||void 0===r?void 0:r.slice(0,28),"...")},s)},s)):"title"===s?(0,w.jsx)(j.Z,{placement:"bottom-start",enterDelay:1e3,title:e[s],children:(0,w.jsx)(m.Z,{children:"string"===typeof e[s]&&(null===(o=e[s])||void 0===o?void 0:o.length)>0&&"title"===s?e[s][0].toUpperCase()+(null===(d=e[s])||void 0===d?void 0:d.slice(1)):e[s]},s)},s):"country"===s?(0,w.jsx)(j.Z,{placement:"bottom-start",enterDelay:1e3,title:e[s],children:(0,w.jsx)(m.Z,{children:"undefined"===typeof e[s]||""===e[s]?"N/A":"string"===typeof e[s]&&(null===(c=e[s])||void 0===c?void 0:c.length)>0&&(null===(h=e[s])||void 0===h?void 0:h.length)<=10&&"country"===s?e[s][0].toUpperCase()+"".concat(null===(u=e[s])||void 0===u?void 0:u.slice(1,10)):"".concat(null===(p=e[s])||void 0===p?void 0:p.slice(0,10),"...")},s)},s):"isActive"===s?(0,w.jsx)(m.Z,{className:"button-style ".concat(e[s]&&"button-style-success"),children:(0,w.jsx)("span",{children:e[s]?"Active":"Inactive"})},s):"dueDate"===s?(0,w.jsx)(m.Z,{className:"due-date-style ".concat(new Date(new Date(e[s]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()&&"due-date-style-success"),children:(0,w.jsx)("span",{children:null!==(g=e[s])&&void 0!==g?g:e[s]})},s):"submissionDate"===s?(0,w.jsx)(m.Z,{style:{textAlign:"center"},children:(0,w.jsx)("span",{children:null!==(v=e[s])&&void 0!==v?v:e[s]})},s):void 0})),(null===_||void 0===_?void 0:_.length)>0&&(0,w.jsxs)(m.Z,{children:[_.includes("visibility")&&(0,w.jsx)("span",{className:"icon",children:(0,w.jsx)(j.Z,{title:"View Assessment",children:(0,w.jsx)(i.Z,{onClick:()=>W(V?e.uuid:e._id)})})}),_.includes("delete")&&(0,w.jsx)("span",{className:"icon",children:(0,w.jsx)(j.Z,{title:"Delete",children:(0,w.jsx)("img",{src:"/images/delete-icon.svg",onClick:()=>(e=>{P(e)})(e._id)})})}),_.includes("edit")&&(0,w.jsx)("span",{className:"icon",children:(0,w.jsx)(j.Z,{title:"Edit",children:(0,w.jsx)(n.Z,{onClick:()=>{return s=e.uuid,void z(s);var s}})})}),_.includes("send")&&("In Progress"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Re-opened"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Accepted"==(null===e||void 0===e?void 0:e.assessmentStatus))&&e.isUserAuthorizedToFillAssessment&&(0,w.jsx)("span",{className:"icon",children:(0,w.jsx)(j.Z,{title:"Assign to Operation Member",children:(0,w.jsx)(v.Z,{onClick:()=>L(e.uuid)})})}),_.includes("fill")&&e.isUserAuthorizedToFillAssessment&&(0,w.jsx)("span",{className:"icon",children:(0,w.jsx)(j.Z,{title:"Fill Assessment",children:(0,w.jsx)(l.Z,{onClick:()=>{return s=e.uuid,void q(s);var s}})})}),_.includes("download")&&(0,w.jsx)("span",{className:"icon",children:(0,w.jsx)(j.Z,{title:"Action plan",children:(0,w.jsx)(x.Z,{onClick:()=>{return s=e.uuid,void Q(s);var s}})})})]})]},null===e||void 0===e?void 0:e._id)}))}):(0,w.jsx)(c.Z,{children:(0,w.jsx)("tr",{children:(0,w.jsx)("td",{colSpan:"10",children:(0,w.jsx)("div",{className:"no-records-blk",children:(0,w.jsx)("h2",{className:"heading2",children:"No records available"})})})})})]})})})}),(null===t||void 0===t?void 0:t.length)>0&&(0,w.jsxs)("div",{className:"table-footer flex-between",children:[(0,w.jsxs)("div",{className:"table-footer-left",children:[(0,w.jsxs)("div",{className:"per-page-blk",children:[(0,w.jsx)("span",{className:"per-page-txt",children:"Records"}),(0,w.jsx)("div",{className:"per-page-dropdown",children:(0,w.jsx)("div",{className:"per-page-select-field",children:(0,w.jsxs)(f.Z,{value:g,onChange:e=>{Z(e)},children:[(0,w.jsx)(y.Z,{value:"5",children:"05"}),(0,w.jsx)(y.Z,{value:"10",selected:!0,children:"10"}),(0,w.jsx)(y.Z,{value:"20",children:"20"})]})})})]}),(0,w.jsxs)("div",{className:"show-entries-txt",children:["showing ",(u-1)*g+1,"-",(u-1)*g+(null===t||void 0===t?void 0:t.length)," out of ",S]})]}),(0,w.jsx)("div",{className:"table-footer-right",children:(0,w.jsx)(k.Z,{spacing:2,className:"pagination-blk",children:(0,w.jsx)(C.Z,{page:u,count:Math.ceil(S/g),onChange:(e,s)=>{N(s)},variant:"outlined",shape:"rounded"})})})]})]})}},1260:(e,s,t)=>{t.d(s,{j:()=>l});var n=t(72791);const l=e=>((0,n.useEffect)((()=>{document.title="HRDD System - ".concat(e)}),[e]),null)}}]);
//# sourceMappingURL=5033.f156203b.chunk.js.map