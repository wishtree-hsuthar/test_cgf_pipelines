"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[700],{2700:function(e,n,t){t.r(n),t.d(n,{AlphaNumRegEx:function(){return I},AlphaRegEx:function(){return _},NumericRegEx:function(){return F}});var l=t(1413),i=t(4165),o=t(7762),s=t(2982),a=t(5861),r=t(885),c=t(9823),d=t(600),u=t(7954),v=t(2104),p=t(7205),m=t(1898),h=t(7924),f=t(5814),x=t(8588),g=t(1346),j=t(9407),y=t(6571),Z=t(8723),b=t(7792),k=t(2791),w=t(7689),C=t(4677),M=t(6218),N=t(385),T=t(1300),S=t(7444),A=t(4917),E=t(2820),D=t(184),_=/^[a-zA-Z ]*$/,F=/^[0-9]+$/i,I=/^[a-z0-9]+$/i,R=[".jpg",".jpeg",".png",".doc",".txt",".pdf",".docx",".xlsx",".xls",".ppt",".pptx",".mp4",".mp3",".zip",".rar"];n.default=function(e){var n,t,c,B,P,z,L,H,U=e.isPrefilled,W=e.assessmentQuestionnaire,Y=e.cell,$=e.columnId,Q=e.sectionUUID,G=e.rowId,K=e.setAssessmentQuestionnaire,V=e.answer,q=e.transformedColumns,J=e.error,X=e.editMode,ee=e.handleAnswersChange,ne=e.handleAnswersBlur,te=(0,k.useState)(!1),le=(0,r.Z)(te,2),ie=le[0],oe=le[1],se=(0,k.useState)(!1),ae=(0,r.Z)(se,2),re=ae[0],ce=ae[1],de=k.useRef(),ue=(0,w.s0)(),ve=(0,w.UO)(),pe=(0,k.useState)(!1),me=(0,r.Z)(pe,2),he=me[0],fe=me[1],xe=(0,k.useState)(!1),ge=(0,r.Z)(xe,2),je=ge[0],ye=ge[1],Ze=(0,k.useState)([]),be=(0,r.Z)(Ze,2),ke=(be[0],be[1]),we=(0,k.useState)(!1),Ce=(0,r.Z)(we,2),Me=Ce[0],Ne=Ce[1],Te=function(e){e.preventDefault()},Se=(0,k.useState)(!1),Ae=(0,r.Z)(Se,2),Ee=Ae[0],De=Ae[1],_e=(0,E.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),Fe=(0,r.Z)(_e,2),Ie=Fe[0],Re=Fe[1],Oe=(0,k.useState)([]),Be=(0,r.Z)(Oe,2),Pe=Be[0],ze=Be[1],Le=U||!U&&W&&!Object.keys(W).length>0?null===Y||void 0===Y?void 0:Y.columnId:$,He=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t,l,a,r,c,d,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,s.Z)(Pe),l=0,De(!0),a=(0,o.Z)(n),e.prev=4,a.s();case 6:if((r=a.n()).done){e.next=26;break}if(c=r.value,e.prev=8,10485760,!((null===c||void 0===c?void 0:c.size)>10485760)){e.next=13;break}return l+=1,e.abrupt("continue",24);case 13:if(d=null===c||void 0===c?void 0:c.name.split("."),u="."+d[(null===d||void 0===d?void 0:d.length)-1],R.includes(u)){e.next=18;break}return l+=1,e.abrupt("continue",24);case 18:t.push(c),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),De(!1);case 24:e.next=6;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(4),a.e(e.t1);case 31:return e.prev=31,a.f(),e.finish(31);case 34:ze(t),l&&Re({titleMessage:"Error",descriptionMessage:"".concat(l," ").concat(l>1?"files":"file"," couldn't be uploaded"),messageType:"error"},(function(){return de.current()})),De(!1);case 37:case"end":return e.stop()}}),e,null,[[4,28,31,34],[8,21]])})));return function(n){return e.apply(this,arguments)}}(),Ue=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t,l,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===n||void 0===n||null===(t=n.target)||void 0===t?void 0:t.files;case 2:if(o=e.sent,!((null===(l=Object.keys(o))||void 0===l?void 0:l.length)>100)){e.next=6;break}return Re({titleMessage:"",descriptionMessage:"Max file count 100 reached",messageType:"error"},(function(){return de.current()})),e.abrupt("return");case 6:He(o);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),We=function(e){var n,t=new FormData,l=(0,o.Z)(e);try{for(l.s();!(n=l.n()).done;){var i=n.value;t.append("files[]",i)}}catch(s){l.e(s)}finally{l.f()}return t.append("dummy","dummy Content"),t},Ye=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t,o,a,r,c,d,u,v,p,m,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A.Y.debug("Current Selected files:- ",Pe),Ne(!0),e.prev=2,n=Pe.filter((function(e){return!(null!==e&&void 0!==e&&e.location)})),t=We(n),A.Y.debug("newly Added files:- ",n),o=Pe.filter((function(e){return null===e||void 0===e?void 0:e.location})),a=M.A+"/".concat(null===ve||void 0===ve?void 0:ve.id,"/attachments/").concat(Q,"/").concat(Le+"_"+G),e.next=10,C.H.post(a,t);case 10:return r=e.sent,A.Y.debug("old files:- ",o,"new files",r.data),e.next=14,C.H.put(a,{attachments:[].concat((0,s.Z)(o),(0,s.Z)(null===r||void 0===r?void 0:r.data))});case 14:Ne(!1),(c=(0,l.Z)({},W))[Q]["".concat(Le,"_").concat(G)]=[].concat((0,s.Z)(o),(0,s.Z)(null===r||void 0===r?void 0:r.data)),Re({titleMessage:"",descriptionMessage:"Attachments saved!",messageType:"success"},(function(){return de.current()})),K(c),ze([]),fe(!1),ye(!1),e.next=30;break;case 24:if(e.prev=24,e.t0=e.catch(2),Ne(!1),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=29;break}return e.abrupt("return");case 29:400===(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)&&"Invalid assessment id!"===(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u||null===(v=u.data)||void 0===v?void 0:v.message)?(console.log("in 400"),Re({titleMessage:"Oops!",descriptionMessage:"Oops!! There is some error while saving assessment details. Either someone has removed this assessment or looks like invalid assessment getting submitted. For more details please contact system / CGF admin",messageType:"error"},(function(){return de.current()})),setTimeout((function(){ue("/assessment-list")}),3e3)):401===(null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p?void 0:p.status)?(Re({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return de.current()})),setTimeout((function(){ue("/login")}),3e3)):Re({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(m=e.t0.response)&&void 0!==m&&null!==(h=m.data)&&void 0!==h&&h.message&&"string"===typeof e.t0.response.data.message?e.t0.response.data.message:"Oops! Something went wrong. Please try again later.!",messageType:"error"},(function(){return de.current()}));case 30:case"end":return e.stop()}}),e,null,[[2,24]])})));return function(){return e.apply(this,arguments)}}(),$e=function(){ze([]),ye(!1),fe(!1)};return(0,k.useEffect)((function(){var e;if(V&&(null===V||void 0===V?void 0:V.length)>0&&Array.isArray(V)&&0===(null===Pe||void 0===Pe?void 0:Pe.length)&&!je&&ke((0,s.Z)(V)),"attachments"===(null===(e=q[Le])||void 0===e?void 0:e.columnType)&&"string"===typeof V){var n=(0,l.Z)({},W);n[Q]["".concat(Le,"_").concat(G)]=[],K(n)}}),[]),(0,k.useEffect)((function(){V&&(null===V||void 0===V?void 0:V.length)>0&&Array.isArray(V)&&0===(null===Pe||void 0===Pe?void 0:Pe.length)&&!je&&ze((0,s.Z)(V))}),[Pe]),(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(S.Z,{myRef:de,titleMessage:Ie.titleMessage,descriptionMessage:Ie.descriptionMessage,messageType:Ie.messageType}),(0,D.jsx)(T.Z,{title:(0,D.jsx)("p",{children:"Add Attachments"}),info1:" ",info2:Ee?(0,D.jsx)("div",{className:"loader-blk",children:(0,D.jsx)("img",{src:N.Z,alt:"Loading"})}):(0,D.jsxs)("div",{className:"upload-file-wrap",children:[(0,D.jsx)(p.Z,{variant:"contained",component:"label",className:"upload-file-btn",children:(0,D.jsxs)("div",{className:(null===Pe||void 0===Pe?void 0:Pe.length)>0?"upload-file-blk selected-file-blk":"upload-file-blk",children:[(0,D.jsx)("input",{type:"file",hidden:!0,accept:".jpg, .jpeg, .png, .doc, .txt, .pdf, .docx, .xlsx, .xls, .ppt, .pptx, .mp4, .mp3, .zip, .rar",name:"files[]",onChange:Ue,multiple:!0}),(0,D.jsx)("span",{className:"upload-icon",children:(0,D.jsx)(d.Z,{})}),(0,D.jsxs)("span",{className:"file-upload-txt",children:["Click here to choose files (max file size"," ","".concat("10"," MB"),")"]})]})}),(0,D.jsx)("p",{style:{color:"#f7a823",fontFamily:"ProximaNova-Semibold, serif, sans-serif",margin:"10px 0px"},children:"Uploading large files may take some time"}),(null===Pe||void 0===Pe?void 0:Pe.length)>0&&(0,D.jsx)(O,{currentSelectedFiles:Pe,setCurrentSelectedFiles:ze,setIsFileRemoved:ye})]}),primaryButtonText:"Save",secondaryButtonText:"Cancel",onPrimaryModalButtonClickHandler:Ye,isDisabledPrimaryButton:Me,onSecondaryModalButtonClickHandler:$e,openModal:he,setOpenModal:fe,isModalForm:!0,handleCloseRedirect:$e}),U&&q[Le]&&"prefilled"===q[Le].columnType&&(0,D.jsx)("p",{className:"text-justify",children:ie?(0,D.jsxs)("span",{children:[(0,D.jsx)("span",{children:null===Y||void 0===Y?void 0:Y.value}),(0,D.jsx)("br",{}),(0,D.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),oe(!1)},className:"show-more-less-txt",children:"Show Less"})]}):(0,D.jsx)("span",{children:(null===Y||void 0===Y?void 0:Y.value.length)>100?(0,D.jsxs)("span",{children:[(0,D.jsxs)("span",{children:[null===Y||void 0===Y?void 0:Y.value.slice(0,100),"..."]}),(0,D.jsx)("br",{}),(0,D.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),oe(!0)},className:"show-more-less-txt",children:"Show More"})]}):null===Y||void 0===Y?void 0:Y.value})}),q[Le]&&"attachments"===(null===(n=q[Le])||void 0===n?void 0:n.columnType)&&(0,D.jsxs)(m.Z,{children:[(0,D.jsx)("a",{href:"#",onClick:function(){return fe(!0)},style:{color:"#f7a823",textDecoration:"none",pointerEvents:"".concat((X&&ve["*"].includes("view")||!X)&&"none")},children:"Add/Edit Attachments"}),(0,D.jsx)(h.Z,{children:V&&0!==(null===V||void 0===V?void 0:V.length)||!J||0===(null===J||void 0===J?void 0:J.length)?"":J})]}),(0,D.jsx)("span",{className:"list-uploaded-file",children:q[Le]&&"attachments"===(null===(t=q[Le])||void 0===t?void 0:t.columnType)&&V&&(null===V||void 0===V?void 0:V.length)>0&&Array.isArray(V)&&(0,D.jsxs)(D.Fragment,{children:[V.map((function(e,n){var t,l,i,o;return(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.length)<=30?(n<=1||re)&&(0,D.jsx)("a",{href:null!==(l=M.Wy+ve.id+"/attachments?id="+(null===e||void 0===e?void 0:e.location))&&void 0!==l?l:"#",style:{textDecoration:"none",display:"table",color:"".concat(null!==(i=e.location)&&void 0!==i?i:"#1e1e1e"),pointerEvents:"".concat(!e.location&&"none")},children:(0,D.jsx)(D.Fragment,{children:"".concat(null===e||void 0===e?void 0:e.name)})},n):(n<=1||re)&&(0,D.jsx)(f.Z,{title:null===e||void 0===e?void 0:e.name,style:{textDecoration:"none"},placement:"bottom-start",children:(0,D.jsx)("a",{href:e.location?M.Wy+ve.id+"/attachments?id="+(null===e||void 0===e?void 0:e.location):"#",style:{display:"table",textDecoration:"none",color:"".concat(!e.location&&"#1e1e1e"),cursor:"".concat(e.location?"pointer":"default")},children:"".concat(null===e||void 0===e||null===(o=e.name)||void 0===o?void 0:o.slice(0,30),"...")})},n)})),re?(0,D.jsx)("a",{href:"#",onClick:function(e){ce(!1)},className:"show-more-less-txt",style:{marginTop:"5px",display:"inline-block"},children:(null===V||void 0===V?void 0:V.length)>2&&"Show Less"}):(0,D.jsx)("a",{href:"#",onClick:function(e){ce(!0)},className:"show-more-less-txt",style:{marginTop:"5px",display:"inline-block"},children:(null===V||void 0===V?void 0:V.length)>2&&"Show More"})]})}),q[Le]&&"textbox"===q[Le].columnType&&(0,D.jsx)(x.Z,{className:"input-field ".concat(!V&&J&&0!==(null===J||void 0===J?void 0:J.length)||V&&J&&"alphabets"===(null===(c=q[Le])||void 0===c?void 0:c.validation)&&!_.test(V)||V&&J&&"alphanumeric"===(null===(B=q[Le])||void 0===B?void 0:B.validation)&&!I.test(V)||V&&J&&"numeric"===(null===(P=q[Le])||void 0===P?void 0:P.validation)&&!F.test(V)?"input-error":""),disabled:X&&ve["*"].includes("view")||!X,placeholder:"Enter text here",value:V,name:"".concat(Le,"_").concat(G),onChange:function(e){return ee(e.target.name,e.target.value)},onBlur:function(e){return ne(e.target.name,e.target.value)},helperText:!V&&J&&0!==(null===J||void 0===J?void 0:J.length)||V&&"alphabets"===(null===(z=q[Le])||void 0===z?void 0:z.validation)&&!_.test(V)||V&&"numeric"===(null===(L=q[Le])||void 0===L?void 0:L.validation)&&!F.test(V)||V&&"alphanumeric"===(null===(H=q[Le])||void 0===H?void 0:H.validation)&&!I.test(V)?J:" "}),q[Le]&&"dropdown"===q[Le].columnType&&(0,D.jsx)("div",{className:"select-field",children:(0,D.jsxs)(m.Z,{className:"fullwidth-field",children:[(0,D.jsx)(g.Z,{IconComponent:function(e){return(0,D.jsx)(v.Z,(0,l.Z)({},e))},name:"".concat(Le,"_").concat(G),displayEmpty:!0,disabled:X&&ve["*"].includes("view")||!X,value:V,className:"".concat(!V&&J&&0!==(null===J||void 0===J?void 0:J.length)?"select-field-error":""),onChange:function(e){ee(e.target.name,e.target.value)},renderValue:""!==V?void 0:function(){return(0,D.jsx)("div",{className:"select-placeholder",children:"Choose dropdown value"})},children:q[Le].options.map((function(e){return(0,D.jsx)(j.Z,{value:e,children:(null===e||void 0===e?void 0:e.length)<=40?e:(0,D.jsx)(f.Z,{title:e,children:(0,D.jsx)("span",{children:(null===e||void 0===e?void 0:e.slice(0,40))+"..."})})},e)}))}),(0,D.jsx)(h.Z,{children:!V&&J&&0!==(null===J||void 0===J?void 0:J.length)?J:" "})]})}),q[Le]&&"date"===q[Le].columnType&&(0,D.jsx)(m.Z,{fullWidth:!0,children:(0,D.jsxs)(y._,{dateAdapter:b.y,children:[(0,D.jsx)(Z.M,{disabled:X&&ve["*"].includes("view")||!X,value:V,className:"datepicker-blk",components:{OpenPickerIcon:u.Z},onChange:function(e){ee("".concat(Le,"_").concat(G),new Date(new Date(e)).toLocaleDateString("en"))},renderInput:function(e){return(0,D.jsx)(x.Z,(0,l.Z)((0,l.Z)({},e),{},{autoComplete:"off",onKeyDown:Te,className:"input-field".concat(!V&&J&&0!==(null===J||void 0===J?void 0:J.length)&&"input-error")}))}}),(0,D.jsx)(h.Z,{children:!V&&J&&0!==(null===J||void 0===J?void 0:J.length)?J:" "})]})})]})};var O=function(e){var n=e.currentSelectedFiles,t=e.setCurrentSelectedFiles,l=e.setIsFileRemoved,i=function(e){var i=(0,s.Z)(n);i.splice(e,1),t(i),l(!0)};return(0,D.jsx)(D.Fragment,{children:n.map((function(e,n){var t,l,o,s;return(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.length)<=40?(0,D.jsxs)("p",{className:"select-filename",children:[(0,D.jsx)("a",{href:null!==(l=null===e||void 0===e?void 0:e.location)&&void 0!==l?l:"#",style:{textDecoration:"none",color:"".concat(!(null!==e&&void 0!==e&&e.location)&&"#1e1e1e"),pointerEvents:"".concat(!(null!==e&&void 0!==e&&e.location)&&"none")},children:null===e||void 0===e?void 0:e.name}),(0,D.jsxs)("span",{className:"file-close-icon",style:{cursor:"pointer"},onClick:function(){return i(n)},children:[" ",(0,D.jsx)(c.Z,{})]})]},n):(0,D.jsx)(f.Z,{title:null===e||void 0===e?void 0:e.name,children:(0,D.jsxs)("p",{className:"select-filename",children:[(0,D.jsx)("a",{href:null!==(o=null===e||void 0===e?void 0:e.location)&&void 0!==o?o:"#",style:{textDecoration:"none",color:"".concat(!(null!==e&&void 0!==e&&e.location)&&"#1e1e1e"),pointerEvents:"".concat(!(null!==e&&void 0!==e&&e.location)&&"none")},children:(null===e||void 0===e||null===(s=e.name)||void 0===s?void 0:s.slice(0,30))+"..."}),(0,D.jsxs)("span",{className:"file-close-icon",style:{cursor:"pointer"},onClick:function(){return i(n)},children:[" ",(0,D.jsx)(c.Z,{})]})]})},n)}))})}}}]);
//# sourceMappingURL=700.f8e1650f.chunk.js.map