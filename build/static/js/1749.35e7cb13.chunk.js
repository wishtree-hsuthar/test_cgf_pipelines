"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[1749],{28814:(e,s,a)=>{a.r(s),a.d(s,{default:()=>E});var r=a(72791),n=a(57689),t=a(11087),l=a(45904),o=a(35527),i=a(97275),d=a(61134),c=a(74569),u=a.n(c),m=a(94677),h=a(76218),p=a(27659),v=a(12820),g=a(12104),x=a(48086),f=a(46363),b=a(1260),j=a(28386),y=a(14917),N=a(45736),C=a(80184);const A={countryCode:{validate:"Select the country code"},phoneNumber:{maxLength:"Max digits limit exceed",minLength:"Enter the valid phone number (Eg: 1234567890)",validate:"Enter the valid phone number (Eg: 1234567890)",pattern:"Invalid format"},name:{required:"Enter the CGF admin name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},email:{required:"Enter the email",pattern:"Invalid format",minLength:"minimum 3 characters required"},subRoleId:{required:"Select the role"}},E=()=>{var e;(0,b.j)("Add Admin");const[s,a]=(0,r.useState)(!1),c=(0,n.s0)(),{handleSubmit:E,watch:S,formState:{errors:w},reset:R,control:Z,trigger:L,setValue:M}=(0,d.cI)({defaultValues:{name:"",email:"",subRoleId:"",phoneNumber:"",countryCode:""}}),[I,T]=((0,n.TH)(),(0,r.useState)([])),[_,k]=(0,r.useState)([]),[F,H]=(0,r.useState)(!1),O=(0,r.useRef)(),[D,P]=(0,v.Z)({titleMessage:"",descriptionMessage:"",messageType:"error"});(0,r.useEffect)((()=>{let e=new AbortController;(async()=>{try{const s=await m.H.get(h.Lp,{signal:e.signal});y.Y.info("Add Sub Admin - fetchRoles handler"),k(s.data),s.data.filter((e=>"CGF Admin"===e.name&&R({subRoleId:e._id})))}catch(r){var s,a;if("ERR_CANCELED"===(null===r||void 0===r?void 0:r.code))return;y.Y.info("Add Sub Admin - fetchRoles handler catch error ".concat(null===r||void 0===r||null===(s=r.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)),(0,N.K)(r,P,O,c)}})(),(async()=>{try{const s=await u().get(h.od,{signal:e.signal});y.Y.info("Add sub admin - addCGFAdminFetchCountries handler ");{let e=null===s||void 0===s?void 0:s.data.map((e=>e.countryCode)),a=new Set(e);T([...a])}}catch(r){var s,a;if("ERR_CANCELED"===(null===r||void 0===r?void 0:r.code))return;y.Y.info("Add sub admin - addCGFAdminFetchCountries handler catch error ".concat(null===r||void 0===r||null===(s=r.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message))}})()}),[]);const q=async e=>{y.Y.info("Add sub admin - addSubAdminData handler"),H(!0),a(!0);try{const s=await u().post(h.mc,e);201==s.status&&(H(!1),P({titleMessage:"Hurray!",descriptionMessage:s.data.message,messageType:"success"},(()=>O.current())),a(!1),R())}catch(n){var s,r;if("ERR_CANCELED"===(null===n||void 0===n?void 0:n.code))return;y.Y.info("Add sub admin - addSubAdminData handler catch error ".concat(null===n||void 0===n||null===(s=n.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)),H(!1),a(!1),(0,N.K)(n,P,O,c)}};return(0,C.jsxs)("div",{className:"page-wrapper",children:[(0,C.jsx)(p.Z,{myRef:O,titleMessage:D.titleMessage,descriptionMessage:D.descriptionMessage,messageType:D.messageType}),(0,C.jsx)("div",{className:"breadcrumb-wrapper",children:(0,C.jsx)("div",{className:"container",children:(0,C.jsxs)("ul",{className:"breadcrumb",children:[(0,C.jsx)("li",{children:(0,C.jsx)(t.rU,{to:"/users/cgf-admin/",children:"Admins"})}),(0,C.jsx)("li",{children:"Add Admin"})]})})}),(0,C.jsx)("section",{children:(0,C.jsx)("div",{className:"container",children:(0,C.jsxs)("form",{onSubmit:E((async e=>{q(e),setTimeout((()=>{c("/users/cgf-admin/",{state:1})}),3e3)})),children:[(0,C.jsxs)("div",{className:"form-header flex-between",children:[(0,C.jsx)("h2",{className:"heading2",children:"Add Admin"}),(0,C.jsx)("div",{className:"form-header-right-txt",children:(0,C.jsxs)("div",{className:"tertiary-btn-blk",onClick:E((e=>{q(e),R(),M("")})),children:[(0,C.jsx)("span",{className:"addmore-icon",children:(0,C.jsx)("i",{className:"fa fa-plus"})}),(0,C.jsx)("span",{className:"addmore-txt",children:"Save & Add More"})]})})]}),F?(0,C.jsx)(j.Z,{}):(0,C.jsx)("div",{className:"card-wrapper",children:(0,C.jsxs)("div",{className:"card-blk flex-between",children:[(0,C.jsx)("div",{className:"card-form-field",children:(0,C.jsxs)("div",{className:"form-group",children:[(0,C.jsxs)("label",{htmlFor:"name",children:["Admin Name ",(0,C.jsx)("span",{className:"mandatory",children:"*"})]}),(0,C.jsx)(x.Z,{control:Z,onBlur:e=>{var s;return M("name",null===(s=e.target.value)||void 0===s?void 0:s.trim())},name:"name",placeholder:"Enter CGF admin name",myHelper:A,rules:{maxLength:50,minLength:3,required:!0,pattern:/^[a-zA-Z][a-zA-Z ]*$/}})]})}),(0,C.jsx)("div",{className:"card-form-field",children:(0,C.jsxs)("div",{className:"form-group",children:[(0,C.jsxs)("label",{htmlFor:"email",children:["Email ",(0,C.jsx)("span",{className:"mandatory",children:"*"})]}),(0,C.jsx)(x.Z,{name:"email",onBlur:e=>{var s;return M("email",null===(s=e.target.value)||void 0===s?void 0:s.trim())},control:Z,placeholder:"example@domain.com",myHelper:A,rules:{required:!0,maxLength:50,minLength:3,pattern:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}})]})}),(0,C.jsx)("div",{className:"card-form-field",children:(0,C.jsxs)("div",{className:"form-group",children:[(0,C.jsx)("label",{htmlFor:"phoneNumber",children:"Phone Number"}),(0,C.jsxs)("div",{className:"phone-number-field",children:[(0,C.jsx)("div",{className:"select-field country-code",children:(0,C.jsx)(d.Qr,{control:Z,name:"countryCode",rules:{validate:()=>{if(!S("countryCode")&&S("phoneNumber"))return"Invalid input"}},render:e=>{let{field:s,fieldState:{error:a}}=e;return(0,C.jsx)(l.Z,{...s,className:"".concat(a&&"autocomplete-error"),PaperComponent:e=>{let{children:s}=e;return(0,C.jsx)(o.Z,{className:(null===I||void 0===I?void 0:I.length)>5?"autocomplete-option-txt autocomplete-option-limit":"autocomplete-option-txt",children:s})},popupIcon:(0,C.jsx)(g.Z,{}),onChange:(e,s)=>{M("countryCode",s&&"object"===typeof s?s.name:s),L("countryCode"),L("phoneNumber")},autoHighlight:!0,options:I||[],getOptionLabel:e=>e,renderOption:(e,s)=>(0,C.jsx)("li",{...e,children:s}),renderInput:e=>(0,C.jsx)(i.Z,{...e,inputProps:{...e.inputProps},placeholder:"+00",onChange:()=>L("countryCode"),helperText:a?A.countryCode[null===a||void 0===a?void 0:a.type]:" "})})}})}),(0,C.jsx)(x.Z,{name:"phoneNumber",control:Z,placeholder:"1234567890",myOnChange:e=>((e,s,a)=>{M(s,e.target.value),L(s),L(a)})(e,"phoneNumber","countryCode"),onBlur:e=>{var s;return M("phoneNumber",null===(s=e.target.value)||void 0===s?void 0:s.trim())},myHelper:A,rules:{minLength:7,maxLength:15,validate:e=>!S("phoneNumber")&&S("countryCode")?"invalid input":e&&!Number(e)?"Invalid input":void 0}})]})]})}),(0,C.jsx)("div",{className:"card-form-field",children:(0,C.jsxs)("div",{className:"form-group",children:[(0,C.jsxs)("label",{htmlFor:"role",children:["Role ",(0,C.jsx)("span",{className:"mandatory",children:"*"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(f.Z,{name:"subRoleId",control:Z,options:_,rules:{required:!0},myHelper:A,placeholder:"Select role"}),(0,C.jsx)("p",{className:"password-error",children:null===(e=w.subRoleId)||void 0===e?void 0:e.message})]})]})}),(0,C.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,C.jsx)("button",{type:"reset",onClick:()=>{c("/users/cgf-admin/",{state:0})},className:"secondary-button mr-10",children:"Cancel"}),(0,C.jsx)("button",{type:"submit",className:"primary-button add-button",disabled:s,children:"Save"})]})]})})]})})})]})}},48086:(e,s,a)=>{a.d(s,{Z:()=>l});var r=a(97275),n=(a(72791),a(61134)),t=a(80184);const l=e=>{let{control:s,name:a,myHelper:l,placeholder:o,myOnChange:i,rules:d,onBlur:c,multiline:u,isDisabled:m}=e;const{field:{onChange:h,value:p,ref:v},fieldState:{error:g}}=(0,n.bc)({name:a,control:s,rules:d,defaultValue:""});return(0,t.jsx)(r.Z,{disabled:m,className:"input-field ".concat(g&&"input-error"),placeholder:o,onChange:i||h,onBlur:c,value:p,inputRef:v,inputProps:{maxLength:(null===d||void 0===d?void 0:d.maxLength)&&d.maxLength},helperText:g?l&&l[a]&&l[a][g.type]?l[a][g.type]:"Invalid Input":" ",variant:"outlined"})}},27659:(e,s,a)=>{a.d(s,{Z:()=>i});var r=a(92131),n=a(5130),t=a(72791),l=a(29655),o=(a(5462),a(80184));const i=function(e){let{titleMessage:s,descriptionMessage:a,messageType:i,myRef:d,key:c}=e;const u=()=>{(0,l.Am)(m,{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"toastId"})},m=()=>(0,o.jsxs)("div",{className:"toaster-blk flex-start ".concat("success"===i&&"toaster-blk-success"),children:[(0,o.jsx)("div",{className:"toaster-left ".concat("success"===i&&"toaster-left-success"),children:(0,o.jsxs)("div",{className:"toaster-icon",children:["success"===i&&(0,o.jsx)(r.Z,{}),"error"===i&&(0,o.jsx)(n.Z,{})]})}),(0,o.jsx)("div",{className:"toaster-right",children:(0,o.jsx)("p",{children:a})})]});return(0,t.useEffect)((()=>{d.current=u}),[u,d]),(0,o.jsxs)("div",{className:"toaster-sect",children:[(0,o.jsx)("button",{style:{display:"none"},children:"Show Toast !"}),(0,o.jsx)(l.Ix,{className:"toaster-wrap ".concat("success"===i&&"toaster-wrap-success"," ")})]})}},45736:(e,s,a)=>{a.d(s,{K:()=>r});const r=async function(e,s,a,r,n){var t,l;let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if("ERR_CANCELED"===(null===e||void 0===e?void 0:e.code))return null;if(401==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))s({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again!",messageType:"error"},(()=>a.current())),setTimeout((()=>{r("/login")}),3e3);else if(403===(null===e||void 0===e||null===(l=e.response)||void 0===l?void 0:l.status)){var i,d,c,u;s({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(i=e.response)&&void 0!==i&&null!==(d=i.data)&&void 0!==d&&d.message?null===e||void 0===e||null===(c=e.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>a.current())),setTimeout((()=>{r("/home")}),3e3)}else{var m,h,p,v;s({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(m=e.response)&&void 0!==m&&null!==(h=m.data)&&void 0!==h&&h.message?null===e||void 0===e||null===(p=e.response)||void 0===p||null===(v=p.data)||void 0===v?void 0:v.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>a.current())),n&&setTimeout((()=>{r(n,{state:o})}),3e3)}}},12820:(e,s,a)=>{a.d(s,{Z:()=>n});var r=a(72791);const n=e=>{const[s,a]=(0,r.useState)(e),n=(0,r.useRef)([]);(0,r.useEffect)((()=>{n.current.forEach((e=>e(s))),n.current=[]}),[s]);return[s,(e,s)=>{a(e),s&&"function"===typeof s&&n.current.push(s)}]}},1260:(e,s,a)=>{a.d(s,{j:()=>n});var r=a(72791);const n=e=>((0,r.useEffect)((()=>{document.title="HRDD System - ".concat(e)}),[e]),null)}}]);
//# sourceMappingURL=1749.35e7cb13.chunk.js.map