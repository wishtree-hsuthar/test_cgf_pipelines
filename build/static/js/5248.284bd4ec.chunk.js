"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5248],{25248:(e,l,a)=>{a.r(l),a.d(l,{default:()=>P});var r=a(97275),s=a(88970),t=a(85523),n=a(61419),i=a(697),o=a(35527),d=a(39281),c=a(79836),m=a(53382),u=a(35855),h=a(53994),p=a(94454),b=a(72791),x=a(61134),g=a(57689),v=a(11087),f=a(55294),j=a(28386),Z=a(14917),N=a(27659),w=(a(71605),a(12820)),y=a(76218),k=a(1260),M=a(14227),C=a(45736),S=a(80184);const P=()=>{(0,k.j)("Add Role");const e=(0,g.s0)(),l=b.useRef(),[a,P]=(0,w.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"});let R=[],L={};const T={roleName:"",status:"active",description:""},A={roleName:{required:"Enter the role name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},description:{required:"Enter the description",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required"}},[E,q]=(0,b.useState)({...L}),[D,F]=(0,b.useState)(!1),[_,O]=(0,b.useState)(!1),I=e=>{e.map(((e,l)=>R[l]={moduleName:e.name,moduleId:e._id})),R.forEach((e=>L[e.moduleId]={name:e.moduleName,fill:!1,list:!1,add:!1,edit:!1,view:!1,delete:!1,all:!1})),q({...L})},{control:V,reset:G,setValue:H,handleSubmit:Y}=(0,x.cI)({defaultValues:T}),B=async a=>{Z.Y.info("Add role - submitCall handler");try{let e=JSON.parse(JSON.stringify(E));if(Object.keys(e).forEach((l=>{delete e[l].all,delete e[l].name})),d=e,!Object.values(d).some((e=>Object.values(e).some((e=>e)))))return void P({titleMessage:"Hurray!",descriptionMessage:"Select atleast 1 privilege",messageType:"error"},(()=>l.current()));F(!0),O(!0);const r=await f.Z.post(y.Yn+"roles",{name:a.roleName,description:a.description,isActive:"active"===a.status,privileges:e});if(201==r.status)return O(!1),F(!1),P({titleMessage:"Hurray!",descriptionMessage:r.data.message,messageType:"success"},(()=>l.current())),G({...T}),Q(),!0}catch(c){var r,s;if(O(!1),F(!1),401==(null===c||void 0===c||null===(r=c.response)||void 0===r?void 0:r.status))P({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(()=>l.current())),setTimeout((()=>{e("/login")}),3e3);else{if(403!==(null===c||void 0===c||null===(s=c.response)||void 0===s?void 0:s.status))return(e=>{var a,r;Z.Y.info("Add role - setErrorToaster handler"),P({titleMessage:"Error",descriptionMessage:null!==e&&void 0!==e&&null!==(a=e.response)&&void 0!==a&&null!==(r=a.data)&&void 0!==r&&r.message&&"string"===typeof e.response.data.message?e.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>l.current()))})(c),!1;var t,n,i,o;P({titleMessage:"Error",descriptionMessage:null!==c&&void 0!==c&&null!==(t=c.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message?null===c||void 0===c||null===(i=c.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>l.current())),setTimeout((()=>{e("/home")}),3e3)}}var d},Q=async()=>{try{const{data:e}=await f.Z.get(y.Yn+"system-modules");I([...e])}catch(a){if("ERR_CANCELED"===(null===a||void 0===a?void 0:a.code))return;(0,C.K)(a,P,l,e)}};return(0,b.useEffect)((()=>{let e=!0;const l=new AbortController;return e&&Q(),()=>{e=!1,l.abort()}}),[]),(0,S.jsxs)("div",{className:"page-wrapper",children:[(0,S.jsx)(N.Z,{myRef:l,titleMessage:a.titleMessage,descriptionMessage:a.descriptionMessage,messageType:a.messageType}),(0,S.jsx)("div",{className:"breadcrumb-wrapper",children:(0,S.jsx)("div",{className:"container",children:(0,S.jsxs)("ul",{className:"breadcrumb",children:[(0,S.jsx)("li",{children:(0,S.jsx)(v.rU,{to:"/roles",children:"Roles"})}),(0,S.jsx)("li",{children:"Add Role"})]})})}),(0,S.jsx)("section",{children:(0,S.jsxs)("div",{className:"container",children:[(0,S.jsxs)("div",{className:"form-header flex-between",children:[(0,S.jsx)("h2",{className:"heading2",children:"Add Role"}),(0,S.jsx)("div",{className:"form-header-right-txt",children:(0,S.jsxs)("div",{className:"tertiary-btn-blk",onClick:Y((async e=>{B(e)})),children:[(0,S.jsx)("span",{className:"addmore-icon",children:(0,S.jsx)("i",{className:"fa fa-plus"})}),(0,S.jsx)("span",{className:"addmore-txt",children:"Save & Add More"})]})})]}),(0,S.jsx)("form",{onSubmit:Y((async l=>{await B(l)&&setTimeout((()=>e("/roles")),3e3)})),children:_?(0,S.jsx)(j.Z,{}):(0,S.jsxs)("div",{className:"card-wrapper",children:[(0,S.jsxs)("div",{className:"card-blk flex-between",children:[(0,S.jsx)("div",{className:"card-form-field",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsxs)("label",{htmlFor:"roleName",children:["Role Name ",(0,S.jsx)("span",{className:"mandatory",children:"*"})]}),(0,S.jsx)(x.Qr,{name:"roleName",rules:{required:!0,maxLength:50,minLength:3,pattern:/^[a-zA-Z][a-zA-Z ]*$/},control:V,render:e=>{let{field:l,fieldState:{error:a}}=e;return(0,S.jsx)(r.Z,{...l,onBlur:e=>H("roleName",e.target.value.trim()),inputProps:{maxLength:50},className:"input-field ".concat(a&&"input-error"),id:"outlined-basic",placeholder:"Enter role name",helperText:a?A.roleName[a.type]:" ",variant:"outlined"})}})]})}),(0,S.jsx)("div",{className:"card-form-field",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"status",children:"Status"}),(0,S.jsx)("div",{className:"radio-btn-field",children:(0,S.jsx)(x.Qr,{name:"status",control:V,render:e=>{let{field:l}=e;return(0,S.jsxs)(s.Z,{...l,"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",className:"radio-btn",children:[(0,S.jsx)(t.Z,{value:"active",control:(0,S.jsx)(n.Z,{}),label:"Active"}),(0,S.jsx)(t.Z,{value:"inactive",control:(0,S.jsx)(n.Z,{}),label:"Inactive"})]})}})})]})}),(0,S.jsx)("div",{className:"card-form-field fullwidth",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsxs)("label",{htmlFor:"addrole-description",children:["Description ",(0,S.jsx)("span",{className:"mandatory",children:"*"})]}),(0,S.jsx)(x.Qr,{name:"description",control:V,rules:{required:!0,maxLength:500,minLength:3},render:e=>{let{field:l,fieldState:{error:a}}=e;return(0,S.jsx)(r.Z,{multiline:!0,...l,onBlur:e=>H("description",e.target.value.trim()),inputProps:{maxLength:500},className:"input-textarea ".concat(a&&"input-textarea-error"),id:"outlined-basic",placeholder:"Enter description",helperText:a?A.description[a.type]:" ",variant:"outlined"})}})]})})]}),(0,S.jsx)(i.Z,{sx:{width:"100%"},className:"table-blk table-blk-role",children:(0,S.jsx)(o.Z,{sx:{width:"100%"},children:(0,S.jsx)(d.Z,{children:(0,S.jsxs)(c.Z,{sx:{minWidth:750},children:[(0,S.jsx)(M.Z,{}),(0,S.jsx)(m.Z,{children:Object.keys(E).map(((e,l)=>(0,S.jsxs)(u.Z,{hover:!0,children:[(0,S.jsx)(h.Z,{children:E[e].name}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Assessment"===E[e].name&&(0,S.jsx)(p.Z,{disabled:"Assessment"!=E[e].name,className:"table-checkbox",checked:E[e].fill,onChange:()=>q((l=>({...l,[e]:{...l[e],fill:!l[e].fill,list:l[e].list||!l[e].fill,view:l[e].view||!l[e].fill,all:!l[e].fill&&l[e].add&&l[e].edit&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==E[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:E[e].list,onChange:()=>q((l=>({...l,[e]:{...l[e],list:!l[e].list,view:l[e].view&&!l[e].list||!1,edit:l[e].edit&&!l[e].list||!1,delete:l[e].delete&&!l[e].list||!1,add:l[e].add&&!l[e].list||!1,fill:l[e].fill&&!l[e].list||!1,all:!l[e].list&&l[e].add&&l[e].edit&&l[e].view&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==E[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:E[e].add,onChange:()=>q((l=>({...l,[e]:{...l[e],add:!l[e].add,list:l[e].list||!l[e].add,view:l[e].view||!l[e].add,all:!l[e].add&&l[e].edit&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==E[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:E[e].edit,onChange:()=>q((l=>({...l,[e]:{...l[e],edit:!l[e].edit,list:l[e].list||!l[e].edit,view:l[e].view||!l[e].edit,all:l[e].add&&!l[e].edit&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:(0,S.jsx)(p.Z,{className:"table-checkbox",checked:E[e].view,onChange:()=>q((l=>({...l,[e]:{...l[e],view:!l[e].view,list:l[e].list||!l[e].view,edit:l[e].edit&&!l[e].view||!1,delete:l[e].delete&&!l[e].view||!1,fill:l[e].fill&&!l[e].view||!1,all:l[e].add&&l[e].edit&&!l[e].view&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==E[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:E[e].delete,onChange:()=>q((l=>({...l,[e]:{...l[e],delete:!l[e].delete,list:l[e].list||!l[e].delete,edit:l[e].edit||!l[e].delete,view:l[e].view||!l[e].delete,all:l[e].add&&!l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==E[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:E[e].all,onChange:()=>q((l=>({...l,[e]:{...l[e],all:!l[e].all,list:!l[e].all,view:!l[e].all,add:!l[e].all,edit:!l[e].all,delete:!l[e].all,fill:"Assessment"===E[e].name&&!l[e].all}})))})})]},e)))})]})})})}),(0,S.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,S.jsx)("button",{type:"reset",style:{marginTop:"20px"},className:"secondary-button mr-10",onClick:()=>(G({defaultValues:T}),e("/roles")),children:"Cancel"}),(0,S.jsx)("button",{type:"submit",className:"primary-button",style:{marginTop:"20px"},disabled:D,children:"Save"})]})]})})]})})]})}},14227:(e,l,a)=>{a.d(l,{Z:()=>i});var r=a(56890),s=a(35855),t=a(53994),n=(a(72791),a(80184));const i=()=>(0,n.jsx)(r.Z,{children:(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(t.Z,{align:"left",className:"table-header",width:"16%",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Modules"})}),(0,n.jsx)(t.Z,{className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Fill"})}),(0,n.jsx)(t.Z,{className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"List"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Add"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Edit"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"View"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Delete"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"All"})})]})})},1260:(e,l,a)=>{a.d(l,{j:()=>s});var r=a(72791);const s=e=>((0,r.useEffect)((()=>{document.title="HRDD System - ".concat(e)}),[e]),null)},85523:(e,l,a)=>{a.d(l,{Z:()=>w});var r=a(63366),s=a(87462),t=a(72791),n=a(63733),i=a(94419),o=a(52930),d=a(53767),c=a(20890),m=a(14036),u=a(66934),h=a(31402),p=a(75878),b=a(21217);function x(e){return(0,b.Z)("MuiFormControlLabel",e)}const g=(0,p.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);var v=a(76147),f=a(80184);const j=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Z=(0,u.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,l)=>{const{ownerState:a}=e;return[{["& .".concat(g.label)]:l.label},l.root,l["labelPlacement".concat((0,m.Z)(a.labelPlacement))]]}})((e=>{let{theme:l,ownerState:a}=e;return(0,s.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(g.disabled)]:{cursor:"default"}},"start"===a.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===a.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===a.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(g.label)]:{["&.".concat(g.disabled)]:{color:(l.vars||l).palette.text.disabled}}})})),N=(0,u.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,l)=>l.asterisk})((e=>{let{theme:l}=e;return{["&.".concat(g.error)]:{color:(l.vars||l).palette.error.main}}})),w=t.forwardRef((function(e,l){var a,u;const p=(0,h.Z)({props:e,name:"MuiFormControlLabel"}),{className:b,componentsProps:g={},control:w,disabled:y,disableTypography:k,label:M,labelPlacement:C="end",required:S,slotProps:P={}}=p,R=(0,r.Z)(p,j),L=(0,o.Z)(),T=null!=(a=null!=y?y:w.props.disabled)?a:null==L?void 0:L.disabled,A=null!=S?S:w.props.required,E={disabled:T,required:A};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof w.props[e]&&"undefined"!==typeof p[e]&&(E[e]=p[e])}));const q=(0,v.Z)({props:p,muiFormControl:L,states:["error"]}),D=(0,s.Z)({},p,{disabled:T,labelPlacement:C,required:A,error:q.error}),F=(e=>{const{classes:l,disabled:a,labelPlacement:r,error:s,required:t}=e,n={root:["root",a&&"disabled","labelPlacement".concat((0,m.Z)(r)),s&&"error",t&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",s&&"error"]};return(0,i.Z)(n,x,l)})(D),_=null!=(u=P.typography)?u:g.typography;let O=M;return null==O||O.type===c.Z||k||(O=(0,f.jsx)(c.Z,(0,s.Z)({component:"span"},_,{className:(0,n.Z)(F.label,null==_?void 0:_.className),children:O}))),(0,f.jsxs)(Z,(0,s.Z)({className:(0,n.Z)(F.root,b),ownerState:D,ref:l},R,{children:[t.cloneElement(w,E),A?(0,f.jsxs)(d.Z,{display:"block",children:[O,(0,f.jsxs)(N,{ownerState:D,"aria-hidden":!0,className:F.asterisk,children:["\u2009","*"]})]}):O]}))}))},79012:(e,l,a)=>{a.d(l,{Z:()=>v});var r=a(63366),s=a(87462),t=a(72791),n=a(63733),i=a(94419),o=a(66934),d=a(31402),c=a(75878),m=a(21217);function u(e){return(0,m.Z)("MuiFormGroup",e)}(0,c.Z)("MuiFormGroup",["root","row","error"]);var h=a(52930),p=a(76147),b=a(80184);const x=["className","row"],g=(0,o.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,l)=>{const{ownerState:a}=e;return[l.root,a.row&&l.row]}})((e=>{let{ownerState:l}=e;return(0,s.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},l.row&&{flexDirection:"row"})})),v=t.forwardRef((function(e,l){const a=(0,d.Z)({props:e,name:"MuiFormGroup"}),{className:t,row:o=!1}=a,c=(0,r.Z)(a,x),m=(0,h.Z)(),v=(0,p.Z)({props:a,muiFormControl:m,states:["error"]}),f=(0,s.Z)({},a,{row:o,error:v.error}),j=(e=>{const{classes:l,row:a,error:r}=e,s={root:["root",a&&"row",r&&"error"]};return(0,i.Z)(s,u,l)})(f);return(0,b.jsx)(g,(0,s.Z)({className:(0,n.Z)(j.root,t),ownerState:f,ref:l},c))}))},88970:(e,l,a)=>{a.d(l,{Z:()=>h});var r=a(87462),s=a(63366),t=a(72791),n=a(79012),i=a(42071),o=a(98278),d=a(18672),c=a(67384),m=a(80184);const u=["actions","children","defaultValue","name","onChange","value"],h=t.forwardRef((function(e,l){const{actions:a,children:h,defaultValue:p,name:b,onChange:x,value:g}=e,v=(0,s.Z)(e,u),f=t.useRef(null),[j,Z]=(0,o.Z)({controlled:g,default:p,name:"RadioGroup"});t.useImperativeHandle(a,(()=>({focus:()=>{let e=f.current.querySelector("input:not(:disabled):checked");e||(e=f.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const N=(0,i.Z)(l,f),w=(0,c.Z)(b),y=t.useMemo((()=>({name:w,onChange(e){Z(e.target.value),x&&x(e,e.target.value)},value:j})),[w,x,Z,j]);return(0,m.jsx)(d.Z.Provider,{value:y,children:(0,m.jsx)(n.Z,(0,r.Z)({role:"radiogroup",ref:N},v,{children:h}))})}))}}]);
//# sourceMappingURL=5248.284bd4ec.chunk.js.map