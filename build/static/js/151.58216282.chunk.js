"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[151],{5151:function(e,t,n){n.r(t);var s=n(4165),i=n(5861),a=n(2982),l=n(4942),r=n(1413),d=n(885),c=n(1346),o=n(9407),u=n(4569),h=n.n(u),v=n(2791),m=n(7689),g=n(9106),x=(n(1605),n(6218)),p=n(7444),f=n(2820),b=n(1260),j=n(4917),Z=n(8386),k=n(184),w=[{id:"name",disablePadding:!1,label:"Roles"},{id:"totalCgfAdmins",disablePadding:!1,label:"Users"},{id:"createdAt",disablePadding:!1,label:"Created On"},{id:"isActive",disablePadding:!1,label:"Status"}];t.default=function(){(0,b.j)("Roles");var e=v.useRef(),t=(0,f.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),n=(0,d.Z)(t,2),u=n[0],y=n[1],C=(0,v.useState)(!1),N=(0,d.Z)(C,2),S=N[0],A=N[1],D=(0,v.useState)("none"),_=(0,d.Z)(D,2),P=_[0],R=_[1],T=(0,v.useState)(!0),M=(0,d.Z)(T,2),Y=M[0],E=M[1],O=(0,m.s0)(),B=["_id","name","totalCgfAdmins","createdAt","isActive"],F=(0,v.useState)(""),I=(0,d.Z)(F,2),U=I[0],L=I[1],H=(0,v.useState)({status:"none"}),z=(0,d.Z)(H,2),V=z[0],q=z[1],K=(0,v.useState)("none"===V.status),Q=(0,d.Z)(K,2),W=Q[0],G=Q[1],J=v.useState(1),X=(0,d.Z)(J,2),$=X[0],ee=X[1],te=v.useState(10),ne=(0,d.Z)(te,2),se=ne[0],ie=ne[1],ae=v.useState("desc"),le=(0,d.Z)(ae,2),re=le[0],de=le[1],ce=v.useState(""),oe=(0,d.Z)(ce,2),ue=oe[0],he=oe[1],ve=v.useState([]),me=(0,d.Z)(ve,2),ge=me[0],xe=me[1],pe=v.useState(0),fe=(0,d.Z)(pe,2),be=fe[0],je=fe[1],Ze=function(e){e.forEach((function(e){delete e.updatedAt,delete e.description,delete e.isDeleted,delete e.__v,delete e.cgfAdmins,e.totalCgfAdmins=e.totalCgfAdmins.toString(),e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),B.forEach((function(t){var n=e[t];delete e[t],e[t]=n}))})),xe((0,a.Z)(e))},ke=function(){j.Y.debug("filters",V);var e="".concat(x.Yn,"roles/list?page=").concat($,"&size=").concat(se,"&orderBy=").concat(ue,"&order=").concat(re);return U&&(e+="&search=".concat(U)),"none"!==(null===V||void 0===V?void 0:V.status)&&"all"!==(null===V||void 0===V?void 0:V.status)&&(e+="&status=".concat(V.status)),e},we=function(){var t=(0,i.Z)((0,s.Z)().mark((function t(){var n,i,a,l,r,d,c,o,u,v,m,g,x=arguments;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(x.length>0&&void 0!==x[0])||x[0],i=x.length>1&&void 0!==x[1]?x[1]:new AbortController,t.prev=2,a=ke(),A(!0),t.next=7,h().get(a,{signal:i.signal});case 7:l=t.sent,j.Y.debug("Response: ",l),je(parseInt(l.headers["x-total-count"])),Ze(l.data),A(!1),t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(2),"ERR_CANCELED"!==(null===t.t0||void 0===t.t0?void 0:t.t0.code)){t.next=18;break}return t.abrupt("return");case 18:401===(null===t.t0||void 0===t.t0||null===(r=t.t0.response)||void 0===r?void 0:r.status)?(y({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return e.current()})),setTimeout((function(){O("/login")}),3e3)):403===(null===t.t0||void 0===t.t0||null===(d=t.t0.response)||void 0===d?void 0:d.status)?(y({titleMessage:"Error",descriptionMessage:null!==t.t0&&void 0!==t.t0&&null!==(c=t.t0.response)&&void 0!==c&&null!==(o=c.data)&&void 0!==o&&o.message?null===t.t0||void 0===t.t0||null===(u=t.t0.response)||void 0===u||null===(v=u.data)||void 0===v?void 0:v.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return e.current()})),setTimeout((function(){O("/home")}),3e3)):(n&&y({titleMessage:"Error",descriptionMessage:null!==t.t0&&void 0!==t.t0&&null!==(m=t.t0.response)&&void 0!==m&&null!==(g=m.data)&&void 0!==g&&g.message&&"string"===typeof t.t0.response.data.message?t.t0.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return e.current()})),A(!1));case 19:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}();return(0,v.useEffect)((function(){var e=!0,t=new AbortController;return Y&&we(e,t),j.Y.debug("makeApiCall",Y),j.Y.debug("inside use Effect"),function(){e=!1,clearTimeout(P),t.abort()}}),[$,se,ue,re,V,Y]),j.Y.debug("Records: ",ge),(0,k.jsxs)("div",{className:"page-wrapper",children:[(0,k.jsx)(p.Z,{myRef:e,titleMessage:u.titleMessage,descriptionMessage:u.descriptionMessage,messageType:u.messageType}),(0,k.jsx)("section",{children:(0,k.jsx)("div",{className:"container",children:(0,k.jsxs)("div",{className:"member-filter-sect",children:[(0,k.jsxs)("div",{className:"form-header member-form-header flex-between mb-0",children:[(0,k.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,k.jsx)("h2",{className:"heading2 mr-40",children:"Roles"})}),(0,k.jsxs)("div",{className:"form-header-right-txt search-and-btn-field-right",children:[(0,k.jsx)("div",{className:"search-and-btn-field-blk",children:(0,k.jsxs)("div",{className:"searchbar",children:[(0,k.jsx)("input",{type:"text",placeholder:"Search",onChange:function(e){j.Y.debug("event",e.key),P&&clearTimeout(P),E(!1),j.Y.debug("search values",e.target.value),L(e.target.value),R(setTimeout((function(){E(!0),ee(1)}),1e3))},onKeyDown:function(e){"Enter"===e.key&&(E(!0),ee(1))},value:U,name:"search"}),(0,k.jsx)("button",{type:"submit",children:(0,k.jsx)("i",{className:"fa fa-search"})})]})}),(0,k.jsx)("div",{className:"form-btn",children:(0,k.jsx)("button",{type:"submit",className:"primary-button add-button",onClick:function(){return O("/roles/add-role")},children:"Add Role"})})]})]}),(0,k.jsx)("div",{className:"member-filter-wrap flex-between",children:(0,k.jsx)("div",{className:"member-filter-right",children:(0,k.jsx)("div",{className:"filter-select-wrap flex-between",children:(0,k.jsx)("div",{className:"filter-select-field",children:(0,k.jsx)("div",{className:"dropdown-field",children:(0,k.jsxs)(c.Z,{sx:{display:"none"},displayEmpty:!0,name:"status",value:V.status,onChange:function(e){j.Y.debug("value: ",e.target.value),ee(1),q((0,r.Z)((0,r.Z)({},V),{},(0,l.Z)({},e.target.name,e.target.value)))},onFocus:function(e){return G(!1)},onClose:function(e){return G(void 0===e.target.value)},children:[(0,k.jsx)(o.Z,{value:"none",disabled:!0,sx:{display:!W&&"none"},children:"Status"}),(0,k.jsx)(o.Z,{value:"active",children:"active"}),(0,k.jsx)(o.Z,{value:"inactive",children:"inactive"}),(0,k.jsx)(o.Z,{value:"all",children:"All"})]})})})})})}),S?(0,k.jsx)(Z.Z,{}):(0,k.jsx)("div",{className:"member-info-wrapper table-content-wrap table-content-width table-footer-btm-space",children:(0,k.jsx)(g.Z,{tableHead:w,records:ge,handleChangePage1:function(e){ee(e)},handleChangeRowsPerPage1:function(e){ie(parseInt(e.target.value,10)),ee(1)},page:$,rowsPerPage:se,totalRecords:be,orderBy:ue,onClickVisibilityIconHandler1:function(e){return j.Y.debug("id",e),O("view-role/".concat(e))},order:re,setOrder:de,setOrderBy:he,setCheckBoxes:!1,onRowClick:!0})})]})})})]})}},9106:function(e,t,n){n.d(t,{Z:function(){return N}});var s=n(7195),i=n(3372),a=n(7194),l=n(6015),r=n(5473),d=n(6650),c=n(1680),o=n(9773),u=n(4390),h=n(9963),v=n(9827),m=n(807),g=n(3769),x=(n(2791),n(922)),p=n(6321),f=n(4917),b=n(5814),j=n(1346),Z=n(9407),k=n(4162),w=n(4585),y=(n(1605),n(184));function C(e){var t=e.onSelectAllClick,n=e.order,s=e.orderBy,i=e.tableHead,a=e.numSelected,l=e.rowCount,d=e.onRequestSort,c=e.setCheckBoxes;return(0,y.jsx)(v.Z,{children:(0,y.jsxs)(m.Z,{children:[c&&(0,y.jsx)(u.Z,{padding:"checkbox",className:"table-checkbox",children:(0,y.jsx)(r.Z,{color:"primary",indeterminate:a>0&&a<l,checked:l>0&&a===l,onChange:t,inputProps:{"aria-label":"select all desserts"},className:"checkbox-mui"})}),i.map((function(e){return(0,y.jsxs)(u.Z,{width:null===e||void 0===e?void 0:e.width,align:"left",padding:e.disablePadding?"none":"normal",className:"table-header",children:["action"!==e.id&&(0,y.jsx)(g.Z,{active:s===e.id,direction:s===e.id?n:"asc",onClick:(t=e.id,function(e){d(e,t)}),className:"sorted-blk",children:e.label}),"action"===e.id&&(0,y.jsx)("span",{className:"sorted-blk",children:e.label})]},e.id);var t}))]})})}function N(e){var t=e.tableHead,n=e.records,v=e.page,g=void 0===v?1:v,N=e.rowsPerPage,S=void 0===N?10:N,A=e.handleChangeRowsPerPage1,D=e.handleChangePage1,_=e.totalRecords,P=e.orderBy,R=e.setOrderBy,T=e.icons,M=e.onClickVisibilityIconHandler1,Y=e.onClickDeleteIconHandler1,E=e.selected,O=void 0===E?[]:E,B=e.setSelected,F=e.order,I=void 0===F?"asc":F,U=e.setOrder,L=e.setCheckBoxes,H=void 0===L||L,z=e.setSingleSelect,V=void 0!==z&&z,q=e.handleSingleUserSelect,K=e.selectedUser,Q=e.onRowClick,W=void 0!==Q&&Q,G=e.isQuestionnare,J=void 0!==G&&G,X=e.onClickEditAssesmentFunction,$=e.onClickAssignAssesmentFunction,ee=e.onClickFillAssessmentFunction,te=e.viewAssessment,ne=void 0!==te&&te,se=function(e,t){f.Y.debug("Inside on click handler",t),M(e,t||!1)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l.Z,{sx:{width:"100%"},className:H?"table-blk":"table-blk table-blk-without-checkbox",children:(0,y.jsx)(d.Z,{sx:{width:"100%",mb:2},children:(0,y.jsx)(h.Z,{children:(0,y.jsxs)(c.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,y.jsx)(C,{numSelected:O.length,order:I,orderBy:P,tableHead:t,onSelectAllClick:function(e){if(e.target.checked){var t=n.map((function(e){return e._id}));B(t)}else B([])},onRequestSort:function(e,t){U(P===t&&"asc"===I?"desc":"asc"),R(t)},rowCount:n.length,setCheckBoxes:H}),(null===n||void 0===n?void 0:n.length)>0?(0,y.jsx)(o.Z,{children:n.map((function(e,t){f.Y.debug("row",e);var n,l=(n=e._id,-1!==O.indexOf(n)),d="enhanced-table-checkbox-".concat(t);return(0,y.jsxs)(m.Z,{hover:!0,onClick:function(){return W&&se(J?e.uuid:e._id,(null===e||void 0===e?void 0:e.isOperationMember)||(null===e||void 0===e?void 0:e.isMemberRepresentative))},style:{cursor:W&&"pointer"},role:"checkbox","aria-checked":l,tabIndex:-1,selected:l,children:[H&&(0,y.jsx)(u.Z,{padding:"checkbox",children:(0,y.jsx)(r.Z,{className:"table-checkbox",color:"primary",onClick:function(t){return function(e,t){var n=O.indexOf(t),s=[];-1===n?s=s.concat(O,t):0===n?s=s.concat(O.slice(1)):n===O.length-1?s=s.concat(O.slice(0,-1)):n>0&&(s=s.concat(O.slice(0,n),O.slice(n+1))),B(s)}(0,e._id)},checked:l,inputProps:{"aria-labelledby":d}})}),V&&(0,y.jsx)(u.Z,{children:(0,y.jsx)("div",{className:"radio-btn-field",children:(0,y.jsx)(p.Z,{className:"radio-btn",color:"primary",value:e._id,onChange:function(){return function(e){q(e)}(e._id)},checked:K==e._id,inputProps:{"aria-labelledby":d}})})}),Object.keys(e).map((function(t,n){var s,i,a,l,r;return"_id"!==t&&"uuid"!==t&&"isActive"!==t&&"isUserAuthorizedToFillAssessment"!==t&&"isOperationMember"!==t&&"isMemberRepresentative"!==t&&"dueDate"!==t?(null===(s=e[t])||void 0===s?void 0:s.length)<=28||"undefined"===typeof e[t]?(0,y.jsxs)(u.Z,{children:[" ","undefined"===typeof e[t]&&"N/A","string"===typeof e[t]&&"email"!==t?e[t][0].toUpperCase()+(null===(i=e[t])||void 0===i?void 0:i.slice(1)):e[t]]},t):(0,y.jsx)(b.Z,{placement:"bottom-start",enterDelay:1e3,title:e[t],children:(0,y.jsx)(u.Z,{children:"string"===typeof e[t]&&"email"!==t?e[t][0].toUpperCase()+"".concat(null===(a=e[t])||void 0===a?void 0:a.slice(1,28),"..."):"".concat(null===(l=e[t])||void 0===l?void 0:l.slice(0,28),"...")},t)},t):"isActive"===t?(0,y.jsx)(u.Z,{className:"button-style ".concat(e[t]&&"button-style-success"),children:(0,y.jsx)("span",{children:e[t]?"Active":"Inactive"})},t):"dueDate"===t?(f.Y.debug("due date  = ",new Date(e[t]).toLocaleDateString("en")),f.Y.debug("current date  = ",(new Date).toLocaleDateString("en")),f.Y.debug("Comparison = ",new Date(new Date(e[t]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()),(0,y.jsx)(u.Z,{className:"due-date-style ".concat(new Date(new Date(e[t]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()&&"due-date-style-success"),children:(0,y.jsx)("span",{children:null!==(r=e[t])&&void 0!==r?r:e[t]})},t)):void 0})),(null===T||void 0===T?void 0:T.length)>0&&(0,y.jsxs)(u.Z,{children:[T.includes("visibility")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(b.Z,{title:"View Assessment",children:(0,y.jsx)(a.Z,{onClick:function(){return se(ne?e.uuid:e._id)}})})}),T.includes("delete")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(b.Z,{title:"Delete",children:(0,y.jsx)("img",{src:"/images/delete-icon.svg",onClick:function(){return function(e){Y(e)}(e._id)}})})}),T.includes("edit")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(b.Z,{title:"Edit",children:(0,y.jsx)(s.Z,{onClick:function(){return t=e.uuid,void X(t);var t}})})}),T.includes("send")&&("In Progress"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Re-opened"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Accepted"==(null===e||void 0===e?void 0:e.assessmentStatus))&&e.isUserAuthorizedToFillAssessment&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(b.Z,{title:"Assign to Operation Member",children:(0,y.jsx)(x.Z,{onClick:function(){return $(e.uuid)}})})}),T.includes("fill")&&e.isUserAuthorizedToFillAssessment&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(b.Z,{title:"Fill Assessment",children:(0,y.jsx)(i.Z,{onClick:function(){return t=e.uuid,void ee(t);var t}})})})]})]},null===e||void 0===e?void 0:e._id)}))}):(0,y.jsx)(o.Z,{children:(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:"10",children:(0,y.jsx)("div",{className:"no-records-blk",children:(0,y.jsx)("h2",{className:"heading2",children:"No records available"})})})})})]})})})}),(null===n||void 0===n?void 0:n.length)>0&&(0,y.jsxs)("div",{className:"table-footer flex-between",children:[(0,y.jsxs)("div",{className:"table-footer-left",children:[(0,y.jsxs)("div",{className:"per-page-blk",children:[(0,y.jsx)("span",{className:"per-page-txt",children:"Records"}),(0,y.jsx)("div",{className:"per-page-dropdown",children:(0,y.jsx)("div",{className:"per-page-select-field",children:(0,y.jsxs)(j.Z,{value:S,onChange:function(e){A(e)},children:[(0,y.jsx)(Z.Z,{value:"5",children:"05"}),(0,y.jsx)(Z.Z,{value:"10",selected:!0,children:"10"}),(0,y.jsx)(Z.Z,{value:"20",children:"20"})]})})})]}),(0,y.jsxs)("div",{className:"show-entries-txt",children:["showing ",(g-1)*S+1,"-",(g-1)*S+(null===n||void 0===n?void 0:n.length)," out of ",_]})]}),(0,y.jsx)("div",{className:"table-footer-right",children:(0,y.jsx)(k.Z,{spacing:2,className:"pagination-blk",children:(0,y.jsx)(w.Z,{page:g,count:Math.ceil(_/S),onChange:function(e,t){D(t)},variant:"outlined",shape:"rounded"})})})]})]})}},1605:function(){}}]);
//# sourceMappingURL=151.58216282.chunk.js.map