"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5604],{7005:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var r=a(885),n=a(2791),i=a(7689),d=a(8821),o=a(2820),s=a(7659),l=a(4165),c=a(5861),u=a(2982),m=a(9106),p=a(4677),b=a(1300),v=a(6218),g=a(1189),f=a(8386),h=a(4917),y=a(5736),x=a(184),S=JSON.parse(JSON.stringify(g.si));S.push({id:"action",disablePadding:!1,label:"Action"});var M=function(e){var t=e.makeApiCall,a=e.pageForPendingOperationMemberTab,d=e.setPageForPendingOperationMemberTab,o=e.setMakeApiCall,s=e.search,g=e.filters,M=e.myRef,w=e.setToasterDetails,C=(0,i.s0)(),Z=(0,n.useState)(!0),T=(0,r.Z)(Z,2),j=T[0],k=T[1],O=(0,n.useState)(!1),N=(0,r.Z)(O,2),A=N[0],E=N[1],P=(0,n.useState)(""),Y=(0,r.Z)(P,2),B=Y[0],D=Y[1],R=n.useState(10),I=(0,r.Z)(R,2),q=I[0],F=I[1],_=n.useState("desc"),L=(0,r.Z)(_,2),H=L[0],J=L[1],G=n.useState(""),K=(0,r.Z)(G,2),U=K[0],z=K[1],X=n.useState([]),V=(0,r.Z)(X,2),W=V[0],Q=V[1],$=n.useState(0),ee=(0,r.Z)($,2),te=ee[0],ae=ee[1],re=["_id","name","email","memberCompany","companyType","createdByName","createdAt"],ne=function(e){h.Y.debug("data before update----",e);var t=e;t.forEach((function(e){delete e.updatedAt,delete e.data.description,delete e.data.countryCode,delete e.data.isDeleted,delete e.__v,delete e.data.password,delete e.data.roleId,delete e.data.role,delete e.data.salt,delete e.data.uuid,delete e.data.phoneNumber,delete e.token,delete e.tokenExpiry,delete e.tokenType,e.name=e.data.name,e.email=e.data.email,e.memberCompany=e.memberData.companyName,e.companyType=e.memberData.companyType,e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),e.createdByName=e.createdBy.name,delete e.createdBy,delete e.subRole,delete e.data,delete e.memberData,re.forEach((function(t){var a=e[t];delete e[t],e[t]=a}))})),h.Y.debug("data in updaterecords method in pending method",t),Q((0,u.Z)(t))},ie=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.H.delete(v.lf+B);case 3:200==(t=e.sent).status&&(h.Y.debug("operation member  invite withdrawn successfully"),w({titleMessage:"Success",descriptionMessage:null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,messageType:"success"},(function(){return M.current()})),oe(),E(!1)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),h.Y.debug("error from withdrawInvite id operation member",e.t0),(0,y.K)(e.t0,w,M,C);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),de=function(){h.Y.debug("filters",g),h.Y.debug("Search",s);var e="".concat(v.uX,"/pending/list?page=").concat(a,"&size=").concat(q,"&orderBy=").concat(U,"&order=").concat(H);return s.length>0&&(e+="&search=".concat(s)),e},oe=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,a,r,n,i,d,o,s,c,u,m,b,v=arguments;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(v.length>0&&void 0!==v[0])||v[0],a=v.length>1&&void 0!==v[1]?v[1]:new AbortController,e.prev=2,r=de(),k(!0),e.next=7,p.H.get(r,{signal:a.signal});case 7:n=e.sent,ae(parseInt(n.headers["x-total-count"])),h.Y.debug("Response from operation member api get for pending tab table",n),ne(n.data),k(!1),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:k(!1),h.Y.debug("Error from get all pending operation member  tab table-------",e.t0),401==(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i?void 0:i.status)?(t&&w({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return M.current()})),setTimeout((function(){C("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)?(t&&w({titleMessage:"Oops!",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(o=e.t0.response)&&void 0!==o&&null!==(s=o.data)&&void 0!==s&&s.message?null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return M.current()})),setTimeout((function(){C("/home")}),3e3)):t&&w({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(m=e.t0.response)&&void 0!==m&&null!==(b=m.data)&&void 0!==b&&b.message&&"string"===typeof e.t0.response.data.message?e.t0.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return M.current()}));case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){var e=!0,a=new AbortController;return t&&oe(e,a),h.Y.debug("makeApiCall",t),h.Y.debug("inside use Effect"),function(){e=!1,a.abort()}}),[g,t,o,a,q,U,H]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(b.Z,{title:(0,x.jsx)("p",{children:"Withdraw Operation Member Invitation"}),info1:(0,x.jsx)("p",{children:"On withdrawal, operation member will not be able to verify their account."}),info2:(0,x.jsx)("p",{children:"Do you want to withdraw the invitation?"}),primaryButtonText:"Yes",secondaryButtonText:"No",onPrimaryModalButtonClickHandler:function(){ie()},onSecondaryModalButtonClickHandler:function(){E(!1)},openModal:A,setOpenModal:E,isModalForm:!1}),j?(0,x.jsx)(f.Z,{}):(0,x.jsx)(m.Z,{tableHead:S,records:W,handleChangePage1:function(e){d(e)},handleChangeRowsPerPage1:function(e){h.Y.debug("rows per page",e),F(parseInt(e.target.value,10)),d(1)},page:a,rowsPerPage:q,totalRecords:te,orderBy:U,icons:["delete"],onClickDeleteIconHandler1:function(e){h.Y.debug("id for delete",e),E(!0),D(e)},order:H,setOrder:J,setOrderBy:z,setCheckBoxes:!1})]})},w=a(9434),C=JSON.parse(JSON.stringify(g.si));C.push({id:"isActive",disablePadding:!1,label:"Status"});var Z=function(e){var t,a,d=e.pageForOnboardedOperationMemberTab,o=e.setPageForOnboardedOperationMemberTab,s=e.makeApiCall,b=e.setMakeApiCall,g=e.search,S=e.filters,M=e.myRef,Z=(e.toasterDetails,e.setToasterDetails),T=e.searchTimeout,j=(e.setSearchTimeout,(0,n.useState)(!0)),k=(0,r.Z)(j,2),O=k[0],N=k[1],A=(0,w.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.privilege})),E="Super Admin"===(null===A||void 0===A?void 0:A.name),P=(A?Object.values(null===A||void 0===A?void 0:A.privileges):[]).filter((function(e){var t;return"Operation Members"===(null===e||void 0===e||null===(t=e.moduleId)||void 0===t?void 0:t.name)})).map((function(e){return{operationMember:{list:null===e||void 0===e?void 0:e.list,view:null===e||void 0===e?void 0:e.view,edit:null===e||void 0===e?void 0:e.edit,delete:null===e||void 0===e?void 0:e.delete,add:null===e||void 0===e?void 0:e.add}}}));h.Y.info("member operation privilege",null===(t=P[0])||void 0===t?void 0:t.operationMember),h.Y.info("privilege",A);var Y=(0,i.s0)(),B=n.useState(10),D=(0,r.Z)(B,2),R=D[0],I=D[1],q=n.useState("desc"),F=(0,r.Z)(q,2),_=F[0],L=F[1],H=n.useState(""),J=(0,r.Z)(H,2),G=J[0],K=J[1],U=n.useState([]),z=(0,r.Z)(U,2),X=z[0],V=z[1],W=n.useState(0),Q=(0,r.Z)(W,2),$=Q[0],ee=Q[1],te=(0,n.useState)([]),ae=(0,r.Z)(te,2),re=ae[0],ne=ae[1],ie=function(e){var t=["_id","name","email","memberCompany","companyType","createdByName","createdAt","isActive"];h.Y.debug("data before update----",e);var a=e;a.forEach((function(e){delete e.updatedAt,delete e.description,delete e.countryCode,delete e.isDeleted,delete e.__v,delete e.password,delete e.roleId,delete e.role,delete e.salt,delete e.uuid,delete e.phoneNumber,delete e.token,delete e.tokenExpiry,delete e.tokenType,delete e.address,delete e.isMemberRepresentative,delete e.isCGFStaff,delete e.isOperationMember,e.memberCompany=e.memberData.companyName,e.companyType=e.memberData.companyType,e.createdByName=e.createdBy.name,e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),delete e.replacedUsers,delete e.isReplaced,delete e.department,delete e.title,delete e.salutation,delete e.createdBy,delete e.updatedBy,delete e.subRole,delete e.data,delete e.memberData,delete e.operationType,delete e.reportingManager,delete e.memberId,delete e.assessmentCount,t.forEach((function(t){var a=e[t];delete e[t],e[t]=a}))})),h.Y.debug("data in updaterecords method",a),V((0,u.Z)(a))},de=function(){h.Y.debug("filters in onboarded table----",S),h.Y.debug("Search",g);var e="".concat(v.uX,"/list?page=").concat(d,"&size=").concat(R,"&orderBy=").concat(G,"&order=").concat(_);return g&&(e+="&search=".concat(g)),e},oe=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,a,r,n=arguments;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(n.length>0&&void 0!==n[0])||n[0],t=n.length>1&&void 0!==n[1]?n[1]:new AbortController,e.prev=2,a=de(),N(!0),e.next=7,p.H.get(a,{signal:t.signal});case 7:r=e.sent,ee(parseInt(r.headers["x-total-count"])),h.Y.debug("Response from sub admin api get",r),ie((0,u.Z)(r.data)),N(!1),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:N(!1),h.Y.debug("Error from getSubAdmin-------",e.t0),(0,y.K)(e.t0,Z,M,Y);case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){var e=!0,t=new AbortController;return s&&oe(e,t),h.Y.debug("makeApiCall",s),h.Y.debug("inside use Effect"),function(){e=!1,clearTimeout(T),t.abort()}}),[d,R,G,_,s,b,T]),(0,x.jsx)(x.Fragment,{children:O?(0,x.jsx)(f.Z,{}):(0,x.jsx)(m.Z,{tableHead:C,records:X,handleChangePage1:function(e){o(e)},handleChangeRowsPerPage1:function(e){I(parseInt(e.target.value,10)),o(1)},page:d,rowsPerPage:R,totalRecords:$,orderBy:G,onClickVisibilityIconHandler1:function(e){return h.Y.debug("id",e),Y("/users/operation-member/view-operation-member/".concat(e))},order:_,setOrder:L,setOrderBy:K,setCheckBoxes:!1,setSelected:ne,selected:re,onRowClick:!0===E||(null===(a=P[0])||void 0===a?void 0:a.operationMember.view)})})},T=a(1260),j=a(8460),k=a(7806),O=a(7340);var N=function(){var e;(0,T.j)("Operation Members");var t=(0,o.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),a=(0,r.Z)(t,2),l=a[0],c=a[1],u=n.useState(1),m=(0,r.Z)(u,2),p=m[0],b=m[1],g=n.useState(1),f=(0,r.Z)(g,2),y=f[0],S=f[1],C=(0,n.useRef)(),N=(0,n.useState)(""),A=(0,r.Z)(N,2),E=A[0],P=A[1],Y=n.useState(0),B=(0,r.Z)(Y,2),D=B[0],R=B[1],I=(0,n.useState)(!0),q=(0,r.Z)(I,2),F=q[0],_=q[1],L=(0,n.useState)(null),H=(0,r.Z)(L,2),J=H[0],G=H[1],K=(0,w.v9)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.privilege})),U="Super Admin"===(null===K||void 0===K?void 0:K.name),z=(K?Object.values(null===K||void 0===K?void 0:K.privileges):[]).filter((function(e){var t;return"Operation Members"===(null===e||void 0===e||null===(t=e.moduleId)||void 0===t?void 0:t.name)})).map((function(e){return{operationMember:{list:e.list,view:e.view,edit:e.edit,delete:e.delete,add:e.add}}}));h.Y.debug("member operation privilege",null===(e=z[0])||void 0===e?void 0:e.operationMember);var X=(0,n.useState)({companyType:"",createdBy:"",status:""}),V=(0,r.Z)(X,2),W=V[0],Q=V[1],$=(0,i.s0)();return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"page-wrapper",children:[(0,x.jsx)(s.Z,{myRef:C,titleMessage:l.titleMessage,descriptionMessage:l.descriptionMessage,messageType:l.messageType}),(0,x.jsx)("section",{children:(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("div",{className:"member-filter-sect"}),(0,x.jsxs)("div",{className:"form-header member-form-header flex-between",children:[(0,x.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,x.jsx)("h2",{className:"heading2 mr-40",children:"Operation Members"})}),(0,x.jsxs)("div",{className:"form-header-right-txt",children:[0==D&&(0,x.jsxs)("div",{className:"tertiary-btn-blk mr-20",onClick:function(){return(0,k.j)("Operation Members",c,!1,C,v.MM,$)},children:[(0,x.jsx)("span",{className:"download-icon",children:(0,x.jsx)(d.Z,{})}),"Download"]}),(!0===U||!0===z[0].operationMember.add)&&0===D&&(0,x.jsx)("div",{className:"form-btn",children:(0,x.jsx)("button",{onClick:function(){return $("/users/operation-members/add-operation-member")},className:"primary-button add-button",children:"Add Operation Member"})})]})]}),(0,x.jsxs)("div",{className:"member-filter-wrap flex-between",children:[(0,x.jsx)("div",{className:"member-tab-left",children:(0,x.jsx)(O.Z,{value:D,handleChange:function(e,t){R(t)}})}),(0,x.jsx)("div",{className:"member-filter-left",children:(0,x.jsxs)("div",{className:"searchbar",children:[(0,x.jsx)("input",{type:"text",placeholder:"Search",value:E,onKeyDown:function(e){"Enter"===e.key&&(_(!0),b(1),S(1))},onChange:function(e){return function(e){h.Y.debug("event",e.key),J&&clearTimeout(J),_(!1),h.Y.debug("search values",e.target.value),P(e.target.value),G(setTimeout((function(){_(!0),b(1),S(1)}),1e3))}(e)},name:"search"}),(0,x.jsx)("button",{type:"submit",children:(0,x.jsx)("i",{className:"fa fa-search"})})]})}),(0,x.jsx)("div",{className:"member-filter-right"})]}),(0,x.jsxs)("div",{className:"member-info-wrapper table-content-wrap",children:[(0,x.jsx)(j.x,{value:D,index:0,children:(0,x.jsx)(Z,{pageForOnboardedOperationMemberTab:p,setPageForOnboardedOperationMemberTab:b,makeApiCall:F,setMakeApiCall:_,search:E,filters:W,setSearch:P,setFilters:Q,searchTimeout:J,setSearchTimeout:G,setToasterDetails:c,myRef:C})}),(0,x.jsx)(j.x,{value:D,index:1,children:(0,x.jsx)(M,{pageForPendingOperationMemberTab:y,setPageForPendingOperationMemberTab:S,makeApiCall:F,setMakeApiCall:_,search:E,filters:W,setSearch:P,setFilters:Q,setToasterDetails:c,myRef:C})})]})]})})]})})}},1189:function(e,t,a){a.d(t,{Sn:function(){return l},eZ:function(){return u},si:function(){return c}});var r=a(4165),n=a(5861),i=a(4569),d=a.n(i),o=a(6218),s=a(4917),l={salutation:{required:"Select salutation"},name:{required:"Enter the operation member name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},department:{maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},title:{maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},email:{required:"Enter the email",pattern:"Invalid format"},countryCode:{required:"Enter country code",validate:"Select country code"},phoneNumber:{required:"Enter the phone number",maxLength:"Max digits limit exceed",minLength:"Enter valid number",validate:"Enter phone number"},memberCompany:{required:"Select member company"},operationType:{required:"Select the operation type"},memberId:{required:"Select the member company"},companyType:{required:"Enter company type"},address:{required:"Enter address",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},roleId:{required:"Select the role"},reportingManager:{required:"Select the reporting manager "},isCGFStaff:{required:"Select the CGFSTaff"}},c=[{id:"name",disablePadding:!1,label:"Operation Member"},{id:"email",disablePadding:!1,label:"Email"},{id:"memberCompany",disablePadding:!1,label:"Member Company"},{id:"companyType",disablePadding:!1,label:"Company Type"},{id:"createdByName",disablePadding:!1,label:"Created By"},{id:"createdAt",disablePadding:!1,label:"Created At"}],u=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d().get(o.NH);case 3:return t=e.sent,s.Y.debug("response",t),e.abrupt("return",null===t||void 0===t?void 0:t.data);case 8:e.prev=8,e.t0=e.catch(0),s.Y.debug("Error:- ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=5604.61be2402.chunk.js.map