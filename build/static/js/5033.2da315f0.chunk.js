"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5033],{5033:function(e,s,t){t.r(s);var n=t(4165),i=t(5861),a=t(2982),r=t(885),l=t(2791),o=t(7689),c=t(1087),d=t(4677),u=t(6218),m=t(9106),h=t(7659),p=t(8386),v=t(2820),g=t(1260),f=t(4917),x=t(184),b=[{id:"",disablePadding:!0,label:""},{id:"name",disablePadding:!0,label:"Operation Member"},{id:"email",disablePadding:!1,label:"Email"}];s.default=function(){(0,g.j)("Assign Assessment");var e,s=["_id","name","email"],t=l.useState(1),j=(0,r.Z)(t,2),Z=j[0],k=j[1],y=l.useState(10),w=(0,r.Z)(y,2),N=w[0],C=w[1],A=(0,l.useState)(!1),S=(0,r.Z)(A,2),M=S[0],T=S[1],_=(0,o.UO)().id,O=(0,l.useState)(null),R=(0,r.Z)(O,2),P=R[0],D=R[1],E=l.useState([]),I=(0,r.Z)(E,2),B=I[0],F=I[1],H=l.useState("asc"),U=(0,r.Z)(H,2),Y=U[0],G=U[1],z=l.useState("operationalMember"),L=(0,r.Z)(z,2),q=L[0],V=L[1],Q=(0,l.useState)(""),W=(0,r.Z)(Q,2),J=W[0],K=W[1],X=(0,l.useState)(!0),$=(0,r.Z)(X,2),ee=$[0],se=$[1],te=l.useState([]),ne=(0,r.Z)(te,2),ie=ne[0],ae=ne[1],re=l.useState(0),le=(0,r.Z)(re,2),oe=le[0],ce=le[1],de=(0,l.useState)({}),ue=(0,r.Z)(de,2),me=(ue[0],ue[1]),he=(0,l.useState)(""),pe=(0,r.Z)(he,2),ve=pe[0],ge=pe[1],fe=(0,l.useState)(""),xe=(0,r.Z)(fe,2),be=xe[0],je=xe[1],Ze=(0,o.s0)(),ke=l.useRef(),ye=(0,v.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),we=(0,r.Z)(ye,2),Ne=we[0],Ce=we[1],Ae=function(){var s="".concat(u.IG).concat(window.location.pathname.split("/").at(-1),"/reassignto/list?page=").concat(Z,"&size=").concat(N,"&orderBy=").concat(q,"&order=").concat(Y);return(null===ve||void 0===ve?void 0:ve.length)>=3&&(s="".concat(u.IG).concat(window.location.pathname.split("/").at(-1),"/reassignto/list?page=").concat(Z,"&size=").concat(N,"&orderBy=").concat(q,"&order=").concat(Y,"&search=").concat(ve)),e&&s},Se=function(e){f.Y.info("Assign assessment to operation member - updateRecords handler");var t=e;t.forEach((function(e){delete e.updatedAt,delete e.description,delete e.countryCode,delete e.isDeleted,delete e.__v,delete e.password,delete e.roleId,delete e.salt,delete e.uuid,delete e.phoneNumber,delete e.createdAt,delete e.memberData,delete e.department,delete e.isDeleted,delete e.isActive,delete e.createdBy,delete e.updatedBy,delete e.isReplaced,delete e.memberId,delete e.salutation,delete e.title,delete e.address,delete e.operationType,delete e.reportingManager,delete e.isCGFStaff,delete e.isOperationMember,delete e.isMemberRepresentative,delete e.assessmentCount,s.forEach((function(s){var t=e[s];delete e[s],e[s]=t}))})),ae((0,a.Z)(t))},Me=function(){var s=(0,i.Z)((0,n.Z)().mark((function s(){var t,i,a,r,l,o,c=arguments;return(0,n.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=!(c.length>0&&void 0!==c[0])||c[0],i=c.length>1&&void 0!==c[1]?c[1]:new AbortController,f.Y.info("Assign assessment to operation member - getOperationMembers handler"),s.prev=3,a=Ae(),T(!0),s.next=8,d.H.get(e&&a,{signal:i.signal});case 8:r=s.sent,ce(parseInt(r.headers["x-total-count"])),Se(null===r||void 0===r?void 0:r.data),T(!1),s.next=21;break;case 14:if(s.prev=14,s.t0=s.catch(3),f.Y.info("Assign assessment to operation member - getOperationMembers handler catch error"),"ERR_CANCELED"!==(null===s.t0||void 0===s.t0?void 0:s.t0.code)){s.next=19;break}return s.abrupt("return");case 19:t&&Ce({titleMessage:"Error",descriptionMessage:null!==s.t0&&void 0!==s.t0&&null!==(l=s.t0.response)&&void 0!==l&&null!==(o=l.data)&&void 0!==o&&o.error&&"string"===typeof s.t0.response.data.error?s.t0.response.data.error:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return ke.current()})),T(!1);case 21:case"end":return s.stop()}}),s,null,[[3,14]])})));return function(){return s.apply(this,arguments)}}(),Te=function(){var s=(0,i.Z)((0,n.Z)().mark((function s(){var t,i,a,r,l,o,c,m,h=arguments;return(0,n.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=!(h.length>0&&void 0!==h[0])||h[0],i=h.length>1&&void 0!==h[1]?h[1]:new AbortController,f.Y.info("Assign assessment to operation member - fetchAssessment handler"),s.prev=3,s.next=6,d.H.get(u.IG+_,{signal:i.signal});case 6:l=s.sent,t&&me(l.data),e=null===l||void 0===l||null===(a=l.data)||void 0===a||null===(r=a.assignedMember)||void 0===r?void 0:r._id,s.next=15;break;case 11:s.prev=11,s.t0=s.catch(3),f.Y.info("Assign assessment to operation member - fetchAssessment handler catch error"),400===(null===s.t0||void 0===s.t0||null===(o=s.t0.response)||void 0===o?void 0:o.status)&&"Invalid assessment!"===(null===s.t0||void 0===s.t0||null===(c=s.t0.response)||void 0===c||null===(m=c.data)||void 0===m?void 0:m.message)&&(Ce({titleMessage:"Oops!",descriptionMessage:"Oops!! There is some error while saving assessment details. Either someone has removed this assessment or looks like invalid assessment getting submitted. For more details please contact system / CGF admin",messageType:"error"},(function(){return ke.current()})),setTimeout((function(){Ze("/assessment-list")}),3e3));case 15:case"end":return s.stop()}}),s,null,[[3,11]])})));return function(){return s.apply(this,arguments)}}(),_e=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var s,t,i,a,r,l,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.Y.info("Assign assessment to operation member - handleReassignAssessment handler"),e.prev=1,e.next=4,d.H.post(u.oN+_+"/reassign",{reassignTo:be});case 4:201==(s=e.sent).status&&(Ce({titleMessage:"Success",descriptionMessage:null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message,messageType:"success"},(function(){return ke.current()})),setTimeout((function(){Ze("/assessment-list")}),2e3)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),f.Y.info("Assign assessment to operation member - handleReassignAssessment handler catch error"),400==(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i?void 0:i.status)&&Ce({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(o=e.t0.response)&&void 0!==o&&null!==(c=o.data)&&void 0!==c&&c.error&&"string"===typeof e.t0.response.data.error?e.t0.response.data.error:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return ke.current()})),400===(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)&&"Invalid assessment!"===(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.message)&&(Ce({titleMessage:"Oops!",descriptionMessage:"Oops!! There is some error while saving assessment details. Either someone has removed this assessment or looks like invalid assessment getting submitted. For more details please contact system / CGF admin",messageType:"error"},(function(){return ke.current()})),setTimeout((function(){Ze("/assessment-list")}),3e3));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){var e=!0,s=new AbortController;return ee&&(0,i.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Te(e,s);case 2:return t.next=4,Me(e,s);case 4:case"end":return t.stop()}}),t)})))(),function(){e=!1,s.abort()}}),[ee,q,Y,Z,N]),(0,x.jsxs)("div",{className:"page-wrapper",children:[(0,x.jsx)(h.Z,{myRef:ke,messageType:Ne.messageType,descriptionMessage:Ne.descriptionMessage,titleMessage:Ne.titleMessage}),(0,x.jsx)("div",{className:"breadcrumb-wrapper",children:(0,x.jsx)("div",{className:"container",children:(0,x.jsxs)("ul",{className:"breadcrumb",children:[(0,x.jsx)("li",{children:(0,x.jsx)(c.rU,{to:"/assessment-list",children:"Assessments"})}),(0,x.jsx)("li",{children:"Assign Assessment"})]})})}),(0,x.jsx)("section",{children:(0,x.jsxs)("div",{className:"container",children:[(0,x.jsxs)("div",{className:"form-header flex-between ",children:[(0,x.jsx)("h2",{className:"heading2",children:"Assign Assessment"}),(0,x.jsx)("div",{className:"member-filter-left",children:(0,x.jsxs)("div",{className:"searchbar",children:[(0,x.jsx)("input",{type:"text",placeholder:"Search",onChange:function(e){return function(e){e.preventDefault(),f.Y.info("Assign assessment to operation member - onSearchChangeHandler handler"),P&&clearTimeout(P),se(!1),ge(e.target.value),D(setTimeout((function(){se(!0),k(1)}),1e3))}(e)},name:"search"}),(0,x.jsx)("button",{type:"submit",children:(0,x.jsx)("i",{className:"fa fa-search"})})]})})]}),M?(0,x.jsx)(p.Z,{}):(0,x.jsx)("div",{className:"member-info-wrapper table-content-wrap replace-admin-table",children:(0,x.jsx)("div",{className:"member-data-sect",children:(0,x.jsx)(m.Z,{tableHead:b,records:ie,handleChangePage1:function(e){f.Y.info("Assign assessment to operation member - handleTableTesterPageChange handler"),k(e)},handleChangeRowsPerPage1:function(e){C(parseInt(e.target.value,10)),k(1)},page:Z,rowsPerPage:N,totalRecords:oe,orderBy:q,order:Y,setOrder:G,setOrderBy:V,selected:B,setSelected:F,setCheckBoxes:!1,setSingleSelect:!0,handleSingleUserSelect:function(e){K(e),je(e)},selectedUser:J})})}),(0,x.jsxs)("div",{className:"form-btn flex-between add-members-btn mb-20 replace-cgf-admin-btnblk",children:[(0,x.jsx)("button",{onClick:function(){return Ze("/assessment-list")},className:"secondary-button mr-10",children:"Cancel"}),(0,x.jsx)("button",{onClick:_e,disabled:""==J,className:"primary-button add-button replace-assign-btn",children:"Assign"})]})]})})]})}},9106:function(e,s,t){t.d(s,{Z:function(){return N}});var n=t(7195),i=t(3372),a=t(7194),r=t(6015),l=t(5473),o=t(6650),c=t(1680),d=t(9773),u=t(4390),m=t(9963),h=t(9827),p=t(807),v=t(3769),g=(t(2791),t(922)),f=t(6321),x=(t(4917),t(5814)),b=t(1346),j=t(9407),Z=t(4162),k=t(4585),y=(t(1605),t(184));function w(e){var s=e.onSelectAllClick,t=e.order,n=e.orderBy,i=e.tableHead,a=e.numSelected,r=e.rowCount,o=e.onRequestSort,c=e.setCheckBoxes;return(0,y.jsx)(h.Z,{children:(0,y.jsxs)(p.Z,{children:[c&&(0,y.jsx)(u.Z,{padding:"checkbox",className:"table-checkbox",children:(0,y.jsx)(l.Z,{color:"primary",indeterminate:a>0&&a<r,checked:r>0&&a===r,onChange:s,inputProps:{"aria-label":"select all desserts"},className:"checkbox-mui"})}),i.map((function(e){return(0,y.jsxs)(u.Z,{width:null===e||void 0===e?void 0:e.width,align:"left",padding:e.disablePadding?"none":"normal",className:"table-header",children:["action"!==e.id&&(0,y.jsx)(v.Z,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(s=e.id,function(e){o(e,s)}),className:"sorted-blk",children:e.label}),"action"===e.id&&(0,y.jsx)("span",{className:"sorted-blk",children:e.label})]},e.id);var s}))]})})}function N(e){var s=e.tableHead,t=e.records,h=e.page,v=void 0===h?1:h,N=e.rowsPerPage,C=void 0===N?10:N,A=e.handleChangeRowsPerPage1,S=e.handleChangePage1,M=e.totalRecords,T=e.orderBy,_=e.setOrderBy,O=e.icons,R=e.onClickVisibilityIconHandler1,P=e.onClickDeleteIconHandler1,D=e.selected,E=void 0===D?[]:D,I=e.setSelected,B=e.order,F=void 0===B?"asc":B,H=e.setOrder,U=e.setCheckBoxes,Y=void 0===U||U,G=e.setSingleSelect,z=void 0!==G&&G,L=e.handleSingleUserSelect,q=e.selectedUser,V=e.onRowClick,Q=void 0!==V&&V,W=e.isQuestionnare,J=void 0!==W&&W,K=e.onClickEditAssesmentFunction,X=e.onClickAssignAssesmentFunction,$=e.onClickFillAssessmentFunction,ee=e.viewAssessment,se=void 0!==ee&&ee,te=function(e,s){R(e,s||!1)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.Z,{sx:{width:"100%"},className:Y?"table-blk":"table-blk table-blk-without-checkbox",children:(0,y.jsx)(o.Z,{sx:{width:"100%",mb:2},children:(0,y.jsx)(m.Z,{children:(0,y.jsxs)(c.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,y.jsx)(w,{numSelected:E.length,order:F,orderBy:T,tableHead:s,onSelectAllClick:function(e){if(e.target.checked){var s=t.map((function(e){return e._id}));I(s)}else I([])},onRequestSort:function(e,s){H(T===s&&"asc"===F?"desc":"asc"),_(s)},rowCount:t.length,setCheckBoxes:Y}),(null===t||void 0===t?void 0:t.length)>0?(0,y.jsx)(d.Z,{children:t.map((function(e,s){var t,r=(t=e._id,-1!==E.indexOf(t)),o="enhanced-table-checkbox-".concat(s);return(0,y.jsxs)(p.Z,{hover:!0,onClick:function(){return Q&&te(J?e.uuid:e._id,(null===e||void 0===e?void 0:e.isOperationMember)||(null===e||void 0===e?void 0:e.isMemberRepresentative))},style:{cursor:Q&&"pointer"},role:"checkbox","aria-checked":r,tabIndex:-1,selected:r,children:[Y&&(0,y.jsx)(u.Z,{padding:"checkbox",children:(0,y.jsx)(l.Z,{className:"table-checkbox",color:"primary",onClick:function(s){return function(e,s){var t=E.indexOf(s),n=[];-1===t?n=n.concat(E,s):0===t?n=n.concat(E.slice(1)):t===E.length-1?n=n.concat(E.slice(0,-1)):t>0&&(n=n.concat(E.slice(0,t),E.slice(t+1))),I(n)}(0,e._id)},checked:r,inputProps:{"aria-labelledby":o}})}),z&&(0,y.jsx)(u.Z,{children:(0,y.jsx)("div",{className:"radio-btn-field",children:(0,y.jsx)(f.Z,{className:"radio-btn",color:"primary",value:e._id,onChange:function(){return function(e){L(e)}(e._id)},checked:q==e._id,inputProps:{"aria-labelledby":o}})})}),Object.keys(e).map((function(s,t){var n,i,a,r,l,o;return"_id"!==s&&"uuid"!==s&&"isActive"!==s&&"isUserAuthorizedToFillAssessment"!==s&&"isOperationMember"!==s&&"isMemberRepresentative"!==s&&"dueDate"!==s?(null===(n=e[s])||void 0===n?void 0:n.length)<=28||"undefined"===typeof e[s]?(0,y.jsxs)(u.Z,{children:[" ",("undefined"===typeof e[s]||""===e[s])&&"N/A","string"===typeof e[s]&&(null===(i=e[s])||void 0===i?void 0:i.length)>0&&"email"!==s?e[s][0].toUpperCase()+(null===(a=e[s])||void 0===a?void 0:a.slice(1)):e[s]]},s):(0,y.jsx)(x.Z,{placement:"bottom-start",enterDelay:1e3,title:e[s],children:(0,y.jsx)(u.Z,{children:"string"===typeof e[s]&&"email"!==s?e[s][0].toUpperCase()+"".concat(null===(r=e[s])||void 0===r?void 0:r.slice(1,28),"..."):"".concat(null===(l=e[s])||void 0===l?void 0:l.slice(0,28),"...")},s)},s):"isActive"===s?(0,y.jsx)(u.Z,{className:"button-style ".concat(e[s]&&"button-style-success"),children:(0,y.jsx)("span",{children:e[s]?"Active":"Inactive"})},s):"dueDate"===s?(0,y.jsx)(u.Z,{className:"due-date-style ".concat(new Date(new Date(e[s]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()&&"due-date-style-success"),children:(0,y.jsx)("span",{children:null!==(o=e[s])&&void 0!==o?o:e[s]})},s):void 0})),(null===O||void 0===O?void 0:O.length)>0&&(0,y.jsxs)(u.Z,{children:[O.includes("visibility")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(x.Z,{title:"View Assessment",children:(0,y.jsx)(a.Z,{onClick:function(){return te(se?e.uuid:e._id)}})})}),O.includes("delete")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(x.Z,{title:"Delete",children:(0,y.jsx)("img",{src:"/images/delete-icon.svg",onClick:function(){return function(e){P(e)}(e._id)}})})}),O.includes("edit")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(x.Z,{title:"Edit",children:(0,y.jsx)(n.Z,{onClick:function(){return s=e.uuid,void K(s);var s}})})}),O.includes("send")&&("In Progress"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Re-opened"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Accepted"==(null===e||void 0===e?void 0:e.assessmentStatus))&&e.isUserAuthorizedToFillAssessment&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(x.Z,{title:"Assign to Operation Member",children:(0,y.jsx)(g.Z,{onClick:function(){return X(e.uuid)}})})}),O.includes("fill")&&e.isUserAuthorizedToFillAssessment&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(x.Z,{title:"Fill Assessment",children:(0,y.jsx)(i.Z,{onClick:function(){return s=e.uuid,void $(s);var s}})})})]})]},null===e||void 0===e?void 0:e._id)}))}):(0,y.jsx)(d.Z,{children:(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:"10",children:(0,y.jsx)("div",{className:"no-records-blk",children:(0,y.jsx)("h2",{className:"heading2",children:"No records available"})})})})})]})})})}),(null===t||void 0===t?void 0:t.length)>0&&(0,y.jsxs)("div",{className:"table-footer flex-between",children:[(0,y.jsxs)("div",{className:"table-footer-left",children:[(0,y.jsxs)("div",{className:"per-page-blk",children:[(0,y.jsx)("span",{className:"per-page-txt",children:"Records"}),(0,y.jsx)("div",{className:"per-page-dropdown",children:(0,y.jsx)("div",{className:"per-page-select-field",children:(0,y.jsxs)(b.Z,{value:C,onChange:function(e){A(e)},children:[(0,y.jsx)(j.Z,{value:"5",children:"05"}),(0,y.jsx)(j.Z,{value:"10",selected:!0,children:"10"}),(0,y.jsx)(j.Z,{value:"20",children:"20"})]})})})]}),(0,y.jsxs)("div",{className:"show-entries-txt",children:["showing ",(v-1)*C+1,"-",(v-1)*C+(null===t||void 0===t?void 0:t.length)," out of ",M]})]}),(0,y.jsx)("div",{className:"table-footer-right",children:(0,y.jsx)(Z.Z,{spacing:2,className:"pagination-blk",children:(0,y.jsx)(k.Z,{page:v,count:Math.ceil(M/C),onChange:function(e,s){S(s)},variant:"outlined",shape:"rounded"})})})]})]})}},7659:function(e,s,t){t.d(s,{Z:function(){return o}});var n=t(2131),i=t(5130),a=t(2791),r=t(5985),l=(t(5462),t(184));var o=function(e){e.titleMessage;var s=e.descriptionMessage,t=e.messageType,o=e.myRef,c=(e.key,function(){(0,r.Am)(d,{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"toastId"})}),d=function(){return(0,l.jsxs)("div",{className:"toaster-blk flex-start ".concat("success"===t&&"toaster-blk-success"),children:[(0,l.jsx)("div",{className:"toaster-left ".concat("success"===t&&"toaster-left-success"),children:(0,l.jsxs)("div",{className:"toaster-icon",children:["success"===t&&(0,l.jsx)(n.Z,{}),"error"===t&&(0,l.jsx)(i.Z,{})]})}),(0,l.jsx)("div",{className:"toaster-right",children:(0,l.jsx)("p",{children:s})})]})};return(0,a.useEffect)((function(){o.current=c}),[c,o]),(0,l.jsxs)("div",{className:"toaster-sect",children:[(0,l.jsx)("button",{style:{display:"none"},children:"Show Toast !"}),(0,l.jsx)(r.Ix,{className:"toaster-wrap ".concat("success"===t&&"toaster-wrap-success"," ")})]})}},2820:function(e,s,t){var n=t(885),i=t(2791);s.Z=function(e){var s=(0,i.useState)(e),t=(0,n.Z)(s,2),a=t[0],r=t[1],l=(0,i.useRef)([]);(0,i.useEffect)((function(){l.current.forEach((function(e){return e(a)})),l.current=[]}),[a]);return[a,function(e,s){r(e),s&&"function"===typeof s&&l.current.push(s)}]}},1260:function(e,s,t){t.d(s,{j:function(){return i}});var n=t(2791),i=function(e){return(0,n.useEffect)((function(){document.title="HRDD System - ".concat(e)}),[e]),null}},1605:function(){}}]);
//# sourceMappingURL=5033.2da315f0.chunk.js.map