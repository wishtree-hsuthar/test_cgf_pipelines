"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[9864],{99864:(e,a,l)=>{l.r(a),l.d(a,{default:()=>I});var i=l(72791),n=l(57689),r=l(11087),d=l(45904),t=l(97275),o=l(88970),s=l(85523),c=l(61419),m=l(52898),u=l(76218),p=l(94677),v=l(12104),h=l(61134),b=l(59434),x=l(14917),g=l(71300),j=l(46363),f=l(48086),y=l(27659),N=l(45736),M=l(28386),w=l(11189),C=l(12820),O=l(1260),T=l(16483),Z=l(80184);const S={memberCompany:"",companyType:"Internal",countryCode:"",phoneNumber:"",address:"",title:"",department:"",email:"",operationType:"",memberId:"",isActive:"",reportingManager:"",isCGFStaff:"",role:"",replacedOperationMember:""};let A=[];const I=()=>{var e;(0,O.j)("View Operation Member");const[a,l]=(0,i.useState)(!0),[I,D]=(0,i.useState)(!1),{control:F,reset:E,trigger:q,setValue:L}=(0,h.cI)({defaultValues:S}),k=(0,n.s0)(),B=(0,n.UO)(),R=B["*"].includes("pending")?1:0,P=(0,i.useRef)(),[V,H]=(0,C.Z)({titleMessage:"",descriptionMessage:"",messageType:""}),[Y,_]=(0,i.useState)(!1),[G,K]=(0,i.useState)([]),[Q,U]=(0,i.useState)(),[W,J]=(0,i.useState)(!1),[z,X]=(0,i.useState)(!1),[$,ee]=(0,i.useState)({}),ae=(0,b.v9)((e=>{var a;return null===(a=e.user)||void 0===a?void 0:a.privilege})),le="Super Admin"===(null===ae||void 0===ae?void 0:ae.name);let ie=(ae?Object.values(null===ae||void 0===ae?void 0:ae.privileges):[]).filter((e=>{var a;return"Operation Members"===(null===e||void 0===e||null===(a=e.moduleId)||void 0===a?void 0:a.name)})).map((e=>({operationMember:{list:e.list,view:e.view,edit:e.edit,delete:e.delete,add:e.add}})));(0,i.useEffect)((()=>{var e;let a=!0,i=new AbortController;return 0===(null===(e=A)||void 0===e?void 0:e.length)&&(async()=>{A=await(0,w.eZ)()})(),0===(null===G||void 0===G?void 0:G.length)&&(async(e,a)=>{try{const l=await p.H.get(u.od,{signal:e.signal});a&&K(l.data.map((e=>e.countryCode)))}catch(l){}})(i,a),0===(null===Q||void 0===Q?void 0:Q.length)&&(async(e,a)=>{try{x.Y.info("View Operation Member - fetchMemberCompany handler");const l=await p.H.get(u.Dl+"/list",{signal:e.signal});200==l.status&&a&&U(l.data.map((e=>({_id:e._id,companyName:e.companyName,companyType:e.companyType}))))}catch(n){var l,i;x.Y.info("View Operation Member - fetchMemberCompany handler - ".concat(null===n||void 0===n||null===(l=n.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message))}})(i,a),(async(e,a)=>{try{var i,n,r,d,t,o,s,c,m,v,h,b,g,j,f,y,M,w,C,O,T,Z,S,A,I,D,F,q,L,R,V,Y,_;x.Y.info("View Operation Member - fetchOperationMember handler"),l(!0);const N=await p.H.get(B["*"].includes("pending")?u.Ww+B.id:u.Hg+B.id,{signal:e.signal});a&&ee(N.data),E({memberId:null!==(i=null===N||void 0===N||null===(n=N.data)||void 0===n||null===(r=n.memberId)||void 0===r?void 0:r.companyName)&&void 0!==i?i:"N/A",companyType:null!==(d=null===N||void 0===N||null===(t=N.data)||void 0===t||null===(o=t.memberId)||void 0===o?void 0:o.companyType)&&void 0!==d?d:"N/A",countryCode:null!==(s=null===N||void 0===N||null===(c=N.data)||void 0===c?void 0:c.countryCode)&&void 0!==s?s:"N/A",phoneNumber:null!==(m=null===N||void 0===N||null===(v=N.data)||void 0===v?void 0:v.phoneNumber)&&void 0!==m?m:"N/A",address:null===N||void 0===N||null===(h=N.data)||void 0===h?void 0:h.address,title:N.data.title?N.data.title:"N/A",department:null!==N&&void 0!==N&&null!==(b=N.data)&&void 0!==b&&b.department?null===N||void 0===N||null===(g=N.data)||void 0===g?void 0:g.department:"N/A",email:null!==(j=null===N||void 0===N||null===(f=N.data)||void 0===f?void 0:f.email)&&void 0!==j?j:"N/A",operationType:null!==N&&void 0!==N&&null!==(y=N.data)&&void 0!==y&&y.operationType?null===N||void 0===N||null===(M=N.data)||void 0===M?void 0:M.operationType:"",reportingManager:null!==N&&void 0!==N&&null!==(w=N.data)&&void 0!==w&&null!==(C=w.reportingManager[0])&&void 0!==C&&C.name?null===N||void 0===N||null===(O=N.data)||void 0===O||null===(T=O.reportingManager[0])||void 0===T?void 0:T.name:"N/A",name:null!==(Z=null===N||void 0===N||null===(S=N.data)||void 0===S?void 0:S.name)&&void 0!==Z?Z:"N/A",salutation:null!==(A=null===N||void 0===N||null===(I=N.data)||void 0===I?void 0:I.salutation)&&void 0!==A?A:"N/A",isActive:null===N||void 0===N||null===(D=N.data)||void 0===D?void 0:D.isActive,isCGFStaff:!0===(null===N||void 0===N||null===(F=N.data)||void 0===F?void 0:F.isCGFStaff)?"true":"false",role:null!==(q=null===N||void 0===N||null===(L=N.data)||void 0===L||null===(R=L.role)||void 0===R?void 0:R.name)&&void 0!==q?q:"N/A",replacedOperationMember:void 0!==(null===N||void 0===N||null===(V=N.data)||void 0===V?void 0:V.replacedUsers)?null===N||void 0===N||null===(Y=N.data)||void 0===Y||null===(_=Y.replacedUsers[0])||void 0===_?void 0:_.name:"N/A"}),l(!1)}catch(Q){var G,K;if("ERR_CANCELED"===(null===Q||void 0===Q?void 0:Q.code))return;l(!1),x.Y.info("View Operation Member - fetchOperationMember handler - catch error - ".concat(null===Q||void 0===Q||null===(G=Q.response)||void 0===G||null===(K=G.data)||void 0===K?void 0:K.message)),(0,N.K)(Q,H,P,k,"/users/operation-members")}})(i,a),()=>{a=!1,i.abort()}}),[]);const ne=[{id:1,action:"Edit",hide:!0!==le&&!(null!==(e=ie[0])&&void 0!==e&&e.operationMember.edit)},{id:2,action:"Replace & Delete",hide:(()=>{return!!B["*"].includes("pending")||!le&&!(null!==(e=ie[0])&&void 0!==e&&e.operationMember.delete);var e})()},{id:4,action:"Re-Invite",hide:!B["*"].includes("pending")},{id:3,action:"Delete",hide:(()=>{return!(!$.isMemberRepresentative||B["*"].includes("pending"))||!le&&!(null!==(e=ie[0])&&void 0!==e&&e.operationMember.delete);var e})()}];return(0,Z.jsxs)("div",{className:"page-wrapper",onClick:()=>Y&&_(!1),children:[(0,Z.jsx)(y.Z,{messageType:V.messageType,descriptionMessage:V.descriptionMessage,myRef:P,titleMessage:V.titleMessage}),(0,Z.jsx)(g.Z,{title:(0,Z.jsxs)("p",{children:["Delete"," ",$.isMemberRepresentative?"Member Representative":"Operation Member"," ",'"',null===$||void 0===$?void 0:$.name,'"']}),info1:$.isMemberRepresentative?(0,Z.jsxs)("p",{children:["Deleting ",(0,Z.jsx)("b",{children:"Member Representative"})," will be an irreversible action, you will not be able to add new assessment for"," ",(0,Z.jsx)("b",{children:$.memberId.companyName}),". we recommend you replace them instead."]}):(0,Z.jsx)("p",{children:"Deleting all the details will be an irreversible action, we recommend you replace them instead."}),info2:(0,Z.jsxs)("p",{children:[" ","Do you still want to delete"," ",(0,Z.jsx)("b",{children:$.name}),"?"]}),onPrimaryModalButtonClickHandler:async()=>{try{x.Y.info("View Operation Member - handleDeleteOperationMember handler");200==(await p.H.delete(u.KV+B.id)).status&&(H({titleMessage:"Success",descriptionMessage:"".concat(null===$||void 0===$?void 0:$.name," deleted!"),messageType:"success"},(()=>P.current())),J(!1),setTimeout((()=>{k("/users/operation-members",{state:R})}),2e3))}catch(l){var e,a;x.Y.info("View Operation Member - handleDeleteOperationMember handler - catch error - ".concat(null===l||void 0===l||null===(e=l.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)),(0,N.K)(l,H,P,k)}},onSecondaryModalButtonClickHandler:()=>{J(!1),k("/users/operation-member/replace-operation-member/".concat(null===B||void 0===B?void 0:B.id))},primaryButtonText:"Delete anyway",secondaryButtonText:"Replace & Delete",openModal:W,setOpenModal:J}),(0,Z.jsx)(g.Z,{title:(0,Z.jsxs)("p",{children:["Withdraw ",null===$||void 0===$?void 0:$.name,"'s Invitation"]}),info1:(0,Z.jsx)("p",{children:"On withdrawal, Operation Member will not be able to verify their account."}),info2:(0,Z.jsx)("p",{children:"Do you still want to withdraw the invitation?"}),primaryButtonText:"Yes",secondaryButtonText:"No",onPrimaryModalButtonClickHandler:()=>{(async()=>{try{x.Y.info("View Operation Member - withdrawInviteById handler");const a=await p.H.delete(u.lf+(null===B||void 0===B?void 0:B.id));var e;200==a.status&&(H({titleMessage:"Success",descriptionMessage:null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.message,messageType:"success"},(()=>P.current())),D(!1),setTimeout((()=>{k("/users/operation-members",{state:R})}),2e3))}catch(i){var a,l;x.Y.info("View Operation Member - withdrawInvitebyId handler - catch error - ".concat(null===i||void 0===i||null===(a=i.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)),(0,N.K)(i,H,P,k)}})()},onSecondaryModalButtonClickHandler:()=>{D(!1)},openModal:I,setOpenModal:D,isModalForm:!1}),(0,Z.jsx)(g.Z,{title:(0,Z.jsx)("p",{children:"Alert"}),info1:" ",info2:(0,Z.jsxs)("p",{className:"mb-30",children:["Editing the ",(0,Z.jsx)("b",{children:"Operation Member"})," is not allowed as Member Company is Inactive."]}),primaryButtonText:"OK",onPrimaryModalButtonClickHandler:()=>{X(!1)},openModal:z,setOpenModal:X,isModalForm:!1}),(0,Z.jsx)("div",{className:"breadcrumb-wrapper",children:(0,Z.jsx)("div",{className:"container",children:(0,Z.jsxs)("ul",{className:"breadcrumb",children:[(0,Z.jsx)("li",{children:(0,Z.jsxs)(r.rU,{to:"/users/operation-members",state:B["*"].includes("pending")?1:0,children:["Operation Member"," ",B["*"].includes("pending")?"(Pending)":"(Onboarded)"]})}),(0,Z.jsx)("li",{children:"View Operation Member"})]})})}),(0,Z.jsx)("section",{children:(0,Z.jsxs)("div",{className:"container",children:[(0,Z.jsxs)("div",{className:"form-header flex-between",children:[(0,Z.jsx)("h2",{className:"heading2",children:"View Operation Member"}),(0,Z.jsxs)("span",{className:"form-header-right-txt",onClick:()=>{_(!Y)},children:[(!0===le||ie[0].operationMember.edit||ie[0].operationMember.delete)&&(0,Z.jsx)("span",{className:"crud-operation ".concat(Y&&"crud-operation-active"),children:(0,Z.jsx)(m.Z,{})}),(0,Z.jsx)("div",{className:"crud-toggle-wrap",style:{display:Y?"block":"none"},children:(0,Z.jsx)("ul",{className:"crud-toggle-list",children:ne.map(((e,a)=>(0,Z.jsx)("li",{onClick:()=>(e=>{var a;0===e&&(null!==$&&void 0!==$&&null!==(a=$.memberId)&&void 0!==a&&a.isActive?B["*"].includes("pending")?k("/users/operation-member/pending/edit-operation-member/".concat(B.id)):k("/users/operation-member/edit-operation-member/".concat(B.id)):X(!0)),1===e&&k("/users/operation-member/replace-operation-member/".concat(B.id)),2===e&&(0,T.F)(B.id,H,P,k),3===e&&(B["*"].includes("pending")?D(!0):J(!0))})(a),hidden:e.hide,children:e.action},e.id)))})})]})]}),a?(0,Z.jsx)(M.Z,{}):(0,Z.jsx)("div",{className:"card-wrapper",children:(0,Z.jsx)("div",{className:"card-blk flex-between",children:(0,Z.jsxs)("div",{className:"card-blk flex-between",children:[(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsx)("div",{className:"form-group",children:(0,Z.jsxs)("div",{className:"salutation-wrap",children:[(0,Z.jsxs)("div",{className:"salutation-blk",children:[(0,Z.jsxs)("label",{htmlFor:"salutation",children:["Salutation ",(0,Z.jsx)("span",{className:"mandatory",children:"*"})]}),(0,Z.jsx)(j.Z,{control:F,name:"salutation",isDisabled:!0,placeholder:"Mr.",options:["Mr.","Mrs.","Ms."]})]}),(0,Z.jsxs)("div",{className:"salutation-inputblk",children:[(0,Z.jsxs)("label",{htmlFor:"name",children:["Full Name ",(0,Z.jsx)("span",{className:"mandatory",children:"*"})]}),(0,Z.jsx)(f.Z,{isDisabled:!0,name:"name",control:F})]})]})})}),(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsx)("label",{htmlFor:"email",children:"Job Title "}),(0,Z.jsx)(f.Z,{isDisabled:!0,name:"title",control:F})]})}),(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsx)("label",{htmlFor:"email",children:"Department "}),(0,Z.jsx)(f.Z,{isDisabled:!0,name:"department",control:F})]})}),(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsxs)("label",{htmlFor:"email",children:["Email ",(0,Z.jsx)("span",{className:"mandatory",children:"*"})]}),(0,Z.jsx)(f.Z,{name:"email",control:F,isDisabled:!0})]})}),(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsx)("label",{htmlFor:"phoneNumber",children:"Phone Number"}),(0,Z.jsxs)("div",{className:"phone-number-field",children:[(0,Z.jsx)("div",{className:"select-field country-code",children:(0,Z.jsx)(h.Qr,{control:F,name:"countryCode",rules:{required:!0},render:e=>{let{field:a,fieldState:{error:l}}=e;return(0,Z.jsx)(d.Z,{disabled:!0,popupIcon:(0,Z.jsx)(v.Z,{}),className:"phone-number-disable",...a,options:G,autoHighlight:!0,getOptionLabel:e=>e,renderOption:(e,a)=>(0,Z.jsx)("li",{...e,children:a}),renderInput:e=>(0,Z.jsx)(t.Z,{...e,inputProps:{...e.inputProps},onChange:()=>q("countryCode"),placeholder:"N/A",disabled:!0})})}})}),(0,Z.jsx)(f.Z,{name:"phoneNumber",placeholder:"N/A",control:F,isDisabled:!0})]})]})}),(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsxs)("label",{htmlFor:"",children:["Operation Type ",(0,Z.jsx)("span",{className:"mandatory",children:"*"})]}),(0,Z.jsx)(j.Z,{isDisabled:!0,control:F,name:"operationType",placeholder:"N/A",options:A})]})}),(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsxs)("label",{htmlFor:"",children:["CGF Staff ",(0,Z.jsx)("span",{className:"mandatory",children:"*"})]}),(0,Z.jsx)("div",{className:"radio-btn-field",children:(0,Z.jsx)(h.Qr,{name:"isCGFStaff",control:F,render:e=>{let{field:a}=e;return(0,Z.jsxs)(o.Z,{...a,onChange:e=>{a.onChange(e),"true"===e.target.value?L("companyType","Internal"):L("companyType","External")},"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",className:"radio-btn",children:[(0,Z.jsx)(s.Z,{value:"true",control:(0,Z.jsx)(c.Z,{disabled:!0}),label:"Yes"}),(0,Z.jsx)(s.Z,{value:"false",control:(0,Z.jsx)(c.Z,{disabled:!0}),label:"No"})]})}})})]})}),(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsxs)("label",{htmlFor:"",children:["Member Company ",(0,Z.jsx)("span",{className:"mandatory",children:"*"})]}),(0,Z.jsx)("div",{className:"country-code-auto-search",children:(0,Z.jsx)(f.Z,{control:F,isDisabled:!0,name:"memberId"})})]})}),(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsx)("label",{htmlFor:"status",children:"Company Type"}),(0,Z.jsx)(f.Z,{isDisabled:!0,name:"companyType",control:F})]})}),(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsx)("label",{htmlFor:"",children:"Address "}),(0,Z.jsx)(h.Qr,{name:"address",control:F,rules:{minLength:3,maxLength:250},render:e=>{let{field:a,fieldState:{error:l}}=e;return(0,Z.jsx)(t.Z,{multiline:!0,...a,onBlur:e=>{var a;return L("address",null===(a=e.target.value)||void 0===a?void 0:a.trim())},disabled:!0,inputProps:{maxLength:250},className:"input-textarea ".concat(l&&"input-textarea-error"),id:"outlined-basic",placeholder:"N/A",helperText:" ",variant:"outlined"})}})]})}),(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsxs)("label",{htmlFor:"",children:["Reporting Manager ",(0,Z.jsx)("span",{className:"mandatory",children:"*"})]}),(0,Z.jsx)(f.Z,{control:F,name:"reportingManager",placeholder:"Select reporting manager ",isDisabled:!0})]})}),(0,Z.jsx)("div",{className:"card-form-field",hidden:B["*"].includes("pending"),children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsxs)("label",{htmlFor:"",children:["Replaced Operation Member"," ",(0,Z.jsx)("span",{className:"mandatory",children:"*"})]}),(0,Z.jsx)(f.Z,{control:F,name:"replacedOperationMember",placeholder:"N/A",isDisabled:!0})]})}),(0,Z.jsx)("div",{className:"card-form-field",children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsxs)("label",{htmlFor:"",children:["Role ",(0,Z.jsx)("span",{className:"mandatory",children:"*"})]}),(0,Z.jsx)(f.Z,{control:F,name:"role",placeholder:"N/A",isDisabled:!0})]})}),(0,Z.jsx)("div",{className:"card-form-field",hidden:B["*"].includes("pending"),children:(0,Z.jsxs)("div",{className:"form-group",children:[(0,Z.jsx)("label",{htmlFor:"status",children:"Status"}),(0,Z.jsx)("div",{className:"radio-btn-field",children:(0,Z.jsx)(h.Qr,{name:"isActive",control:F,render:e=>{let{field:a}=e;return(0,Z.jsxs)(o.Z,{...a,"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",className:"radio-btn",children:[(0,Z.jsx)(s.Z,{value:"true",disabled:!0,control:(0,Z.jsx)(c.Z,{}),label:"Active"}),(0,Z.jsx)(s.Z,{value:"false",disabled:!0,control:(0,Z.jsx)(c.Z,{}),label:"Inactive"})]})}})})]})})]})})})]})})]})}},48086:(e,a,l)=>{l.d(a,{Z:()=>d});var i=l(97275),n=(l(72791),l(61134)),r=l(80184);const d=e=>{let{control:a,name:l,myHelper:d,placeholder:t,myOnChange:o,rules:s,onBlur:c,multiline:m,isDisabled:u}=e;const{field:{onChange:p,value:v,ref:h},fieldState:{error:b}}=(0,n.bc)({name:l,control:a,rules:s,defaultValue:""});return(0,r.jsx)(i.Z,{disabled:u,className:"input-field ".concat(b&&"input-error"),placeholder:t,onChange:o||p,onBlur:c,value:v,inputRef:h,inputProps:{maxLength:(null===s||void 0===s?void 0:s.maxLength)&&s.maxLength},helperText:b?d&&d[l]&&d[l][b.type]?d[l][b.type]:"Invalid Input":" ",variant:"outlined"})}},11189:(e,a,l)=>{l.d(a,{Sn:()=>t,eZ:()=>s,si:()=>o});var i=l(74569),n=l.n(i),r=l(76218),d=l(14917);const t={salutation:{required:"Select salutation"},name:{required:"Enter the operation member name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},department:{maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},title:{maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},email:{required:"Enter the email",pattern:"Invalid format"},countryCode:{required:"Enter country code",validate:"Select country code"},phoneNumber:{required:"Enter the phone number",maxLength:"Max digits limit exceed",minLength:"Enter the valid phone number (Eg: 1234567890)",validate:"Enter the valid phone number (Eg: 1234567890)"},memberCompany:{required:"Select member company"},operationType:{required:"Select the operation type"},memberId:{required:"Select the member company"},companyType:{required:"Enter company type"},address:{required:"Enter address",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},roleId:{required:"Select the role"},reportingManager:{required:"Select the reporting manager "},isCGFStaff:{required:"Select the CGFSTaff"}},o=[{id:"name",disablePadding:!1,label:"Operation Member"},{id:"email",disablePadding:!1,label:"Email"},{id:"memberCompany",disablePadding:!1,label:"Member Company"},{id:"companyType",disablePadding:!1,label:"Company Type"},{id:"createdByName",disablePadding:!1,label:"Created By"},{id:"createdAt",disablePadding:!1,label:"Created At"}],s=async()=>{try{const e=await n().get(r.NH);return d.Y.info("Operation member module - getOperationTypes handler"),null===e||void 0===e?void 0:e.data}catch(l){var e,a;d.Y.info("Operation member module - getOperationTypes handler catch error ".concat(null===l||void 0===l||null===(e=l.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message))}}}}]);
//# sourceMappingURL=9864.65c96fa4.chunk.js.map