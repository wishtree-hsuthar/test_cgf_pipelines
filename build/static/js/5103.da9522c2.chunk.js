"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5103],{5103:function(e,n,r){r.r(n);var t=r(1413),a=r(4165),s=r(2982),i=r(5861),o=r(885),l=r(2791),c=r(7689),u=r(1087),d=r(6494),m=r(6650),p=r(8588),v=r(7265),h=r(2900),f=r(6321),g=r(4569),x=r.n(g),b=r(1134),j=r(7659),y=r(2820),Z=r(6218),N=r(4677),C=r(2104),w=r(8086),I=r(6363),E=r(1260),k=r(8386),S=r(4917),R=r(5736),A=r(184),M={countryCode:{validate:"Select the country code"},phoneNumber:{maxLength:"Max digits limit exceed",minLength:"Enter valid number",validate:"Enter the phone number",pattern:"Invalid format"},name:{required:"Enter the CGF admin name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},email:{required:"Enter the email",pattern:"Invalid format"},subRoleId:{required:"Select the role"}};n.default=function(){var e;(0,E.j)("Edit CGF Admin");var n=(0,l.useState)(!1),r=(0,o.Z)(n,2),g=r[0],L=r[1],T=(0,c.s0)(),O=(0,c.UO)(),_=(0,l.useRef)(),P=(0,l.useState)([]),Y=(0,o.Z)(P,2),H=Y[0],F=Y[1],G=(0,l.useState)(!1),q=(0,o.Z)(G,2),B=q[0],D=q[1],V=(0,l.useState)([]),K=(0,o.Z)(V,2),U=K[0],z=K[1],Q=(0,y.Z)({titleMessage:"",descriptionMessage:"",messageType:"error"}),W=(0,o.Z)(Q,2),$=W[0],J=W[1],X=(0,l.useState)({}),ee=(0,o.Z)(X,2),ne=ee[0],re=ee[1],te=(0,b.cI)({defaultValues:{name:"",email:"",subRoleId:"",phoneNumber:"",countryCode:{name:"India",countryCode:"+91"},status:"",role:""}}),ae=te.handleSubmit,se=te.control,ie=te.formState.errors,oe=te.reset,le=te.watch,ce=te.setValue,ue=te.trigger;(0,l.useEffect)((function(){var e=!0,n=new AbortController,r=function(){var r=(0,i.Z)((0,a.Z)().mark((function r(){var t,i,o;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,x().get(Z.od,{signal:n.signal});case 3:t=r.sent,S.Y.debug("response",t),e&&(i=null===t||void 0===t?void 0:t.data.map((function(e){return e.countryCode})),o=new Set(i),F((0,s.Z)(o))),r.next=14;break;case 8:if(r.prev=8,r.t0=r.catch(0),S.Y.debug("error from countries api of edit sub-admin",r.t0),"ERR_CANCELED"!==(null===r.t0||void 0===r.t0?void 0:r.t0.code)){r.next=13;break}return r.abrupt("return");case 13:(0,R.K)(r.t0,J,_,T);case 14:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(){return r.apply(this,arguments)}}();r();var t=function(){var r=(0,i.Z)((0,a.Z)().mark((function r(){var t,s,i,o;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,L(!0),r.next=4,N.H.get(Z.BJ+O.id,{signal:n.signal});case 4:o=r.sent,L(!1),S.Y.debug("response from sub admin view page fetch api",o),e&&re(o.data),oe({name:o.data.name,email:o.data.email,countryCode:o.data.countryCode,phoneNumber:o.data.phoneNumber,status:o.data.isActive?"active":"inactive",subRoleId:null!==(t=null===o||void 0===o||null===(s=o.data)||void 0===s||null===(i=s.subRoleId)||void 0===i?void 0:i._id)&&void 0!==t?t:""}),r.next=18;break;case 11:if(r.prev=11,r.t0=r.catch(0),"ERR_CANCELED"!==(null===r.t0||void 0===r.t0?void 0:r.t0.code)){r.next=15;break}return r.abrupt("return");case 15:L(!1),S.Y.debug("error from sub admin view page fetch api",r.t0),(0,R.K)(r.t0,J,_,T,"/users/cgf-admin");case 18:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(){return r.apply(this,arguments)}}();t();var o=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.H.get(Z.Lp);case 3:n=e.sent,S.Y.debug("Response from fetch roles - ",n),z(n.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),S.Y.debug("Error from fetch roles",e.t0),(0,R.K)(e.t0,J,_,T);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return o(),function(){e=!1,n.abort()}}),[]),S.Y.debug("fetchdetails in edit sub admin",ne);var de=(0,c.TH)();S.Y.debug(de);var me=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.Y.debug("data from handle submit edit",n),D(!0),L(!0),e.prev=3,e.next=6,N.H.put(Z.pU+O.id,{name:n.name,subRoleId:n.subRoleId,phoneNumber:n.phoneNumber,countryCode:n.countryCode,isActive:"active"===n.status});case 6:r=e.sent,S.Y.debug("response from edit sub admin method",r),200==r.status&&(L(!1),J({titleMessage:"Success!",descriptionMessage:r.data.message,messageType:"success"},(function(){return _.current()})),setTimeout((function(){T("/users/cgf-admin/")}),2e3)),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(3),S.Y.debug("error from edit sub admin submit method"),L(!1),D(!1),(0,R.K)(e.t0,$,_,T);case 17:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}();return(0,A.jsxs)("div",{className:"page-wrapper",children:[(0,A.jsx)(j.Z,{myRef:_,titleMessage:$.titleMessage,descriptionMessage:$.descriptionMessage,messageType:$.messageType}),(0,A.jsx)("div",{className:"breadcrumb-wrapper",children:(0,A.jsx)("div",{className:"container",children:(0,A.jsxs)("ul",{className:"breadcrumb",children:[(0,A.jsx)("li",{children:(0,A.jsx)(u.rU,{to:"/users/cgf-admin",children:"CGF Admins"})}),(0,A.jsx)("li",{children:(0,A.jsx)(u.rU,{to:"/users/cgf-admin/view-cgf-admin/".concat(O.id),children:"View CGF Admin"})}),(0,A.jsx)("li",{children:"Edit CGF Admin"})]})})}),(0,A.jsx)("section",{children:(0,A.jsxs)("div",{className:"container",children:[(0,A.jsx)("div",{className:"form-header flex-between",children:(0,A.jsx)("h2",{className:"heading2",children:"Edit CGF Admin"})}),g?(0,A.jsx)(k.Z,{}):(0,A.jsx)("div",{className:"card-wrapper",children:(0,A.jsx)("form",{onSubmit:ae(me),children:(0,A.jsxs)("div",{className:"card-blk flex-between",children:[(0,A.jsx)("div",{className:"card-form-field",children:(0,A.jsxs)("div",{className:"form-group",children:[(0,A.jsxs)("label",{htmlFor:"subAdminName",children:["CGF Admin Name ",(0,A.jsx)("span",{className:"mandatory",children:"*"})]}),(0,A.jsx)(w.Z,{name:"name",onBlur:function(e){var n;return ce("name",null===(n=e.target.value)||void 0===n?void 0:n.trim())},control:se,placeholder:"Enter CGF admin name",myHelper:M,rules:{required:!0,maxLength:50,minLength:3,pattern:/^[a-zA-Z][a-zA-Z ]*$/}})]})}),(0,A.jsx)("div",{className:"card-form-field",children:(0,A.jsxs)("div",{className:"form-group",children:[(0,A.jsxs)("label",{htmlFor:"email",children:["Email ",(0,A.jsx)("span",{className:"mandatory",children:"*"})]}),(0,A.jsx)(w.Z,{name:"email",onBlur:function(e){var n;return ce("email",null===(n=e.target.value)||void 0===n?void 0:n.trim())},isDisabled:!0,control:se,placeholder:"Enter email address",myHelper:M,rules:{required:!0,maxLength:50,minLength:3,pattern:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}})]})}),(0,A.jsx)("div",{className:"card-form-field",children:(0,A.jsxs)("div",{className:"form-group",children:[(0,A.jsx)("label",{htmlFor:"phoneNumber",children:"Phone Number"}),(0,A.jsxs)("div",{className:"phone-number-field",children:[(0,A.jsx)("div",{className:"select-field country-code",children:(0,A.jsx)(b.Qr,{control:se,name:"countryCode",rules:{validate:function(){if(!le("countryCode")&&le("phoneNumber"))return"Invalid input"}},render:function(e){var n=e.field,r=e.fieldState.error;return(0,A.jsx)(d.Z,(0,t.Z)((0,t.Z)({className:"".concat(r&&"autocomplete-error"),PaperComponent:function(e){var n=e.children;return(0,A.jsx)(m.Z,{className:(null===H||void 0===H?void 0:H.length)>5?"autocomplete-option-txt autocomplete-option-limit":"autocomplete-option-txt",children:n})},popupIcon:(0,A.jsx)(C.Z,{})},n),{},{onChange:function(e,n){S.Y.debug("inside autocomplete onchange"),S.Y.debug("new Value ",n),ce("countryCode",n&&"object"===typeof n?n.name:n),ue("countryCode"),ue("phoneNumber")},options:H||[],autoHighlight:!0,getOptionLabel:function(e){return e},renderOption:function(e,n){return(0,A.jsx)("li",(0,t.Z)((0,t.Z)({},e),{},{children:n}))},renderInput:function(e){return(0,A.jsx)(p.Z,(0,t.Z)((0,t.Z)({},e),{},{inputProps:(0,t.Z)({},e.inputProps),onChange:function(){return ue("countryCode")},placeholder:"+91",helperText:r?M.countryCode[null===r||void 0===r?void 0:r.type]:" "}))}}))}})}),(0,A.jsx)(w.Z,{name:"phoneNumber",myOnChange:function(e){return function(e,n,r){S.Y.debug("inside on Change"),ce(n,e.target.value),ue(n),ue(r)}(e,"phoneNumber","countryCode")},onBlur:function(e){var n;return ce("phoneNumber",null===(n=e.target.value)||void 0===n?void 0:n.trim())},control:se,myHelper:M,placeholder:"1234567890",rules:{maxLength:15,minLength:7,validate:function(e){return!le("phoneNumber")&&le("countryCode")?"invalid input":e&&!Number(e)?"Invalid input":void 0}}})]})]})}),(0,A.jsx)("div",{className:"card-form-field",children:(0,A.jsxs)("div",{className:"form-group",children:[(0,A.jsxs)("label",{htmlFor:"role",children:["Role ",(0,A.jsx)("span",{className:"mandatory",children:"*"})]}),(0,A.jsx)("div",{className:"select-field",children:(0,A.jsx)(I.Z,{name:"subRoleId",control:se,options:U,rules:{required:!0},myHelper:M,placeholder:"Select role"})}),(0,A.jsx)("p",{className:"input-error-msg",children:null===(e=ie.role)||void 0===e?void 0:e.message})]})}),(0,A.jsx)("div",{className:"card-form-field",children:(0,A.jsxs)("div",{className:"form-group",children:[(0,A.jsx)("label",{htmlFor:"cgfAdmin-status",children:"Status"}),(0,A.jsx)("div",{className:"radio-btn-field",children:(0,A.jsx)(b.Qr,{name:"status",control:se,render:function(e){var n=e.field;return(0,A.jsxs)(v.Z,(0,t.Z)((0,t.Z)({},n),{},{"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",className:"radio-btn",children:[(0,A.jsx)(h.Z,{value:"active",control:(0,A.jsx)(f.Z,{}),label:"Active"}),(0,A.jsx)(h.Z,{value:"inactive",control:(0,A.jsx)(f.Z,{}),label:"Inactive"})]}))}})})]})}),(0,A.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,A.jsx)("button",{onClick:function(){T("/users/cgf-admin/")},type:"reset",className:"secondary-button mr-10",children:"Cancel"}),(0,A.jsx)("button",{type:"submit",className:"primary-button add-button",disabled:B,children:"Update"})]})]})})})]})})]})}},6363:function(e,n,r){var t=r(1413),a=r(2104),s=r(1898),i=r(1346),o=r(9407),l=r(5814),c=r(7924),u=(r(2791),r(1134)),d=r(184);n.Z=function(e){var n=e.control,r=e.name,m=e.myOnChange,p=e.myHelper,v=e.placeholder,h=e.rules,f=e.options,g=e.isDisabled,x=(0,u.bc)({name:r,control:n,rules:h,defaultValue:""}),b=x.field,j=b.value,y=b.onChange,Z=b.ref,N=x.fieldState.error,C={PaperProps:{style:{maxHeight:168}}},w=window.innerWidth>1e3?60:45,I=function(e){var n=e.children;return(0,d.jsx)("div",{className:"select-placeholder",children:n})};return(0,d.jsxs)(s.Z,{className:"select-reusable",disabled:g,children:[(0,d.jsx)("div",{className:"select-field ".concat(N&&"select-field-error"),children:(0,d.jsx)(i.Z,{IconComponent:function(e){return(0,d.jsx)(a.Z,(0,t.Z)({},e))},MenuProps:C,displayEmpty:!0,value:j,placeholder:v,onChange:m||y,inputRef:Z,fullWidth:!0,renderValue:""!==j?void 0:function(){return(0,d.jsx)(I,{children:v})},children:f&&(null===f||void 0===f?void 0:f.map((function(e){var n,r;return(0,d.jsx)(o.Z,{value:e.hasOwnProperty("_id")?null===e||void 0===e?void 0:e._id:e,children:e.hasOwnProperty("_id")?(null===e||void 0===e||null===(n=e.name)||void 0===n?void 0:n.length)<=w?null===e||void 0===e?void 0:e.name:(0,d.jsx)(l.Z,{title:null===e||void 0===e?void 0:e.name,children:(0,d.jsxs)("span",{children:[" ",(null===e||void 0===e||null===(r=e.name)||void 0===r?void 0:r.slice(0,w))+"..."]})}):(null===e||void 0===e?void 0:e.length)<=w?e:(0,d.jsx)(l.Z,{title:e,children:(0,d.jsx)("span",{children:(null===e||void 0===e?void 0:e.slice(0,w))+"..."})})},e.hasOwnProperty("_id")?null===e||void 0===e?void 0:e._id:e)})))})}),(0,d.jsx)(c.Z,{children:N?p&&p[r]&&p[r][N.type]?p[r][N.type]:"Invalid Input":" "})]})}},8086:function(e,n,r){var t=r(8588),a=(r(2791),r(1134)),s=r(4917),i=r(184);n.Z=function(e){var n=e.control,r=e.name,o=e.myHelper,l=e.placeholder,c=e.myOnChange,u=e.rules,d=e.onBlur,m=(e.multiline,e.isDisabled),p=(0,a.bc)({name:r,control:n,rules:u,defaultValue:""}),v=p.field,h=v.onChange,f=v.value,g=v.ref,x=p.fieldState.error;return s.Y.debug("error on text inputs: ",o),(0,i.jsx)(t.Z,{disabled:m,className:"input-field ".concat(x&&"input-error"),placeholder:l,onChange:c||h,onBlur:d,value:f,inputRef:g,inputProps:{maxLength:(null===u||void 0===u?void 0:u.maxLength)&&u.maxLength},helperText:x?o&&o[r]&&o[r][x.type]?o[r][x.type]:"Invalid Input":" ",variant:"outlined"})}},7659:function(e,n,r){r.d(n,{Z:function(){return l}});var t=r(2131),a=r(5130),s=r(2791),i=r(5985),o=(r(5462),r(184));var l=function(e){e.titleMessage;var n=e.descriptionMessage,r=e.messageType,l=e.myRef,c=(e.key,function(){(0,i.Am)(u,{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"toastId"})}),u=function(){return(0,o.jsxs)("div",{className:"toaster-blk flex-start ".concat("success"===r&&"toaster-blk-success"),children:[(0,o.jsx)("div",{className:"toaster-left ".concat("success"===r&&"toaster-left-success"),children:(0,o.jsxs)("div",{className:"toaster-icon",children:["success"===r&&(0,o.jsx)(t.Z,{}),"error"===r&&(0,o.jsx)(a.Z,{})]})}),(0,o.jsx)("div",{className:"toaster-right",children:(0,o.jsx)("p",{children:n})})]})};return(0,s.useEffect)((function(){l.current=c}),[c,l]),(0,o.jsxs)("div",{className:"toaster-sect",children:[(0,o.jsx)("button",{style:{display:"none"},children:"Show Toast !"}),(0,o.jsx)(i.Ix,{className:"toaster-wrap ".concat("success"===r&&"toaster-wrap-success"," ")})]})}},5736:function(e,n,r){r.d(n,{K:function(){return s}});var t=r(4165),a=r(5861),s=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n,r,a,s,i){var o,l,c,u,d,m,p,v,h;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:401==n.response.status?(r({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again!",messageType:"error"},(function(){return a.current()})),setTimeout((function(){s("/login")}),3e3)):403===(null===n||void 0===n||null===(o=n.response)||void 0===o?void 0:o.status)?(r({titleMessage:"Oops!",descriptionMessage:null!==n&&void 0!==n&&null!==(l=n.response)&&void 0!==l&&null!==(c=l.data)&&void 0!==c&&c.message?null===n||void 0===n||null===(u=n.response)||void 0===u||null===(d=u.data)||void 0===d?void 0:d.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return a.current()})),setTimeout((function(){s("/home")}),3e3)):(console.log("Else block"),console.log("route = ",i),console.log("erro in else block",n),r({titleMessage:"Oops!",descriptionMessage:null!==n&&void 0!==n&&null!==(m=n.response)&&void 0!==m&&null!==(p=m.data)&&void 0!==p&&p.message?null===n||void 0===n||null===(v=n.response)||void 0===v||null===(h=v.data)||void 0===h?void 0:h.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return a.current()})),i&&setTimeout((function(){s(i)}),3e3));case 1:case"end":return e.stop()}}),e)})));return function(n,r,t,a,s){return e.apply(this,arguments)}}()},2820:function(e,n,r){var t=r(885),a=r(2791);n.Z=function(e){var n=(0,a.useState)(e),r=(0,t.Z)(n,2),s=r[0],i=r[1],o=(0,a.useRef)([]);(0,a.useEffect)((function(){o.current.forEach((function(e){return e(s)})),o.current=[]}),[s]);return[s,function(e,n){i(e),n&&"function"===typeof n&&o.current.push(n)}]}},1260:function(e,n,r){r.d(n,{j:function(){return a}});var t=r(2791),a=function(e){return(0,t.useEffect)((function(){document.title="HRDD System - ".concat(e)}),[e]),null}}}]);
//# sourceMappingURL=5103.da9522c2.chunk.js.map