"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[8814],{28814:(e,a,n)=>{n.r(a),n.d(a,{default:()=>A});var r=n(72791),s=n(57689),l=n(11087),t=n(45904),d=n(35527),i=n(97275),o=n(61134),c=n(55294),m=n(94677),u=n(76218),h=n(27659),p=n(12820),v=n(12104),g=n(48086),x=n(46363),f=n(1260),b=n(28386),j=n(14917),y=n(45736),N=n(80184);const C={countryCode:{validate:"Select the country code"},phoneNumber:{maxLength:"Max digits limit exceed",minLength:"Enter the valid phone number (Eg: 1234567890)",validate:"Enter the valid phone number (Eg: 1234567890)",pattern:"Invalid format"},name:{required:"Enter the CGF admin name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},email:{required:"Enter the email",pattern:"Invalid format",minLength:"minimum 3 characters required"},subRoleId:{required:"Select the role"}},A=()=>{var e;(0,f.j)("Add Admin");const[a,n]=(0,r.useState)(!1),A=(0,s.s0)(),{handleSubmit:S,watch:E,formState:{errors:w},reset:L,control:R,trigger:Z,setValue:M}=(0,o.cI)({defaultValues:{name:"",email:"",subRoleId:"",phoneNumber:"",countryCode:""}}),[I,T]=((0,s.TH)(),(0,r.useState)([])),[_,F]=(0,r.useState)([]),[H,D]=(0,r.useState)(!1),O=(0,r.useRef)(),[k,q]=(0,p.Z)({titleMessage:"",descriptionMessage:"",messageType:"error"});(0,r.useEffect)((()=>{let e=new AbortController;(async()=>{try{const a=await m.H.get(u.Lp,{signal:e.signal});j.Y.info("Add Sub Admin - fetchRoles handler"),F(a.data),a.data.filter((e=>"CGF Admin"===e.name&&L({subRoleId:e._id})))}catch(r){var a,n;if("ERR_CANCELED"===(null===r||void 0===r?void 0:r.code))return;j.Y.info("Add Sub Admin - fetchRoles handler catch error ".concat(null===r||void 0===r||null===(a=r.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)),(0,y.K)(r,q,O,A)}})(),(async()=>{try{const a=await c.Z.get(u.od,{signal:e.signal});j.Y.info("Add sub admin - addCGFAdminFetchCountries handler ");{let e=null===a||void 0===a?void 0:a.data.map((e=>e.countryCode)),n=new Set(e);T([...n])}}catch(r){var a,n;if("ERR_CANCELED"===(null===r||void 0===r?void 0:r.code))return;j.Y.info("Add sub admin - addCGFAdminFetchCountries handler catch error ".concat(null===r||void 0===r||null===(a=r.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message))}})()}),[]);const P=async e=>{j.Y.info("Add sub admin - addSubAdminData handler"),D(!0),n(!0);try{const a=await c.Z.post(u.mc,e);201==a.status&&(D(!1),q({titleMessage:"Hurray!",descriptionMessage:a.data.message,messageType:"success"},(()=>O.current())),n(!1),L())}catch(s){var a,r;if("ERR_CANCELED"===(null===s||void 0===s?void 0:s.code))return;j.Y.info("Add sub admin - addSubAdminData handler catch error ".concat(null===s||void 0===s||null===(a=s.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)),D(!1),n(!1),(0,y.K)(s,q,O,A)}};return(0,N.jsxs)("div",{className:"page-wrapper",children:[(0,N.jsx)(h.Z,{myRef:O,titleMessage:k.titleMessage,descriptionMessage:k.descriptionMessage,messageType:k.messageType}),(0,N.jsx)("div",{className:"breadcrumb-wrapper",children:(0,N.jsx)("div",{className:"container",children:(0,N.jsxs)("ul",{className:"breadcrumb",children:[(0,N.jsx)("li",{children:(0,N.jsx)(l.rU,{to:"/users/cgf-admin/",children:"Admins"})}),(0,N.jsx)("li",{children:"Add Admin"})]})})}),(0,N.jsx)("section",{children:(0,N.jsx)("div",{className:"container",children:(0,N.jsxs)("form",{onSubmit:S((async e=>{P(e),setTimeout((()=>{A("/users/cgf-admin/",{state:1})}),3e3)})),children:[(0,N.jsxs)("div",{className:"form-header flex-between",children:[(0,N.jsx)("h2",{className:"heading2",children:"Add Admin"}),(0,N.jsx)("div",{className:"form-header-right-txt",children:(0,N.jsxs)("div",{className:"tertiary-btn-blk",onClick:S((e=>{P(e),L(),M("")})),children:[(0,N.jsx)("span",{className:"addmore-icon",children:(0,N.jsx)("i",{className:"fa fa-plus"})}),(0,N.jsx)("span",{className:"addmore-txt",children:"Save & Add More"})]})})]}),H?(0,N.jsx)(b.Z,{}):(0,N.jsx)("div",{className:"card-wrapper",children:(0,N.jsxs)("div",{className:"card-blk flex-between",children:[(0,N.jsx)("div",{className:"card-form-field",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsxs)("label",{htmlFor:"name",children:["Admin Name ",(0,N.jsx)("span",{className:"mandatory",children:"*"})]}),(0,N.jsx)(g.Z,{control:R,onBlur:e=>{var a;return M("name",null===(a=e.target.value)||void 0===a?void 0:a.trim())},name:"name",placeholder:"Enter CGF admin name",myHelper:C,rules:{maxLength:50,minLength:3,required:!0,pattern:/^[a-zA-Z][a-zA-Z ]*$/}})]})}),(0,N.jsx)("div",{className:"card-form-field",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsxs)("label",{htmlFor:"email",children:["Email ",(0,N.jsx)("span",{className:"mandatory",children:"*"})]}),(0,N.jsx)(g.Z,{name:"email",onBlur:e=>{var a;return M("email",null===(a=e.target.value)||void 0===a?void 0:a.trim())},control:R,placeholder:"example@domain.com",myHelper:C,rules:{required:!0,maxLength:50,minLength:3,pattern:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}})]})}),(0,N.jsx)("div",{className:"card-form-field",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsx)("label",{htmlFor:"phoneNumber",children:"Phone Number"}),(0,N.jsxs)("div",{className:"phone-number-field",children:[(0,N.jsx)("div",{className:"select-field country-code",children:(0,N.jsx)(o.Qr,{control:R,name:"countryCode",rules:{validate:()=>{if(!E("countryCode")&&E("phoneNumber"))return"Invalid input"}},render:e=>{let{field:a,fieldState:{error:n}}=e;return(0,N.jsx)(t.Z,{...a,className:"".concat(n&&"autocomplete-error"),PaperComponent:e=>{let{children:a}=e;return(0,N.jsx)(d.Z,{className:(null===I||void 0===I?void 0:I.length)>5?"autocomplete-option-txt autocomplete-option-limit":"autocomplete-option-txt",children:a})},popupIcon:(0,N.jsx)(v.Z,{}),onChange:(e,a)=>{M("countryCode",a&&"object"===typeof a?a.name:a),Z("countryCode"),Z("phoneNumber")},autoHighlight:!0,options:I||[],getOptionLabel:e=>e,renderOption:(e,a)=>(0,N.jsx)("li",{...e,children:a}),renderInput:e=>(0,N.jsx)(i.Z,{...e,inputProps:{...e.inputProps},placeholder:"+00",onChange:()=>Z("countryCode"),helperText:n?C.countryCode[null===n||void 0===n?void 0:n.type]:" "})})}})}),(0,N.jsx)(g.Z,{name:"phoneNumber",control:R,placeholder:"1234567890",myOnChange:e=>((e,a,n)=>{M(a,e.target.value),Z(a),Z(n)})(e,"phoneNumber","countryCode"),onBlur:e=>{var a;return M("phoneNumber",null===(a=e.target.value)||void 0===a?void 0:a.trim())},myHelper:C,rules:{minLength:7,maxLength:15,validate:e=>!E("phoneNumber")&&E("countryCode")?"invalid input":e&&!Number(e)?"Invalid input":void 0}})]})]})}),(0,N.jsx)("div",{className:"card-form-field",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsxs)("label",{htmlFor:"role",children:["Role ",(0,N.jsx)("span",{className:"mandatory",children:"*"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)(x.Z,{name:"subRoleId",control:R,options:_,rules:{required:!0},myHelper:C,placeholder:"Select role"}),(0,N.jsx)("p",{className:"password-error",children:null===(e=w.subRoleId)||void 0===e?void 0:e.message})]})]})}),(0,N.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,N.jsx)("button",{type:"reset",onClick:()=>{A("/users/cgf-admin/",{state:0})},className:"secondary-button mr-10",children:"Cancel"}),(0,N.jsx)("button",{type:"submit",className:"primary-button add-button",disabled:a,children:"Save"})]})]})})]})})})]})}},48086:(e,a,n)=>{n.d(a,{Z:()=>t});var r=n(97275),s=(n(72791),n(61134)),l=n(80184);const t=e=>{let{control:a,name:n,myHelper:t,placeholder:d,myOnChange:i,rules:o,onBlur:c,multiline:m,isDisabled:u}=e;const{field:{onChange:h,value:p,ref:v},fieldState:{error:g}}=(0,s.bc)({name:n,control:a,rules:o,defaultValue:""});return(0,l.jsx)(r.Z,{disabled:u,className:"input-field ".concat(g&&"input-error"),placeholder:d,onChange:i||h,onBlur:c,value:p,inputRef:v,inputProps:{maxLength:(null===o||void 0===o?void 0:o.maxLength)&&o.maxLength},helperText:g?t&&t[n]&&t[n][g.type]?t[n][g.type]:"Invalid Input":" ",variant:"outlined"})}},45736:(e,a,n)=>{n.d(a,{K:()=>r});const r=async function(e,a,n,r,s){var l,t;let d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if("ERR_CANCELED"===(null===e||void 0===e?void 0:e.code))return null;if(401==(null===e||void 0===e||null===(l=e.response)||void 0===l?void 0:l.status))a({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again!",messageType:"error"},(()=>n.current())),setTimeout((()=>{r("/login")}),3e3);else if(403===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)){var i,o,c,m;a({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(i=e.response)&&void 0!==i&&null!==(o=i.data)&&void 0!==o&&o.message?null===e||void 0===e||null===(c=e.response)||void 0===c||null===(m=c.data)||void 0===m?void 0:m.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>n.current())),setTimeout((()=>{r("/home")}),3e3)}else{var u,h,p,v;console.log("error - ",e),a({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(u=e.response)&&void 0!==u&&null!==(h=u.data)&&void 0!==h&&h.message?null===e||void 0===e||null===(p=e.response)||void 0===p||null===(v=p.data)||void 0===v?void 0:v.message:null!==e&&void 0!==e&&e.message?"File not uploaded yet":"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>n.current())),s&&setTimeout((()=>{r(s,{state:d})}),3e3)}}},1260:(e,a,n)=>{n.d(a,{j:()=>s});var r=n(72791);const s=e=>((0,r.useEffect)((()=>{document.title="HRDD System - ".concat(e)}),[e]),null)}}]);
//# sourceMappingURL=8814.9887637b.chunk.js.map