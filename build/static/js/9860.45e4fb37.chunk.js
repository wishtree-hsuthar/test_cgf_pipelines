"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[9860],{49860:(e,s,i)=>{i.r(s),i.d(s,{default:()=>m});var n=i(97275),t=i(72791),l=i(57689),a=i(11087),r=i(94677),o=i(76218),c=i(53073),d=i(27659),u=i(12820),h=i(28386),v=i(14917),x=i(80184);const m=()=>{const e=(0,l.UO)(),s=(0,l.s0)(),[i,m]=(0,t.useState)(!1),[g,p]=t.useState(1),[j,b]=t.useState(10),[f,y]=t.useState("desc"),[k,N]=t.useState(""),[Z,w]=t.useState([]),[C,S]=t.useState(0),[A,P]=(0,t.useState)(!0),[M,_]=(0,t.useState)(""),[T,R]=(0,u.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),E=(0,t.useRef)(),B=async function(){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new AbortController;try{let s="".concat(o.ZW,"/").concat(e.id,"/versions?page=").concat(g,"&size=").concat(j,"&orderBy=").concat(k,"&order=").concat(f);m(!0),v.Y.info("Questionnaire - Version History - getVersionHistory handler");const n=await r.H.get(s,{signal:i.signal});S(parseInt(n.headers["x-total-count"])),(s=>{const i=["vNo","date","createdBy"];let n=s,t=s.filter((s=>s.uuid===e.id));_(t[0].title),n.forEach((e=>{e.date=new Date(e.createdAt).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),e.vNo="v"+e.vNo,delete e.title,delete e.createdAt,i.forEach((s=>{const i=e[s];delete e[s],e[s]=i}))})),w([...n])})([...n.data]),m(!1)}catch(N){var n,t,l,a;if("ERR_CANCELED"===(null===N||void 0===N?void 0:N.code))return;if(v.Y.info("Questionnaire - Version History - getVersionHistory handler - catch error ".concat(null===N||void 0===N||null===(n=N.response)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)),401==(null===N||void 0===N||null===(l=N.response)||void 0===l?void 0:l.status))R({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(()=>E.current())),setTimeout((()=>{s("/login")}),3e3);else if(403===(null===N||void 0===N||null===(a=N.response)||void 0===a?void 0:a.status)){var c,d,u,h;R({titleMessage:"Error",descriptionMessage:null!==N&&void 0!==N&&null!==(c=N.response)&&void 0!==c&&null!==(d=c.data)&&void 0!==d&&d.message?null===N||void 0===N||null===(u=N.response)||void 0===u||null===(h=u.data)||void 0===h?void 0:h.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>E.current())),setTimeout((()=>{s("/home")}),3e3)}else{var x,p,b,y;R({titleMessage:"Error",descriptionMessage:null!==N&&void 0!==N&&null!==(x=N.response)&&void 0!==x&&null!==(p=x.data)&&void 0!==p&&p.message?null===N||void 0===N||null===(b=N.response)||void 0===b||null===(y=b.data)||void 0===y?void 0:y.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>E.current()))}m(!1)}};(0,t.useEffect)((()=>{let e=!0;const s=new AbortController;return A&&B(e,s),()=>{e=!1,s.abort()}}),[g,j,k,f,A,P]);return(0,x.jsxs)("div",{className:"page-wrapper",children:[(0,x.jsx)(d.Z,{myRef:E,titleMessage:T.titleMessage,descriptionMessage:T.descriptionMessage,messageType:T.messageType}),(0,x.jsx)("div",{className:"breadcrumb-wrapper",children:(0,x.jsx)("div",{className:"container",children:(0,x.jsxs)("ul",{className:"breadcrumb",children:[(0,x.jsx)("li",{children:(0,x.jsx)(a.rU,{to:"/questionnaires",state:0,style:{cursor:"pointer"},children:"Questionnaire (Published)"})}),(0,x.jsx)("li",{children:(0,x.jsx)("a",{onClick:()=>s("/questionnaires/preview-questionnaire/".concat(e.id)),style:{cursor:"pointer"},children:"Preview Questionnaire"})}),(0,x.jsx)("li",{children:"Questionnaire History"})]})})}),(0,x.jsx)("div",{className:"container",children:(0,x.jsx)("div",{className:"form-header flex-between",children:(0,x.jsx)("h2",{className:"heading2",children:"Questionnaire History"})})}),(0,x.jsx)("section",{children:(0,x.jsxs)("div",{className:"container",children:[(0,x.jsx)("div",{className:"que-ttl-blk",children:(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsxs)("label",{htmlFor:"emailid",children:["Questionnaire Title ",(0,x.jsx)("span",{className:"mandatory",children:"*"})]}),(0,x.jsx)(n.Z,{className:'input-field \n                                 \n                                    // questionnaire.title === "" &&\n                                    // globalSectionTitleError?.errMsg &&\n                                     // "input-error"\n                                // }',id:"outlined-basic",value:M,placeholder:"Enter questionnaire title",disabled:!0,variant:"outlined"})]})}),(0,x.jsx)("div",{className:"member-info-wrapper table-content-wrap table-footer-btm-space",children:i?(0,x.jsx)(h.Z,{}):(0,x.jsx)(c.Z,{tableHead:[{id:"vNo",disablePadding:!1,label:"Versions"},{id:"date",disablePadding:!1,label:"Version Date"},{id:"createdBy",disablePadding:!1,label:"Created By"}],records:Z,handleChangePage1:e=>{p(e)},handleChangeRowsPerPage1:e=>{b(parseInt(e.target.value,10)),p(1)},page:g,rowsPerPage:j,totalRecords:C,orderBy:k,onClickVisibilityIconHandler1:e=>s("/questionnaires/preview-questionnaire-version/".concat(e)),order:f,setOrder:y,setOrderBy:N,setCheckBoxes:!1,onRowClick:!0,isQuestionnare:!0})})]})})]})}},53073:(e,s,i)=>{i.d(s,{Z:()=>C});var n=i(7195),t=i(59140),l=i(77194),a=i(697),r=i(94454),o=i(35527),c=i(79836),d=i(53382),u=i(53994),h=i(39281),v=i(56890),x=i(35855),m=i(80720),g=(i(72791),i(50922)),p=i(61419),j=i(96816),b=(i(14917),i(20068)),f=i(58406),y=i(63903),k=i(53767),N=i(57246),Z=(i(71605),i(80184));function w(e){const{onSelectAllClick:s,order:i,orderBy:n,tableHead:t,numSelected:l,rowCount:a,onRequestSort:o,setCheckBoxes:c}=e;return(0,Z.jsx)(v.Z,{children:(0,Z.jsxs)(x.Z,{children:[c&&(0,Z.jsx)(u.Z,{padding:"checkbox",className:"table-checkbox",children:(0,Z.jsx)(r.Z,{color:"primary",indeterminate:l>0&&l<a,checked:a>0&&l===a,onChange:s,inputProps:{"aria-label":"select all desserts"},className:"checkbox-mui"})}),t.map((e=>{return(0,Z.jsxs)(u.Z,{width:null===e||void 0===e?void 0:e.width,align:"left",padding:e.disablePadding?"none":"normal",className:"table-header",children:["action"!==e.id&&(0,Z.jsx)(m.Z,{active:n===e.id,direction:n===e.id?i:"asc",onClick:(s=e.id,e=>{o(e,s)}),className:"sorted-blk",children:e.label}),"action"===e.id&&(0,Z.jsx)("span",{className:"sorted-blk",children:e.label})]},e.id);var s}))]})})}function C(e){let{tableHead:s,records:i,page:v=1,rowsPerPage:m=10,handleChangeRowsPerPage1:C,handleChangePage1:S,totalRecords:A,orderBy:P,setOrderBy:M,icons:_,onClickVisibilityIconHandler1:T,onClickDeleteIconHandler1:R,selected:E=[],setSelected:B,order:D="asc",setOrder:H,setCheckBoxes:O=!0,setSingleSelect:I=!1,handleSingleUserSelect:q,selectedUser:F,onRowClick:U=!1,isQuestionnare:Q=!1,onClickEditAssesmentFunction:V,onClickAssignAssesmentFunction:z,onClickFillAssessmentFunction:L,viewAssessment:W=!1,onClickActionPlanDownload:Y}=e;console.log("icons - ",_);const G=(e,s)=>{T(e,s||!1)};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(a.Z,{sx:{width:"100%"},className:O?"table-blk":"table-blk table-blk-without-checkbox",children:(0,Z.jsx)(o.Z,{sx:{width:"100%",mb:2},children:(0,Z.jsx)(h.Z,{children:(0,Z.jsxs)(c.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,Z.jsx)(w,{numSelected:E.length,order:D,orderBy:P,tableHead:s,onSelectAllClick:e=>{if(e.target.checked){const e=i.map((e=>e._id));B(e)}else B([])},onRequestSort:(e,s)=>{H(P===s&&"asc"===D?"desc":"asc"),M(s)},rowCount:i.length,setCheckBoxes:O}),(null===i||void 0===i?void 0:i.length)>0?(0,Z.jsx)(d.Z,{children:i.map(((e,s)=>{const i=(a=e._id,-1!==E.indexOf(a));var a;const o="enhanced-table-checkbox-".concat(s);return(0,Z.jsxs)(x.Z,{hover:!0,onClick:()=>U&&G(Q?e.uuid:e._id,(null===e||void 0===e?void 0:e.isOperationMember)||(null===e||void 0===e?void 0:e.isMemberRepresentative)),style:{cursor:U&&"pointer"},role:"checkbox","aria-checked":i,tabIndex:-1,selected:i,children:[O&&(0,Z.jsx)(u.Z,{padding:"checkbox",children:(0,Z.jsx)(r.Z,{className:"table-checkbox",color:"primary",onClick:s=>((e,s)=>{const i=E.indexOf(s);let n=[];-1===i?n=n.concat(E,s):0===i?n=n.concat(E.slice(1)):i===E.length-1?n=n.concat(E.slice(0,-1)):i>0&&(n=n.concat(E.slice(0,i),E.slice(i+1))),B(n)})(0,e._id),checked:i,inputProps:{"aria-labelledby":o}})}),I&&(0,Z.jsx)(u.Z,{children:(0,Z.jsx)("div",{className:"radio-btn-field",children:(0,Z.jsx)(p.Z,{className:"radio-btn",color:"primary",value:e._id,onChange:()=>(e=>{q(e)})(e._id),checked:F==e._id,inputProps:{"aria-labelledby":o}})})}),Object.keys(e).map(((s,i)=>{var n,t,l,a,r,o;return"_id"!==s&&"uuid"!==s&&"isActive"!==s&&"isUserAuthorizedToFillAssessment"!==s&&"isOperationMember"!==s&&"isMemberRepresentative"!==s&&"dueDate"!==s?(null===(n=e[s])||void 0===n?void 0:n.length)<=28||"undefined"===typeof e[s]?(0,Z.jsxs)(u.Z,{children:[" ",("undefined"===typeof e[s]||""===e[s])&&"N/A","string"===typeof e[s]&&(null===(t=e[s])||void 0===t?void 0:t.length)>0&&"email"!==s?e[s][0].toUpperCase()+(null===(l=e[s])||void 0===l?void 0:l.slice(1)):e[s]]},s):(0,Z.jsx)(b.Z,{placement:"bottom-start",enterDelay:1e3,title:e[s],children:(0,Z.jsx)(u.Z,{children:"string"===typeof e[s]&&"email"!==s?e[s][0].toUpperCase()+"".concat(null===(a=e[s])||void 0===a?void 0:a.slice(1,28),"..."):"".concat(null===(r=e[s])||void 0===r?void 0:r.slice(0,28),"...")},s)},s):"isActive"===s?(0,Z.jsx)(u.Z,{className:"button-style ".concat(e[s]&&"button-style-success"),children:(0,Z.jsx)("span",{children:e[s]?"Active":"Inactive"})},s):"dueDate"===s?(0,Z.jsx)(u.Z,{className:"due-date-style ".concat(new Date(new Date(e[s]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()&&"due-date-style-success"),children:(0,Z.jsx)("span",{children:null!==(o=e[s])&&void 0!==o?o:e[s]})},s):void 0})),(null===_||void 0===_?void 0:_.length)>0&&(0,Z.jsxs)(u.Z,{children:[_.includes("visibility")&&(0,Z.jsx)("span",{className:"icon",children:(0,Z.jsx)(b.Z,{title:"View Assessment",children:(0,Z.jsx)(l.Z,{onClick:()=>G(W?e.uuid:e._id)})})}),_.includes("delete")&&(0,Z.jsx)("span",{className:"icon",children:(0,Z.jsx)(b.Z,{title:"Delete",children:(0,Z.jsx)("img",{src:"/images/delete-icon.svg",onClick:()=>(e=>{R(e)})(e._id)})})}),_.includes("edit")&&(0,Z.jsx)("span",{className:"icon",children:(0,Z.jsx)(b.Z,{title:"Edit",children:(0,Z.jsx)(n.Z,{onClick:()=>{return s=e.uuid,void V(s);var s}})})}),_.includes("send")&&("In Progress"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Re-opened"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Accepted"==(null===e||void 0===e?void 0:e.assessmentStatus))&&e.isUserAuthorizedToFillAssessment&&(0,Z.jsx)("span",{className:"icon",children:(0,Z.jsx)(b.Z,{title:"Assign to Operation Member",children:(0,Z.jsx)(g.Z,{onClick:()=>z(e.uuid)})})}),_.includes("fill")&&e.isUserAuthorizedToFillAssessment&&(0,Z.jsx)("span",{className:"icon",children:(0,Z.jsx)(b.Z,{title:"Fill Assessment",children:(0,Z.jsx)(t.Z,{onClick:()=>{return s=e.uuid,void L(s);var s}})})}),_.includes("download")&&(0,Z.jsx)("span",{className:"icon",children:(0,Z.jsx)(b.Z,{title:"Action plan",children:(0,Z.jsx)(j.Z,{onClick:()=>{return s=e.uuid,void Y(s);var s}})})})]})]},null===e||void 0===e?void 0:e._id)}))}):(0,Z.jsx)(d.Z,{children:(0,Z.jsx)("tr",{children:(0,Z.jsx)("td",{colSpan:"10",children:(0,Z.jsx)("div",{className:"no-records-blk",children:(0,Z.jsx)("h2",{className:"heading2",children:"No records available"})})})})})]})})})}),(null===i||void 0===i?void 0:i.length)>0&&(0,Z.jsxs)("div",{className:"table-footer flex-between",children:[(0,Z.jsxs)("div",{className:"table-footer-left",children:[(0,Z.jsxs)("div",{className:"per-page-blk",children:[(0,Z.jsx)("span",{className:"per-page-txt",children:"Records"}),(0,Z.jsx)("div",{className:"per-page-dropdown",children:(0,Z.jsx)("div",{className:"per-page-select-field",children:(0,Z.jsxs)(f.Z,{value:m,onChange:e=>{C(e)},children:[(0,Z.jsx)(y.Z,{value:"5",children:"05"}),(0,Z.jsx)(y.Z,{value:"10",selected:!0,children:"10"}),(0,Z.jsx)(y.Z,{value:"20",children:"20"})]})})})]}),(0,Z.jsxs)("div",{className:"show-entries-txt",children:["showing ",(v-1)*m+1,"-",(v-1)*m+(null===i||void 0===i?void 0:i.length)," out of ",A]})]}),(0,Z.jsx)("div",{className:"table-footer-right",children:(0,Z.jsx)(k.Z,{spacing:2,className:"pagination-blk",children:(0,Z.jsx)(N.Z,{page:v,count:Math.ceil(A/m),onChange:(e,s)=>{S(s)},variant:"outlined",shape:"rounded"})})})]})]})}},27659:(e,s,i)=>{i.d(s,{Z:()=>o});var n=i(92131),t=i(5130),l=i(72791),a=i(29655),r=(i(5462),i(80184));const o=function(e){let{titleMessage:s,descriptionMessage:i,messageType:o,myRef:c,key:d}=e;const u=()=>{(0,a.Am)(h,{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"toastId"})},h=()=>(0,r.jsxs)("div",{className:"toaster-blk flex-start ".concat("success"===o&&"toaster-blk-success"),children:[(0,r.jsx)("div",{className:"toaster-left ".concat("success"===o&&"toaster-left-success"),children:(0,r.jsxs)("div",{className:"toaster-icon",children:["success"===o&&(0,r.jsx)(n.Z,{}),"error"===o&&(0,r.jsx)(t.Z,{})]})}),(0,r.jsx)("div",{className:"toaster-right",children:(0,r.jsx)("p",{children:i})})]});return(0,l.useEffect)((()=>{c.current=u}),[u,c]),(0,r.jsxs)("div",{className:"toaster-sect",children:[(0,r.jsx)("button",{style:{display:"none"},children:"Show Toast !"}),(0,r.jsx)(a.Ix,{className:"toaster-wrap ".concat("success"===o&&"toaster-wrap-success"," ")})]})}},12820:(e,s,i)=>{i.d(s,{Z:()=>t});var n=i(72791);const t=e=>{const[s,i]=(0,n.useState)(e),t=(0,n.useRef)([]);(0,n.useEffect)((()=>{t.current.forEach((e=>e(s))),t.current=[]}),[s]);return[s,(e,s)=>{i(e),s&&"function"===typeof s&&t.current.push(s)}]}},71605:()=>{}}]);
//# sourceMappingURL=9860.45e4fb37.chunk.js.map