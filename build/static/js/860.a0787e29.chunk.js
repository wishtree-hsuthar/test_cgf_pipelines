"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[860],{9860:function(e,n,i){i.r(n);var t=i(4165),s=i(5861),r=i(2982),a=i(885),l=i(8588),o=i(2791),d=i(7689),c=i(1087),u=i(4677),h=i(6218),v=i(9106),g=i(7444),m=i(2820),p=i(8386),x=i(4917),b=i(184);n.default=function(){var e=(0,d.UO)(),n=(0,d.s0)(),i=(0,o.useState)(!1),f=(0,a.Z)(i,2),j=f[0],Z=f[1],k=o.useState(1),w=(0,a.Z)(k,2),y=w[0],N=w[1],C=o.useState(10),S=(0,a.Z)(C,2),A=S[0],D=S[1],P=o.useState("desc"),_=(0,a.Z)(P,2),M=_[0],T=_[1],R=o.useState(""),E=(0,a.Z)(R,2),B=E[0],O=E[1],Y=o.useState([]),q=(0,a.Z)(Y,2),F=q[0],H=q[1],U=o.useState(0),I=(0,a.Z)(U,2),L=I[0],Q=I[1],V=(0,o.useState)(!0),z=(0,a.Z)(V,2),W=z[0],G=z[1],J=(0,o.useState)(""),K=(0,a.Z)(J,2),X=K[0],$=K[1],ee=(0,m.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),ne=(0,a.Z)(ee,2),ie=ne[0],te=ne[1],se=(0,o.useRef)(),re=function(){return"".concat(h.ZW,"/").concat(e.id,"/versions?page=").concat(y,"&size=").concat(A,"&orderBy=").concat(B,"&order=").concat(M)},ae=function(n){var i=["vNo","date","createdBy"];x.Y.debug("data before update----",n);var t=n,s=n.filter((function(n){return n.uuid===e.id}));$(s[0].title),t.forEach((function(e){e.date=new Date(e.createdAt).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),e.vNo="v"+e.vNo,delete e.title,delete e.createdAt,i.forEach((function(n){var i=e[n];delete e[n],e[n]=i}))})),x.Y.debug("data in updaterecords method",t),H((0,r.Z)(t))},le=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var i,s,a,l,o,d,c,h,v,g,m,p,b,f=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(f.length>0&&void 0!==f[0])||f[0],i=f.length>1&&void 0!==f[1]?f[1]:new AbortController,e.prev=2,s=re(),Z(!0),e.next=7,u.H.get(s,{signal:i.signal});case 7:a=e.sent,Q(parseInt(a.headers["x-total-count"])),x.Y.debug("Response from version history api get",a),ae((0,r.Z)(a.data)),Z(!1),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:x.Y.debug("Error from version history-------",e.t0),401==(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status)?(te({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return se.current()})),setTimeout((function(){n("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.status)?(te({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(d=e.t0.response)&&void 0!==d&&null!==(c=d.data)&&void 0!==c&&c.message?null===e.t0||void 0===e.t0||null===(h=e.t0.response)||void 0===h||null===(v=h.data)||void 0===v?void 0:v.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return se.current()})),setTimeout((function(){n("/home")}),3e3)):te({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(g=e.t0.response)&&void 0!==g&&null!==(m=g.data)&&void 0!==m&&m.message?null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p||null===(b=p.data)||void 0===b?void 0:b.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return se.current()})),Z(!1);case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();x.Y.debug("title from questionnaire = ",X);(0,o.useEffect)((function(){var e=!0,n=new AbortController;return W&&le(e,n),x.Y.debug("makeApiCall",W),x.Y.debug("inside use Effect"),function(){e=!1,n.abort()}}),[y,A,B,M,W,G]);return(0,b.jsxs)("div",{className:"page-wrapper",children:[(0,b.jsx)(g.Z,{myRef:se,titleMessage:ie.titleMessage,descriptionMessage:ie.descriptionMessage,messageType:ie.messageType}),(0,b.jsx)("div",{className:"breadcrumb-wrapper",children:(0,b.jsx)("div",{className:"container",children:(0,b.jsxs)("ul",{className:"breadcrumb",children:[(0,b.jsx)("li",{children:(0,b.jsx)(c.rU,{to:"/questionnaires",style:{cursor:"pointer"},children:"Questionnaire"})}),(0,b.jsx)("li",{children:(0,b.jsx)("a",{onClick:function(){return n("/questionnaires/preview-questionnaire/".concat(e.id))},style:{cursor:"pointer"},children:"Preview Questionnaire"})}),(0,b.jsx)("li",{children:"Questionnaire History"})]})})}),(0,b.jsx)("div",{className:"container",children:(0,b.jsx)("div",{className:"form-header flex-between",children:(0,b.jsx)("h2",{className:"heading2",children:"Questionnaire History"})})}),(0,b.jsx)("section",{children:(0,b.jsxs)("div",{className:"container",children:[(0,b.jsx)("div",{className:"que-ttl-blk",children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsxs)("label",{htmlFor:"emailid",children:["Questionnaire Title ",(0,b.jsx)("span",{className:"mandatory",children:"*"})]}),(0,b.jsx)(l.Z,{className:'input-field \n                                 \n                                    // questionnaire.title === "" &&\n                                    // globalSectionTitleError?.errMsg &&\n                                     // "input-error"\n                                // }',id:"outlined-basic",value:X,placeholder:"Enter questionnaire title",disabled:!0,variant:"outlined"})]})}),(0,b.jsx)("div",{className:"member-info-wrapper table-content-wrap table-footer-btm-space",children:j?(0,b.jsx)(p.Z,{}):(0,b.jsx)(v.Z,{tableHead:[{id:"vNo",disablePadding:!1,label:"Versions"},{id:"date",disablePadding:!1,label:"Version Date"},{id:"createdBy",disablePadding:!1,label:"Created By"}],records:F,handleChangePage1:function(e){N(e)},handleChangeRowsPerPage1:function(e){D(parseInt(e.target.value,10)),N(1)},page:y,rowsPerPage:A,totalRecords:L,orderBy:B,onClickVisibilityIconHandler1:function(e){return x.Y.debug("id",e),n("/questionnaires/preview-questionnaire-version/".concat(e))},order:M,setOrder:T,setOrderBy:O,setCheckBoxes:!1,onRowClick:!0,isQuestionnare:!0})})]})})]})}},9106:function(e,n,i){i.d(n,{Z:function(){return C}});var t=i(7195),s=i(3372),r=i(7194),a=i(6015),l=i(5473),o=i(6650),d=i(1680),c=i(9773),u=i(4390),h=i(9963),v=i(9827),g=i(807),m=i(3769),p=(i(2791),i(922)),x=i(6321),b=i(4917),f=i(5814),j=i(1346),Z=i(9407),k=i(4162),w=i(4585),y=(i(1605),i(184));function N(e){var n=e.onSelectAllClick,i=e.order,t=e.orderBy,s=e.tableHead,r=e.numSelected,a=e.rowCount,o=e.onRequestSort,d=e.setCheckBoxes;return(0,y.jsx)(v.Z,{children:(0,y.jsxs)(g.Z,{children:[d&&(0,y.jsx)(u.Z,{padding:"checkbox",className:"table-checkbox",children:(0,y.jsx)(l.Z,{color:"primary",indeterminate:r>0&&r<a,checked:a>0&&r===a,onChange:n,inputProps:{"aria-label":"select all desserts"},className:"checkbox-mui"})}),s.map((function(e){return(0,y.jsxs)(u.Z,{width:null===e||void 0===e?void 0:e.width,align:"left",padding:e.disablePadding?"none":"normal",className:"table-header",children:["action"!==e.id&&(0,y.jsx)(m.Z,{active:t===e.id,direction:t===e.id?i:"asc",onClick:(n=e.id,function(e){o(e,n)}),className:"sorted-blk",children:e.label}),"action"===e.id&&(0,y.jsx)("span",{className:"sorted-blk",children:e.label})]},e.id);var n}))]})})}function C(e){var n=e.tableHead,i=e.records,v=e.page,m=void 0===v?1:v,C=e.rowsPerPage,S=void 0===C?10:C,A=e.handleChangeRowsPerPage1,D=e.handleChangePage1,P=e.totalRecords,_=e.orderBy,M=e.setOrderBy,T=e.icons,R=e.onClickVisibilityIconHandler1,E=e.onClickDeleteIconHandler1,B=e.selected,O=void 0===B?[]:B,Y=e.setSelected,q=e.order,F=void 0===q?"asc":q,H=e.setOrder,U=e.setCheckBoxes,I=void 0===U||U,L=e.setSingleSelect,Q=void 0!==L&&L,V=e.handleSingleUserSelect,z=e.selectedUser,W=e.onRowClick,G=void 0!==W&&W,J=e.isQuestionnare,K=void 0!==J&&J,X=e.onClickEditAssesmentFunction,$=e.onClickAssignAssesmentFunction,ee=e.onClickFillAssessmentFunction,ne=e.viewAssessment,ie=void 0!==ne&&ne,te=function(e,n){b.Y.debug("Inside on click handler",n),R(e,n||!1)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(a.Z,{sx:{width:"100%"},className:I?"table-blk":"table-blk table-blk-without-checkbox",children:(0,y.jsx)(o.Z,{sx:{width:"100%",mb:2},children:(0,y.jsx)(h.Z,{children:(0,y.jsxs)(d.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,y.jsx)(N,{numSelected:O.length,order:F,orderBy:_,tableHead:n,onSelectAllClick:function(e){if(e.target.checked){var n=i.map((function(e){return e._id}));Y(n)}else Y([])},onRequestSort:function(e,n){H(_===n&&"asc"===F?"desc":"asc"),M(n)},rowCount:i.length,setCheckBoxes:I}),(null===i||void 0===i?void 0:i.length)>0?(0,y.jsx)(c.Z,{children:i.map((function(e,n){b.Y.debug("row",e);var i,a=(i=e._id,-1!==O.indexOf(i)),o="enhanced-table-checkbox-".concat(n);return(0,y.jsxs)(g.Z,{hover:!0,onClick:function(){return G&&te(K?e.uuid:e._id,(null===e||void 0===e?void 0:e.isOperationMember)||(null===e||void 0===e?void 0:e.isMemberRepresentative))},style:{cursor:G&&"pointer"},role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[I&&(0,y.jsx)(u.Z,{padding:"checkbox",children:(0,y.jsx)(l.Z,{className:"table-checkbox",color:"primary",onClick:function(n){return function(e,n){var i=O.indexOf(n),t=[];-1===i?t=t.concat(O,n):0===i?t=t.concat(O.slice(1)):i===O.length-1?t=t.concat(O.slice(0,-1)):i>0&&(t=t.concat(O.slice(0,i),O.slice(i+1))),Y(t)}(0,e._id)},checked:a,inputProps:{"aria-labelledby":o}})}),Q&&(0,y.jsx)(u.Z,{children:(0,y.jsx)("div",{className:"radio-btn-field",children:(0,y.jsx)(x.Z,{className:"radio-btn",color:"primary",value:e._id,onChange:function(){return function(e){V(e)}(e._id)},checked:z==e._id,inputProps:{"aria-labelledby":o}})})}),Object.keys(e).map((function(n,i){var t,s,r,a,l;return"_id"!==n&&"uuid"!==n&&"isActive"!==n&&"isUserAuthorizedToFillAssessment"!==n&&"isOperationMember"!==n&&"isMemberRepresentative"!==n&&"dueDate"!==n?(null===(t=e[n])||void 0===t?void 0:t.length)<=28||"undefined"===typeof e[n]?(0,y.jsxs)(u.Z,{children:[" ","undefined"===typeof e[n]&&"N/A","string"===typeof e[n]&&"email"!==n?e[n][0].toUpperCase()+(null===(s=e[n])||void 0===s?void 0:s.slice(1)):e[n]]},n):(0,y.jsx)(f.Z,{placement:"bottom-start",enterDelay:1e3,title:e[n],children:(0,y.jsx)(u.Z,{children:"string"===typeof e[n]&&"email"!==n?e[n][0].toUpperCase()+"".concat(null===(r=e[n])||void 0===r?void 0:r.slice(1,28),"..."):"".concat(null===(a=e[n])||void 0===a?void 0:a.slice(0,28),"...")},n)},n):"isActive"===n?(0,y.jsx)(u.Z,{className:"button-style ".concat(e[n]&&"button-style-success"),children:(0,y.jsx)("span",{children:e[n]?"Active":"Inactive"})},n):"dueDate"===n?(b.Y.debug("due date  = ",new Date(e[n]).toLocaleDateString("en")),b.Y.debug("current date  = ",(new Date).toLocaleDateString("en")),b.Y.debug("Comparison = ",new Date(new Date(e[n]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()),(0,y.jsx)(u.Z,{className:"due-date-style ".concat(new Date(new Date(e[n]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()&&"due-date-style-success"),children:(0,y.jsx)("span",{children:null!==(l=e[n])&&void 0!==l?l:e[n]})},n)):void 0})),(null===T||void 0===T?void 0:T.length)>0&&(0,y.jsxs)(u.Z,{children:[T.includes("visibility")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(f.Z,{title:"View Assessment",children:(0,y.jsx)(r.Z,{onClick:function(){return te(ie?e.uuid:e._id)}})})}),T.includes("delete")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(f.Z,{title:"Delete",children:(0,y.jsx)("img",{src:"/images/delete-icon.svg",onClick:function(){return function(e){E(e)}(e._id)}})})}),T.includes("edit")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(f.Z,{title:"Edit",children:(0,y.jsx)(t.Z,{onClick:function(){return n=e.uuid,void X(n);var n}})})}),T.includes("send")&&("In Progress"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Re-opened"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Accepted"==(null===e||void 0===e?void 0:e.assessmentStatus))&&e.isUserAuthorizedToFillAssessment&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(f.Z,{title:"Assign to Operation Member",children:(0,y.jsx)(p.Z,{onClick:function(){return $(e.uuid)}})})}),T.includes("fill")&&e.isUserAuthorizedToFillAssessment&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(f.Z,{title:"Fill Assessment",children:(0,y.jsx)(s.Z,{onClick:function(){return n=e.uuid,void ee(n);var n}})})})]})]},null===e||void 0===e?void 0:e._id)}))}):(0,y.jsx)(c.Z,{children:(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:"10",children:(0,y.jsx)("div",{className:"no-records-blk",children:(0,y.jsx)("h2",{className:"heading2",children:"No records available"})})})})})]})})})}),(null===i||void 0===i?void 0:i.length)>0&&(0,y.jsxs)("div",{className:"table-footer flex-between",children:[(0,y.jsxs)("div",{className:"table-footer-left",children:[(0,y.jsxs)("div",{className:"per-page-blk",children:[(0,y.jsx)("span",{className:"per-page-txt",children:"Records"}),(0,y.jsx)("div",{className:"per-page-dropdown",children:(0,y.jsx)("div",{className:"per-page-select-field",children:(0,y.jsxs)(j.Z,{value:S,onChange:function(e){A(e)},children:[(0,y.jsx)(Z.Z,{value:"5",children:"05"}),(0,y.jsx)(Z.Z,{value:"10",selected:!0,children:"10"}),(0,y.jsx)(Z.Z,{value:"20",children:"20"})]})})})]}),(0,y.jsxs)("div",{className:"show-entries-txt",children:["showing ",(m-1)*S+1,"-",(m-1)*S+(null===i||void 0===i?void 0:i.length)," out of ",P]})]}),(0,y.jsx)("div",{className:"table-footer-right",children:(0,y.jsx)(k.Z,{spacing:2,className:"pagination-blk",children:(0,y.jsx)(w.Z,{page:m,count:Math.ceil(P/S),onChange:function(e,n){D(n)},variant:"outlined",shape:"rounded"})})})]})]})}},1605:function(){}}]);
//# sourceMappingURL=860.a0787e29.chunk.js.map