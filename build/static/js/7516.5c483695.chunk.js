"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[7516],{48617:(e,i,n)=>{n.r(i),n.d(i,{default:()=>F});var l=n(72791),s=n(697),t=n(25228),a=n(20068),r=n(43896),o=n(97275),d=n(58406),c=n(63903),u=n(88970),v=n(85523),p=n(61419),m=n(94454),h=n(51514),b=n(14917),g=n(7792),x=n(36571),f=n(12104),j=n(27954),w=n(80184);const y={PaperProps:{style:{maxHeight:168}},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},Z=e=>{let{question:i}=e,n=i.questionTitle,l="singleTextbox"===i.inputType?(0,w.jsx)(o.Z,{placeholder:"Enter text here",className:"input-field",InputProps:{readOnly:!0}}):"textarea"===i.inputType?(0,w.jsx)(o.Z,{multiline:!0,InputProps:{readOnly:!0},className:"input-textarea",placeholder:"Enter text here",variant:"outlined"}):"dropdown"===i.inputType?(0,w.jsx)("div",{className:"form-group",children:(0,w.jsx)("div",{className:"select-field",children:(0,w.jsx)(d.Z,{IconComponent:e=>(0,w.jsx)(f.Z,{...e}),value:i.questionTitle,MenuProps:y,renderValue:()=>(0,w.jsx)("div",{className:"select-placeholder",children:"Choose dropdown value"}),children:i.options.map((e=>(0,w.jsx)(c.Z,{value:e,disabled:!0,children:e},e)))})})}):"radioGroup"===i.inputType?(0,w.jsx)("div",{className:"radio-btn-field radio-btn-half-blk",children:(0,w.jsx)(u.Z,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"Active",name:"radio-buttons-group",className:"radio-btn radio-btn-vertical",children:i.options.map((e=>(0,w.jsx)(v.Z,{value:e,control:(0,w.jsx)(p.Z,{disabled:!0}),label:e},e)))})}):"checkbox"===i.inputType?(0,w.jsx)("div",{className:"checkbox-with-labelblk checkbox-btn-half-blk",children:i.options.map((e=>(0,w.jsx)(v.Z,{className:"checkbox-with-label checkbox-flex",control:(0,w.jsx)(m.Z,{disabled:!0}),label:e},e)))}):"date"===i.inputType?(0,w.jsx)(x._,{dateAdapter:g.y,children:(0,w.jsx)(h.M,{disabled:!0,value:null,className:"datepicker-blk",components:{OpenPickerIcon:j.Z},onChange:()=>{},renderInput:e=>(0,w.jsx)(o.Z,{...e,helperText:" "})})}):"";return(0,w.jsx)("div",{className:"preview-que-blk",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"questionTitle",children:(0,w.jsxs)("div",{className:"preview-sect-txt",children:[n,(null===i||void 0===i?void 0:i.isRequired)&&(0,w.jsx)("span",{className:"mandatory",children:" *"})]})}),(0,w.jsx)("div",{className:"que-half-sect",children:l})]})})};var P=n(43989);const N=function(e){let{questionnaire:i,section:n,sectionIndex:s}=e;return(0,l.useEffect)((()=>{}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"preview-sect-ttl-wrap",children:[(0,w.jsx)("div",{className:"preview-sect-card-ttl-blk",children:(0,w.jsx)("h2",{className:"subheading",children:null===n||void 0===n?void 0:n.sectionTitle})}),(0,w.jsx)("div",{className:"preview-sect-txt",children:null===n||void 0===n?void 0:n.description})]}),(0,w.jsx)("div",{className:"preview-card-wrapper",children:(0,w.jsx)("div",{className:"preview-que-wrap que-preview",children:"form"===(null===n||void 0===n?void 0:n.layout)?n.questions.map((e=>(0,w.jsx)(Z,{question:e},null===e||void 0===e?void 0:e.uuid))):(0,w.jsx)(P.Z,{questionnaire:i,sectionIndex:s,isPreview:!0})})})]})};var k=n(57689),q=n(11087),M=n(94677),T=n(76218),C=n(1260),D=n(59434),S=n(52898),Q=n(12820),E=n(27659),R=n(98460),I=n(71300),A=n(74569),L=n.n(A),O=n(47806),_=n(28386);function H(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}const F=function(e){var i,n,o,d,c,u,v;const[p,m]=(0,l.useState)(0);(0,C.j)("Preview Questionnaire");const[h,g]=(0,l.useState)(!1),[x,f]=(0,l.useState)(!1),[j,y]=(0,Q.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),Z=(0,l.useRef)(),P=(0,k.UO)(),A=(0,k.s0)(),[F,Y]=(0,l.useState)({}),B=(0,D.v9)((e=>{var i;return null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.privilege})),V=(0,D.v9)((e=>{var i;return null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.userObj})),z="Super Admin"===(null===B||void 0===B?void 0:B.name);let U=("Super Admin"===(null===V||void 0===V||null===(i=V.roleId)||void 0===i?void 0:i.name)?[]:Object.values(null===B||void 0===B?void 0:B.privileges)).filter((e=>{var i;return"Questionnaire"===(null===e||void 0===e||null===(i=e.moduleId)||void 0===i?void 0:i.name)})).map((e=>({questionnaire:{list:null===e||void 0===e?void 0:e.list,view:null===e||void 0===e?void 0:e.view,edit:null===e||void 0===e?void 0:e.edit,delete:null===e||void 0===e?void 0:e.delete,add:null===e||void 0===e?void 0:e.add}})));(0,l.useEffect)((()=>{let e=!0,i=new AbortController;return(async()=>{try{b.Y.info("Questionnaire - Preview Questionnaire - fetch handler"),g(!0);const n=await M.H.get("".concat(T.ZW,"/").concat(P.id),{signal:i.signal});e&&Y({...n.data}),g(!1)}catch(s){var n,l;if("ERR_CANCELED"===(null===s||void 0===s?void 0:s.code))return;b.Y.info("Questionnaire - Preview Questionnaire - fetch handler - catch error - ".concat(null===s||void 0===s||null===(n=s.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)),g(!1),K(s)}})(),()=>{e=!1,i.abort()}}),[]);const[W,G]=(0,l.useState)(!1),K=e=>{var i,n,l;if("ERR_CANCELED"!==(null===e||void 0===e?void 0:e.code))if(401==(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status))y({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(()=>Z.current())),setTimeout((()=>{A("/login")}),3e3);else if(403===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)){var s,t,a,r;y({titleMessage:"Error",descriptionMessage:null!==e&&void 0!==e&&null!==(s=e.response)&&void 0!==s&&null!==(t=s.data)&&void 0!==t&&t.message?null===e||void 0===e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>Z.current())),setTimeout((()=>{A("/home")}),3e3)}else if(400===(null===e||void 0===e||null===(l=e.response)||void 0===l?void 0:l.status)&&"Invalid questionnaire!"===e.response.data.message){var o,d,c,u;y({titleMessage:"Error",descriptionMessage:null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(d=o.data)&&void 0!==d&&d.message?null===e||void 0===e||null===(c=e.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>Z.current())),setTimeout((()=>{A("/questionnaires")}),3e3)}else{var v,p;y({titleMessage:"Error",descriptionMessage:null!==e&&void 0!==e&&null!==(v=e.response)&&void 0!==v&&null!==(p=v.data)&&void 0!==p&&p.message&&"string"===typeof e.response.data.message?e.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>Z.current()))}},J=async e=>{try{return b.Y.info("Questionnaire - Preview Questionnaire - deleteQuestionnaire handler"),await L().delete(T.ZW+"/".concat(null===F||void 0===F?void 0:F.uuid),{data:{deletionType:e}}),y({titleMessage:"Success",descriptionMessage:"".concat("inactive"===e?"Questionnaire inactivated successfully!":"Questionnaire deleted successfully!"),messageType:"success"},(()=>Z.current())),setTimeout((()=>A("/questionnaires",{state:0})),3e3)}catch(l){var i,n;K(l),b.Y.info("Questionnaire - Preview Questionnaire - deleteQuestionnaire handler - catch error - ".concat(null===l||void 0===l||null===(i=l.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message))}finally{f(!1)}};return(0,w.jsxs)("div",{className:"page-wrapper",onClick:()=>W&&G(!1),children:[(0,w.jsx)(I.Z,{title:(0,w.jsxs)("p",{children:[" ","Delete ",F&&!(null!==F&&void 0!==F&&F.isPublished)&&" Drafted ","Questionnaire"]}),info1:(0,w.jsx)("p",{children:F&&null!==F&&void 0!==F&&F.isPublished?"Deleting the questionnaire will also delete the related assessments. Instead we recommend you make the questionnaire inactive.":"Deleting the drafted questionnaire will be an irreversible action. All the related details would be lost."}),info2:(0,w.jsxs)("p",{children:["Are you sure you want to delete",F&&!(null!==F&&void 0!==F&&F.isPublished)&&" drafted"," the questionnaire?"]}),primaryButtonText:F&&null!==F&&void 0!==F&&F.isPublished?"Delete Anyway":"Delete",secondaryButtonText:F&&null!==F&&void 0!==F&&F.isPublished?"Inactive":"Cancel",onPrimaryModalButtonClickHandler:async()=>{F&&null!==F&&void 0!==F&&F.isPublished?J("delete"):(async()=>{try{b.Y.info("Questionnaire - Preview Questionnaire - deleteDraft handler");const e=await L().delete(T.uf+"/".concat(null===F||void 0===F?void 0:F.uuid));return y({titleMessage:"Success",descriptionMessage:e.data.message,messageType:"success"},(()=>Z.current())),setTimeout((()=>A("/questionnaires",{state:1})),3e3)}catch(n){var e,i;b.Y.info("Questionnaire - Preview Questionnaire - deleteDraft handler - catch error - ".concat(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message)),K(n)}finally{f(!1)}})()},onSecondaryModalButtonClickHandler:()=>{F&&null!==F&&void 0!==F&&F.isPublished?J("inactive"):f(!1)},openModal:x,setOpenModal:f}),(0,w.jsx)(E.Z,{myRef:Z,titleMessage:j.titleMessage,descriptionMessage:j.descriptionMessage,messageType:j.messageType}),(0,w.jsx)("div",{className:"breadcrumb-wrapper",children:(0,w.jsx)("div",{className:"container",children:(0,w.jsxs)("ul",{className:"breadcrumb",children:[(0,w.jsx)("li",{children:(0,w.jsxs)(q.rU,{to:"/questionnaires",style:{cursor:"pointer"},state:null!==F&&void 0!==F&&F.isPublished?0:1,children:["Questionnaire"," ",null!==F&&void 0!==F&&F.isPublished?"(Published)":"(Drafted)"]})}),P["*"].includes("version")&&(0,w.jsx)("li",{children:(0,w.jsx)(q.rU,{to:"/questionnaire-version-history/".concat(P.id),style:{cursor:"pointer"},children:"Questionnaire History"})}),P["*"].includes("version")?(0,w.jsx)("li",{children:"Preview Questionnaire History"}):(0,w.jsx)("li",{children:"Preview Questionnaire "})]})})}),(0,w.jsx)("section",{children:(0,w.jsxs)("div",{className:"container",children:[(0,w.jsxs)("div",{className:"form-header",children:[(0,w.jsxs)("div",{className:"flex-between preview-que-ttl-blk",children:[(0,w.jsx)("h2",{className:"heading2",children:null===F||void 0===F?void 0:F.title}),(0,w.jsxs)("span",{className:"form-header-right-txt",onClick:()=>{G(!W)},children:[(0,w.jsx)("span",{className:"crud-operation ".concat(W&&"crud-operation-active"),children:(0,w.jsx)(S.Z,{})}),(0,w.jsx)("div",{className:"crud-toggle-wrap que-crud-toggle-wrap",style:{display:W?"block":"none"},children:(0,w.jsxs)("ul",{className:"crud-toggle-list",children:[(0,w.jsx)("li",{onClick:()=>(0,O.j)("Questionnaire",y,P.id,Z,T.KW,A),children:"Export to Excel"}),!P["*"].includes("version")&&!(null!==F&&void 0!==F&&F.isDraft)&&(0,w.jsx)("li",{onClick:()=>A("/questionnaire-version-history/".concat(P.id)),children:"Version History"}),(!0===z||(null===(n=U[0])||void 0===n||null===(o=n.questionnaire)||void 0===o?void 0:o.edit))&&!P["*"].includes("version")&&((null===F||void 0===F?void 0:F.isDraft)||(null===F||void 0===F?void 0:F.isPublished))&&(0,w.jsx)("li",{onClick:()=>A("/questionnaires/edit-questionnaire/".concat(P.id)),children:"Edit Questionnaire"}),(!0===z||(null===(d=U[0])||void 0===d||null===(c=d.questionnaire)||void 0===c?void 0:c.delete))&&(0,w.jsx)("li",{onClick:()=>f(!0),children:"Delete Questionnaire"})]})})]})]}),(0,w.jsx)("div",{className:"excel-short-name",children:(0,w.jsx)("p",{children:null===F||void 0===F?void 0:F.sheetName})})]}),h?(0,w.jsx)(_.Z,{}):(0,w.jsxs)("div",{className:"section-form-sect",children:[(0,w.jsx)("div",{className:"section-tab-blk flex-between preview-tab-blk",children:(0,w.jsx)("div",{className:"section-tab-leftblk",children:(0,w.jsx)(s.Z,{sx:{borderBottom:1,borderColor:"divider"},className:"tabs-sect que-tab-sect",children:(0,w.jsx)(t.Z,{value:p,onChange:(e,i)=>{m(i)},"aria-label":"basic tabs example",variant:"scrollable",scrollButtons:"auto",children:null===F||void 0===F||null===(u=F.sections)||void 0===u?void 0:u.map(((e,i,n)=>{var l;return(0,w.jsx)(a.Z,{title:e.sectionTitle,placement:"bottom-start",children:(0,w.jsx)(r.Z,{className:"section-tab-item",label:"section ".concat(i+1),...H(i)})},null!==(l=null===e||void 0===e?void 0:e.uuid)&&void 0!==l?l:n)}))})})})}),(0,w.jsx)("div",{className:"preview-tab-data",children:null===F||void 0===F||null===(v=F.sections)||void 0===v?void 0:v.map(((e,i)=>{var n;return(0,w.jsx)(R.x,{value:p,index:i,children:(0,w.jsx)(N,{questionnaire:F,section:e,sectionIndex:i})},null!==(n=null===e||void 0===e?void 0:e.uuid)&&void 0!==n?n:i)}))})]})]})})]})}},47806:(e,i,n)=>{n.d(i,{d:()=>a,j:()=>r});var l=n(94677),s=n(14917),t=n(45736);const a=()=>{let e=(new Date).getMonth()<10?"0"+((new Date).getMonth()+1).toString():(new Date).getMonth().toString(),i=(new Date).getDate()<10?"0"+(new Date).getDate().toString():(new Date).getDate().toString(),n=(new Date).getHours();return e+i+(new Date).getFullYear().toString()+"_"+n+(new Date).getMinutes()+(new Date).getSeconds()},r=async(e,i,n,r,o,d)=>{try{const t=await l.H.get(n?o+n+"/download":o,{responseType:"blob"});s.Y.info(" download function -  from ".concat(e,"  assessment "));const d=window.URL.createObjectURL(new Blob([t.data])),c=document.createElement("a");c.href=d;let u=a();c.setAttribute("download","".concat(e," - ").concat(u,".xlsx")),document.body.appendChild(c),c.click(),200==t.status&&i({titleMessage:"Success!",descriptionMessage:"Downloaded Successfully!",messageType:"success"},(()=>r.current()))}catch(v){var c,u;return s.Y.info("downlaod function - error ".concat(null===v||void 0===v||null===(c=v.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message)),(0,t.K)(v,i,r,d),v}}},52898:(e,i,n)=>{var l=n(64836);i.Z=void 0;var s=l(n(45649)),t=n(80184),a=(0,s.default)((0,t.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");i.Z=a},85523:(e,i,n)=>{n.d(i,{Z:()=>Z});var l=n(63366),s=n(87462),t=n(72791),a=n(63733),r=n(94419),o=n(52930),d=n(53767),c=n(20890),u=n(14036),v=n(66934),p=n(31402),m=n(75878),h=n(21217);function b(e){return(0,h.Z)("MuiFormControlLabel",e)}const g=(0,m.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);var x=n(76147),f=n(80184);const j=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],w=(0,v.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,i)=>{const{ownerState:n}=e;return[{["& .".concat(g.label)]:i.label},i.root,i["labelPlacement".concat((0,u.Z)(n.labelPlacement))]]}})((e=>{let{theme:i,ownerState:n}=e;return(0,s.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(g.disabled)]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(g.label)]:{["&.".concat(g.disabled)]:{color:(i.vars||i).palette.text.disabled}}})})),y=(0,v.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,i)=>i.asterisk})((e=>{let{theme:i}=e;return{["&.".concat(g.error)]:{color:(i.vars||i).palette.error.main}}})),Z=t.forwardRef((function(e,i){var n,v;const m=(0,p.Z)({props:e,name:"MuiFormControlLabel"}),{className:h,componentsProps:g={},control:Z,disabled:P,disableTypography:N,label:k,labelPlacement:q="end",required:M,slotProps:T={}}=m,C=(0,l.Z)(m,j),D=(0,o.Z)(),S=null!=(n=null!=P?P:Z.props.disabled)?n:null==D?void 0:D.disabled,Q=null!=M?M:Z.props.required,E={disabled:S,required:Q};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof Z.props[e]&&"undefined"!==typeof m[e]&&(E[e]=m[e])}));const R=(0,x.Z)({props:m,muiFormControl:D,states:["error"]}),I=(0,s.Z)({},m,{disabled:S,labelPlacement:q,required:Q,error:R.error}),A=(e=>{const{classes:i,disabled:n,labelPlacement:l,error:s,required:t}=e,a={root:["root",n&&"disabled","labelPlacement".concat((0,u.Z)(l)),s&&"error",t&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",s&&"error"]};return(0,r.Z)(a,b,i)})(I),L=null!=(v=T.typography)?v:g.typography;let O=k;return null==O||O.type===c.Z||N||(O=(0,f.jsx)(c.Z,(0,s.Z)({component:"span"},L,{className:(0,a.Z)(A.label,null==L?void 0:L.className),children:O}))),(0,f.jsxs)(w,(0,s.Z)({className:(0,a.Z)(A.root,h),ownerState:I,ref:i},C,{children:[t.cloneElement(Z,E),Q?(0,f.jsxs)(d.Z,{display:"block",children:[O,(0,f.jsxs)(y,{ownerState:I,"aria-hidden":!0,className:A.asterisk,children:["\u2009","*"]})]}):O]}))}))},88970:(e,i,n)=>{n.d(i,{Z:()=>p});var l=n(87462),s=n(63366),t=n(72791),a=n(79012),r=n(42071),o=n(98278),d=n(18672),c=n(67384),u=n(80184);const v=["actions","children","defaultValue","name","onChange","value"],p=t.forwardRef((function(e,i){const{actions:n,children:p,defaultValue:m,name:h,onChange:b,value:g}=e,x=(0,s.Z)(e,v),f=t.useRef(null),[j,w]=(0,o.Z)({controlled:g,default:m,name:"RadioGroup"});t.useImperativeHandle(n,(()=>({focus:()=>{let e=f.current.querySelector("input:not(:disabled):checked");e||(e=f.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const y=(0,r.Z)(i,f),Z=(0,c.Z)(h),P=t.useMemo((()=>({name:Z,onChange(e){w(e.target.value),b&&b(e,e.target.value)},value:j})),[Z,b,w,j]);return(0,u.jsx)(d.Z.Provider,{value:P,children:(0,u.jsx)(a.Z,(0,l.Z)({role:"radiogroup",ref:y},x,{children:p}))})}))}}]);
//# sourceMappingURL=7516.5c483695.chunk.js.map