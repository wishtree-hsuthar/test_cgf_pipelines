"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[3808],{93808:(s,e,o)=>{o.r(e),o.d(e,{default:()=>g});var r=o(72791),a=o(44695),n=o(77196),d=o(55294),l=o(61134),i=o(57689),t=o(81724),c=o(14917),w=o(76218),u=o(27181),m=o(12010),p=o(1260),h=o(42866),v=o(80184);const f=t.Ry().shape({newPassword:t.Z_().required("Enter the new password").matches(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{6,15}$/,"Password must contain at least 6 characters, one uppercase, one number and one special case character"),confirmPassword:t.Z_().required("Enter the confirm password").oneOf([t.iH("newPassword"),null],"Password does not match.")}),g=()=>{var s;(0,p.j)("Reset Password");const{register:e,handleSubmit:o,setValue:t,formState:{errors:g},reset:x}=(0,l.cI)({resolver:(0,a.X)(f),defaultValues:{newPassword:"",confirmPassword:""}}),P=(0,i.s0)(),j=(0,r.useRef)(),b=(0,i.UO)(),[N,y]=(0,r.useState)(!1);(0,r.useEffect)((()=>{document.body.classList.add("login-page");let s=new AbortController;return(async()=>{c.Y.info("Reset Password - Verify forgot token handler");try{const{response:e}=await d.Z.get(w.OP+b.id,{signal:s.signal});if(200==(null===e||void 0===e?void 0:e.status))return null}catch(a){var e,o,r;c.Y.info("Reset Password - Verify forgot token handler catch error - ".concat(null===a||void 0===a||null===(e=a.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message)),400==(null===a||void 0===a||null===(r=a.response)||void 0===r?void 0:r.status)&&y(!0)}})(),()=>{s.abort(),document.body.classList.remove("login-page")}}),[]);const[k,C]=r.useState({newPassword:"",showNewPassword:!1,confirmPassword:"",showConfirmPassword:!1}),[Z,R]=(0,r.useState)(""),[_,S]=(0,r.useState)(""),[F,A]=(0,r.useState)(""),E=s=>{s.preventDefault()};return(0,v.jsxs)("div",{className:"page-wrapper login-page-wrap",children:[(0,v.jsx)(u.Z,{messageType:Z,titleMessage:_,myRef:j,descriptionMessage:F}),(0,v.jsx)("div",{className:"login-section",children:(0,v.jsx)("div",{className:"container",children:(0,v.jsxs)("div",{className:"login-wrapper",children:[(0,v.jsx)("div",{className:"login-leftblk",children:(0,v.jsx)("div",{className:"login-slider",children:(0,v.jsx)(h.Z,{})})}),(0,v.jsx)("div",{className:"login-rightblk",children:(0,v.jsxs)("div",{className:"login-blk",children:[(0,v.jsx)("div",{className:"logo",children:(0,v.jsx)("img",{src:"/images/logo.png",alt:"",className:"img-fluid"})}),(0,v.jsx)("h2",{className:"".concat(N?"warning-message":"heading1 text-uppercase"),children:N?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{children:"Oops! The link to reset password is expired or looks like you're trying using an invalid link."}),(0,v.jsx)("br",{}),(0,v.jsx)("p",{children:'If you don\'t remember your password, please click on "Forgot Password" button below to reset your password.'})]}):"Reset Password"}),(0,v.jsx)("div",{className:"login-form",children:N?(0,v.jsx)("div",{className:"form-btn flex-between",children:(0,v.jsx)("button",{type:"submit",className:"primary-button",onClick:()=>P("/forget-password"),children:"Forgot password"})}):(0,v.jsxs)("form",{onSubmit:o((async s=>{c.Y.info("Reset password - submitForm handler");try{const e=await d.Z.post("".concat(w.lP).concat(b.id),{password:s.newPassword,confirmPassword:s.confirmPassword});201==(null===e||void 0===e?void 0:e.status)&&(R("success"),S("Success"),A("Your password has been successfully updated!"),setTimeout((()=>{j.current()}),1e3),x())}catch(u){var e,o,r,a,n,l,i,t;if(c.Y.info("Reset Password - submitForm handler"),400==(null===u||void 0===u||null===(e=u.response)||void 0===e?void 0:e.status)&&"Invalid token"!==(null===u||void 0===u||null===(o=u.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message))R("error"),S("Password Reset Failure"),A(null===u||void 0===u||null===(i=u.response)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.message),x(),setTimeout((()=>{j.current()}),1e3);else 400===(null===u||void 0===u||null===(a=u.response)||void 0===a?void 0:a.status)&&"Invalid token"===(null===u||void 0===u||null===(n=u.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.message)&&y(!0)}})),children:[(0,v.jsxs)("div",{className:"form-group",children:[(0,v.jsxs)("label",{htmlFor:"password",children:["New Password ",(0,v.jsx)("span",{className:"mandatory",children:"*"})]}),(0,v.jsxs)("div",{className:"password-field",children:[(0,v.jsx)(n.Z,{fullWidth:!0,id:"outlined-adornment-password",type:k.showNewPassword?"text":"password",placeholder:"Enter new password",className:"input-field ".concat(g.newPassword&&"input-error"),inputProps:{maxLength:15},endAdornment:(0,v.jsx)(m.Z,{show:null===k||void 0===k?void 0:k.showNewPassword,onClickHandler:()=>{C({...k,showNewPassword:!k.showNewPassword})},onMouseDown:E}),...e("newPassword"),onBlur:s=>t("newPassword",s.target.value.trim())}),(0,v.jsx)("p",{className:"password-error",children:null!==g&&void 0!==g&&g.newPassword?null===(s=g.newPassword)||void 0===s?void 0:s.message:(0,v.jsx)("span",{children:"\xa0"})})]})]}),(0,v.jsxs)("div",{className:"form-group",children:[(0,v.jsxs)("label",{htmlFor:"password",children:["Confirm Password ",(0,v.jsx)("span",{className:"mandatory",children:"*"})]}),(0,v.jsxs)("div",{className:"password-field",children:[(0,v.jsx)(n.Z,{fullWidth:!0,id:"outlined-adornment-password",type:k.showConfirmPassword?"text":"password",placeholder:"Enter confirm password",className:"input-field ".concat(g.confirmPassword&&"input-error"),inputProps:{maxLength:15},endAdornment:(0,v.jsx)(m.Z,{show:null===k||void 0===k?void 0:k.showConfirmPassword,onClickHandler:()=>{C({...k,showConfirmPassword:!k.showConfirmPassword})},onMouseDown:E}),...e("confirmPassword"),onBlur:s=>t("confirmPassword",s.target.value.trim())}),(0,v.jsx)("p",{className:"password-error",children:null!==g&&void 0!==g&&g.confirmPassword?g.confirmPassword.message:(0,v.jsx)("span",{children:"\xa0"})})]})]}),(0,v.jsxs)("div",{className:"form-btn flex-between",children:[(0,v.jsx)("button",{type:"submit",className:"primary-button",children:"Reset"}),(0,v.jsx)("div",{onClick:()=>P("/login"),className:"tertiary-btn-blk mr-10",children:"Back to login"})]})]})})]})})]})})})]})}}}]);
//# sourceMappingURL=3808.58e03d4d.chunk.js.map