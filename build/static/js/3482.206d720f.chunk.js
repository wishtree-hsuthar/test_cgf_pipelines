"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[3482],{23482:(e,s,a)=>{a.r(s),a.d(s,{default:()=>y});var r=a(72791),i=a(44695),l=a(97275),o=a(77196),n=a(55294),d=a(61134),t=a(59434),c=a(57689),m=a(81724),u=a(14917),p=a(76218),g=a(94677),v=a(27181),h=a(16990),w=a(12010),f=a(12820),x=a(1260),j=a(42866),b=a(80184);const N=m.Ry().shape({email:m.Z_().email("Invalid input").required("Enter the email address"),password:m.Z_().required("Enter the password")}),y=e=>{var s;(0,x.j)("Login");const[a,m]=(0,f.Z)({titleMessage:"",descriptionMessage:"",messageType:"error"}),y=(0,r.useRef)(),k=(0,t.I0)(),M=((0,c.TH)(),(0,c.s0)()),{register:Z,setValue:_,handleSubmit:C,formState:{errors:L}}=(0,d.cI)({resolver:(0,i.X)(N)});(0,r.useEffect)((()=>{document.body.classList.add("login-page");const e=new AbortController;return(async()=>{u.Y.info("Login - Fetch user handler");try{const{status:s,data:a}=await n.Z.get(p.JA,{withCredentials:!0,signal:e.signal});200==s&&M("/home")}catch(a){var s;401==(null===a||void 0===a||null===(s=a.response)||void 0===s?void 0:s.status)&&u.Y.info("Login - Fetch user hanller catch error")}})(),()=>{document.body.classList.remove("login-page"),e.abort()}}),[]);const[I,S]=r.useState({password:"",showPassword:!1});return(0,b.jsxs)("div",{className:"page-wrapper login-page-wrap",children:[(0,b.jsx)(v.Z,{myRef:y,titleMessage:a.titleMessage,descriptionMessage:a.descriptionMessage,messageType:a.messageType}),(0,b.jsx)("div",{className:"login-section",children:(0,b.jsx)("div",{className:"container",children:(0,b.jsxs)("div",{className:"login-wrapper",children:[(0,b.jsx)("div",{className:"login-leftblk",children:(0,b.jsx)("div",{className:"login-slider",children:(0,b.jsx)(j.Z,{})})}),(0,b.jsx)("div",{className:"login-rightblk",children:(0,b.jsxs)("div",{className:"login-blk",children:[(0,b.jsx)("div",{className:"logo",children:(0,b.jsx)("img",{src:"/images/logo.png",alt:"",className:"img-fluid"})}),(0,b.jsx)("h2",{className:"heading1 text-uppercase",children:"Log in"}),(0,b.jsx)("div",{className:"login-form",children:(0,b.jsxs)("form",{onSubmit:C((async e=>{u.Y.info("Login - Submit login data handler");try{const l=await g.u.post(p.ZE,e,{withCredentials:!0});var s,a,r,i;if(201==l.status)k((0,h.av)(null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.user)),k((0,h.RR)(null===l||void 0===l||null===(a=l.data)||void 0===a||null===(r=a.user)||void 0===r?void 0:r.role)),M("/verification-code"),localStorage.setItem("token",null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.token)}catch(v){var l,o,n,d,t,c;if(u.Y.info("Login - Submit login data handler catch error - ".concat(null===v||void 0===v||null===(l=v.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)),401==v.response.status&&"Unauthorized"===v.response.data.message)return m({titleMessage:"Invalid Credentials",descriptionMessage:"Invalid email or password!",messageType:"error"},(()=>y.current()));if(401==v.response.status&&"Access denied. Kindly contact system admin."===v.response.data.message)return m({titleMessage:"Invalid Credentials",descriptionMessage:null===v||void 0===v||null===(n=v.response)||void 0===n||null===(d=n.data)||void 0===d?void 0:d.message,messageType:"error"},(()=>y.current()));if(400==v.response.status)return m({titleMessage:"Session Active",descriptionMessage:null===v||void 0===v||null===(t=v.response)||void 0===t||null===(c=t.data)||void 0===c?void 0:c.message,messageType:"error"},(()=>y.current()))}})),children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsxs)("label",{htmlFor:"emailid",children:["Email ",(0,b.jsx)("span",{className:"mandatory",children:"*"})]}),(0,b.jsx)(l.Z,{className:"input-field ".concat(L.email&&"input-error"),id:"outlined-basic",placeholder:"example@domain.com",variant:"outlined",...Z("email"),onBlur:e=>_("email",e.target.value.trim()),helperText:L.email?L.email.message:" "})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsxs)("label",{htmlFor:"password",children:["Password ",(0,b.jsx)("span",{className:"mandatory",children:"*"})]}),(0,b.jsxs)("div",{className:"password-field",children:[(0,b.jsx)(o.Z,{fullWidth:!0,id:"outlined-adornment-password",type:I.showPassword?"text":"password",placeholder:"Enter password",className:"input-field ".concat(L.password&&"input-error"),endAdornment:(0,b.jsx)(w.Z,{show:null===I||void 0===I?void 0:I.showPassword,onClickHandler:()=>{S({...I,showPassword:!I.showPassword})},mouseDownHandler:e=>{e.preventDefault()}}),...Z("password"),onBlur:e=>_("password",e.target.value.trim())}),(0,b.jsx)("p",{className:"password-error",children:null!==L&&void 0!==L&&L.password?null===(s=L.password)||void 0===s?void 0:s.message:(0,b.jsx)("span",{children:"\xa0"})})]})]}),(0,b.jsxs)("div",{className:"form-btn flex-between",children:[(0,b.jsx)("button",{type:"submit",className:"primary-button",children:"Log In"}),(0,b.jsx)("div",{className:"tertiary-btn-blk",onClick:()=>{M("/forget-password")},children:"Forgot Password?"})]})]})})]})})]})})})]})}}}]);
//# sourceMappingURL=3482.206d720f.chunk.js.map