"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[837],{2700:function(e,n,t){t.r(n),t.d(n,{AlphaNumRegEx:function(){return E},AlphaRegEx:function(){return B},NumericRegEx:function(){return D}});var o=t(1413),i=t(4165),a=t(7762),l=t(2982),r=t(5861),s=t(885),c=t(9823),d=t(600),u=t(7954),p=t(2104),v=t(7205),h=t(1898),m=t(7924),f=t(5814),g=t(8588),x=t(1346),y=t(9407),Z=t(6571),j=t(8723),b=t(7792),w=t(2791),k=t(7689),C=t(4677),N=t(6218),M=t(385),S=t(1300),T=(t(7659),t(4917)),A=(t(2820),t(184)),B=/^[a-zA-Z ]*$/,D=/^[0-9]+$/i,E=/^[a-z0-9]+$/i,_=[".jpg",".jpeg",".png",".doc",".txt",".pdf",".docx",".xlsx",".xls",".ppt",".pptx",".mp4",".mp3",".zip",".rar"];n.default=function(e){var n,t,c,R,W,I,O,P,z=e.isPrefilled,L=e.assessmentQuestionnaire,H=e.cell,U=e.columnId,Y=e.sectionUUID,$=e.rowId,Q=e.setAssessmentQuestionnaire,G=e.answer,J=e.transformedColumns,K=e.error,V=e.editMode,q=e.handleAnswersChange,X=e.handleAnswersBlur,ee=e.myRef,ne=e.setToasterDetails,te=(0,w.useState)(!1),oe=(0,s.Z)(te,2),ie=oe[0],ae=oe[1],le=(0,w.useState)(!1),re=(0,s.Z)(le,2),se=re[0],ce=re[1],de=(0,k.s0)(),ue=(0,k.UO)(),pe=(0,w.useState)(!1),ve=(0,s.Z)(pe,2),he=ve[0],me=ve[1],fe=(0,w.useState)(!1),ge=(0,s.Z)(fe,2),xe=ge[0],ye=ge[1],Ze=(0,w.useState)([]),je=(0,s.Z)(Ze,2),be=(je[0],je[1]),we=(0,w.useState)(!1),ke=(0,s.Z)(we,2),Ce=ke[0],Ne=ke[1],Me=function(e){e.preventDefault()},Se=(0,w.useState)(!1),Te=(0,s.Z)(Se,2),Ae=Te[0],Be=Te[1],De=(0,w.useState)([]),Ee=(0,s.Z)(De,2),_e=Ee[0],Fe=Ee[1],Re=z||!z&&L&&!Object.keys(L).length>0?null===H||void 0===H?void 0:H.columnId:U,We=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){var t,o,r,s,c,d,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,l.Z)(_e),o=0,Be(!0),r=(0,a.Z)(n),e.prev=4,r.s();case 6:if((s=r.n()).done){e.next=26;break}if(c=s.value,e.prev=8,10485760,!((null===c||void 0===c?void 0:c.size)>10485760)){e.next=13;break}return o+=1,e.abrupt("continue",24);case 13:if(d=null===c||void 0===c?void 0:c.name.split("."),u="."+d[(null===d||void 0===d?void 0:d.length)-1],_.includes(u)){e.next=18;break}return o+=1,e.abrupt("continue",24);case 18:t.push(c),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(8),Be(!1);case 24:e.next=6;break;case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(4),r.e(e.t1);case 31:return e.prev=31,r.f(),e.finish(31);case 34:Fe(t),o&&ne({titleMessage:"Error",descriptionMessage:"".concat(o," ").concat(o>1?"files":"file"," couldn't be uploaded"),messageType:"error"},(function(){return ee.current()})),Be(!1);case 37:case"end":return e.stop()}}),e,null,[[4,28,31,34],[8,21]])})));return function(n){return e.apply(this,arguments)}}(),Ie=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){var t,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===n||void 0===n||null===(t=n.target)||void 0===t?void 0:t.files;case 2:if(a=e.sent,!((null===(o=Object.keys(a))||void 0===o?void 0:o.length)>100)){e.next=6;break}return ne({titleMessage:"",descriptionMessage:"Max file count 100 reached",messageType:"error"},(function(){return ee.current()})),e.abrupt("return");case 6:We(a);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Oe=function(e){var n,t=new FormData,o=(0,a.Z)(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.append("files[]",i)}}catch(l){o.e(l)}finally{o.f()}return t.append("dummy","dummy Content"),t},Pe=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var n,t,a,r,s,c,d,u,p,v,h,m;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.Y.debug("Current Selected files:- ",_e),Ne(!0),e.prev=2,n=_e.filter((function(e){return!(null!==e&&void 0!==e&&e.location)})),t=Oe(n),T.Y.debug("newly Added files:- ",n),a=_e.filter((function(e){return null===e||void 0===e?void 0:e.location})),r=N.A+"/".concat(null===ue||void 0===ue?void 0:ue.id,"/attachments/").concat(Y,"/").concat(Re+"_"+$),e.next=10,C.H.post(r,t);case 10:return s=e.sent,T.Y.debug("old files:- ",a,"new files",s.data),e.next=14,C.H.put(r,{attachments:[].concat((0,l.Z)(a),(0,l.Z)(null===s||void 0===s?void 0:s.data))});case 14:Ne(!1),(c=(0,o.Z)({},L))[Y]["".concat(Re,"_").concat($)]=[].concat((0,l.Z)(a),(0,l.Z)(null===s||void 0===s?void 0:s.data)),ne({titleMessage:"",descriptionMessage:"Attachments saved!",messageType:"success"},(function(){return ee.current()})),Q(c),Fe([]),me(!1),ye(!1),e.next=30;break;case 24:if(e.prev=24,e.t0=e.catch(2),Ne(!1),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=29;break}return e.abrupt("return");case 29:400===(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)&&"Invalid assessment id!"===(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u||null===(p=u.data)||void 0===p?void 0:p.message)?(console.log("in 400"),ne({titleMessage:"Oops!",descriptionMessage:"Oops!! There is some error while saving assessment details. Either someone has removed this assessment or looks like invalid assessment getting submitted. For more details please contact system / CGF admin",messageType:"error"},(function(){return ee.current()})),setTimeout((function(){de("/assessment-list")}),3e3)):401===(null===e.t0||void 0===e.t0||null===(v=e.t0.response)||void 0===v?void 0:v.status)?(ne({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return ee.current()})),setTimeout((function(){de("/login")}),3e3)):ne({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(h=e.t0.response)&&void 0!==h&&null!==(m=h.data)&&void 0!==m&&m.message&&"string"===typeof e.t0.response.data.message?e.t0.response.data.message:"Oops! Something went wrong. Please try again later.!",messageType:"error"},(function(){return ee.current()}));case 30:case"end":return e.stop()}}),e,null,[[2,24]])})));return function(){return e.apply(this,arguments)}}(),ze=function(){Fe([]),ye(!1),me(!1)};return(0,w.useEffect)((function(){var e;if(G&&(null===G||void 0===G?void 0:G.length)>0&&Array.isArray(G)&&0===(null===_e||void 0===_e?void 0:_e.length)&&!xe&&be((0,l.Z)(G)),"attachments"===(null===(e=J[Re])||void 0===e?void 0:e.columnType)&&"string"===typeof G){var n=(0,o.Z)({},L);n[Y]["".concat(Re,"_").concat($)]=[],Q(n)}}),[]),(0,w.useEffect)((function(){G&&(null===G||void 0===G?void 0:G.length)>0&&Array.isArray(G)&&0===(null===_e||void 0===_e?void 0:_e.length)&&!xe&&Fe((0,l.Z)(G))}),[_e]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(S.Z,{title:(0,A.jsx)("p",{children:"Add Attachments"}),info1:" ",info2:Ae?(0,A.jsx)("div",{className:"loader-blk",children:(0,A.jsx)("img",{src:M.Z,alt:"Loading"})}):(0,A.jsxs)("div",{className:"upload-file-wrap",children:[(0,A.jsx)(v.Z,{variant:"contained",component:"label",className:"upload-file-btn",children:(0,A.jsxs)("div",{className:(null===_e||void 0===_e?void 0:_e.length)>0?"upload-file-blk selected-file-blk":"upload-file-blk",children:[(0,A.jsx)("input",{type:"file",hidden:!0,accept:".jpg, .jpeg, .png, .doc, .txt, .pdf, .docx, .xlsx, .xls, .ppt, .pptx, .mp4, .mp3, .zip, .rar",name:"files[]",onChange:Ie,multiple:!0}),(0,A.jsx)("span",{className:"upload-icon",children:(0,A.jsx)(d.Z,{})}),(0,A.jsxs)("span",{className:"file-upload-txt",children:["Click here to choose files (max file size"," ","".concat("10"," MB"),")"]})]})}),(0,A.jsx)("p",{style:{color:"#f7a823",fontFamily:"ProximaNova-Semibold, serif, sans-serif",margin:"10px 0px"},children:"Uploading large files may take some time"}),(null===_e||void 0===_e?void 0:_e.length)>0&&(0,A.jsx)(F,{currentSelectedFiles:_e,setCurrentSelectedFiles:Fe,setIsFileRemoved:ye})]}),primaryButtonText:"Save",secondaryButtonText:"Cancel",onPrimaryModalButtonClickHandler:Pe,isDisabledPrimaryButton:Ce,onSecondaryModalButtonClickHandler:ze,openModal:he,setOpenModal:me,isModalForm:!0,handleCloseRedirect:ze}),z&&J[Re]&&"prefilled"===J[Re].columnType&&(0,A.jsx)("p",{className:"text-justify",children:ie?(0,A.jsxs)("span",{children:[(0,A.jsx)("span",{children:null===H||void 0===H?void 0:H.value}),(0,A.jsx)("br",{}),(0,A.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),ae(!1)},className:"show-more-less-txt",children:"Show Less"})]}):(0,A.jsx)("span",{children:(null===H||void 0===H?void 0:H.value.length)>100?(0,A.jsxs)("span",{children:[(0,A.jsxs)("span",{children:[null===H||void 0===H?void 0:H.value.slice(0,100),"..."]}),(0,A.jsx)("br",{}),(0,A.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),ae(!0)},className:"show-more-less-txt",children:"Show More"})]}):null===H||void 0===H?void 0:H.value})}),J[Re]&&"attachments"===(null===(n=J[Re])||void 0===n?void 0:n.columnType)&&(0,A.jsxs)(h.Z,{children:[(0,A.jsx)("a",{href:"#",onClick:function(){return me(!0)},style:{color:"#f7a823",textDecoration:"none",pointerEvents:"".concat((V&&ue["*"].includes("view")||!V)&&"none")},children:"Add/Edit Attachments"}),(0,A.jsx)(m.Z,{children:G&&0!==(null===G||void 0===G?void 0:G.length)||!K||0===(null===K||void 0===K?void 0:K.length)?"":K})]}),(0,A.jsx)("span",{className:"list-uploaded-file",children:J[Re]&&"attachments"===(null===(t=J[Re])||void 0===t?void 0:t.columnType)&&G&&(null===G||void 0===G?void 0:G.length)>0&&Array.isArray(G)&&(0,A.jsxs)(A.Fragment,{children:[console.log("answer: ",G),G.map((function(e,n){var t,o,i,a;return(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.length)<=30?(n<=1||se)&&(0,A.jsx)("a",{href:null!==(o=N.Wy+ue.id+"/attachments?id="+(null===e||void 0===e?void 0:e.location))&&void 0!==o?o:"#",style:{textDecoration:"none",display:"table",color:"".concat(null!==(i=e.location)&&void 0!==i?i:"#1e1e1e"),pointerEvents:"".concat(!e.location&&"none")},children:(0,A.jsx)(A.Fragment,{children:"".concat(null===e||void 0===e?void 0:e.name)})},n):(n<=1||se)&&(0,A.jsx)(f.Z,{title:null===e||void 0===e?void 0:e.name,style:{textDecoration:"none"},placement:"bottom-start",children:(0,A.jsx)("a",{href:e.location?N.Wy+ue.id+"/attachments?id="+(null===e||void 0===e?void 0:e.location):"#",style:{display:"table",textDecoration:"none",color:"".concat(!e.location&&"#1e1e1e"),cursor:"".concat(e.location?"pointer":"default")},children:"".concat(null===e||void 0===e||null===(a=e.name)||void 0===a?void 0:a.slice(0,30),"...")})},n)})),se?(0,A.jsx)("a",{href:"#",onClick:function(e){ce(!1)},className:"show-more-less-txt",style:{marginTop:"5px",display:"inline-block"},children:(null===G||void 0===G?void 0:G.length)>2&&"Show Less"}):(0,A.jsx)("a",{href:"#",onClick:function(e){ce(!0)},className:"show-more-less-txt",style:{marginTop:"5px",display:"inline-block"},children:(null===G||void 0===G?void 0:G.length)>2&&"Show More"})]})}),J[Re]&&"textbox"===J[Re].columnType&&(0,A.jsx)(g.Z,{className:"input-field ".concat(!G&&K&&0!==(null===K||void 0===K?void 0:K.length)||G&&K&&"alphabets"===(null===(c=J[Re])||void 0===c?void 0:c.validation)&&!B.test(G)||G&&K&&"alphanumeric"===(null===(R=J[Re])||void 0===R?void 0:R.validation)&&!E.test(G)||G&&K&&"numeric"===(null===(W=J[Re])||void 0===W?void 0:W.validation)&&!D.test(G)?"input-error":""),disabled:V&&ue["*"].includes("view")||!V,placeholder:"Enter text here",value:G,name:"".concat(Re,"_").concat($),onChange:function(e){return q(e.target.name,e.target.value)},onBlur:function(e){return X(e.target.name,e.target.value)},helperText:!G&&K&&0!==(null===K||void 0===K?void 0:K.length)||G&&"alphabets"===(null===(I=J[Re])||void 0===I?void 0:I.validation)&&!B.test(G)||G&&"numeric"===(null===(O=J[Re])||void 0===O?void 0:O.validation)&&!D.test(G)||G&&"alphanumeric"===(null===(P=J[Re])||void 0===P?void 0:P.validation)&&!E.test(G)?K:" "}),J[Re]&&"dropdown"===J[Re].columnType&&(0,A.jsx)("div",{className:"select-field",children:(0,A.jsxs)(h.Z,{className:"fullwidth-field",children:[(0,A.jsx)(x.Z,{IconComponent:function(e){return(0,A.jsx)(p.Z,(0,o.Z)({},e))},name:"".concat(Re,"_").concat($),displayEmpty:!0,disabled:V&&ue["*"].includes("view")||!V,value:G,className:"".concat(!G&&K&&0!==(null===K||void 0===K?void 0:K.length)?"select-field-error":""),onChange:function(e){q(e.target.name,e.target.value)},renderValue:""!==G?void 0:function(){return(0,A.jsx)("div",{className:"select-placeholder",children:"Choose dropdown value"})},children:J[Re].options.map((function(e){return(0,A.jsx)(y.Z,{value:e,children:(null===e||void 0===e?void 0:e.length)<=40?e:(0,A.jsx)(f.Z,{title:e,children:(0,A.jsx)("span",{children:(null===e||void 0===e?void 0:e.slice(0,40))+"..."})})},e)}))}),(0,A.jsx)(m.Z,{children:!G&&K&&0!==(null===K||void 0===K?void 0:K.length)?K:" "})]})}),J[Re]&&"date"===J[Re].columnType&&(0,A.jsx)(h.Z,{fullWidth:!0,children:(0,A.jsxs)(Z._,{dateAdapter:b.y,children:[(0,A.jsx)(j.M,{disabled:V&&ue["*"].includes("view")||!V,value:G,className:"datepicker-blk",components:{OpenPickerIcon:u.Z},onChange:function(e){q("".concat(Re,"_").concat($),new Date(new Date(e)).toLocaleDateString("en"))},renderInput:function(e){return(0,A.jsx)(g.Z,(0,o.Z)((0,o.Z)({},e),{},{autoComplete:"off",onKeyDown:Me,className:"input-field".concat(!G&&K&&0!==(null===K||void 0===K?void 0:K.length)&&"input-error")}))}}),(0,A.jsx)(m.Z,{children:!G&&K&&0!==(null===K||void 0===K?void 0:K.length)?K:" "})]})})]})};var F=function(e){var n=e.currentSelectedFiles,t=e.setCurrentSelectedFiles,o=e.setIsFileRemoved,i=function(e){var i=(0,l.Z)(n);i.splice(e,1),t(i),o(!0)};return(0,A.jsx)(A.Fragment,{children:n.map((function(e,n){var t,o,a,l;return(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.length)<=40?(0,A.jsxs)("p",{className:"select-filename",children:[(0,A.jsx)("a",{href:null!==(o=null===e||void 0===e?void 0:e.location)&&void 0!==o?o:"#",style:{textDecoration:"none",color:"".concat(!(null!==e&&void 0!==e&&e.location)&&"#1e1e1e"),pointerEvents:"".concat(!(null!==e&&void 0!==e&&e.location)&&"none")},children:null===e||void 0===e?void 0:e.name}),(0,A.jsxs)("span",{className:"file-close-icon",style:{cursor:"pointer"},onClick:function(){return i(n)},children:[" ",(0,A.jsx)(c.Z,{})]})]},n):(0,A.jsx)(f.Z,{title:null===e||void 0===e?void 0:e.name,children:(0,A.jsxs)("p",{className:"select-filename",children:[(0,A.jsx)("a",{href:null!==(a=null===e||void 0===e?void 0:e.location)&&void 0!==a?a:"#",style:{textDecoration:"none",color:"".concat(!(null!==e&&void 0!==e&&e.location)&&"#1e1e1e"),pointerEvents:"".concat(!(null!==e&&void 0!==e&&e.location)&&"none")},children:(null===e||void 0===e||null===(l=e.name)||void 0===l?void 0:l.slice(0,30))+"..."}),(0,A.jsxs)("span",{className:"file-close-icon",style:{cursor:"pointer"},onClick:function(){return i(n)},children:[" ",(0,A.jsx)(c.Z,{})]})]})},n)}))})}},4565:function(e,n,t){t.d(n,{Z:function(){return Z}});var o=t(3366),i=t(7462),a=t(2791),l=t(8182),r=t(8519),s=t(4419),c=t(277),d=t(5513),u=t(9853),p=t(5878),v=t(1217);function h(e){return(0,v.Z)("MuiTypography",e)}(0,p.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var m=t(184),f=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],g=(0,c.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.variant&&n[t.variant],"inherit"!==t.align&&n["align".concat((0,u.Z)(t.align))],t.noWrap&&n.noWrap,t.gutterBottom&&n.gutterBottom,t.paragraph&&n.paragraph]}})((function(e){var n=e.theme,t=e.ownerState;return(0,i.Z)({margin:0},t.variant&&n.typography[t.variant],"inherit"!==t.align&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})})),x={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},y={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Z=a.forwardRef((function(e,n){var t=(0,d.Z)({props:e,name:"MuiTypography"}),a=function(e){return y[e]||e}(t.color),c=(0,r.Z)((0,i.Z)({},t,{color:a})),p=c.align,v=void 0===p?"inherit":p,Z=c.className,j=c.component,b=c.gutterBottom,w=void 0!==b&&b,k=c.noWrap,C=void 0!==k&&k,N=c.paragraph,M=void 0!==N&&N,S=c.variant,T=void 0===S?"body1":S,A=c.variantMapping,B=void 0===A?x:A,D=(0,o.Z)(c,f),E=(0,i.Z)({},c,{align:v,color:a,className:Z,component:j,gutterBottom:w,noWrap:C,paragraph:M,variant:T,variantMapping:B}),_=j||(M?"p":B[T]||x[T])||"span",F=function(e){var n=e.align,t=e.gutterBottom,o=e.noWrap,i=e.paragraph,a=e.variant,l=e.classes,r={root:["root",a,"inherit"!==e.align&&"align".concat((0,u.Z)(n)),t&&"gutterBottom",o&&"noWrap",i&&"paragraph"]};return(0,s.Z)(r,h,l)}(E);return(0,m.jsx)(g,(0,i.Z)({as:_,ref:n,ownerState:E,className:(0,l.Z)(F.root,Z)},D))}))}}]);
//# sourceMappingURL=837.59aad99d.chunk.js.map