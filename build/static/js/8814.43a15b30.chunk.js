"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[8814],{28814:(e,n,a)=>{a.r(n),a.d(n,{default:()=>A});var r=a(72791),s=a(57689),l=a(11087),t=a(45904),d=a(35527),i=a(97275),o=a(61134),c=a(55294),u=a(94677),m=a(76218),h=a(27659),p=a(12820),v=a(12104),g=a(48086),x=a(46363),f=a(1260),b=a(28386),j=a(14917),y=a(45736),N=a(80184);const C={countryCode:{validate:"Select the country code"},phoneNumber:{maxLength:"Max digits limit exceed",minLength:"Enter the valid phone number (Eg: 1234567890)",validate:"Enter the valid phone number (Eg: 1234567890)",pattern:"Invalid format"},name:{required:"Enter the CGF admin name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},email:{required:"Enter the email",pattern:"Invalid format",minLength:"minimum 3 characters required"},subRoleId:{required:"Select the role"}},A=()=>{var e;(0,f.j)("Add Admin");const[n,a]=(0,r.useState)(!1),A=(0,s.s0)(),{handleSubmit:S,watch:w,formState:{errors:E},reset:L,control:R,trigger:M,setValue:Z}=(0,o.cI)({defaultValues:{name:"",email:"",subRoleId:"",phoneNumber:"",countryCode:""}}),[T,I]=((0,s.TH)(),(0,r.useState)([])),[_,F]=(0,r.useState)([]),[O,H]=(0,r.useState)(!1),D=(0,r.useRef)(),[P,k]=(0,p.Z)({titleMessage:"",descriptionMessage:"",messageType:"error"});(0,r.useEffect)((()=>{let e=new AbortController;(async()=>{try{const n=await u.H.get(m.Lp,{signal:e.signal});j.Y.info("Add Sub Admin - fetchRoles handler"),F(n.data),n.data.filter((e=>"CGF Admin"===e.name&&L({subRoleId:e._id})))}catch(r){var n,a;if("ERR_CANCELED"===(null===r||void 0===r?void 0:r.code))return;j.Y.info("Add Sub Admin - fetchRoles handler catch error ".concat(null===r||void 0===r||null===(n=r.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message)),(0,y.K)(r,k,D,A)}})(),(async()=>{try{const n=await c.Z.get(m.od,{signal:e.signal});j.Y.info("Add sub admin - addCGFAdminFetchCountries handler ");{let e=null===n||void 0===n?void 0:n.data.map((e=>e.countryCode)),a=new Set(e);I([...a])}}catch(r){var n,a;if("ERR_CANCELED"===(null===r||void 0===r?void 0:r.code))return;j.Y.info("Add sub admin - addCGFAdminFetchCountries handler catch error ".concat(null===r||void 0===r||null===(n=r.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message))}})()}),[]);const q=async e=>{j.Y.info("Add sub admin - addSubAdminData handler"),H(!0),a(!0);try{const n=await c.Z.post(m.mc,e);201==n.status&&(H(!1),k({titleMessage:"Hurray!",descriptionMessage:n.data.message,messageType:"success"},(()=>D.current())),a(!1),L())}catch(s){var n,r;if("ERR_CANCELED"===(null===s||void 0===s?void 0:s.code))return;j.Y.info("Add sub admin - addSubAdminData handler catch error ".concat(null===s||void 0===s||null===(n=s.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)),H(!1),a(!1),(0,y.K)(s,k,D,A)}};return(0,N.jsxs)("div",{className:"page-wrapper",children:[(0,N.jsx)(h.Z,{myRef:D,titleMessage:P.titleMessage,descriptionMessage:P.descriptionMessage,messageType:P.messageType}),(0,N.jsx)("div",{className:"breadcrumb-wrapper",children:(0,N.jsx)("div",{className:"container",children:(0,N.jsxs)("ul",{className:"breadcrumb",children:[(0,N.jsx)("li",{children:(0,N.jsx)(l.rU,{to:"/users/cgf-admin/",children:"Admins"})}),(0,N.jsx)("li",{children:"Add Admin"})]})})}),(0,N.jsx)("section",{children:(0,N.jsx)("div",{className:"container",children:(0,N.jsxs)("form",{onSubmit:S((async e=>{q(e),setTimeout((()=>{A("/users/cgf-admin/",{state:1})}),3e3)})),children:[(0,N.jsxs)("div",{className:"form-header flex-between",children:[(0,N.jsx)("h2",{className:"heading2",children:"Add Admin"}),(0,N.jsx)("div",{className:"form-header-right-txt",children:(0,N.jsxs)("div",{className:"tertiary-btn-blk",onClick:S((e=>{q(e),L(),Z("")})),children:[(0,N.jsx)("span",{className:"addmore-icon",children:(0,N.jsx)("i",{className:"fa fa-plus"})}),(0,N.jsx)("span",{className:"addmore-txt",children:"Save & Add More"})]})})]}),O?(0,N.jsx)(b.Z,{}):(0,N.jsx)("div",{className:"card-wrapper",children:(0,N.jsxs)("div",{className:"card-blk flex-between",children:[(0,N.jsx)("div",{className:"card-form-field",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsxs)("label",{htmlFor:"name",children:["Admin Name ",(0,N.jsx)("span",{className:"mandatory",children:"*"})]}),(0,N.jsx)(g.Z,{control:R,onBlur:e=>{var n;return Z("name",null===(n=e.target.value)||void 0===n?void 0:n.trim())},name:"name",placeholder:"Enter CGF admin name",myHelper:C,rules:{maxLength:50,minLength:3,required:!0,pattern:/^[a-zA-Z][a-zA-Z ]*$/}})]})}),(0,N.jsx)("div",{className:"card-form-field",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsxs)("label",{htmlFor:"email",children:["Email ",(0,N.jsx)("span",{className:"mandatory",children:"*"})]}),(0,N.jsx)(g.Z,{name:"email",onBlur:e=>{var n;return Z("email",null===(n=e.target.value)||void 0===n?void 0:n.trim())},control:R,placeholder:"example@domain.com",myHelper:C,rules:{required:!0,maxLength:50,minLength:3,pattern:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}})]})}),(0,N.jsx)("div",{className:"card-form-field",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsx)("label",{htmlFor:"phoneNumber",children:"Phone Number"}),(0,N.jsxs)("div",{className:"phone-number-field",children:[(0,N.jsx)("div",{className:"select-field country-code",children:(0,N.jsx)(o.Qr,{control:R,name:"countryCode",rules:{validate:()=>{if(!w("countryCode")&&w("phoneNumber"))return"Invalid input"}},render:e=>{let{field:n,fieldState:{error:a}}=e;return(0,N.jsx)(t.Z,{...n,className:"".concat(a&&"autocomplete-error"),PaperComponent:e=>{let{children:n}=e;return(0,N.jsx)(d.Z,{className:(null===T||void 0===T?void 0:T.length)>5?"autocomplete-option-txt autocomplete-option-limit":"autocomplete-option-txt",children:n})},popupIcon:(0,N.jsx)(v.Z,{}),onChange:(e,n)=>{Z("countryCode",n&&"object"===typeof n?n.name:n),M("countryCode"),M("phoneNumber")},autoHighlight:!0,options:T||[],getOptionLabel:e=>e,renderOption:(e,n)=>(0,N.jsx)("li",{...e,children:n}),renderInput:e=>(0,N.jsx)(i.Z,{...e,inputProps:{...e.inputProps},placeholder:"+00",onChange:()=>M("countryCode"),helperText:a?C.countryCode[null===a||void 0===a?void 0:a.type]:" "})})}})}),(0,N.jsx)(g.Z,{name:"phoneNumber",control:R,placeholder:"1234567890",myOnChange:e=>((e,n,a)=>{Z(n,e.target.value),M(n),M(a)})(e,"phoneNumber","countryCode"),onBlur:e=>{var n;return Z("phoneNumber",null===(n=e.target.value)||void 0===n?void 0:n.trim())},myHelper:C,rules:{minLength:7,maxLength:15,validate:e=>!w("phoneNumber")&&w("countryCode")?"invalid input":e&&!Number(e)?"Invalid input":void 0}})]})]})}),(0,N.jsx)("div",{className:"card-form-field",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsxs)("label",{htmlFor:"role",children:["Role ",(0,N.jsx)("span",{className:"mandatory",children:"*"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)(x.Z,{name:"subRoleId",control:R,options:_,rules:{required:!0},myHelper:C,placeholder:"Select role"}),(0,N.jsx)("p",{className:"password-error",children:null===(e=E.subRoleId)||void 0===e?void 0:e.message})]})]})}),(0,N.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,N.jsx)("button",{type:"reset",onClick:()=>{A("/users/cgf-admin/",{state:0})},className:"secondary-button mr-10",children:"Cancel"}),(0,N.jsx)("button",{type:"submit",className:"primary-button add-button",disabled:n,children:"Save"})]})]})})]})})})]})}},48086:(e,n,a)=>{a.d(n,{Z:()=>t});var r=a(97275),s=(a(72791),a(61134)),l=a(80184);const t=e=>{let{control:n,name:a,myHelper:t,placeholder:d,myOnChange:i,rules:o,onBlur:c,multiline:u,isDisabled:m}=e;const{field:{onChange:h,value:p,ref:v},fieldState:{error:g}}=(0,s.bc)({name:a,control:n,rules:o,defaultValue:""});return(0,l.jsx)(r.Z,{disabled:m,className:"input-field ".concat(g&&"input-error"),placeholder:d,onChange:i||h,onBlur:c,value:p,inputRef:v,inputProps:{maxLength:(null===o||void 0===o?void 0:o.maxLength)&&o.maxLength},helperText:g?t&&t[a]&&t[a][g.type]?t[a][g.type]:"Invalid Input":" ",variant:"outlined"})}},45736:(e,n,a)=>{a.d(n,{K:()=>r});const r=async function(e,n,a,r,s){var l,t,d;let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if("ERR_CANCELED"===(null===e||void 0===e?void 0:e.code))return null;if(401==(null===e||void 0===e||null===(l=e.response)||void 0===l?void 0:l.status))n({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again!",messageType:"error"},(()=>a.current())),setTimeout((()=>{r("/login")}),3e3);else if(403===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)){var o,c,u,m;n({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(c=o.data)&&void 0!==c&&c.message?null===e||void 0===e||null===(u=e.response)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>a.current())),setTimeout((()=>{r("/home")}),3e3)}else if(404===(null===e||void 0===e||null===(d=e.response)||void 0===d?void 0:d.status)){var h,p,v,g;n({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(h=e.response)&&void 0!==h&&null!==(p=h.data)&&void 0!==p&&p.message?null===e||void 0===e||null===(v=e.response)||void 0===v||null===(g=v.data)||void 0===g?void 0:g.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>a.current()))}else{var x,f,b,j;console.log("error - ",e),n({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(x=e.response)&&void 0!==x&&null!==(f=x.data)&&void 0!==f&&f.message?null===e||void 0===e||null===(b=e.response)||void 0===b||null===(j=b.data)||void 0===j?void 0:j.message:null!==e&&void 0!==e&&e.message?"File not uploaded yet":"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>a.current())),s&&setTimeout((()=>{r(s,{state:i})}),3e3)}}},1260:(e,n,a)=>{a.d(n,{j:()=>s});var r=a(72791);const s=e=>((0,r.useEffect)((()=>{document.title="HRDD System - ".concat(e)}),[e]),null)}}]);
//# sourceMappingURL=8814.43a15b30.chunk.js.map