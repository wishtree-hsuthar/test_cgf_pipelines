"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[9860],{9860:function(e,s,n){n.r(s);var t=n(4165),i=n(5861),r=n(2982),a=n(885),l=n(8588),o=n(2791),c=n(7689),d=n(1087),u=n(4677),h=n(6218),v=n(9106),p=n(7659),x=n(2820),m=n(8386),g=n(4917),f=n(184);s.default=function(){var e=(0,c.UO)(),s=(0,c.s0)(),n=(0,o.useState)(!1),j=(0,a.Z)(n,2),b=j[0],Z=j[1],k=o.useState(1),y=(0,a.Z)(k,2),N=y[0],w=y[1],C=o.useState(10),S=(0,a.Z)(C,2),A=S[0],P=S[1],M=o.useState("desc"),_=(0,a.Z)(M,2),T=_[0],R=_[1],E=o.useState(""),B=(0,a.Z)(E,2),H=B[0],O=B[1],D=o.useState([]),I=(0,a.Z)(D,2),q=I[0],F=I[1],U=o.useState(0),Q=(0,a.Z)(U,2),V=Q[0],z=Q[1],L=(0,o.useState)(!0),W=(0,a.Z)(L,2),Y=W[0],G=W[1],J=(0,o.useState)(""),K=(0,a.Z)(J,2),X=K[0],$=K[1],ee=(0,x.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),se=(0,a.Z)(ee,2),ne=se[0],te=se[1],ie=(0,o.useRef)(),re=function(){return"".concat(h.ZW,"/").concat(e.id,"/versions?page=").concat(N,"&size=").concat(A,"&orderBy=").concat(H,"&order=").concat(T)},ae=function(s){var n=["vNo","date","createdBy"],t=s,i=s.filter((function(s){return s.uuid===e.id}));$(i[0].title),t.forEach((function(e){e.date=new Date(e.createdAt).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),e.vNo="v"+e.vNo,delete e.title,delete e.createdAt,n.forEach((function(s){var n=e[s];delete e[s],e[s]=n}))})),F((0,r.Z)(t))},le=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var n,i,a,l,o,c,d,h,v,p,x,m,f,j,b,k=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(k.length>0&&void 0!==k[0])||k[0],n=k.length>1&&void 0!==k[1]?k[1]:new AbortController,e.prev=2,i=re(),Z(!0),g.Y.info("Questionnaire - Version History - getVersionHistory handler"),e.next=8,u.H.get(i,{signal:n.signal});case 8:a=e.sent,z(parseInt(a.headers["x-total-count"])),ae((0,r.Z)(a.data)),Z(!1),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:g.Y.info("Questionnaire - Version History - getVersionHistory handler - catch error ".concat(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.message)),401==(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c?void 0:c.status)?(te({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return ie.current()})),setTimeout((function(){s("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d?void 0:d.status)?(te({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(h=e.t0.response)&&void 0!==h&&null!==(v=h.data)&&void 0!==v&&v.message?null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p||null===(x=p.data)||void 0===x?void 0:x.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return ie.current()})),setTimeout((function(){s("/home")}),3e3)):te({titleMessage:"Error",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(m=e.t0.response)&&void 0!==m&&null!==(f=m.data)&&void 0!==f&&f.message?null===e.t0||void 0===e.t0||null===(j=e.t0.response)||void 0===j||null===(b=j.data)||void 0===b?void 0:b.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return ie.current()})),Z(!1);case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){var e=!0,s=new AbortController;return Y&&le(e,s),function(){e=!1,s.abort()}}),[N,A,H,T,Y,G]);return(0,f.jsxs)("div",{className:"page-wrapper",children:[(0,f.jsx)(p.Z,{myRef:ie,titleMessage:ne.titleMessage,descriptionMessage:ne.descriptionMessage,messageType:ne.messageType}),(0,f.jsx)("div",{className:"breadcrumb-wrapper",children:(0,f.jsx)("div",{className:"container",children:(0,f.jsxs)("ul",{className:"breadcrumb",children:[(0,f.jsx)("li",{children:(0,f.jsx)(d.rU,{to:"/questionnaires",state:0,style:{cursor:"pointer"},children:"Questionnaire (Published)"})}),(0,f.jsx)("li",{children:(0,f.jsx)("a",{onClick:function(){return s("/questionnaires/preview-questionnaire/".concat(e.id))},style:{cursor:"pointer"},children:"Preview Questionnaire"})}),(0,f.jsx)("li",{children:"Questionnaire History"})]})})}),(0,f.jsx)("div",{className:"container",children:(0,f.jsx)("div",{className:"form-header flex-between",children:(0,f.jsx)("h2",{className:"heading2",children:"Questionnaire History"})})}),(0,f.jsx)("section",{children:(0,f.jsxs)("div",{className:"container",children:[(0,f.jsx)("div",{className:"que-ttl-blk",children:(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsxs)("label",{htmlFor:"emailid",children:["Questionnaire Title ",(0,f.jsx)("span",{className:"mandatory",children:"*"})]}),(0,f.jsx)(l.Z,{className:'input-field \n                                 \n                                    // questionnaire.title === "" &&\n                                    // globalSectionTitleError?.errMsg &&\n                                     // "input-error"\n                                // }',id:"outlined-basic",value:X,placeholder:"Enter questionnaire title",disabled:!0,variant:"outlined"})]})}),(0,f.jsx)("div",{className:"member-info-wrapper table-content-wrap table-footer-btm-space",children:b?(0,f.jsx)(m.Z,{}):(0,f.jsx)(v.Z,{tableHead:[{id:"vNo",disablePadding:!1,label:"Versions"},{id:"date",disablePadding:!1,label:"Version Date"},{id:"createdBy",disablePadding:!1,label:"Created By"}],records:q,handleChangePage1:function(e){w(e)},handleChangeRowsPerPage1:function(e){P(parseInt(e.target.value,10)),w(1)},page:N,rowsPerPage:A,totalRecords:V,orderBy:H,onClickVisibilityIconHandler1:function(e){return s("/questionnaires/preview-questionnaire-version/".concat(e))},order:T,setOrder:R,setOrderBy:O,setCheckBoxes:!1,onRowClick:!0,isQuestionnare:!0})})]})})]})}},9106:function(e,s,n){n.d(s,{Z:function(){return w}});var t=n(7195),i=n(3372),r=n(7194),a=n(6015),l=n(5473),o=n(6650),c=n(1680),d=n(9773),u=n(4390),h=n(9963),v=n(9827),p=n(807),x=n(3769),m=(n(2791),n(922)),g=n(6321),f=(n(4917),n(5814)),j=n(1346),b=n(9407),Z=n(4162),k=n(4585),y=(n(1605),n(184));function N(e){var s=e.onSelectAllClick,n=e.order,t=e.orderBy,i=e.tableHead,r=e.numSelected,a=e.rowCount,o=e.onRequestSort,c=e.setCheckBoxes;return(0,y.jsx)(v.Z,{children:(0,y.jsxs)(p.Z,{children:[c&&(0,y.jsx)(u.Z,{padding:"checkbox",className:"table-checkbox",children:(0,y.jsx)(l.Z,{color:"primary",indeterminate:r>0&&r<a,checked:a>0&&r===a,onChange:s,inputProps:{"aria-label":"select all desserts"},className:"checkbox-mui"})}),i.map((function(e){return(0,y.jsxs)(u.Z,{width:null===e||void 0===e?void 0:e.width,align:"left",padding:e.disablePadding?"none":"normal",className:"table-header",children:["action"!==e.id&&(0,y.jsx)(x.Z,{active:t===e.id,direction:t===e.id?n:"asc",onClick:(s=e.id,function(e){o(e,s)}),className:"sorted-blk",children:e.label}),"action"===e.id&&(0,y.jsx)("span",{className:"sorted-blk",children:e.label})]},e.id);var s}))]})})}function w(e){var s=e.tableHead,n=e.records,v=e.page,x=void 0===v?1:v,w=e.rowsPerPage,C=void 0===w?10:w,S=e.handleChangeRowsPerPage1,A=e.handleChangePage1,P=e.totalRecords,M=e.orderBy,_=e.setOrderBy,T=e.icons,R=e.onClickVisibilityIconHandler1,E=e.onClickDeleteIconHandler1,B=e.selected,H=void 0===B?[]:B,O=e.setSelected,D=e.order,I=void 0===D?"asc":D,q=e.setOrder,F=e.setCheckBoxes,U=void 0===F||F,Q=e.setSingleSelect,V=void 0!==Q&&Q,z=e.handleSingleUserSelect,L=e.selectedUser,W=e.onRowClick,Y=void 0!==W&&W,G=e.isQuestionnare,J=void 0!==G&&G,K=e.onClickEditAssesmentFunction,X=e.onClickAssignAssesmentFunction,$=e.onClickFillAssessmentFunction,ee=e.viewAssessment,se=void 0!==ee&&ee,ne=function(e,s){R(e,s||!1)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(a.Z,{sx:{width:"100%"},className:U?"table-blk":"table-blk table-blk-without-checkbox",children:(0,y.jsx)(o.Z,{sx:{width:"100%",mb:2},children:(0,y.jsx)(h.Z,{children:(0,y.jsxs)(c.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,y.jsx)(N,{numSelected:H.length,order:I,orderBy:M,tableHead:s,onSelectAllClick:function(e){if(e.target.checked){var s=n.map((function(e){return e._id}));O(s)}else O([])},onRequestSort:function(e,s){q(M===s&&"asc"===I?"desc":"asc"),_(s)},rowCount:n.length,setCheckBoxes:U}),(null===n||void 0===n?void 0:n.length)>0?(0,y.jsx)(d.Z,{children:n.map((function(e,s){var n,a=(n=e._id,-1!==H.indexOf(n)),o="enhanced-table-checkbox-".concat(s);return(0,y.jsxs)(p.Z,{hover:!0,onClick:function(){return Y&&ne(J?e.uuid:e._id,(null===e||void 0===e?void 0:e.isOperationMember)||(null===e||void 0===e?void 0:e.isMemberRepresentative))},style:{cursor:Y&&"pointer"},role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[U&&(0,y.jsx)(u.Z,{padding:"checkbox",children:(0,y.jsx)(l.Z,{className:"table-checkbox",color:"primary",onClick:function(s){return function(e,s){var n=H.indexOf(s),t=[];-1===n?t=t.concat(H,s):0===n?t=t.concat(H.slice(1)):n===H.length-1?t=t.concat(H.slice(0,-1)):n>0&&(t=t.concat(H.slice(0,n),H.slice(n+1))),O(t)}(0,e._id)},checked:a,inputProps:{"aria-labelledby":o}})}),V&&(0,y.jsx)(u.Z,{children:(0,y.jsx)("div",{className:"radio-btn-field",children:(0,y.jsx)(g.Z,{className:"radio-btn",color:"primary",value:e._id,onChange:function(){return function(e){z(e)}(e._id)},checked:L==e._id,inputProps:{"aria-labelledby":o}})})}),Object.keys(e).map((function(s,n){var t,i,r,a,l,o;return"_id"!==s&&"uuid"!==s&&"isActive"!==s&&"isUserAuthorizedToFillAssessment"!==s&&"isOperationMember"!==s&&"isMemberRepresentative"!==s&&"dueDate"!==s?(null===(t=e[s])||void 0===t?void 0:t.length)<=28||"undefined"===typeof e[s]?(0,y.jsxs)(u.Z,{children:[" ",("undefined"===typeof e[s]||""===e[s])&&"N/A","string"===typeof e[s]&&(null===(i=e[s])||void 0===i?void 0:i.length)>0&&"email"!==s?e[s][0].toUpperCase()+(null===(r=e[s])||void 0===r?void 0:r.slice(1)):e[s]]},s):(0,y.jsx)(f.Z,{placement:"bottom-start",enterDelay:1e3,title:e[s],children:(0,y.jsx)(u.Z,{children:"string"===typeof e[s]&&"email"!==s?e[s][0].toUpperCase()+"".concat(null===(a=e[s])||void 0===a?void 0:a.slice(1,28),"..."):"".concat(null===(l=e[s])||void 0===l?void 0:l.slice(0,28),"...")},s)},s):"isActive"===s?(0,y.jsx)(u.Z,{className:"button-style ".concat(e[s]&&"button-style-success"),children:(0,y.jsx)("span",{children:e[s]?"Active":"Inactive"})},s):"dueDate"===s?(0,y.jsx)(u.Z,{className:"due-date-style ".concat(new Date(new Date(e[s]).toLocaleDateString("en")).getTime()>=new Date((new Date).toLocaleDateString("en")).getTime()&&"due-date-style-success"),children:(0,y.jsx)("span",{children:null!==(o=e[s])&&void 0!==o?o:e[s]})},s):void 0})),(null===T||void 0===T?void 0:T.length)>0&&(0,y.jsxs)(u.Z,{children:[T.includes("visibility")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(f.Z,{title:"View Assessment",children:(0,y.jsx)(r.Z,{onClick:function(){return ne(se?e.uuid:e._id)}})})}),T.includes("delete")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(f.Z,{title:"Delete",children:(0,y.jsx)("img",{src:"/images/delete-icon.svg",onClick:function(){return function(e){E(e)}(e._id)}})})}),T.includes("edit")&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(f.Z,{title:"Edit",children:(0,y.jsx)(t.Z,{onClick:function(){return s=e.uuid,void K(s);var s}})})}),T.includes("send")&&("In Progress"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Re-opened"==(null===e||void 0===e?void 0:e.assessmentStatus)||"Accepted"==(null===e||void 0===e?void 0:e.assessmentStatus))&&e.isUserAuthorizedToFillAssessment&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(f.Z,{title:"Assign to Operation Member",children:(0,y.jsx)(m.Z,{onClick:function(){return X(e.uuid)}})})}),T.includes("fill")&&e.isUserAuthorizedToFillAssessment&&(0,y.jsx)("span",{className:"icon",children:(0,y.jsx)(f.Z,{title:"Fill Assessment",children:(0,y.jsx)(i.Z,{onClick:function(){return s=e.uuid,void $(s);var s}})})})]})]},null===e||void 0===e?void 0:e._id)}))}):(0,y.jsx)(d.Z,{children:(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:"10",children:(0,y.jsx)("div",{className:"no-records-blk",children:(0,y.jsx)("h2",{className:"heading2",children:"No records available"})})})})})]})})})}),(null===n||void 0===n?void 0:n.length)>0&&(0,y.jsxs)("div",{className:"table-footer flex-between",children:[(0,y.jsxs)("div",{className:"table-footer-left",children:[(0,y.jsxs)("div",{className:"per-page-blk",children:[(0,y.jsx)("span",{className:"per-page-txt",children:"Records"}),(0,y.jsx)("div",{className:"per-page-dropdown",children:(0,y.jsx)("div",{className:"per-page-select-field",children:(0,y.jsxs)(j.Z,{value:C,onChange:function(e){S(e)},children:[(0,y.jsx)(b.Z,{value:"5",children:"05"}),(0,y.jsx)(b.Z,{value:"10",selected:!0,children:"10"}),(0,y.jsx)(b.Z,{value:"20",children:"20"})]})})})]}),(0,y.jsxs)("div",{className:"show-entries-txt",children:["showing ",(x-1)*C+1,"-",(x-1)*C+(null===n||void 0===n?void 0:n.length)," out of ",P]})]}),(0,y.jsx)("div",{className:"table-footer-right",children:(0,y.jsx)(Z.Z,{spacing:2,className:"pagination-blk",children:(0,y.jsx)(k.Z,{page:x,count:Math.ceil(P/C),onChange:function(e,s){A(s)},variant:"outlined",shape:"rounded"})})})]})]})}},7659:function(e,s,n){n.d(s,{Z:function(){return o}});var t=n(2131),i=n(5130),r=n(2791),a=n(5985),l=(n(5462),n(184));var o=function(e){e.titleMessage;var s=e.descriptionMessage,n=e.messageType,o=e.myRef,c=(e.key,function(){(0,a.Am)(d,{position:"bottom-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,toastId:"toastId"})}),d=function(){return(0,l.jsxs)("div",{className:"toaster-blk flex-start ".concat("success"===n&&"toaster-blk-success"),children:[(0,l.jsx)("div",{className:"toaster-left ".concat("success"===n&&"toaster-left-success"),children:(0,l.jsxs)("div",{className:"toaster-icon",children:["success"===n&&(0,l.jsx)(t.Z,{}),"error"===n&&(0,l.jsx)(i.Z,{})]})}),(0,l.jsx)("div",{className:"toaster-right",children:(0,l.jsx)("p",{children:s})})]})};return(0,r.useEffect)((function(){o.current=c}),[c,o]),(0,l.jsxs)("div",{className:"toaster-sect",children:[(0,l.jsx)("button",{style:{display:"none"},children:"Show Toast !"}),(0,l.jsx)(a.Ix,{className:"toaster-wrap ".concat("success"===n&&"toaster-wrap-success"," ")})]})}},2820:function(e,s,n){var t=n(885),i=n(2791);s.Z=function(e){var s=(0,i.useState)(e),n=(0,t.Z)(s,2),r=n[0],a=n[1],l=(0,i.useRef)([]);(0,i.useEffect)((function(){l.current.forEach((function(e){return e(r)})),l.current=[]}),[r]);return[r,function(e,s){a(e),s&&"function"===typeof s&&l.current.push(s)}]}},1605:function(){}}]);
//# sourceMappingURL=9860.249bf5a0.chunk.js.map