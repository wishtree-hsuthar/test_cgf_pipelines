"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[3699],{6091:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});a(4942),a(1413);var n=a(885),s=a(8821),r=a(2791),d=a(7689),i=a(4917),l=a(6218),o=a(7659),c=a(7806),u=a(7340),g=a(8460),f=a(2820),m=a(1260),p=a(4165),b=a(5861),v=a(2982),h=a(4677),x=a(9106),Z=a(8386),C=a(184),S=[{id:"name",disablePadding:!1,label:"Name"},{id:"email",disablePadding:!1,label:"Email"},{id:"role",disablePadding:!1,label:"Role"},{id:"createdAt",disablePadding:!1,label:"Onboarded On"},{id:"status",disablePadding:!1,label:"Status"}];var w=function(e){var t=e.page,a=e.setPage,s=e.makeApiCall,c=e.setMakeApiCall,u=e.search,g=e.filters,m=(e.selectedRoles,(0,d.s0)()),w=r.useState(10),y=(0,n.Z)(w,2),A=y[0],k=y[1],j=r.useState("desc"),P=(0,n.Z)(j,2),Y=P[0],R=P[1],M=r.useState(""),T=(0,n.Z)(M,2),N=T[0],E=T[1],D=r.useState([]),F=(0,n.Z)(D,2),_=F[0],B=F[1],O=r.useState(0),I=(0,n.Z)(O,2),G=I[0],H=I[1],U=(0,r.useState)([]),L=(0,n.Z)(U,2),K=L[0],z=L[1],W=(0,r.useState)(!0),V=(0,n.Z)(W,2),q=V[0],J=V[1],Q=(0,r.useState)(null),X=(0,n.Z)(Q,2),$=X[0],ee=(X[1],r.useRef()),te=(0,f.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),ae=(0,n.Z)(te,2),ne=ae[0],se=ae[1],re=function(e){var t=["_id","name","email","role","createdAt","isActive"];i.Y.debug("data before update----",e);var a=e;a.forEach((function(e){var a;delete e.updatedAt,delete e.updatedBy,delete e.createdBy,delete e.description,delete e.countryCode,delete e.isDeleted,delete e.isReplaced,delete e.replacedUsers,delete e.__v,delete e.password,delete e.roleId,delete e.salt,delete e.uuid,delete e.phoneNumber,delete e.isCGFAdmin,e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),e.role=null===(a=e.subRole[0])||void 0===a?void 0:a.name,delete e.subRole,delete e.subRoleId,t.forEach((function(t){var a=e[t];delete e[t],e[t]=a}))})),i.Y.debug("data in updaterecords method",a),B((0,v.Z)(a))},de=function(){i.Y.debug("filters in onboarded table----",g),i.Y.debug("Search",u);var e="".concat(l.mc,"/list/?page=").concat(t,"&size=").concat(A,"&orderBy=").concat(N,"&order=").concat(Y);return u&&(e+="&search=".concat(u)),e},ie=function(){var e=(0,b.Z)((0,p.Z)().mark((function e(){var t,a,n,s,r,d,l,o,c,u,g,f=arguments;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(f.length>0&&void 0!==f[0])||f[0],t=f.length>1&&void 0!==f[1]?f[1]:new AbortController,e.prev=2,a=de(),J(!0),e.next=7,h.H.get(a,{signal:t.signal});case 7:n=e.sent,H(parseInt(n.headers["x-total-count"])),i.Y.debug("Response from sub admin api get",n),re((0,v.Z)(n.data)),J(!1),e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:i.Y.debug("Error from getSubAdmin-------",e.t0),401==(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status)?(se({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return ee.current()})),setTimeout((function(){m("/login")}),3e3)):403===(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.status)?(se({titleMessage:"Oops!",descriptionMessage:null!==e.t0&&void 0!==e.t0&&null!==(d=e.t0.response)&&void 0!==d&&null!==(l=d.data)&&void 0!==l&&l.message?null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return ee.current()})),setTimeout((function(){m("/home")}),3e3)):se({titleMessage:"Oops!",descriptionMessage:null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u||null===(g=u.data)||void 0===g?void 0:g.message,messageType:"error"},(function(){return ee.current()})),J(!1);case 21:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){var e=!0,t=new AbortController;return s&&ie(e,t),i.Y.debug("makeApiCall",s),i.Y.debug("inside use Effect"),function(){e=!1,clearTimeout($),t.abort()}}),[t,A,N,Y,g,s,c,$]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.Z,{myRef:ee,titleMessage:ne.titleMessage,descriptionMessage:ne.descriptionMessage,messageType:ne.messageType}),q?(0,C.jsx)(Z.Z,{}):(0,C.jsx)(x.Z,{tableHead:S,records:_,handleChangePage1:function(e){a(e)},handleChangeRowsPerPage1:function(e){k(parseInt(e.target.value,10)),a(1)},page:t,rowsPerPage:A,totalRecords:G,orderBy:N,onClickVisibilityIconHandler1:function(e){return i.Y.debug("id",e),m("view-cgf-admin/".concat(e))},order:Y,setOrder:R,setOrderBy:E,setCheckBoxes:!1,setSelected:z,selected:K,onRowClick:!0})]})},y=a(1300),A=a(5736),k=[{id:"name",disablePadding:!1,label:"Name"},{id:"email",disablePadding:!1,label:"Email"},{id:"role",disablePadding:!1,label:"Role"},{id:"createdAt",disablePadding:!1,label:"Created At"},{id:"action",disablePadding:!1,label:"Actions"}];var j=function(e){var t,a=e.makeApiCall,s=e.setMakeApiCall,o=e.search,c=e.filters,u=e.pageForPendingTabCGFAdmin,g=e.setPageForPendingTabCGFAdmin,f=e.myRef,m=(e.pendingCgftoasterDetails,e.setPendingCgfToasterDetails),S=(0,r.useState)(!1),w=(0,n.Z)(S,2),j=w[0],P=w[1],Y=(0,r.useState)(""),R=(0,n.Z)(Y,2),M=R[0],T=R[1],N=(0,r.useState)([]),E=(0,n.Z)(N,2),D=E[0],F=E[1],_=(0,r.useState)(!0),B=(0,n.Z)(_,2),O=B[0],I=B[1],G=(0,r.useState)(!1),H=(0,n.Z)(G,2),U=(H[0],H[1],(0,r.useState)(null)),L=(0,n.Z)(U,2),K=L[0],z=(L[1],(0,d.s0)()),W=r.useState(10),V=(0,n.Z)(W,2),q=V[0],J=V[1],Q=r.useState("desc"),X=(0,n.Z)(Q,2),$=X[0],ee=X[1],te=r.useState("createdAt"),ae=(0,n.Z)(te,2),ne=ae[0],se=ae[1],re=r.useState([]),de=(0,n.Z)(re,2),ie=de[0],le=de[1],oe=r.useState(0),ce=(0,n.Z)(oe,2),ue=ce[0],ge=ce[1],fe=["_id","name","email","role","createdAt"],me=function(e){i.Y.debug("data before update----",e);var t=e;t.forEach((function(e){var t;delete e.updatedAt,delete e.data.description,delete e.data.countryCode,delete e.data.isDeleted,delete e.data.isReplaced,delete e.__v,delete e.data.password,delete e.data.roleId,delete e.data.salt,delete e.data.uuid,delete e.data.phoneNumber,delete e.token,delete e.tokenExpiry,delete e.tokenType,e.createdAt=new Date(e.createdAt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),e.role=null===(t=e.subRole[0])||void 0===t?void 0:t.name,e.name=e.data.name,e.email=e.data.email,delete e.createdBy,delete e.subRole,delete e.data,delete e.memberData,fe.forEach((function(t){var a=e[t];delete e[t],e[t]=a}))})),i.Y.debug("data in updaterecords method in pending method",t),le((0,v.Z)(t))},pe=function(){var e=(0,b.Z)((0,p.Z)().mark((function e(t){var a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.Y.debug("id for delete",t),P(!0),T(t),i.Y.debug("records: ",ie),a=ie.filter((function(e){return(null===e||void 0===e?void 0:e._id)===t})),i.Y.debug("Withdraw user",a),F((0,v.Z)(a));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=(0,b.Z)((0,p.Z)().mark((function e(){var t,a;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.H.delete(l.MF+M);case 3:200==(t=e.sent).status&&(i.Y.debug("user invite withdrawn successfully"),m({titleMessage:"Success",descriptionMessage:null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message,messageType:"success"},(function(){return f.current()})),he(),P(!1)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),(0,A.K)(e.t0,m,f,z),i.Y.debug("error from withdrawInvite id",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ve=function(){i.Y.debug("filters",c),i.Y.debug("Search",o);var e="".concat(l.mc,"/pending/list?page=").concat(u,"&size=").concat(q,"&orderBy=").concat(ne,"&order=").concat($);return o&&(e+="&search=".concat(o)),e},he=function(){var e=(0,b.Z)((0,p.Z)().mark((function e(){var t,a,n,s=arguments;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(s.length>0&&void 0!==s[0])||s[0],t=s.length>1&&void 0!==s[1]?s[1]:new AbortController,e.prev=2,a=ve(),I(!0),e.next=7,h.H.get(a,{signal:t.signal});case 7:n=e.sent,ge(parseInt(n.headers["x-total-count"])),i.Y.debug("Response from sub admin api get for pending tab table",n),me(n.data),I(!1),e.next=20;break;case 14:if(e.prev=14,e.t0=e.catch(2),"ERR_CANCELED"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=18;break}return e.abrupt("return");case 18:(0,A.K)(e.t0,m,f,z),i.Y.debug("Error from getSubAdmin pending tab table-------",e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){var e=!0,t=new AbortController;return a&&he(e,t),i.Y.debug("makeApiCall",a),i.Y.debug("inside use Effect"),function(){e=!1,clearTimeout(K),t.abort()}}),[c,a,s,K,u,q,ne,$]),i.Y.debug("makeApiCall outside UseEffect ",a),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(y.Z,{title:(0,C.jsxs)("p",{children:['Withdraw "',D&&"".concat(null===(t=D[0])||void 0===t?void 0:t.name),"'s\" Invitation"]}),info1:(0,C.jsx)("p",{children:"On withdrawal, CGF admin will not be able to verify their account."}),info2:(0,C.jsx)("p",{children:"Do you want to withdraw the invitation?"}),primaryButtonText:"Yes",secondaryButtonText:"No",onPrimaryModalButtonClickHandler:function(){be()},onSecondaryModalButtonClickHandler:function(){P(!1)},openModal:j,setOpenModal:P}),O?(0,C.jsx)(Z.Z,{}):(0,C.jsx)(x.Z,{tableHead:k,records:ie,handleChangePage1:function(e){g(e)},handleChangeRowsPerPage1:function(e){i.Y.debug("rows per page",e),J(parseInt(e.target.value,10)),g(1)},page:u,rowsPerPage:q,totalRecords:ue,orderBy:ne,icons:["delete"],onClickDeleteIconHandler1:pe,order:$,setOrder:ee,setOrderBy:se,setCheckBoxes:!1,onRowClick:!1})]})};var P=function(){(0,m.j)("CGF Admins");var e=r.useState(0),t=(0,n.Z)(e,2),a=t[0],p=t[1],b=r.useRef(),v=(0,f.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),h=(0,n.Z)(v,2),x=h[0],Z=h[1],S=(0,r.useState)(""),y=(0,n.Z)(S,2),A=(y[0],y[1],(0,r.useState)(!1)),k=(0,n.Z)(A,2),P=(k[0],k[1],(0,r.useState)(null)),Y=(0,n.Z)(P,2),R=Y[0],M=Y[1],T=(0,r.useState)(!0),N=(0,n.Z)(T,2),E=N[0],D=N[1],F=(0,d.s0)(),_=(0,r.useState)(""),B=(0,n.Z)(_,2),O=B[0],I=B[1],G=(0,r.useState)({status:"all",role:""}),H=(0,n.Z)(G,2),U=H[0],L=(H[1],r.useState(1)),K=(0,n.Z)(L,2),z=(K[0],K[1],r.useState(1)),W=(0,n.Z)(z,2),V=W[0],q=W[1],J=r.useState(1),Q=(0,n.Z)(J,2),X=Q[0],$=Q[1],ee=r.useState(10),te=(0,n.Z)(ee,2),ae=(te[0],te[1],r.useState("desc")),ne=(0,n.Z)(ae,2),se=(ne[0],ne[1],r.useState("createdAt")),re=(0,n.Z)(se,2),de=(re[0],re[1],r.useState([])),ie=(0,n.Z)(de,2),le=(ie[0],ie[1],r.useState(0)),oe=(0,n.Z)(le,2);oe[0],oe[1];(0,r.useEffect)((function(){var e=new AbortController;return i.Y.debug("makeApiCall",E),i.Y.debug("inside use Effect"),function(){!1,clearTimeout(R),e.abort()}}),[]),i.Y.debug("makeApiCall outside UseEffect ",E);var ce=(0,r.useState)([]),ue=(0,n.Z)(ce,2),ge=ue[0],fe=(ue[1],(0,r.useState)("")),me=(0,n.Z)(fe,2),pe=me[0],be=(me[1],(0,r.useState)("")),ve=(0,n.Z)(be,2),he=ve[0];ve[1];i.Y.debug("selected roles---",ge),i.Y.debug("Selected status filter---",pe),i.Y.debug("Search text---",he);return(0,C.jsxs)("div",{className:"page-wrapper",children:[(0,C.jsx)(o.Z,{myRef:b,titleMessage:x.titleMessage,descriptionMessage:x.descriptionMessage,messageType:x.messageType}),(0,C.jsx)("section",{children:(0,C.jsxs)("div",{className:"container",children:[(0,C.jsx)("div",{className:"member-filter-sect"}),(0,C.jsxs)("div",{className:"form-header member-form-header flex-between",children:[(0,C.jsx)("div",{className:"form-header-left-blk flex-start",children:(0,C.jsx)("h2",{className:"heading2",children:"CGF Admins"})}),(0,C.jsxs)("div",{className:"form-header-right-txt",children:[0==a&&(0,C.jsxs)("div",{className:"tertiary-btn-blk mr-20",onClick:function(){return(0,c.j)("CGF Admins",Z,!1,b,l.A3,F)},children:[(0,C.jsx)("span",{className:"download-icon",children:(0,C.jsx)(s.Z,{})}),"Download"]}),0===a&&(0,C.jsx)("div",{className:"form-btn",children:(0,C.jsx)("button",{onClick:function(){return F("/users/cgf-admin/add-cgf-admin")},className:"primary-button add-button",children:"Add CGF Admin"})})]})]}),(0,C.jsxs)("div",{className:"member-filter-wrap flex-between",children:[(0,C.jsx)("div",{className:"member-tab-left",children:(0,C.jsx)(u.Z,{value:a,handleChange:function(e,t){p(t)}})}),(0,C.jsx)("div",{className:"member-filter-left",children:(0,C.jsxs)("div",{className:"searchbar",children:[(0,C.jsx)("input",{type:"text",placeholder:"Search",onKeyDown:function(e){"Enter"===e.key&&(D(!0),q(1),$(1))},onChange:function(e){return function(e){i.Y.debug("event",e.key),R&&clearTimeout(R),D(!1),i.Y.debug("search values",e.target.value),I(e.target.value),M(setTimeout((function(){D(!0),q(1),$(1)}),1e3))}(e)},name:"search"}),(0,C.jsx)("button",{type:"submit",children:(0,C.jsx)("i",{className:"fa fa-search"})})]})}),(0,C.jsx)("div",{className:"member-filter-right"})]}),(0,C.jsxs)("div",{className:"member-info-wrapper table-content-wrap table-footer-btm-space",children:[(0,C.jsx)(g.x,{value:a,index:0,children:0===a&&(0,C.jsx)(w,{page:X,setPage:$,makeApiCall:E,setMakeApiCall:D,search:O,filters:U,selectedRoles:ge})}),(0,C.jsx)(g.x,{value:a,index:1,children:(0,C.jsx)(j,{makeApiCall:E,setMakeApiCall:D,search:O,filters:U,myRef:b,selectedRoles:ge,pageForPendingTabCGFAdmin:V,setPageForPendingTabCGFAdmin:q,pendingCgftoasterDetails:x,setPendingCgfToasterDetails:Z})})]})]})})]})}}}]);
//# sourceMappingURL=3699.4a587a2d.chunk.js.map