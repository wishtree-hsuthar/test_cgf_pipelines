"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5248],{25248:(e,l,a)=>{a.r(l),a.d(l,{default:()=>P});var s=a(97275),r=a(88970),t=a(85523),n=a(61419),i=a(697),o=a(35527),d=a(39281),c=a(79836),m=a(53382),u=a(35855),h=a(53994),p=a(94454),g=a(72791),v=a(61134),b=a(57689),x=a(11087),f=a(55294),j=a(28386),Z=a(14917),N=a(27659),w=(a(71605),a(12820)),y=a(76218),k=a(1260),M=a(14227),C=a(45736),S=a(80184);const P=()=>{(0,k.j)("Add Role");const e=(0,b.s0)(),l=g.useRef(),[a,P]=(0,w.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"});let T=[],R={};const L={roleName:"",status:"active",description:""},E={roleName:{required:"Enter the role name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},description:{required:"Enter the description",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required"}},[A,q]=(0,g.useState)({...R}),[D,F]=(0,g.useState)(!1),[O,_]=(0,g.useState)(!1),I=e=>{e.map(((e,l)=>T[l]={moduleName:e.name,moduleId:e._id})),T.forEach((e=>R[e.moduleId]={name:e.moduleName,fill:!1,list:!1,add:!1,edit:!1,view:!1,delete:!1,all:!1})),q({...R})},{control:V,reset:G,setValue:H,handleSubmit:Y}=(0,v.cI)({defaultValues:L}),B=async a=>{Z.Y.info("Add role - submitCall handler");try{let e=JSON.parse(JSON.stringify(A));if(Object.keys(e).forEach((l=>{delete e[l].all,delete e[l].name})),d=e,!Object.values(d).some((e=>Object.values(e).some((e=>e)))))return void P({titleMessage:"Hurray!",descriptionMessage:"Select atleast 1 privilege",messageType:"error"},(()=>l.current()));F(!0),_(!0);const s=await f.Z.post(y.Yn+"roles",{name:a.roleName,description:a.description,isActive:"active"===a.status,privileges:e});if(201==s.status)return _(!1),F(!1),P({titleMessage:"Hurray!",descriptionMessage:s.data.message,messageType:"success"},(()=>l.current())),G({...L}),Q(),!0}catch(c){var s,r;if(_(!1),F(!1),401==(null===c||void 0===c||null===(s=c.response)||void 0===s?void 0:s.status))P({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(()=>l.current())),setTimeout((()=>{e("/login")}),3e3);else{if(403!==(null===c||void 0===c||null===(r=c.response)||void 0===r?void 0:r.status))return(e=>{var a,s;Z.Y.info("Add role - setErrorToaster handler"),P({titleMessage:"Error",descriptionMessage:null!==e&&void 0!==e&&null!==(a=e.response)&&void 0!==a&&null!==(s=a.data)&&void 0!==s&&s.message&&"string"===typeof e.response.data.message?e.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>l.current()))})(c),!1;var t,n,i,o;P({titleMessage:"Error",descriptionMessage:null!==c&&void 0!==c&&null!==(t=c.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.message?null===c||void 0===c||null===(i=c.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>l.current())),setTimeout((()=>{e("/home")}),3e3)}}var d},Q=async()=>{try{const{data:e}=await f.Z.get(y.Yn+"system-modules");I([...e])}catch(a){if("ERR_CANCELED"===(null===a||void 0===a?void 0:a.code))return;(0,C.K)(a,P,l,e)}};return(0,g.useEffect)((()=>{let e=!0;const l=new AbortController;return e&&Q(),()=>{e=!1,l.abort()}}),[]),(0,S.jsxs)("div",{className:"page-wrapper",children:[(0,S.jsx)(N.Z,{myRef:l,titleMessage:a.titleMessage,descriptionMessage:a.descriptionMessage,messageType:a.messageType}),(0,S.jsx)("div",{className:"breadcrumb-wrapper",children:(0,S.jsx)("div",{className:"container",children:(0,S.jsxs)("ul",{className:"breadcrumb",children:[(0,S.jsx)("li",{children:(0,S.jsx)(x.rU,{to:"/roles",children:"Roles"})}),(0,S.jsx)("li",{children:"Add Role"})]})})}),(0,S.jsx)("section",{children:(0,S.jsxs)("div",{className:"container",children:[(0,S.jsxs)("div",{className:"form-header flex-between",children:[(0,S.jsx)("h2",{className:"heading2",children:"Add Role"}),(0,S.jsx)("div",{className:"form-header-right-txt",children:(0,S.jsxs)("div",{className:"tertiary-btn-blk",onClick:Y((async e=>{B(e)})),children:[(0,S.jsx)("span",{className:"addmore-icon",children:(0,S.jsx)("i",{className:"fa fa-plus"})}),(0,S.jsx)("span",{className:"addmore-txt",children:"Save & Add More"})]})})]}),(0,S.jsx)("form",{onSubmit:Y((async l=>{await B(l)&&setTimeout((()=>e("/roles")),3e3)})),children:O?(0,S.jsx)(j.Z,{}):(0,S.jsxs)("div",{className:"card-wrapper",children:[(0,S.jsxs)("div",{className:"card-blk flex-between",children:[(0,S.jsx)("div",{className:"card-form-field",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsxs)("label",{htmlFor:"roleName",children:["Role Name ",(0,S.jsx)("span",{className:"mandatory",children:"*"})]}),(0,S.jsx)(v.Qr,{name:"roleName",rules:{required:!0,maxLength:50,minLength:3,pattern:/^[a-zA-Z][a-zA-Z ]*$/},control:V,render:e=>{let{field:l,fieldState:{error:a}}=e;return(0,S.jsx)(s.Z,{...l,onBlur:e=>H("roleName",e.target.value.trim()),inputProps:{maxLength:50},className:"input-field ".concat(a&&"input-error"),id:"outlined-basic",placeholder:"Enter role name",helperText:a?E.roleName[a.type]:" ",variant:"outlined"})}})]})}),(0,S.jsx)("div",{className:"card-form-field",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"status",children:"Status"}),(0,S.jsx)("div",{className:"radio-btn-field",children:(0,S.jsx)(v.Qr,{name:"status",control:V,render:e=>{let{field:l}=e;return(0,S.jsxs)(r.Z,{...l,"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",className:"radio-btn",children:[(0,S.jsx)(t.Z,{value:"active",control:(0,S.jsx)(n.Z,{}),label:"Active"}),(0,S.jsx)(t.Z,{value:"inactive",control:(0,S.jsx)(n.Z,{}),label:"Inactive"})]})}})})]})}),(0,S.jsx)("div",{className:"card-form-field fullwidth",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsxs)("label",{htmlFor:"addrole-description",children:["Description ",(0,S.jsx)("span",{className:"mandatory",children:"*"})]}),(0,S.jsx)(v.Qr,{name:"description",control:V,rules:{required:!0,maxLength:500,minLength:3},render:e=>{let{field:l,fieldState:{error:a}}=e;return(0,S.jsx)(s.Z,{multiline:!0,...l,onBlur:e=>H("description",e.target.value.trim()),inputProps:{maxLength:500},className:"input-textarea ".concat(a&&"input-textarea-error"),id:"outlined-basic",placeholder:"Enter description",helperText:a?E.description[a.type]:" ",variant:"outlined"})}})]})})]}),(0,S.jsx)(i.Z,{sx:{width:"100%"},className:"table-blk table-blk-role",children:(0,S.jsx)(o.Z,{sx:{width:"100%"},children:(0,S.jsx)(d.Z,{children:(0,S.jsxs)(c.Z,{sx:{minWidth:750},children:[(0,S.jsx)(M.Z,{}),(0,S.jsx)(m.Z,{children:Object.keys(A).map(((e,l)=>(0,S.jsxs)(u.Z,{hover:!0,children:[(0,S.jsx)(h.Z,{children:A[e].name}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Assessment"===A[e].name&&(0,S.jsx)(p.Z,{disabled:"Assessment"!=A[e].name,className:"table-checkbox",checked:A[e].fill,onChange:()=>q((l=>({...l,[e]:{...l[e],fill:!l[e].fill,list:l[e].list||!l[e].fill,view:l[e].view||!l[e].fill,all:!l[e].fill&&l[e].add&&l[e].edit&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==A[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:A[e].list,onChange:()=>q((l=>({...l,[e]:{...l[e],list:!l[e].list,view:l[e].view&&!l[e].list||!1,edit:l[e].edit&&!l[e].list||!1,delete:l[e].delete&&!l[e].list||!1,add:l[e].add&&!l[e].list||!1,fill:l[e].fill&&!l[e].list||!1,all:!l[e].list&&l[e].add&&l[e].edit&&l[e].view&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==A[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:A[e].add,onChange:()=>q((l=>({...l,[e]:{...l[e],add:!l[e].add,list:l[e].list||!l[e].add,view:l[e].view||!l[e].add,all:!l[e].add&&l[e].edit&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==A[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:A[e].edit,onChange:()=>q((l=>({...l,[e]:{...l[e],edit:!l[e].edit,list:l[e].list||!l[e].edit,view:l[e].view||!l[e].edit,all:l[e].add&&!l[e].edit&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:(0,S.jsx)(p.Z,{className:"table-checkbox",checked:A[e].view,onChange:()=>q((l=>({...l,[e]:{...l[e],view:!l[e].view,list:l[e].list||!l[e].view,edit:l[e].edit&&!l[e].view||!1,delete:l[e].delete&&!l[e].view||!1,fill:l[e].fill&&!l[e].view||!1,all:l[e].add&&l[e].edit&&!l[e].view&&l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==A[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:A[e].delete,onChange:()=>q((l=>({...l,[e]:{...l[e],delete:!l[e].delete,list:l[e].list||!l[e].delete,edit:l[e].edit||!l[e].delete,view:l[e].view||!l[e].delete,all:l[e].add&&!l[e].delete}})))})}),(0,S.jsx)(h.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==A[e].name&&(0,S.jsx)(p.Z,{className:"table-checkbox",checked:A[e].all,onChange:()=>q((l=>({...l,[e]:{...l[e],all:!l[e].all,list:!l[e].all,view:!l[e].all,add:!l[e].all,edit:!l[e].all,delete:!l[e].all,fill:"Assessment"===A[e].name&&!l[e].all}})))})})]},e)))})]})})})}),(0,S.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,S.jsx)("button",{type:"reset",style:{marginTop:"20px"},className:"secondary-button mr-10",onClick:()=>(G({defaultValues:L}),e("/roles")),children:"Cancel"}),(0,S.jsx)("button",{type:"submit",className:"primary-button",style:{marginTop:"20px"},disabled:D,children:"Save"})]})]})})]})})]})}},14227:(e,l,a)=>{a.d(l,{Z:()=>i});var s=a(56890),r=a(35855),t=a(53994),n=(a(72791),a(80184));const i=()=>(0,n.jsx)(s.Z,{children:(0,n.jsxs)(r.Z,{children:[(0,n.jsx)(t.Z,{align:"left",className:"table-header",width:"16%",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Modules"})}),(0,n.jsx)(t.Z,{className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Fill"})}),(0,n.jsx)(t.Z,{className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"List"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Add"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Edit"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"View"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"Delete"})}),(0,n.jsx)(t.Z,{align:"center",className:"table-header",children:(0,n.jsx)("span",{className:"sorted-blk",children:"All"})})]})})},45736:(e,l,a)=>{a.d(l,{K:()=>s});const s=async function(e,l,a,s,r){var t,n;let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if("ERR_CANCELED"===(null===e||void 0===e?void 0:e.code))return null;if(401==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status))l({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again!",messageType:"error"},(()=>a.current())),setTimeout((()=>{s("/login")}),3e3);else if(403===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)){var o,d,c,m;l({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(d=o.data)&&void 0!==d&&d.message?null===e||void 0===e||null===(c=e.response)||void 0===c||null===(m=c.data)||void 0===m?void 0:m.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>a.current())),setTimeout((()=>{s("/home")}),3e3)}else{var u,h,p,g;console.log("error - ",e),l({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(u=e.response)&&void 0!==u&&null!==(h=u.data)&&void 0!==h&&h.message?null===e||void 0===e||null===(p=e.response)||void 0===p||null===(g=p.data)||void 0===g?void 0:g.message:null!==e&&void 0!==e&&e.message?"File not uploaded yet":"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>a.current())),r&&setTimeout((()=>{s(r,{state:i})}),3e3)}}},1260:(e,l,a)=>{a.d(l,{j:()=>r});var s=a(72791);const r=e=>((0,s.useEffect)((()=>{document.title="HRDD System - ".concat(e)}),[e]),null)},85523:(e,l,a)=>{a.d(l,{Z:()=>w});var s=a(63366),r=a(87462),t=a(72791),n=a(63733),i=a(94419),o=a(52930),d=a(53767),c=a(20890),m=a(14036),u=a(66934),h=a(31402),p=a(75878),g=a(21217);function v(e){return(0,g.Z)("MuiFormControlLabel",e)}const b=(0,p.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);var x=a(76147),f=a(80184);const j=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Z=(0,u.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,l)=>{const{ownerState:a}=e;return[{["& .".concat(b.label)]:l.label},l.root,l["labelPlacement".concat((0,m.Z)(a.labelPlacement))]]}})((e=>{let{theme:l,ownerState:a}=e;return(0,r.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(b.disabled)]:{cursor:"default"}},"start"===a.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===a.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===a.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(b.label)]:{["&.".concat(b.disabled)]:{color:(l.vars||l).palette.text.disabled}}})})),N=(0,u.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,l)=>l.asterisk})((e=>{let{theme:l}=e;return{["&.".concat(b.error)]:{color:(l.vars||l).palette.error.main}}})),w=t.forwardRef((function(e,l){var a,u;const p=(0,h.Z)({props:e,name:"MuiFormControlLabel"}),{className:g,componentsProps:b={},control:w,disabled:y,disableTypography:k,label:M,labelPlacement:C="end",required:S,slotProps:P={}}=p,T=(0,s.Z)(p,j),R=(0,o.Z)(),L=null!=(a=null!=y?y:w.props.disabled)?a:null==R?void 0:R.disabled,E=null!=S?S:w.props.required,A={disabled:L,required:E};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof w.props[e]&&"undefined"!==typeof p[e]&&(A[e]=p[e])}));const q=(0,x.Z)({props:p,muiFormControl:R,states:["error"]}),D=(0,r.Z)({},p,{disabled:L,labelPlacement:C,required:E,error:q.error}),F=(e=>{const{classes:l,disabled:a,labelPlacement:s,error:r,required:t}=e,n={root:["root",a&&"disabled","labelPlacement".concat((0,m.Z)(s)),r&&"error",t&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",r&&"error"]};return(0,i.Z)(n,v,l)})(D),O=null!=(u=P.typography)?u:b.typography;let _=M;return null==_||_.type===c.Z||k||(_=(0,f.jsx)(c.Z,(0,r.Z)({component:"span"},O,{className:(0,n.Z)(F.label,null==O?void 0:O.className),children:_}))),(0,f.jsxs)(Z,(0,r.Z)({className:(0,n.Z)(F.root,g),ownerState:D,ref:l},T,{children:[t.cloneElement(w,A),E?(0,f.jsxs)(d.Z,{display:"block",children:[_,(0,f.jsxs)(N,{ownerState:D,"aria-hidden":!0,className:F.asterisk,children:["\u2009","*"]})]}):_]}))}))},79012:(e,l,a)=>{a.d(l,{Z:()=>x});var s=a(63366),r=a(87462),t=a(72791),n=a(63733),i=a(94419),o=a(66934),d=a(31402),c=a(75878),m=a(21217);function u(e){return(0,m.Z)("MuiFormGroup",e)}(0,c.Z)("MuiFormGroup",["root","row","error"]);var h=a(52930),p=a(76147),g=a(80184);const v=["className","row"],b=(0,o.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,l)=>{const{ownerState:a}=e;return[l.root,a.row&&l.row]}})((e=>{let{ownerState:l}=e;return(0,r.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},l.row&&{flexDirection:"row"})})),x=t.forwardRef((function(e,l){const a=(0,d.Z)({props:e,name:"MuiFormGroup"}),{className:t,row:o=!1}=a,c=(0,s.Z)(a,v),m=(0,h.Z)(),x=(0,p.Z)({props:a,muiFormControl:m,states:["error"]}),f=(0,r.Z)({},a,{row:o,error:x.error}),j=(e=>{const{classes:l,row:a,error:s}=e,r={root:["root",a&&"row",s&&"error"]};return(0,i.Z)(r,u,l)})(f);return(0,g.jsx)(b,(0,r.Z)({className:(0,n.Z)(j.root,t),ownerState:f,ref:l},c))}))},88970:(e,l,a)=>{a.d(l,{Z:()=>h});var s=a(87462),r=a(63366),t=a(72791),n=a(79012),i=a(42071),o=a(98278),d=a(18672),c=a(67384),m=a(80184);const u=["actions","children","defaultValue","name","onChange","value"],h=t.forwardRef((function(e,l){const{actions:a,children:h,defaultValue:p,name:g,onChange:v,value:b}=e,x=(0,r.Z)(e,u),f=t.useRef(null),[j,Z]=(0,o.Z)({controlled:b,default:p,name:"RadioGroup"});t.useImperativeHandle(a,(()=>({focus:()=>{let e=f.current.querySelector("input:not(:disabled):checked");e||(e=f.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const N=(0,i.Z)(l,f),w=(0,c.Z)(g),y=t.useMemo((()=>({name:w,onChange(e){Z(e.target.value),v&&v(e,e.target.value)},value:j})),[w,v,Z,j]);return(0,m.jsx)(d.Z.Provider,{value:y,children:(0,m.jsx)(n.Z,(0,s.Z)({role:"radiogroup",ref:N},x,{children:h}))})}))}}]);
//# sourceMappingURL=5248.11dbe389.chunk.js.map