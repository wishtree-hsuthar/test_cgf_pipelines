"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[8177],{8617:function(e,n,i){i.r(n),i.d(n,{default:function(){return V}});var t=i(4165),s=i(1413),r=i(5861),o=i(885),a=i(2791),l=i(6015),u=i(4293),d=i(5814),c=i(166),v=i(8588),p=i(1346),h=i(9407),f=i(7265),m=i(2900),x=i(6321),g=i(5473),b=i(8723),j=i(4917),w=i(7792),y=i(6571),Z=i(2104),N=i(7954),k=i(184),q={PaperProps:{style:{maxHeight:168}},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"center",horizontal:"center"}},T=function(e){var n=e.question,i=n.questionTitle,t="singleTextbox"===n.inputType?(0,k.jsx)(v.Z,{placeholder:"Enter text here",className:"input-field",InputProps:{readOnly:!0}}):"textarea"===n.inputType?(0,k.jsx)(v.Z,{multiline:!0,InputProps:{readOnly:!0},className:"input-textarea",placeholder:"Enter text here",variant:"outlined"}):"dropdown"===n.inputType?(0,k.jsx)("div",{className:"form-group",children:(0,k.jsx)("div",{className:"select-field",children:(0,k.jsx)(p.Z,{IconComponent:function(e){return(0,k.jsx)(Z.Z,(0,s.Z)({},e))},value:n.questionTitle,MenuProps:q,renderValue:function(){return(0,k.jsx)("div",{className:"select-placeholder",children:"Choose dropdown value"})},children:n.options.map((function(e){return(0,k.jsx)(h.Z,{value:e,disabled:!0,children:e},e)}))})})}):"radioGroup"===n.inputType?(0,k.jsx)("div",{className:"radio-btn-field radio-btn-half-blk",children:(0,k.jsx)(f.Z,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"Active",name:"radio-buttons-group",className:"radio-btn radio-btn-vertical",children:n.options.map((function(e){return(0,k.jsx)(m.Z,{value:e,control:(0,k.jsx)(x.Z,{disabled:!0}),label:e},e)}))})}):"checkbox"===n.inputType?(0,k.jsx)("div",{className:"checkbox-with-labelblk checkbox-btn-half-blk",children:n.options.map((function(e){return(0,k.jsx)(m.Z,{className:"checkbox-with-label checkbox-flex",control:(0,k.jsx)(g.Z,{disabled:!0}),label:e},e)}))}):"date"===n.inputType?(0,k.jsx)(y._,{dateAdapter:w.y,children:(0,k.jsx)(b.M,{disabled:!0,value:null,className:"datepicker-blk",components:{OpenPickerIcon:N.Z},onChange:function(){},renderInput:function(e){return(0,k.jsx)(v.Z,(0,s.Z)((0,s.Z)({},e),{},{helperText:" "}))}})}):"";return(0,k.jsx)("div",{className:"preview-que-blk",children:(0,k.jsxs)("div",{className:"form-group",children:[(0,k.jsx)("label",{htmlFor:"questionTitle",children:(0,k.jsxs)("div",{className:"preview-sect-txt",children:[i,(null===n||void 0===n?void 0:n.isRequired)&&(0,k.jsx)("span",{className:"mandatory",children:" *"})]})}),(0,k.jsx)("div",{className:"que-half-sect",children:t})]})})},M=i(3989);var P=function(e){var n=e.questionnaire,i=e.section,t=e.sectionIndex;return(0,a.useEffect)((function(){}),[]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"preview-sect-ttl-wrap",children:[(0,k.jsx)("div",{className:"preview-sect-card-ttl-blk",children:(0,k.jsx)("h2",{className:"subheading",children:null===i||void 0===i?void 0:i.sectionTitle})}),(0,k.jsx)("div",{className:"preview-sect-txt",children:null===i||void 0===i?void 0:i.description})]}),(0,k.jsx)("div",{className:"preview-card-wrapper",children:(0,k.jsx)("div",{className:"preview-que-wrap que-preview",children:"form"===(null===i||void 0===i?void 0:i.layout)?i.questions.map((function(e){return(0,k.jsx)(T,{question:e},null===e||void 0===e?void 0:e.uuid)})):(0,k.jsx)(M.Z,{questionnaire:n,sectionIndex:t,isPreview:!0})})})]})},D=i(7689),Q=i(1087),C=i(4677),S=i(6218),E=i(1260),I=i(9434),O=i(2898),_=i(2820),A=i(7659),H=i(8460),R=i(1300),Y=i(4569),B=i.n(Y),z=i(7806),U=i(8386);function L(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var V=function(e){var n,i,v,p,h,f,m,x=(0,a.useState)(0),g=(0,o.Z)(x,2),b=g[0],w=g[1];(0,E.j)("Preview Questionnaire");var y=(0,a.useState)(!1),Z=(0,o.Z)(y,2),N=Z[0],q=Z[1],T=(0,a.useState)(!1),M=(0,o.Z)(T,2),Y=M[0],V=M[1],F=(0,_.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),W=(0,o.Z)(F,2),K=W[0],G=W[1],J=(0,a.useRef)(),X=(0,D.UO)(),$=(0,D.s0)(),ee=(0,a.useState)({}),ne=(0,o.Z)(ee,2),ie=ne[0],te=ne[1],se=(0,I.v9)((function(e){var n;return null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.privilege})),re=(0,I.v9)((function(e){var n;return null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.userObj})),oe="Super Admin"===(null===se||void 0===se?void 0:se.name),ae=("Super Admin"===(null===re||void 0===re||null===(n=re.roleId)||void 0===n?void 0:n.name)?[]:Object.values(null===se||void 0===se?void 0:se.privileges)).filter((function(e){var n;return"Questionnaire"===(null===e||void 0===e||null===(n=e.moduleId)||void 0===n?void 0:n.name)})).map((function(e){return{questionnaire:{list:null===e||void 0===e?void 0:e.list,view:null===e||void 0===e?void 0:e.view,edit:null===e||void 0===e?void 0:e.edit,delete:null===e||void 0===e?void 0:e.delete,add:null===e||void 0===e?void 0:e.add}}}));(0,a.useEffect)((function(){var e=!0,n=new AbortController,i=function(){var i=(0,r.Z)((0,t.Z)().mark((function i(){var r,o,a;return(0,t.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,j.Y.info("Questionnaire - Preview Questionnaire - fetch handler"),q(!0),i.next=5,C.H.get("".concat(S.ZW,"/").concat(X.id),{signal:n.signal});case 5:r=i.sent,e&&te((0,s.Z)({},r.data)),q(!1),i.next=17;break;case 10:if(i.prev=10,i.t0=i.catch(0),"ERR_CANCELED"!==(null===i.t0||void 0===i.t0?void 0:i.t0.code)){i.next=14;break}return i.abrupt("return");case 14:j.Y.info("Questionnaire - Preview Questionnaire - fetch handler - catch error - ".concat(null===i.t0||void 0===i.t0||null===(o=i.t0.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.message)),q(!1),ve(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,10]])})));return function(){return i.apply(this,arguments)}}();return i(),function(){e=!1,n.abort()}}),[]);var le=(0,a.useState)(!1),ue=(0,o.Z)(le,2),de=ue[0],ce=ue[1],ve=function(e){var n,i,t;if("ERR_CANCELED"!==(null===e||void 0===e?void 0:e.code))if(401==(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status))G({titleMessage:"Error",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(function(){return J.current()})),setTimeout((function(){$("/login")}),3e3);else if(403===(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status)){var s,r,o,a;G({titleMessage:"Error",descriptionMessage:null!==e&&void 0!==e&&null!==(s=e.response)&&void 0!==s&&null!==(r=s.data)&&void 0!==r&&r.message?null===e||void 0===e||null===(o=e.response)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return J.current()})),setTimeout((function(){$("/home")}),3e3)}else if(400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&"Invalid questionnaire!"===e.response.data.message){var l,u,d,c;G({titleMessage:"Error",descriptionMessage:null!==e&&void 0!==e&&null!==(l=e.response)&&void 0!==l&&null!==(u=l.data)&&void 0!==u&&u.message?null===e||void 0===e||null===(d=e.response)||void 0===d||null===(c=d.data)||void 0===c?void 0:c.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return J.current()})),setTimeout((function(){$("/questionnaires")}),3e3)}else{var v,p;G({titleMessage:"Error",descriptionMessage:null!==e&&void 0!==e&&null!==(v=e.response)&&void 0!==v&&null!==(p=v.data)&&void 0!==p&&p.message&&"string"===typeof e.response.data.message?e.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(function(){return J.current()}))}},pe=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(n){var i,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j.Y.info("Questionnaire - Preview Questionnaire - deleteQuestionnaire handler"),e.next=4,B().delete(S.ZW+"/".concat(null===ie||void 0===ie?void 0:ie.uuid),{data:{deletionType:n}});case 4:return G({titleMessage:"Success",descriptionMessage:"".concat("inactive"===n?"Questionnaire inactivated successfully!":"Questionnaire deleted successfully!"),messageType:"success"},(function(){return J.current()})),e.abrupt("return",setTimeout((function(){return $("/questionnaires",{state:0})}),3e3));case 8:e.prev=8,e.t0=e.catch(0),ve(e.t0),j.Y.info("Questionnaire - Preview Questionnaire - deleteQuestionnaire handler - catch error - ".concat(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message));case 12:return e.prev=12,V(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(n){return e.apply(this,arguments)}}(),he=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){var n,i,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j.Y.info("Questionnaire - Preview Questionnaire - deleteDraft handler"),e.next=4,B().delete(S.uf+"/".concat(null===ie||void 0===ie?void 0:ie.uuid));case 4:return n=e.sent,G({titleMessage:"Success",descriptionMessage:n.data.message,messageType:"success"},(function(){return J.current()})),e.abrupt("return",setTimeout((function(){return $("/questionnaires",{state:1})}),3e3));case 9:e.prev=9,e.t0=e.catch(0),j.Y.info("Questionnaire - Preview Questionnaire - deleteDraft handler - catch error - ".concat(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message)),ve(e.t0);case 13:return e.prev=13,V(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie&&null!==ie&&void 0!==ie&&ie.isPublished?pe("delete"):he();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,k.jsxs)("div",{className:"page-wrapper",onClick:function(){return de&&ce(!1)},children:[(0,k.jsx)(R.Z,{title:(0,k.jsxs)("p",{children:[" ","Delete ",ie&&!(null!==ie&&void 0!==ie&&ie.isPublished)&&" Drafted ","Questionnaire"]}),info1:(0,k.jsx)("p",{children:ie&&null!==ie&&void 0!==ie&&ie.isPublished?"Deleting the questionnaire will also delete the related assessments. Instead we recommend you make the questionnaire inactive.":"Deleting the drafted questionnaire will be an irreversible action. All the related details would be lost."}),info2:(0,k.jsxs)("p",{children:["Are you sure you want to delete",ie&&!(null!==ie&&void 0!==ie&&ie.isPublished)&&" drafted"," the questionnaire?"]}),primaryButtonText:ie&&null!==ie&&void 0!==ie&&ie.isPublished?"Delete Anyway":"Delete",secondaryButtonText:ie&&null!==ie&&void 0!==ie&&ie.isPublished?"Inactive":"Cancel",onPrimaryModalButtonClickHandler:fe,onSecondaryModalButtonClickHandler:function(){ie&&null!==ie&&void 0!==ie&&ie.isPublished?pe("inactive"):V(!1)},openModal:Y,setOpenModal:V}),(0,k.jsx)(A.Z,{myRef:J,titleMessage:K.titleMessage,descriptionMessage:K.descriptionMessage,messageType:K.messageType}),(0,k.jsx)("div",{className:"breadcrumb-wrapper",children:(0,k.jsx)("div",{className:"container",children:(0,k.jsxs)("ul",{className:"breadcrumb",children:[(0,k.jsx)("li",{children:(0,k.jsxs)(Q.rU,{to:"/questionnaires",style:{cursor:"pointer"},state:null!==ie&&void 0!==ie&&ie.isPublished?0:1,children:["Questionnaire"," ",null!==ie&&void 0!==ie&&ie.isPublished?"(Published)":"(Drafted)"]})}),X["*"].includes("version")&&(0,k.jsx)("li",{children:(0,k.jsx)(Q.rU,{to:"/questionnaire-version-history/".concat(X.id),style:{cursor:"pointer"},children:"Questionnaire History"})}),X["*"].includes("version")?(0,k.jsx)("li",{children:"Preview Questionnaire History"}):(0,k.jsx)("li",{children:"Preview Questionnaire "})]})})}),(0,k.jsx)("section",{children:(0,k.jsxs)("div",{className:"container",children:[(0,k.jsxs)("div",{className:"form-header",children:[(0,k.jsxs)("div",{className:"flex-between preview-que-ttl-blk",children:[(0,k.jsx)("h2",{className:"heading2",children:null===ie||void 0===ie?void 0:ie.title}),(0,k.jsxs)("span",{className:"form-header-right-txt",onClick:function(){ce(!de)},children:[(0,k.jsx)("span",{className:"crud-operation ".concat(de&&"crud-operation-active"),children:(0,k.jsx)(O.Z,{})}),(0,k.jsx)("div",{className:"crud-toggle-wrap que-crud-toggle-wrap",style:{display:de?"block":"none"},children:(0,k.jsxs)("ul",{className:"crud-toggle-list",children:[(0,k.jsx)("li",{onClick:function(){return(0,z.j)("Questionnaire",G,X.id,J,S.KW,$)},children:"Export to Excel"}),!X["*"].includes("version")&&!(null!==ie&&void 0!==ie&&ie.isDraft)&&(0,k.jsx)("li",{onClick:function(){return $("/questionnaire-version-history/".concat(X.id))},children:"Version History"}),(!0===oe||(null===(i=ae[0])||void 0===i||null===(v=i.questionnaire)||void 0===v?void 0:v.edit))&&!X["*"].includes("version")&&((null===ie||void 0===ie?void 0:ie.isDraft)||(null===ie||void 0===ie?void 0:ie.isPublished))&&(0,k.jsx)("li",{onClick:function(){return $("/questionnaires/edit-questionnaire/".concat(X.id))},children:"Edit Questionnaire"}),(!0===oe||(null===(p=ae[0])||void 0===p||null===(h=p.questionnaire)||void 0===h?void 0:h.delete))&&(0,k.jsx)("li",{onClick:function(){return V(!0)},children:"Delete Questionnaire"})]})})]})]}),(0,k.jsx)("div",{className:"excel-short-name",children:(0,k.jsx)("p",{children:null===ie||void 0===ie?void 0:ie.sheetName})})]}),N?(0,k.jsx)(U.Z,{}):(0,k.jsxs)("div",{className:"section-form-sect",children:[(0,k.jsx)("div",{className:"section-tab-blk flex-between preview-tab-blk",children:(0,k.jsx)("div",{className:"section-tab-leftblk",children:(0,k.jsx)(l.Z,{sx:{borderBottom:1,borderColor:"divider"},className:"tabs-sect que-tab-sect",children:(0,k.jsx)(u.Z,{value:b,onChange:function(e,n){w(n)},"aria-label":"basic tabs example",variant:"scrollable",scrollButtons:"auto",children:null===ie||void 0===ie||null===(f=ie.sections)||void 0===f?void 0:f.map((function(e,n,i){var t;return(0,k.jsx)(d.Z,{title:e.sectionTitle,placement:"bottom-start",children:(0,k.jsx)(c.Z,(0,s.Z)({className:"section-tab-item",label:"section ".concat(n+1)},L(n)))},null!==(t=null===e||void 0===e?void 0:e.uuid)&&void 0!==t?t:i)}))})})})}),(0,k.jsx)("div",{className:"preview-tab-data",children:null===ie||void 0===ie||null===(m=ie.sections)||void 0===m?void 0:m.map((function(e,n){var i;return(0,k.jsx)(H.x,{value:b,index:n,children:(0,k.jsx)(P,{questionnaire:ie,section:e,sectionIndex:n})},null!==(i=null===e||void 0===e?void 0:e.uuid)&&void 0!==i?i:n)}))})]})]})})]})}},7806:function(e,n,i){i.d(n,{d:function(){return l},j:function(){return u}});var t=i(4165),s=i(5861),r=i(4677),o=i(4917),a=i(5736),l=function(){var e=(new Date).getMonth()<10?"0"+((new Date).getMonth()+1).toString():(new Date).getMonth().toString(),n=(new Date).getDate()<10?"0"+(new Date).getDate().toString():(new Date).getDate().toString(),i=(new Date).getHours();return e+n+(new Date).getFullYear().toString()+"_"+i+(new Date).getMinutes()+(new Date).getSeconds()},u=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n,i,s,u,d,c){var v,p,h,f,m,x;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.H.get(s?d+s+"/download":d,{responseType:"blob"});case 3:v=e.sent,o.Y.info(" download function -  from ".concat(n,"  assessment ")),p=window.URL.createObjectURL(new Blob([v.data])),(h=document.createElement("a")).href=p,f=l(),h.setAttribute("download","".concat(n," - ").concat(f,".xlsx")),document.body.appendChild(h),h.click(),200==v.status&&i({titleMessage:"Success!",descriptionMessage:"Downloaded Successfully!",messageType:"success"},(function(){return u.current()})),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(0),o.Y.info("downlaod function - error ".concat(null===e.t0||void 0===e.t0||null===(m=e.t0.response)||void 0===m||null===(x=m.data)||void 0===x?void 0:x.message)),(0,a.K)(e.t0,i,u,c),e.abrupt("return",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(n,i,t,s,r,o){return e.apply(this,arguments)}}()},2898:function(e,n,i){var t=i(4836);n.Z=void 0;var s=t(i(5649)),r=i(184),o=(0,s.default)((0,r.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");n.Z=o}}]);
//# sourceMappingURL=8177.151378ed.chunk.js.map