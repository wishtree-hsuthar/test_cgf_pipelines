"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[8518],{8518:(e,i,l)=>{l.r(i),l.d(i,{default:()=>ae});var n=l(72791),s=l(97275),t=l(68096),o=l(58406),d=l(63903),a=l(47071),r=l(697),c=l(25228),u=l(20068),v=l(43896),m=l(77194),p=l(12104),h=l(94677),x=l(76218),g=l(57689),j=l(71300),f=l(54261),b=l(94454),N=l(61419),T=l(79012),y=l(53767),q=l(20890),k=l(14917),w=l(29823),Z=l(66934),C=l(9955);const E=(0,Z.ZP)(C.Z)((e=>{let{theme:i}=e;return{width:28,height:16,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:2,"&.Mui-checked":{transform:"translateX(12px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===i.palette.mode?"#177ddc":"#1890ff"}}},"& .MuiSwitch-thumb":{boxShadow:"0 2px 4px 0 rgb(0 35 11 / 20%)",width:12,height:12,borderRadius:6,transition:i.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:8,opacity:1,backgroundColor:"dark"===i.palette.mode?"rgba(255,255,255,.35)":"rgba(0,0,0,.25)",boxSizing:"border-box"}}}));var M=l(80184);const S=e=>{let{question:i,questionIdx:l,questionnaire:r,setQuestionnaire:c,sectionIndex:v,questionsLength:m,err:h,setErr:x}=e,g={uuid:(0,f.Z)(),questionTitle:"",srNo:1,inputType:"singleTextbox",validation:"",isRequired:!0,options:["",""]};const j=[{_id:"checkbox",name:"Checkbox"},{_id:"date",name:"Date"},{_id:"dropdown",name:"Drop down"},{_id:"radioGroup",name:"Radio group"},{_id:"singleTextbox",name:"Single text box"},{_id:"textarea",name:"Text area"}],k=[{_id:"alphabets",name:"Alphabets"},{_id:"alphanumeric",name:"Alphanumeric"},{_id:"numeric",name:"Numeric"}],Z={PaperProps:{style:{maxHeight:168}}},C=(e,i)=>{const{name:l,value:n}=e.target;let s={...r};s.sections[v].questions[i][l]=n,c(s)};(0,n.useEffect)((()=>()=>{}),[h]);const S=e=>{let{children:i}=e;return(0,M.jsx)("div",{className:"select-placeholder",children:i})},P=e=>{let i=r.sections[v].questions.filter((i=>i.questionTitle===e));return i.length>1};return(0,M.jsx)("div",{className:"que-card-blk ".concat(l+1===m&&"active"),children:(0,M.jsxs)("div",{className:"que-form-blk",children:[(0,M.jsxs)("div",{className:"que-card-innerblk flex-between",children:[(0,M.jsx)("div",{className:"que-card-form-leftfield",children:(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsxs)("label",{htmlFor:"questionTitle",children:["Question ","".concat(l+1)," Title"," ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsx)(s.Z,{className:"input-field ".concat(null!==i&&void 0!==i&&i.questionTitle||!(null===h||void 0===h?void 0:h.questionTitle)?P(null===i||void 0===i?void 0:i.questionTitle)&&(null===h||void 0===h?void 0:h.questionTitle)&&"input-error":"input-error"," "),placeholder:"Enter question title",name:"questionTitle",value:null===i||void 0===i?void 0:i.questionTitle,helperText:null!==i&&void 0!==i&&i.questionTitle||null===h||void 0===h||!h.questionTitle?P(null===i||void 0===i?void 0:i.questionTitle)&&null!==h&&void 0!==h&&h.questionTitle?"Question title already in use.":" ":"Enter the question title",onChange:e=>C(e,l),onBlur:e=>((e,i)=>{const{name:l,value:n}=e.target;let s={...r};s.sections[v].questions[i][l]=null===n||void 0===n?void 0:n.trim(),c(s)})(e,l)})]})}),(0,M.jsxs)("div",{className:"que-card-form-rightfield flex-between",children:[(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsxs)("label",{htmlFor:"inputField",children:["Input Type ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsxs)(t.Z,{className:"fullwidth-field",children:[(0,M.jsx)("div",{className:"select-field",children:(0,M.jsx)(o.Z,{MenuProps:Z,placeholder:"Select Input type",IconComponent:e=>(0,M.jsx)(p.Z,{...e}),name:"inputType",value:null===i||void 0===i?void 0:i.inputType,onChange:e=>((e,i)=>{const{name:l,value:n}=e.target;let s={...r};s.sections[v].questions[i][l]=n,s.sections[v].questions[i].validation="",c(s)})(e,l),children:j&&j.map((e=>(0,M.jsx)(d.Z,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)))})}),(0,M.jsx)(a.Z,{children:" "})]})]}),(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsx)("label",{htmlFor:"inputField",children:"Validation"}),(0,M.jsx)(t.Z,{className:"fullwidth-field",children:(0,M.jsx)("div",{className:"select-field",children:(0,M.jsx)(o.Z,{disabled:"singleTextbox"!==i.inputType&&"textarea"!==i.inputType,renderValue:""!==(null===i||void 0===i?void 0:i.validation)?void 0:()=>(0,M.jsx)(S,{children:"Select validation"}),placeholder:"Select Input validation",displayEmpty:!0,IconComponent:e=>(0,M.jsx)(p.Z,{...e}),name:"validation",value:null===i||void 0===i?void 0:i.validation,onChange:e=>C(e,l),children:k&&k.map((e=>(0,M.jsx)(d.Z,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)))})})})]})]})]}),["dropdown","checkbox","radioGroup"].includes(null===i||void 0===i?void 0:i.inputType)&&i.options.map(((e,n)=>{var t;return(0,M.jsx)("div",{className:"que-card-innerblk",children:(0,M.jsxs)("div",{className:"que-card-input-type-wrapper",children:[(0,M.jsx)("div",{className:"que-card-form-leftfield",children:(0,M.jsx)("div",{className:"que-checkbox-sect",children:(0,M.jsxs)("div",{className:"que-checkbox-wrap",children:[(0,M.jsx)("div",{className:"que-checkbox-blk ".concat(("dropdown"===(null===i||void 0===i?void 0:i.inputType)?"que-dropdown-blk":"checkbox"===(null===i||void 0===i?void 0:i.inputType)&&"que-checkbox-option")||"radioGroup"===(null===i||void 0===i?void 0:i.inputType)&&"que-radio-option"),children:(0,M.jsx)(s.Z,{name:"options",value:e,onChange:e=>((e,i,l)=>{let n={...r};n.sections[v].questions[i].options[l]=e.target.value,c(n)})(e,l,n),onBlur:e=>((e,i,l)=>{var n;let s={...r};s.sections[v].questions[i].options[l]=null===(n=e.target.value)||void 0===n?void 0:n.trim(),c(s)})(e,l,n),className:2!==(null===i||void 0===i?void 0:i.options.length)?"input-field que-input-type adddropdown ".concat((null===h||void 0===h?void 0:h.option)&&!e&&"input-error"):"input-field que-input-type ".concat((null===h||void 0===h?void 0:h.option)&&!e&&"input-error"),helperText:null!==h&&void 0!==h&&h.option&&!e?"Enter the option value":" ",id:"outlined-basic",placeholder:"Enter option value",variant:"outlined"})}),"checkbox"===(null===i||void 0===i?void 0:i.inputType)&&(0,M.jsx)(b.Z,{className:"que-checkbox",checked:!1}),"radioGroup"===(null===i||void 0===i?void 0:i.inputType)&&(0,M.jsx)(N.Z,{className:"radio-btn que-radio-btn",color:"primary",checked:!1}),2!==(null===i||void 0===i?void 0:i.options.length)&&(0,M.jsx)("div",{className:"que-input-type-close",onClick:e=>((e,i,l)=>{var n,s,t;let o={...r};null===o||void 0===o||null===(n=o.sections[v])||void 0===n||null===(s=n.questions[i])||void 0===s||null===(t=s.options)||void 0===t||t.splice(l,1),c(o)})(0,l,n),children:(0,M.jsx)(w.Z,{})})]})})}),(0,M.jsx)("div",{className:"que-card-form-rightfield add-option-blk",children:n+1===(null===i||void 0===i||null===(t=i.options)||void 0===t?void 0:t.length)&&(0,M.jsxs)("div",{className:"tertiary-btn-blk",onClick:()=>(e=>{let i={...r};i.sections[v].questions[e].options.push(""),c(i)})(l),children:[(0,M.jsx)("span",{className:"addmore-icon",children:(0,M.jsx)("i",{className:"fa fa-plus"})}),(0,M.jsx)("span",{className:"addmore-txt",children:"Add Option..."})]})})]})},n)})),(0,M.jsx)("div",{className:"que-card-icon-sect",children:(0,M.jsxs)("div",{className:"que-card-icon-blk",children:[l===m-1&&(0,M.jsx)("div",{className:"que-card-icon add-que-iconblk mr-40",children:(0,M.jsx)(u.Z,{title:"Add Question",children:(0,M.jsx)("img",{onClick:()=>{let e={...r};e.sections[v].questions.push({...g}),c(e)},src:"/images/add-question-icon.svg",alt:""})})}),1!==m&&(0,M.jsx)("div",{className:"que-card-icon delete-iconblk mr-40",children:(0,M.jsx)(u.Z,{title:"Delete Question",children:(0,M.jsx)("img",{onClick:()=>((e,i)=>{var l;let n={...r},s=null===n||void 0===n||null===(l=n.sections[v])||void 0===l?void 0:l.questions.filter((i=>i.uuid!==e));n.sections[v].questions=[...s],c(n)})(null===i||void 0===i?void 0:i.uuid),src:"/images/delete-icon.svg",alt:""})})}),(0,M.jsx)("div",{className:"required-toggle-btnblk",children:(0,M.jsx)(T.Z,{children:(0,M.jsxs)(y.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,M.jsx)(q.Z,{children:"Required"}),(0,M.jsx)(E,{checked:i.isRequired,onChange:e=>((e,i,l)=>{let n={...r};n.sections[i].questions[l].isRequired=e.target.checked,c(n)})(e,v,l),inputProps:{"aria-label":"controlled"}})]})})})]})})]})},null===i||void 0===i?void 0:i.uuid)},P=((0,f.Z)(),(0,f.Z)(),(0,f.Z)(),e=>{var i,l;let{sectionIndex:n,questionnaire:s,setQuestionnaire:t,err:o,setErr:d,questionTitleList:a,setQuestionTitleList:r}=e;return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("div",{className:"que-form-card-wrapper",children:[(0,M.jsx)("div",{className:"drag-drop-box"}),s&&(null===s||void 0===s||null===(i=s.sections[n])||void 0===i||null===(l=i.questions)||void 0===l?void 0:l.map(((e,i)=>{var l,c;return(0,M.jsx)(S,{question:e,questionsLength:null===s||void 0===s||null===(l=s.sections[n])||void 0===l||null===(c=l.questions)||void 0===c?void 0:c.length,questionIdx:i,questionnaire:s,setQuestionnaire:t,sectionIndex:n,err:o,setErr:d,questionTitleList:a,setQuestionTitleList:r},null===e||void 0===e?void 0:e.uuid)})))]})})});var V=l(12820),I=l(33557),Q=l(59369),_=l(88447),D=l(52739),A=l(60627),B=l(59434),F=l(16990);const L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},R=e=>{var i,l,t;let{openModal:o,setOpenModal:d,questionnaire:a,setQuestionnaire:c,sectionIndex:u,columnId:v,tableErr:m,setTableErr:p}=e;const h=(0,B.I0)(),[x,g]=(0,n.useState)(""),j=()=>{var e;let i={...a};null===(e=i.sections[u].columnValues[v].options)||void 0===e||e.push(""),c(i)};let f=(0,B.v9)((e=>e.user.questionnaire));const b=()=>{let e={...a};""===f[0]&&""===f[1]&&2===(null===f||void 0===f?void 0:f.length)?(e.sections[u].columnValues[v].options=["",""],e.sections[u].columnValues[v].columnType="textbox"):e.sections[u].columnValues[v].options=[...f],c(e),d(!1)};return(0,n.useEffect)((()=>{h((0,F.p7)(a.sections[u].columnValues[v].options))}),[]),(0,M.jsx)(_.Z,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:!0,closeAfterTransition:!0,BackdropComponent:D.Z,BackdropProps:{timeout:500},className:"popup-blk",style:{overflow:"scroll"},children:(0,M.jsx)(A.Z,{in:!0,children:(0,M.jsx)(r.Z,{sx:L,className:"popup-box",children:(0,M.jsxs)("div",{className:"popup-innerblk",children:[(0,M.jsxs)("div",{id:"transition-modal-title",className:"popup-ttl-blk",children:[(0,M.jsx)("h2",{className:"popup-ttl heading2",children:"Create Custom List Dropdown"}),(0,M.jsx)("span",{className:"popup-close-icon",onClick:b,children:(0,M.jsx)(w.Z,{})})]}),(0,M.jsx)("div",{id:"transition-modal-description",className:"popup-body",children:(0,M.jsxs)("div",{className:"popup-content-blk",children:[(0,M.jsxs)("div",{className:"custom-list-sect",children:[null===a||void 0===a||null===(i=a.sections[u])||void 0===i||null===(l=i.columnValues[v])||void 0===l||null===(t=l.options)||void 0===t?void 0:t.map(((e,i)=>{var l,n,t,o,d,r;return(0,M.jsx)("div",{className:"form-group",children:(0,M.jsxs)("div",{className:"que-checkbox-wrap",children:[(0,M.jsx)("div",{className:"que-checkbox-blk que-dropdown-blk",children:(0,M.jsx)(s.Z,{className:(null===a||void 0===a||null===(l=a.sections[u])||void 0===l||null===(n=l.columnValues[v])||void 0===n||null===(t=n.options)||void 0===t?void 0:t.length)>2?"input-field que-input-type adddropdown ".concat(x&&!e&&"input-error"):"input-field que-input-type ".concat(x&&!e&&"input-error"),value:e,onChange:e=>((e,i)=>{const{value:l}=e.target;let n={...a};n.sections[u].columnValues[v].options[i]=l,c(n)})(e,i),onBlur:e=>((e,i)=>{const{value:l}=e.target;let n={...a};n.sections[u].columnValues[v].options[i]=null===l||void 0===l?void 0:l.trim(),c(n)})(e,i),id:"outlined-basic",helperText:x&&!e?"Enter the option":" ",placeholder:"Enter option value",variant:"outlined"})}),(null===a||void 0===a||null===(o=a.sections[u])||void 0===o||null===(d=o.columnValues[v])||void 0===d||null===(r=d.options)||void 0===r?void 0:r.length)>2&&(0,M.jsx)("div",{className:"que-input-type-close",onClick:()=>(e=>{var i,l,n;let s={...a};null===s||void 0===s||null===(i=s.sections[u])||void 0===i||null===(l=i.columnValues[v])||void 0===l||null===(n=l.options)||void 0===n||n.splice(e,1),c(s)})(i),children:(0,M.jsx)(w.Z,{})})]})},i)})),(0,M.jsxs)("div",{className:"add-dropdown-btnblk mb-30",children:[(0,M.jsx)("span",{className:"addmore-icon",children:(0,M.jsx)("i",{onClick:j,className:"fa fa-plus"})})," ",(0,M.jsx)("span",{onClick:j,children:"Add Dropdown"})]})]}),(0,M.jsxs)("div",{className:"form-btn flex-center text-center",children:[(0,M.jsx)("button",{className:"secondary-button mr-10",onClick:b,children:"Cancel"}),(0,M.jsx)("button",{type:"submit",className:"primary-button",onClick:()=>{var e;let i={...a},l=!1;null===(e=i.sections[u].columnValues[v].options)||void 0===e||e.forEach((e=>{e||(l=!0,g("Option required"))})),!l&&d(!1)},children:"Save"})]})]})})]})})})})};var H=l(43989);const O={PaperProps:{style:{maxHeight:168}}},U=[{_id:"attachments",name:"Attachments"},{_id:"date",name:"Date"},{_id:"dropdown",name:"Drop down"},{_id:"prefilled",name:"Prefilled"},{_id:"textbox",name:"Text box"}],Y=[{_id:"alphabets",name:"Alphabets"},{_id:"alphanumeric",name:"Alphanumeric"},{_id:"numeric",name:"Numeric"}],G=[{_id:"yes",name:"Yes"},{_id:"no",name:"No"}],z=e=>{var i,l;let{sectionIndex:r,questionnaire:c,setQuestionnaire:v,tableErr:m,setTableErr:h}=e;const[x,g]=(0,n.useState)(!1),[j,b]=(0,n.useState)(-1),N=(e,i)=>{const{name:l,value:n}=e.target;let s={...c};s.sections[r].columnValues[i][l]=n,v(s)},y=e=>{g(!0),b(e)};(0,n.useEffect)((()=>{}),[c]);const k=e=>{let{children:i}=e;return(0,M.jsx)("div",{className:"select-placeholder",children:i})},w=e=>c.sections[r].columnValues.filter((i=>i.title===e)).length>1;return(0,M.jsxs)("div",{className:"que-column-layout-sect",children:[c&&(null===c||void 0===c||null===(i=c.sections[r])||void 0===i||null===(l=i.columnValues)||void 0===l?void 0:l.map(((e,i)=>{var l,n;return(0,M.jsx)("div",{className:"que-column-layout-wrap",children:(0,M.jsx)("div",{className:"que-column-layout-blk",children:(0,M.jsxs)("div",{className:"que-card-innerblk",children:[(0,M.jsxs)("div",{className:"que-col-form-leftfield flex-between",children:[(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsxs)("label",{htmlFor:"emailid",children:["Column ",i+1," Title"," ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsx)(s.Z,{className:"input-field ".concat(null!==e&&void 0!==e&&e.title||!m?w(null===e||void 0===e?void 0:e.title)&&m&&"input-error":"input-error"),id:"outlined-basic",variant:"outlined",name:"title",helperText:null!==e&&void 0!==e&&e.title||!m?w(null===e||void 0===e?void 0:e.title)&&m?"Column title already in use.":" ":"Enter the column title",value:null===e||void 0===e?void 0:e.title,onChange:e=>N(e,i),onBlur:e=>((e,i)=>{const{name:l,value:n}=e.target;let s={...c};s.sections[r].columnValues[i][l]=null===n||void 0===n?void 0:n.trim(),v(s)})(e,i),placeholder:"Enter column title"})]}),(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsxs)("label",{htmlFor:"emailid",children:["Input Type"," ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsxs)("div",{className:"select-field",children:[(0,M.jsxs)(t.Z,{className:"fullwidth-field",children:[(0,M.jsx)(o.Z,{IconComponent:e=>(0,M.jsx)(p.Z,{...e}),displayEmpty:!0,placeholder:"Select input type",name:"columnType",value:null===e||void 0===e?void 0:e.columnType,onChange:e=>((e,i)=>{const{name:l,value:n}=e.target;let s={...c};s.sections[r].columnValues[i][l]=n,s.sections[r].columnValues[i].validation="",s.sections[r].columnValues[i].options=[],s.sections[r].columnValues[i].hideColumn="no","prefilled"===n&&(s.sections[r].columnValues[i].hideColumn="no"),"dropdown"===n&&(s.sections[r].columnValues[i].options=["",""],b(i),g(!0)),v(s)})(e,i),className:"select-dropdown",MenuProps:O,children:U&&U.map((e=>(0,M.jsx)(d.Z,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)))}),(0,M.jsx)(a.Z,{children:" "})]}),x&&j===i&&(0,M.jsx)(R,{openModal:x,setOpenModal:g,questionnaire:c,setQuestionnaire:v,sectionIndex:r,columnId:i,tableErr:m,setTableErr:h})]})]}),(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsx)("label",{htmlFor:"emailid",children:"Validation"}),(0,M.jsx)("div",{className:"select-field",children:(0,M.jsxs)(t.Z,{className:"fullwidth-field",children:[(0,M.jsx)(o.Z,{disabled:"textbox"!==(null===e||void 0===e?void 0:e.columnType),IconComponent:e=>(0,M.jsx)(p.Z,{...e}),renderValue:""!==(null===e||void 0===e?void 0:e.validation)?void 0:()=>(0,M.jsx)(k,{children:"Select validator"}),displayEmpty:!0,name:"validation",value:null===e||void 0===e?void 0:e.validation,onChange:e=>N(e,i),className:"select-dropdown",MenuProps:O,children:Y&&Y.map((e=>(0,M.jsx)(d.Z,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)))}),(0,M.jsx)(a.Z,{children:" "})]})}),"dropdown"===(null===e||void 0===e?void 0:e.columnType)&&(0,M.jsxs)("div",{className:"add-dropdown-btnblk edit-dropdown-btn",children:[(0,M.jsx)("span",{className:"addmore-icon",onClick:()=>y(i),children:(0,M.jsx)(I.Z,{})})," ",(0,M.jsx)("span",{onClick:()=>y(i),children:"Edit Dropdown"})]})]}),(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsx)("label",{htmlFor:"emailid",children:"Hide Column"}),(0,M.jsx)("div",{className:"select-field",children:(0,M.jsxs)(t.Z,{className:"fullwidth-field",children:[(0,M.jsx)(o.Z,{disabled:"textbox"===(null===e||void 0===e?void 0:e.columnType)||"date"===(null===e||void 0===e?void 0:e.columnType)||"dropdown"===(null===e||void 0===e?void 0:e.columnType)||"attachments"===(null===e||void 0===e?void 0:e.columnType),IconComponent:e=>(0,M.jsx)(p.Z,{...e}),renderValue:""!==(null===e||void 0===e?void 0:e.hideColumn)?void 0:()=>(0,M.jsx)(k,{children:"Yes or No"}),displayEmpty:!0,name:"hideColumn",value:null===e||void 0===e?void 0:e.hideColumn,onChange:e=>N(e,i),className:"select-dropdown",MenuProps:O,children:G&&G.map((e=>(0,M.jsx)(d.Z,{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e._id)))}),(0,M.jsx)(a.Z,{children:" "})]})}),"dropdown"===(null===e||void 0===e?void 0:e.columnType)&&(0,M.jsxs)("div",{className:"add-dropdown-btnblk edit-dropdown-btn",children:[(0,M.jsx)("span",{className:"addmore-icon",onClick:()=>y(i),children:(0,M.jsx)(I.Z,{})})," ",(0,M.jsx)("span",{onClick:()=>y(i),children:"Edit Dropdown"})]})]}),(null===c||void 0===c||null===(l=c.sections[r])||void 0===l||null===(n=l.columnValues)||void 0===n?void 0:n.length)>1&&(0,M.jsx)("div",{className:"que-col-delete delete-iconblk",children:(0,M.jsx)(u.Z,{title:"Delete column",placement:"bottom",children:(0,M.jsx)("img",{style:{cursor:"pointer"},onClick:e=>((e,i)=>{var l,n,s;let t={...c};null===t||void 0===t||null===(l=t.sections[r].rowValues)||void 0===l||l.forEach(((e,l)=>{var n,s,o;return null===t||void 0===t||null===(n=t.sections[r])||void 0===n||null===(s=n.rowValues[l])||void 0===s||null===(o=s.cells)||void 0===o?void 0:o.splice(i,1)})),null===t||void 0===t||null===(n=t.sections[r])||void 0===n||null===(s=n.columnValues)||void 0===s||s.splice(i,1),v(t)})(0,i),src:"/images/delete-icon.svg",alt:""})})})]}),(0,M.jsx)("div",{className:"que-card-icon-sect",children:(0,M.jsx)("div",{className:"required-toggle-btnblk",children:(0,M.jsx)(T.Z,{children:(0,M.jsxs)(Q.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,M.jsx)(q.Z,{children:"Required"}),(0,M.jsx)(E,{checked:null===e||void 0===e?void 0:e.isRequired,onChange:e=>((e,i)=>{let l={...c};l.sections[r].columnValues[i].isRequired=e.target.checked,v(l)})(e,i),inputProps:{"aria-label":"controlled"}})]})})})})]})})},null===e||void 0===e?void 0:e.uuid)}))),(0,M.jsxs)("div",{className:"add-row-btnblk add-col-btn",onClick:()=>{var e,i,l;let n={...c};const s=(0,f.Z)();null===n||void 0===n||null===(e=n.sections[r])||void 0===e||null===(i=e.columnValues)||void 0===i||i.push({uuid:s,title:"",columnType:"textbox",isRequired:!0,options:[],validation:"",hideColumn:"no"}),null===(l=n.sections[r].rowValues)||void 0===l||l.forEach(((e,i)=>{var l;null===e||void 0===e||null===(l=e.cells)||void 0===l||l.push({columnId:s,value:""})})),v(n)},children:[(0,M.jsx)("span",{className:"addmore-icon",children:(0,M.jsx)("i",{className:"fa fa-plus"})})," ","Add Column"]}),(0,M.jsx)(H.Z,{isPreview:!1,questionnaire:c,setQuestionnaire:v,sectionIndex:r,tableErr:m,setTableErr:h})]})};var W=l(27659),K=l(94294),X=l(40600),J=l(45736);const $={PaperProps:{style:{maxHeight:168}}};const ee=function(e){var i,l,r,c,v,m;let{setQuestionnaire:b,questionnaire:N,sectionIndex:T,documents:y,err:q}=e;const k=[".jpg",".jpeg",".png",".doc",".txt",".pdf",".docx",".xlsx",".xls",".ppt",".pptx",".mp4",".mp3",".zip",".rar"],[w,Z]=(0,n.useState)(!1),[C,E]=(0,n.useState)(null);let S=new FormData;const P=(0,g.s0)(),[I,Q]=(0,V.Z)({titleMessage:"",descriptionMessage:"",messageType:"error"}),_=(0,n.useRef)(),[D,A]=(0,n.useState)("");console.log("questionnaire in other doc=",N),console.log("section index in other doc=",T);const B=(e,i)=>{const{name:l,value:n}=e.target;let s={...N};s.sections[T].documents[i][l]=n,b(s)},F=(e,i)=>{const{name:l,value:n}=e.target;let s={...N};s.sections[T].documents[i][l]=null===n||void 0===n?void 0:n.trim(),b(s)},L=()=>{let e={...N};e.sections[T].documents.push({uuid:(0,f.Z)(),documentTitle:"",originalName:"",type:"File"}),b(e)};let R=null===N||void 0===N||null===(i=N.sections)||void 0===i?void 0:i.filter((e=>"documents"===e.layout));console.log("docs = ",R),console.log("section index",T);const H=(e,i)=>N.sections[T].documents.filter((l=>(null===l||void 0===l?void 0:l[i])===e)).length>1;console.log("error from other doc",q);const O=(e,i)=>"Link"===N.sections[T].documents[i].type?"input-field ".concat(null!==e&&void 0!==e&&e.linkTitle||!(null===q||void 0===q?void 0:q.linkTitle)?H(null===e||void 0===e?void 0:e.linkTitle,"linkTitle")&&(null===q||void 0===q?void 0:q.linkTitle)&&"input-error":"input-error"," "):"input-field ".concat(null!==e&&void 0!==e&&e.documentTitle||!(null===q||void 0===q?void 0:q.documentTitle)?H(null===e||void 0===e?void 0:e.documentTitle,"documentTitle")&&(null===q||void 0===q?void 0:q.documentTitle)&&"input-error":"input-error"," "),U=(e,i)=>"Link"===N.sections[T].documents[i].type?null!==e&&void 0!==e&&e.linkTitle||null===q||void 0===q||!q.linkTitle?H(null===e||void 0===e?void 0:e.linkTitle,"linkTitle")&&null!==q&&void 0!==q&&q.linkTitle?"Title already in use":"":"Enter title":null!==e&&void 0!==e&&e.documentTitle||null===q||void 0===q||!q.documentTitle?H(null===e||void 0===e?void 0:e.documentTitle,"documentTitle")&&null!==q&&void 0!==q&&q.documentTitle?"Title already in use":"":"Enter title";return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(W.Z,{myRef:_,titleMessage:I.titleMessage,descriptionMessage:I.descriptionMessage,messageType:I.messageType}),(0,M.jsx)(j.Z,{title:(0,M.jsx)("p",{children:"Upload other documents"}),info1:" ",info2:(0,M.jsxs)("div",{className:"upload-file-wrap",children:[(0,M.jsx)(K.Z,{variant:"contained",component:"label",className:"upload-file-btn",children:(0,M.jsxs)("div",{className:"upload-file-blk",children:[(0,M.jsx)("input",{type:"file",hidden:!0,accept:".jpg, .jpeg, .png, .doc, .txt, .pdf, .docx, .xlsx, .xls, .ppt, .pptx, .mp4, .mp3, .zip, .rar",name:"files[]",onChange:e=>{console.log("file change hadler clicked",N);const i=e.target.files[0];if(i){const l=".".concat(i.name.split(".").pop());if(!k.includes(l.toLowerCase()))return void Q({titleMessage:"oops!",descriptionMessage:"Invalid file type. Please select a valid file.",messageType:"error"},(()=>_.current()));if(i.size>10485760)return void Q({titleMessage:"oops!",descriptionMessage:"File size exceeds the limit of 10 MB. Please select a smaller file.",messageType:"error"},(()=>_.current()));E(e.target.files[0]),console.log("inside if");(new FileReader).onload=e=>{}}}}),(0,M.jsx)("span",{className:"upload-icon",children:(0,M.jsx)(X.Z,{})}),(0,M.jsxs)("span",{className:"file-upload-txt",children:["Click here to choose files (max file size"," ","".concat("10"," MB"),") '.doc', '.txt', '.pdf','.docx', '.xls', '.ppt', '.pptx', '.xlsx', '.jpg', '.jpeg', '.png"]})]})}),(0,M.jsx)("p",{style:{color:"#f7a823",fontFamily:"ProximaNova-Semibold, serif, sans-serif",margin:"10px 0px"},children:"Uploading large files may take some time"}),null!==(l=null===C||void 0===C?void 0:C.name)&&void 0!==l?l:null===N||void 0===N||null===(r=N.sections[T])||void 0===r||null===(c=r.documents)||void 0===c||null===(v=c[D])||void 0===v?void 0:v.originalName]}),primaryButtonText:"Save",secondaryButtonText:"Cancel",onPrimaryModalButtonClickHandler:async()=>{if(""===N.sections[T].documents[D].documentTitle)return Z(!1),E(""),void Q({titleMessage:"oops!",descriptionMessage:"Please enter title first",messageType:"error"},(()=>_.current()));if(""===C||null===C)Z(!1);else{S.append("questionnaireId",null===N||void 0===N?void 0:N.uuid),S.append("sectionId",N.sections[T].uuid),S.append("documentId",N.sections[T].documents[D].uuid),S.append("documentTitle",N.sections[T].documents[D].documentTitle),S.append("document",C);try{const e=await h.H.post(x.eb,S,{headers:{"Content-Type":"multipart/form-data"}});if(201===e.status){let i={...N};i.sections[T].documents[D].originalName=C.name,b(i),S.append("questionnaireId",null===N||void 0===N?void 0:N.uuid),S.append("sectionId",N.sections[T].uuid),S.delete("document"),S.delete("documentTitle"),S.delete("documentId"),E(""),Z(!1),A(""),Q({titleMessage:"Hurray!",descriptionMessage:e.data.message,messageType:"success"},(()=>_.current()))}}catch(e){(0,J.K)(e,Q,_,P),S.delete("document"),S.delete("documentTitle"),S.delete("documentId"),console.log("error from file ")}}},isDisabledPrimaryButton:!1,onSecondaryModalButtonClickHandler:()=>{Z(!1),E(null)},openModal:w,setOpenModal:Z,isModalForm:!0,handleCloseRedirect:()=>{Z(!1),E(null)}}),(0,M.jsxs)("div",{className:"que-form-card-wrapper",children:[(0,M.jsx)("div",{className:"drag-drop-box"}),null===(m=N.sections)||void 0===m?void 0:m[T].documents.map(((e,i)=>{var l,n,r,c,v;return(0,M.jsx)("div",{className:"que-card-blk \n        ".concat(i+1===(null===(l=N.sections)||void 0===l?void 0:l[T].documents.length)&&"active","\n        "),children:(0,M.jsxs)("div",{className:"que-form-blk",children:[(0,M.jsxs)("div",{className:"flex-between-other-section",children:[(0,M.jsx)("div",{className:"flex-between-other-section-left",children:(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsxs)("label",{htmlFor:"inputField",children:["Type ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsxs)(t.Z,{className:"fullwidth-field",children:[(0,M.jsx)("div",{className:"select-field",children:(0,M.jsx)(o.Z,{MenuProps:$,placeholder:"Select type",IconComponent:e=>(0,M.jsx)(p.Z,{...e}),name:"inputType",value:null===e||void 0===e?void 0:e.type,onChange:e=>((e,i)=>{let l={...N};l.sections[T].documents[i].type=e.target.value,"Link"===e.target.value&&(l.sections[T].documents[i]={uuid:l.sections[T].documents[i].uuid,linkTitle:l.sections[T].documents[i].documentTitle,type:e.target.value,link:""},b(l)),b(l)})(e,i),children:["Link","File"].map((e=>(0,M.jsx)(d.Z,{value:e,children:e})))})}),(0,M.jsx)(a.Z,{children:" "})]})]})}),(0,M.jsxs)("div",{className:"flex-mid-other-section form-group",children:[(0,M.jsxs)("label",{htmlFor:"questionTitle",children:["Title "," ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsx)(s.Z,{className:O(e,i),placeholder:"Enter title",name:"File"===N.sections[T].documents[i].type?"documentTitle":"linkTitle",value:"File"===N.sections[T].documents[i].type?null===e||void 0===e?void 0:e.documentTitle:null===e||void 0===e?void 0:e.linkTitle,helperText:U(e,i),onChange:e=>B(e,i),onBlur:e=>F(e,i)})]}),"File"===N.sections[T].documents[i].type?(0,M.jsx)("div",{className:"flex-end-other-section form-group",children:(0,M.jsxs)(t.Z,{children:[(0,M.jsx)("a",{href:"#",onClick:()=>{Z(!0),A(i)},style:{color:"#f7a823",textDecoration:"none",pointerEvents:"auto"},children:"Upload Document"}),(0,M.jsx)("p",{style:{margin:"8px 0 auto"},children:null===N||void 0===N||null===(n=N.sections[T])||void 0===n||null===(r=n.documents)||void 0===r||null===(c=r[i])||void 0===c?void 0:c.originalName}),(0,M.jsx)(a.Z,{children:null!==e&&void 0!==e&&e.originalName||null===q||void 0===q||!q.originalName?" ":"Upload document"})]})}):(0,M.jsxs)("div",{className:"flex-end-other-section form-group",children:[(0,M.jsxs)("label",{htmlFor:"questionTitle",children:["Link "," ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsx)(s.Z,{className:"input-field ".concat(null!==e&&void 0!==e&&e.link||!(null===q||void 0===q?void 0:q.link)?H(null===e||void 0===e?void 0:e.link)&&(null===q||void 0===q?void 0:q.link)&&"input-error":"input-error"," "),placeholder:"Enter Link",name:"link",value:null===e||void 0===e?void 0:e.link,helperText:null!==e&&void 0!==e&&e.link||null===q||void 0===q||!q.link?H(null===e||void 0===e?void 0:e.link)&&null!==q&&void 0!==q&&q.link?"Link already added":"":"Enter Link",onChange:e=>B(e,i),onBlur:e=>F(e,i)})]})]}),(0,M.jsx)("div",{className:"que-card-icon-sect",children:(0,M.jsxs)("div",{className:"que-card-icon-blk",children:[(0,M.jsx)("div",{className:"que-card-icon add-que-iconblk mr-40",children:(0,M.jsx)(u.Z,{title:"Add document",children:(0,M.jsx)("img",{onClick:L,src:"/images/add-question-icon.svg",alt:""})})}),(null===(v=R[0].documents)||void 0===v?void 0:v.length)>1&&(0,M.jsx)("div",{className:"que-card-icon delete-iconblk mr-40",children:(0,M.jsx)(u.Z,{title:"Delete Question",children:(0,M.jsx)("img",{onClick:()=>(async e=>{var i;console.log("questionnaire id = ",null===N||void 0===N?void 0:N.uuid);try{const i=await h.H.delete(x.Gg,{data:{questionnaireId:N.uuid,documentId:e}});console.log("document deleted",i)}catch(s){console.log("Error from delete uploaded other doc",s)}let l={...N},n=null===l||void 0===l||null===(i=l.sections[T])||void 0===i?void 0:i.documents.filter((i=>i.uuid!==e));l.sections[T].documents=[...n],b(l)})(null===e||void 0===e?void 0:e.uuid),src:"/images/delete-icon.svg",alt:""})})}),(0,M.jsx)("div",{className:"required-toggle-btnblk"})]})})]})},null===e||void 0===e?void 0:e.uuid)}))]})]})},ie=e=>{let{value:i,questionnaire:l,setQuestionnaire:r,uuid:c,setValue:v,index:m,section:b,id:N,globalSectionTitleError:T,setGlobalSectionTitleError:y,setSameSectionsNames:q,sameSectionsNames:w,err:Z,setErr:C,tableErr:E,setTableErr:S,questionTitleList:I,setQuestionTitleList:Q}=e;const _=(0,g.s0)(),D={PaperProps:{style:{maxHeight:168}}},A=n.useRef(),[B,F]=(0,V.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),L=e=>{var i,l;F({titleMessage:"Error",descriptionMessage:null!==e&&void 0!==e&&null!==(i=e.response)&&void 0!==i&&null!==(l=i.data)&&void 0!==l&&l.message&&"string"===typeof e.response.data.message?e.response.data.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>A.current()))},[R,H]=(0,n.useState)(!1),O=e=>{let i={...l},n=i.sections.filter((i=>i.uuid!==e));r({...i,sections:n}),v(0),$(!1)},U=(e,i)=>{let n=null===l||void 0===l?void 0:l.sections.filter((e=>"table"===e.layout)),s=n.map((e=>({section:e.sectionTitle,columnTitles:e.columnValues.map((e=>e.title))})));for(let d=0;d<l.sections.length;d++){const n=l.sections[d];if("table"===n.layout){let a=n.columnValues.map((e=>e.hideColumn));if(a.every((e=>"yes"===e))){console.log("every column is hidden",a),F({titleMessage:"Error",descriptionMessage:"All columns are hidden.Make at least one column visible.",messageType:"error"},(()=>A.current())),i.push(d),e++;break}for(let r=0;r<n.columnValues.length;r++){const a=n.columnValues[r].title,c=n.columnValues[r].columnType;var t,o;if(""===a&&(S("Error hai"),i.push(d),e++),"prefilled"===c)null===l||void 0===l||null===(t=l.sections[d])||void 0===t||null===(o=t.rowValues)||void 0===o||o.forEach(((l,n)=>{var s;null!==l&&void 0!==l&&null!==(s=l.cells[r])&&void 0!==s&&s.value||(S("Error hai"),i.push(d),e++)}));for(let n=0;n<s.length;n++){let t=0;const o=s[n];for(let n=0;n<o.columnTitles.length;n++){const s=o.columnTitles[n];let d=l.sections.map(((e,i)=>e.sectionTitle)).indexOf(o.section);if(a===s&&t++,t>1){e++,S("Same name hai"),i.push(d);break}}}}}}return e},Y=e=>[...w].filter((i=>i===e)).length>1,G=e=>{const{name:i,value:n}=e.target;let s={...l};s.sections[m][i]=n,r(s)},K=e=>{const{name:i,value:n}=e.target;let s={...l};s.sections[m][i]=null===n||void 0===n?void 0:n.trim(),r(s)},X=async(e,i)=>{null===e||void 0===e||e.preventDefault();const n=await(async()=>{let e=0,i=null===l||void 0===l?void 0:l.sections.map((e=>e.sectionTitle)),n={questionTitle:"",option:"",documentTitle:"",originalName:""},s=[];q([...i]);for(let v=0;v<(null===l||void 0===l?void 0:l.sections.length);v++){let p=0;for(let e=0;e<i.length;e++){const n=i[e];l.sections[v].sectionTitle===n&&p++}if(p>1)s.push(v),e++,y({errMsg:"Section name already in use"});else if("table"==l.sections[v].layout)e=await U(e,s);else if("form"==l.sections[v].layout){for(let i=0;i<(null===l||void 0===l?void 0:l.sections.length);i++){var t,o;const d=i;let a=l.sections[d].questions.map((e=>e.questionTitle));null===l||void 0===l||null===(t=l.sections[d])||void 0===t||null===(o=t.questions)||void 0===o||o.map(((l,t)=>{var o;""===(null===l||void 0===l?void 0:l.questionTitle)&&(n.questionTitle="Enter question title",e++,s.push(i)),a.filter((e=>e===(null===l||void 0===l?void 0:l.questionTitle))).length>1&&(n.questionTitle="Question title already in use.",e++,s.push(i)),console.log("error in form question title missing"),["dropdown","checkbox","radioGroup"].includes(null===l||void 0===l?void 0:l.inputType)&&(null===l||void 0===l||null===(o=l.options)||void 0===o||o.map((l=>{""===l&&(n.option="Enter option",e++,s.push(i))})))}))}C({...n})}else if("documents"==l.sections[v].layout){for(let i=0;i<(null===l||void 0===l?void 0:l.sections.length);i++){var d,a,r,c,u,m;const t=i;let o=null===l||void 0===l||null===(d=l.sections[t])||void 0===d||null===(a=d.documents)||void 0===a?void 0:a.map((e=>e.documentTitle)),v=null===l||void 0===l||null===(r=l.sections[t])||void 0===r||null===(c=r.documents)||void 0===c?void 0:c.map((e=>e.linkTitle));null===l||void 0===l||null===(u=l.sections[t])||void 0===u||null===(m=u.documents)||void 0===m||m.map(((l,t)=>{"File"===(null===l||void 0===l?void 0:l.type)&&(""===l.documentTitle&&(n.documentTitle="Enter document title",e++,s.push(i)),""===l.originalName&&(n.originalName="upload document",e++,s.push(i)),o.filter((e=>e===(null===l||void 0===l?void 0:l.documentTitle))).length>1&&(n.documentTitle="Document title already in use.",e++,s.push(i))),"Link"===(null===l||void 0===l?void 0:l.type)&&(""===l.linkTitle&&(n.linkTitle="Enter Link title",e++,s.push(i)),""===l.link&&(n.link="Add link",e++,s.push(i)),v.filter((e=>e===(null===l||void 0===l?void 0:l.linkTitle))).length>1&&(n.linkTitle="Link title already in use.",e++,s.push(i)))}))}C({...n})}}""!==(null===l||void 0===l?void 0:l.title)&&""!==(null===l||void 0===l?void 0:l.sheetName)||(y({errMsg:"Section title required"}),e++);for(let v=0;v<l.sections.length;v++)""===l.sections[v].sectionTitle&&(y({...T,sectionTitleEmpty:"Section title required"}),s.push(v),e++);if(s.length>0){let e=[...s];v(e[0])}return 0===e&&(H(!0),!0)})();return!!n&&await ne(void 0,i)},[J,$]=((0,g.UO)(),(0,n.useState)(!1)),[ie,le]=(0,n.useState)(!1),ne=async(e,i)=>{try{k.Y.info("Questionnaire - Save Content - saveSection handler"),console.log("save section called");const n=await h.H.post(x.ZW,e||l);if(201===n.status){(async()=>{try{var e;const l=await h.H.get("".concat(x.ZW,"/").concat(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.uuid));return r({...l.data}),setTimeout((()=>{v(l.data.sections.length-1)}),3e3),i||F({titleMessage:"Success!",descriptionMessage:n.data.message,messageType:"success"},(()=>A.current())),setTimeout((()=>_("/questionnaires",{state:i?0:1})),3e3),!0}catch(l){return L(l),!1}})()}return n.data.uuid}catch(m){var n,s,t,o;if(H(!1),"ERR_CANCELED"===(null===m||void 0===m?void 0:m.code))return;if(k.Y.info("Questionnaire - Save Content - saveSection handler - catch error - ".concat(null===m||void 0===m||null===(n=m.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)),401==(null===m||void 0===m||null===(t=m.response)||void 0===t?void 0:t.status))F({titleMessage:"Error!",descriptionMessage:"Session Timeout: Please login again",messageType:"error"},(()=>A.current())),setTimeout((()=>_("/login")),3e3);else{if(403!==(null===m||void 0===m||null===(o=m.response)||void 0===o?void 0:o.status))return L(m),!1;var d,a,c,u;F({titleMessage:"Error!",descriptionMessage:null!==m&&void 0!==m&&null!==(d=m.response)&&void 0!==d&&null!==(a=d.data)&&void 0!==a&&a.message?null===m||void 0===m||null===(c=m.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>A.current())),setTimeout((()=>_("/home")),3e3)}}};return(0,M.jsxs)("div",{className:"sect-form-card-wrapper",children:[(0,M.jsx)(W.Z,{myRef:A,titleMessage:B.titleMessage,descriptionMessage:B.descriptionMessage,messageType:B.messageType}),(0,M.jsx)(j.Z,{title:(0,M.jsxs)("p",{children:["Delete Section"," ",(null===b||void 0===b?void 0:b.sectionTitle)&&'"'+(null===b||void 0===b?void 0:b.sectionTitle)+'"']}),info1:(0,M.jsx)("p",{children:"On deleting, all the details of this section would get deleted and this will be an irreversible action."}),info2:(0,M.jsxs)("p",{children:["Do you still want to delete the"," ",(0,M.jsx)("b",{children:null!==b&&void 0!==b&&b.sectionTitle?null===b||void 0===b?void 0:b.sectionTitle:"Section"}),"?"]}),primaryButtonText:"Delete",secondaryButtonText:"Cancel",onPrimaryModalButtonClickHandler:()=>{O(c)},onSecondaryModalButtonClickHandler:()=>{$(!1)},openModal:J,setOpenModal:$}),(0,M.jsx)(j.Z,{title:(0,M.jsx)("p",{children:"Cancel Questionnaire"}),info1:(0,M.jsx)("p",{children:" On canceling, newly added details will be discarded."}),info2:(0,M.jsx)("p",{children:"Do you still want to cancel it?"}),primaryButtonText:"Yes",secondaryButtonText:"No",onPrimaryModalButtonClickHandler:()=>{le(!1),_("/questionnaires",{state:null!==l&&void 0!==l&&l.isPublished?0:1})},onSecondaryModalButtonClickHandler:()=>{le(!1)},openModal:ie,setOpenModal:le}),(0,M.jsx)("div",{className:"sect-form-card-info",children:(0,M.jsxs)("div",{className:"sect-form-innercard-blk",children:[l.sections.length>1&&(0,M.jsxs)("div",{className:"sect-ttl-blk flex-between",children:[(0,M.jsx)("div",{className:"sect-leftblk"}),(0,M.jsx)("div",{className:"sect-rightblk",children:(0,M.jsx)("div",{className:"sect-ttl-right-iconblk",children:(0,M.jsx)("span",{className:"sect-icon-blk delete-iconblk",children:(0,M.jsx)(u.Z,{title:"Delete section",children:(0,M.jsx)("img",{onClick:()=>$(!0),src:"/images/delete-icon.svg",alt:""})})})})})]}),(0,M.jsx)("form",{children:(0,M.jsxs)("div",{className:"sect-form-card-blk",children:[(0,M.jsxs)("div",{className:"sect-form-card-innerblk flex-between",children:[(0,M.jsx)("div",{className:"sect-card-form-leftfield",children:(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsxs)("label",{htmlFor:"title",children:["Section Name ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsx)(s.Z,{className:"input-field ".concat((""===b.sectionTitle&&(null===T||void 0===T?void 0:T.sectionTitleEmpty)||Y(b.sectionTitle)&&(null===T||void 0===T?void 0:T.errMsg))&&"input-error"),id:"outlined-basic",placeholder:"Enter section name",variant:"outlined",onChange:G,onBlur:K,value:b.sectionTitle,name:"sectionTitle",helperText:""===b.sectionTitle&&null!==T&&void 0!==T&&T.sectionTitleEmpty?"Enter the section name":Y(b.sectionTitle)&&null!==T&&void 0!==T&&T.errMsg?null===T||void 0===T?void 0:T.errMsg:" "})]})}),(0,M.jsx)("div",{className:"sect-card-form-rightfield",children:(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsxs)("label",{htmlFor:"layout",children:["Layout ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsx)("div",{className:"select-field",children:(0,M.jsxs)(t.Z,{className:"fullwidth-field",children:[(0,M.jsxs)(o.Z,{IconComponent:e=>(0,M.jsx)(p.Z,{...e}),name:"layout",value:null===b||void 0===b?void 0:b.layout,onChange:e=>{const{name:i,value:n}=e.target;let s={...l};if(s.sections[m].layout=n,"table"===n){s.sections[m].questions=[];const e=(0,f.Z)();s.sections[m].columnValues=[{uuid:e,title:"",isRequired:!0,columnType:"textbox",options:["",""],validation:"",hideColumn:"no"}],s.sections[m].rowValues=[{uuid:(0,f.Z)(),cells:[{columnId:e,value:""}]},{uuid:(0,f.Z)(),cells:[{columnId:e,value:""}]}]}"form"===n&&(s.sections[m].columnValues=[],s.sections[m].rowValues=[],s.sections[m].questions=[{uuid:(0,f.Z)(),questionTitle:"",inputType:"singleTextbox",validation:"",defaultValue:"",isRequired:!0,options:["",""]}]),"documents"===n&&(s.sections[m].questions=[],s.sections[m].documents=[{uuid:(0,f.Z)(),documentTitle:"",originalName:"",type:"File"}]),r(s)},MenuProps:D,children:[(0,M.jsx)(d.Z,{value:"form",children:"Form"}),(0,M.jsx)(d.Z,{value:"table",selected:!0,children:"Table"}),(0,M.jsx)(d.Z,{value:"documents",children:"Other Documents"})]}),(0,M.jsx)(a.Z,{children:" "})]})})]})})]}),(0,M.jsx)("div",{className:"sect-form-card-innerblk",children:(0,M.jsx)("div",{className:"sect-card-form-leftfield full-width",children:(0,M.jsxs)("div",{className:"form-group mb-0",children:[(0,M.jsx)("label",{htmlFor:"emailid",children:"Description"}),(0,M.jsx)(s.Z,{className:"input-field",id:"outlined-basic",placeholder:"Enter description",variant:"outlined",onChange:G,onBlur:K,name:"description",value:b.description})]})})})]})})]})}),"form"===(null===b||void 0===b?void 0:b.layout)?(0,M.jsx)(P,{sectionIndex:m,questionnaire:l,setQuestionnaire:r,err:Z,setErr:C,questionTitleList:I,setQuestionTitleList:Q}):"table"===(null===b||void 0===b?void 0:b.layout)?(0,M.jsx)(z,{sectionIndex:m,questionnaire:l,setQuestionnaire:r,tableErr:E,setTableErr:S}):(0,M.jsx)(ee,{sectionIndex:m,questionnaire:l,setQuestionnaire:r,documents:null===l||void 0===l?void 0:l.documents,err:Z}),(0,M.jsxs)("div",{className:"form-btn flex-between add-members-btn que-page-btn",children:[(0,M.jsx)("button",{type:"reset",className:"secondary-button mr-10",onClick:()=>{le(!0)},children:"Cancel"}),(0,M.jsx)("button",{type:"submit",onClick:X,disabled:R,className:"outlined-button add-button mr-10",children:null!==l&&void 0!==l&&l.isDraft||null!==l&&void 0!==l&&l.isPublished?"Update":"Save"}),(0,M.jsx)("button",{type:"submit",disabled:R,className:"primary-button add-button",onClick:async e=>{const i=await X(e,!0);if(i)try{var l;k.Y.info("Questionnaire - Section Content - onPublishButtonClickHandler handler");const e=await h.H.put("".concat(x.ZW,"/publish/").concat(i));F({titleMessage:"Success!",descriptionMessage:null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message,messageType:"success"},(()=>A.current()))}catch(t){var n,s;if(H(!1),"ERR_CANCELED"===(null===t||void 0===t?void 0:t.code))return;k.Y.info("Questionnaire - Section Content - onPublishButtonClickHandler handler - ".concat(null===t||void 0===t||null===(n=t.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)),L(t)}},children:"Publish"})]})]})};var le=l(11087),ne=l(1260),se=l(98460),te=l(28386);function oe(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}const de={PaperProps:{style:{maxHeight:99}}};const ae=function(){var e;const[i,l]=(0,n.useState)(!1),[j,b]=(0,n.useState)([]),[N,T]=n.useState(0),[y,q]=(0,n.useState)({questionTitle:"",option:""}),[w,Z]=(0,n.useState)(""),[C,E]=(0,n.useState)([]),{id:S}=(0,g.UO)(),P=(0,g.TH)(),{pathname:I}=P;(0,ne.j)(I.includes("edit")?"Edit Questionnaire":"Add Questionnaire");const[Q,_]=(0,n.useState)({errMsg:""}),D=n.useRef(),[A,F]=(0,V.Z)({titleMessage:"",descriptionMessage:"",messageType:"success"}),L=(e,i)=>{T(i)},R=(0,g.s0)(),[H,O]=(0,n.useState)({uuid:S,version:"",title:"",sheetName:"",sections:[{id:"",isRequired:!0,uuid:(0,f.Z)(),sectionTitle:"",description:"",layout:"form",isActive:!0,questions:[{uuid:(0,f.Z)(),questionTitle:"",inputType:"singleTextbox",validation:"",defaultValue:"",isRequired:!0,options:["",""]}],value:1}],createdAt:Date,updatedAt:Date,createdBy:"",updatedBy:"",isActive:!0}),U=(0,g.UO)(),Y=(0,B.v9)((e=>{var i;return null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.privilege})),G=(0,B.v9)((e=>{var i;return null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.userObj})),z="Super Admin"===(null===Y||void 0===Y?void 0:Y.name);let K=("Super Admin"===(null===G||void 0===G||null===(e=G.roleId)||void 0===e?void 0:e.name)?[]:Object.values(null===Y||void 0===Y?void 0:Y.privileges)).filter((e=>{var i;return"Questionnaire"===(null===e||void 0===e||null===(i=e.moduleId)||void 0===i?void 0:i.name)})).map((e=>({questionnaire:{list:null===e||void 0===e?void 0:e.list,view:null===e||void 0===e?void 0:e.view,edit:null===e||void 0===e?void 0:e.edit,delete:null===e||void 0===e?void 0:e.delete,add:null===e||void 0===e?void 0:e.add}})));(0,n.useEffect)((()=>{var e,i;let n=!0,s=new AbortController;return(null!==(e=K[0])&&void 0!==e&&null!==(i=e.questionnaire)&&void 0!==i&&i.edit||z)&&U["*"].includes("edit")&&(async()=>{try{l(!0),k.Y.info("Questionnaire - Add New Questionnaire - fetch handler");const e=await h.H.get("".concat(x.ZW,"/").concat(S),{signal:s.signal});l(!1),n&&O({...e.data})}catch(t){var e,i;if("ERR_CANCELED"===(null===t||void 0===t?void 0:t.code))return;k.Y.info("Questionnaire - Add New Questionnaire - fetch handler - catch error - ".concat(null===t||void 0===t||null===(e=t.response)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.message)),l(!1),(0,J.K)(t,F,D,R,"/questionnaires")}})(),()=>{n=!1,s.abort()}}),[]);const X=()=>{O({...H,sections:[...H.sections,{id:"",uuid:(0,f.Z)(),srNo:"",sectionTitle:"",description:"",layout:"form",isActive:!0,questions:[{uuid:(0,f.Z)(),questionTitle:"",inputType:"singleTextbox",validation:"",defaultValue:"",isRequired:!0,options:["",""]}],value:H.sections.length+1}]}),T(H.sections.length)};return(0,M.jsxs)("div",{className:"page-wrapper",children:[(0,M.jsx)(W.Z,{myRef:D,titleMessage:A.titleMessage,descriptionMessage:A.descriptionMessage,messageType:A.messageType}),(0,M.jsx)("div",{className:"breadcrumb-wrapper",children:(0,M.jsx)("div",{className:"container",children:(0,M.jsxs)("ul",{className:"breadcrumb",children:[(0,M.jsx)("li",{children:(0,M.jsxs)(le.rU,{to:"/questionnaires",state:null!==H&&void 0!==H&&H.isPublished?0:1,children:["Questionnaire ",null!==H&&void 0!==H&&H.isPublished?"(Published)":"(Drafted)"]})}),((null===H||void 0===H?void 0:H.isDraft)||(null===H||void 0===H?void 0:H.isPublished))&&(0,M.jsx)("li",{children:(0,M.jsx)(le.rU,{to:"/questionnaires/preview-questionnaire/".concat(U.id),children:"Preview Questionnaire"})}),null!==H&&void 0!==H&&H.isDraft||null!==H&&void 0!==H&&H.isPublished?(0,M.jsx)("li",{children:"Edit Questionnaire"}):(0,M.jsx)("li",{children:"Add Questionnaire"})]})})}),(0,M.jsx)("section",{children:i?(0,M.jsx)(te.Z,{}):(0,M.jsxs)("div",{className:"container",children:[(0,M.jsx)("div",{className:"form-header flex-between",children:null!==H&&void 0!==H&&H.isDraft||null!==H&&void 0!==H&&H.isPublished?(0,M.jsx)("h2",{className:"heading2",children:"Edit Questionnaire"}):(0,M.jsx)("h2",{className:"heading2",children:"Add Questionnaire"})}),(0,M.jsxs)("div",{className:"que-ttl-blk flex-between",children:[(0,M.jsx)("div",{className:"que-ttl-left",children:(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsxs)("label",{htmlFor:"emailid",children:["Questionnaire Title ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsx)(s.Z,{className:"input-field ".concat(""===H.title&&(null===Q||void 0===Q?void 0:Q.errMsg)&&"input-error"),id:"outlined-basic",value:H.title,placeholder:"Enter questionnaire title",disabled:(null===H||void 0===H?void 0:H.isPublished)||(null===H||void 0===H?void 0:H.isDraft),variant:"outlined",onChange:e=>{O({...H,title:e.target.value})},onBlur:e=>{var i;return O({...H,title:null===(i=e.target.value)||void 0===i?void 0:i.trim()})},helperText:""===H.title&&null!==Q&&void 0!==Q&&Q.errMsg?"Enter the questionnaire title":" "})]})}),(0,M.jsxs)("div",{className:"que-ttl-right flex-between",children:[(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsxs)("label",{htmlFor:"emailid",children:["Sheet Name ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsx)(s.Z,{className:"input-field ".concat(""===H.sheetName&&(null===Q||void 0===Q?void 0:Q.errMsg)&&"input-error"),id:"outlined-basic",inputProps:{maxLength:31},value:H.sheetName,placeholder:"Enter sheet name",variant:"outlined",onChange:e=>{O({...H,sheetName:e.target.value})},helperText:""===H.sheetName&&null!==Q&&void 0!==Q&&Q.errMsg?"Enter the sheet name":" "})]}),(0,M.jsxs)("div",{className:"form-group",children:[(0,M.jsxs)("label",{htmlFor:"status",children:["Status ",(0,M.jsx)("span",{className:"mandatory",children:"*"})]}),(0,M.jsx)("div",{className:"select-field",children:(0,M.jsxs)(t.Z,{className:"fullwidth-field",children:[(0,M.jsxs)(o.Z,{IconComponent:e=>(0,M.jsx)(p.Z,{...e}),value:null!==H&&void 0!==H&&H.isActive?"active":"inActive",onChange:e=>{O({...H,isActive:"active"===e.target.value})},MenuProps:de,name:"isActive",children:[(0,M.jsx)(d.Z,{value:"active",selected:!0,children:"Active"}),(0,M.jsx)(d.Z,{value:"inActive",children:"Inactive"})]}),(0,M.jsx)(a.Z,{children:" "})]})})]})]})]}),(0,M.jsxs)("div",{className:"section-form-sect",children:[(0,M.jsxs)("div",{className:"section-tab-blk flex-between",children:[(0,M.jsx)("div",{className:"section-tab-leftblk",children:(0,M.jsx)(r.Z,{sx:{borderBottom:1,borderColor:"divider"},className:"tabs-sect que-tab-sect",children:(0,M.jsx)(c.Z,{value:N,onChange:L,"aria-label":"basic tabs example",variant:"scrollable",scrollButtons:"auto",children:H.sections.map(((e,i,l)=>(0,M.jsx)(u.Z,{title:e.sectionTitle,placement:"bottom-start",children:(0,M.jsx)(v.Z,{className:"section-tab-item",label:"section ".concat(i+1),...oe(i)})},null===e||void 0===e?void 0:e.uuid)))})})}),(0,M.jsx)("div",{className:"section-tab-rightblk",children:(0,M.jsxs)("div",{className:"form-header-right-txt",children:[(0,M.jsxs)("div",{onClick:()=>{((null===H||void 0===H?void 0:H.isDraft)||(null===H||void 0===H?void 0:H.isPublished))&&R("/questionnaires/preview-questionnaire/".concat(S))},className:"tertiary-btn-blk ".concat((null===H||void 0===H?void 0:H.isDraft)||(null===H||void 0===H?void 0:H.isPublished)||"disabled-tertiary-btn","  mr-20"),children:[(0,M.jsx)("span",{className:"preview-icon",children:(0,M.jsx)(m.Z,{})}),(0,M.jsx)("span",{className:"addmore-txt",children:"Preview"})]}),(0,M.jsxs)("div",{className:"tertiary-btn-blk",children:[(0,M.jsx)("span",{className:"addmore-icon",onClick:X,children:(0,M.jsx)("i",{className:"fa fa-plus"})}),(0,M.jsx)("span",{onClick:X,className:"addmore-txt",children:"Add Section"})]})]})})]}),(0,M.jsx)("div",{className:"que-tab-data",children:H.sections.map(((e,i)=>(0,M.jsx)(se.x,{value:N,index:i,children:(0,M.jsx)(ie,{sameSectionsNames:j,err:y,setErr:q,setSameSectionsNames:b,setQuestionnaire:O,tableErr:w,setTableErr:Z,questionnaire:H,value:e.value,uuid:e.uuid,setValue:T,index:i,section:e,tabChange:L,globalSectionTitleError:Q,setGlobalSectionTitleError:_,questionTitleList:C,setQuestionTitleList:E})},null===e||void 0===e?void 0:e.uuid)))})]})]})})]})}}}]);
//# sourceMappingURL=8518.02748318.chunk.js.map