"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[1118],{14227:(e,l,a)=>{a.d(l,{Z:()=>n});var r=a(56890),s=a(35855),t=a(53994),i=(a(72791),a(80184));const n=()=>(0,i.jsx)(r.Z,{children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(t.Z,{align:"left",className:"table-header",width:"16%",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Modules"})}),(0,i.jsx)(t.Z,{className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Fill"})}),(0,i.jsx)(t.Z,{className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"List"})}),(0,i.jsx)(t.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Add"})}),(0,i.jsx)(t.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Edit"})}),(0,i.jsx)(t.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"View"})}),(0,i.jsx)(t.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"Delete"})}),(0,i.jsx)(t.Z,{align:"center",className:"table-header",children:(0,i.jsx)("span",{className:"sorted-blk",children:"All"})})]})})},51118:(e,l,a)=>{a.r(l),a.d(l,{default:()=>S});var r=a(97275),s=a(88970),t=a(85523),i=a(61419),n=a(697),o=a(35527),d=a(39281),c=a(79836),m=a(53382),h=a(35855),u=a(53994),p=a(94454),b=a(72791),x=a(61134),v=a(57689),f=a(11087),g=a(55294),j=a(14917),Z=a(27181),w=(a(71605),a(12820)),N=a(76218),k=a(1260),y=a(14227),C=a(28386),R=a(45736),P=a(80184);const S=()=>{(0,k.j)("Edit Role");const e=(0,v.UO)(),[l,a]=(0,b.useState)(!1),S=(0,v.s0)(),[E,M]=(0,w.Z)({titleMessage:"",descriptionMessage:"",messageType:""}),F=b.useRef();let L={};const[T,q]=(0,b.useState)({...L}),[D,A]=(0,b.useState)(!1),{control:_,reset:I,setValue:O,handleSubmit:Y}=(0,x.cI)({defaultValues:{roleName:"",status:"",description:""}}),V={description:{required:"Enter the description",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required"}},G=e=>{var l;j.Y.info("Edit role - updateEditFields handler"),I({roleName:e.name,status:e.isActive?"active":"inactive",description:e.description}),l=e.privileges,j.Y.info("Edit role - createPrevileges handler"),Object.keys(l).forEach((e=>{console.log("tempPriv",e),L[e]={add:l[e].add,fill:l[e].fill,delete:l[e].delete,edit:l[e].edit,list:l[e].list,view:l[e].view,all:l[e].add&&l[e].delete&&l[e].edit&&l[e].view&&l[e].list&&("Assessment"!==l[e].moduleId.name||l[e].fill),name:l[e].moduleId.name}})),console.log("temp object",L),q({...L})};return(0,b.useEffect)((()=>{let l=!0;const r=new AbortController;return l&&(async(l,r)=>{try{a(!0);const l=await g.Z.get(N.Yn+"roles/".concat(e.id),{signal:r.signal});j.Y.info("Edit role - getRoleById handler"),console.log("edit get role by id",l),G(l.data),a(!1)}catch(i){var s,t;if(j.Y.info("Edit role - getRoleById handler catch error ".concat(null===i||void 0===i||null===(s=i.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)),"ERR_CANCELED"===(null===i||void 0===i?void 0:i.code))return;a(!1),(0,R.K)(i,M,F,S)}})(0,r),()=>{l=!1,r.abort()}}),[]),(0,P.jsxs)("div",{className:"page-wrapper",children:[(0,P.jsx)(Z.Z,{myRef:F,titleMessage:E.titleMessage,descriptionMessage:E.descriptionMessage,messageType:E.messageType}),(0,P.jsx)("div",{className:"breadcrumb-wrapper",children:(0,P.jsx)("div",{className:"container",children:(0,P.jsxs)("ul",{className:"breadcrumb",children:[(0,P.jsx)("li",{children:(0,P.jsx)(f.rU,{to:"/roles",children:"Roles"})}),(0,P.jsx)("li",{children:(0,P.jsx)(f.rU,{to:"/roles/view-role/".concat(e.id),children:"View Role"})}),(0,P.jsx)("li",{children:"Edit Role"})]})})}),(0,P.jsx)("section",{children:(0,P.jsxs)("div",{className:"container",children:[(0,P.jsx)("div",{className:"form-header flex-between",children:(0,P.jsx)("h2",{className:"heading2",children:"Edit Role"})}),l?(0,P.jsx)(C.Z,{}):(0,P.jsx)("form",{onSubmit:Y((async l=>{try{j.Y.info("Edit role - onSubmit1 handler");let r=JSON.parse(JSON.stringify(T));if(Object.keys(r).forEach((e=>{delete r[e].all,delete r[e].name})),!(e=>Object.values(e).some((e=>Object.values(e).some((e=>e)))))(r))return void M({titleMessage:"Hurray!",descriptionMessage:"Select atleast 1 privilege",messageType:"error"},(()=>F.current()));a(!0),A(!0);const s=await g.Z.put(N.Yn+"roles/".concat(e.id),{description:l.description,isActive:"active"===l.status,privileges:r});200==s.status&&(a(!1),M({titleMessage:"Success!",descriptionMessage:s.data.message,messageType:"success"},(()=>F.current())),I({roleName:"",status:"active",description:""}),setTimeout((()=>S("/roles/view-role/".concat(e.id))),3e3))}catch(t){var r,s;j.Y.info("Edit role - onSubmit1 handler ".concat(null===t||void 0===t||null===(r=t.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)),A(!1),(0,R.K)(t,M,F,S)}})),children:(0,P.jsxs)("div",{className:"card-wrapper",children:[(0,P.jsxs)("div",{className:"card-blk flex-between",children:[(0,P.jsx)("div",{className:"card-form-field",children:(0,P.jsxs)("div",{className:"form-group",children:[(0,P.jsxs)("label",{htmlFor:"roleName",children:["Role Name ",(0,P.jsx)("span",{className:"mandatory",children:"*"})]}),(0,P.jsx)(x.Qr,{name:"roleName",control:_,render:e=>{let{field:l,fieldState:{error:a}}=e;return(0,P.jsx)(r.Z,{disabled:!0,...l,className:"input-field ".concat(a&&"input-error"),id:"outlined-basic",placeholder:"Enter role name",variant:"outlined",helperText:" "})}})]})}),(0,P.jsx)("div",{className:"card-form-field",children:(0,P.jsxs)("div",{className:"form-group",children:[(0,P.jsx)("label",{htmlFor:"status",children:"Status"}),(0,P.jsx)("div",{className:"radio-btn-field",children:(0,P.jsx)(x.Qr,{name:"status",control:_,render:e=>{let{field:l}=e;return(0,P.jsxs)(s.Z,{...l,"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",className:"radio-btn",children:[(0,P.jsx)(t.Z,{value:"active",control:(0,P.jsx)(i.Z,{}),label:"Active"}),(0,P.jsx)(t.Z,{value:"inactive",control:(0,P.jsx)(i.Z,{}),label:"Inactive"})]})}})})]})}),(0,P.jsx)("div",{className:"card-form-field fullwidth",children:(0,P.jsxs)("div",{className:"form-group",children:[(0,P.jsxs)("label",{htmlFor:"description",children:["Description ",(0,P.jsx)("span",{className:"mandatory",children:"*"})]}),(0,P.jsx)(x.Qr,{name:"description",rules:{required:!0,maxLength:500,minLength:3},control:_,render:e=>{let{field:l,fieldState:{error:a}}=e;return(0,P.jsx)(r.Z,{multiline:!0,...l,onBlur:e=>O("description",e.target.value.trim()),inputProps:{maxLength:500},className:"input-textarea ".concat(a&&"input-textarea-error"),id:"outlined-basic",placeholder:"Enter description",helperText:a?V.description[a.type]:" ",variant:"outlined"})}})]})})]}),(0,P.jsx)(n.Z,{sx:{width:"100%"},className:"table-blk table-blk-role",children:(0,P.jsx)(o.Z,{sx:{width:"100%"},children:(0,P.jsx)(d.Z,{children:(0,P.jsxs)(c.Z,{sx:{minWidth:750},children:[(0,P.jsx)(y.Z,{}),(0,P.jsx)(m.Z,{children:Object.keys(T).map(((e,l)=>(0,P.jsxs)(h.Z,{hover:!0,children:[(0,P.jsx)(u.Z,{children:T[e].name}),(0,P.jsx)(u.Z,{align:"center",padding:"checkbox",children:"Assessment"===T[e].name&&(0,P.jsx)(p.Z,{className:"table-checkbox",checked:T[e].fill,onChange:()=>q((l=>({...l,[e]:{...l[e],fill:!l[e].fill,list:l[e].list||!l[e].fill,view:l[e].view||!l[e].fill,all:!l[e].fill&&l[e].add&&l[e].edit&&l[e].delete}})))})}),(0,P.jsx)(u.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==T[e].name&&(0,P.jsx)(p.Z,{className:"table-checkbox",checked:T[e].list,onChange:()=>q((l=>({...l,[e]:{...l[e],list:!l[e].list,view:l[e].view&&!l[e].list||!1,edit:l[e].edit&&!l[e].list||!1,delete:l[e].delete&&!l[e].list||!1,add:l[e].add&&!l[e].list||!1,fill:l[e].fill&&!l[e].list||!1,all:!l[e].list&&l[e].add&&l[e].edit&&l[e].view&&l[e].delete}})))})}),(0,P.jsx)(u.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==T[e].name&&(0,P.jsx)(p.Z,{className:"table-checkbox",checked:T[e].add,onChange:()=>q((l=>({...l,[e]:{...l[e],add:!l[e].add,list:l[e].list||!l[e].add,view:l[e].view||!l[e].add,all:!l[e].add&&l[e].edit&&l[e].delete}})))})}),(0,P.jsx)(u.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==T[e].name&&(0,P.jsx)(p.Z,{className:"table-checkbox",checked:T[e].edit,onChange:()=>q((l=>({...l,[e]:{...l[e],edit:!l[e].edit,list:l[e].list||!l[e].edit,view:l[e].view||!l[e].edit,all:l[e].add&&!l[e].edit&&l[e].delete}})))})}),(0,P.jsx)(u.Z,{align:"center",padding:"checkbox",children:(0,P.jsx)(p.Z,{className:"table-checkbox",checked:T[e].view,onChange:()=>q((l=>({...l,[e]:{...l[e],view:!l[e].view,list:l[e].list||!l[e].view,edit:l[e].edit&&!l[e].view||!1,delete:l[e].delete&&!l[e].view||!1,fill:l[e].fill&&!l[e].view||!1,all:l[e].add&&l[e].edit&&!l[e].view&&l[e].delete}})))})}),(0,P.jsx)(u.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==T[e].name&&(0,P.jsx)(p.Z,{className:"table-checkbox",checked:T[e].delete,onChange:()=>q((l=>({...l,[e]:{...l[e],delete:!l[e].delete,list:l[e].list||!l[e].delete,edit:l[e].edit||!l[e].delete,view:l[e].view||!l[e].delete,all:l[e].add&&!l[e].delete}})))})}),(0,P.jsx)(u.Z,{align:"center",padding:"checkbox",children:"Dashboard"!==T[e].name&&(0,P.jsx)(p.Z,{className:"table-checkbox",checked:T[e].all,onChange:()=>q((l=>({...l,[e]:{...l[e],all:!l[e].all,list:!l[e].all,view:!l[e].all,add:!l[e].all,edit:!l[e].all,delete:!l[e].all,fill:"Assessment"===T[e].name&&!l[e].all}})))})})]},e)))})]})})})}),(0,P.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,P.jsx)("button",{type:"reset",style:{marginTop:"20px"},className:"secondary-button mr-10",onClick:()=>{S("/roles/view-role/".concat(e.id))},children:"Cancel"}),(0,P.jsx)("button",{type:"submit",className:"primary-button",style:{marginTop:"20px"},disabled:D,children:"Update"})]})]})})]})})]})}},85523:(e,l,a)=>{a.d(l,{Z:()=>N});var r=a(63366),s=a(87462),t=a(72791),i=a(63733),n=a(94419),o=a(52930),d=a(53767),c=a(20890),m=a(14036),h=a(66934),u=a(31402),p=a(75878),b=a(21217);function x(e){return(0,b.Z)("MuiFormControlLabel",e)}const v=(0,p.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);var f=a(76147),g=a(80184);const j=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Z=(0,h.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,l)=>{const{ownerState:a}=e;return[{["& .".concat(v.label)]:l.label},l.root,l["labelPlacement".concat((0,m.Z)(a.labelPlacement))]]}})((e=>{let{theme:l,ownerState:a}=e;return(0,s.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(v.disabled)]:{cursor:"default"}},"start"===a.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===a.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===a.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(v.label)]:{["&.".concat(v.disabled)]:{color:(l.vars||l).palette.text.disabled}}})})),w=(0,h.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,l)=>l.asterisk})((e=>{let{theme:l}=e;return{["&.".concat(v.error)]:{color:(l.vars||l).palette.error.main}}})),N=t.forwardRef((function(e,l){var a,h;const p=(0,u.Z)({props:e,name:"MuiFormControlLabel"}),{className:b,componentsProps:v={},control:N,disabled:k,disableTypography:y,label:C,labelPlacement:R="end",required:P,slotProps:S={}}=p,E=(0,r.Z)(p,j),M=(0,o.Z)(),F=null!=(a=null!=k?k:N.props.disabled)?a:null==M?void 0:M.disabled,L=null!=P?P:N.props.required,T={disabled:F,required:L};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof N.props[e]&&"undefined"!==typeof p[e]&&(T[e]=p[e])}));const q=(0,f.Z)({props:p,muiFormControl:M,states:["error"]}),D=(0,s.Z)({},p,{disabled:F,labelPlacement:R,required:L,error:q.error}),A=(e=>{const{classes:l,disabled:a,labelPlacement:r,error:s,required:t}=e,i={root:["root",a&&"disabled","labelPlacement".concat((0,m.Z)(r)),s&&"error",t&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",s&&"error"]};return(0,n.Z)(i,x,l)})(D),_=null!=(h=S.typography)?h:v.typography;let I=C;return null==I||I.type===c.Z||y||(I=(0,g.jsx)(c.Z,(0,s.Z)({component:"span"},_,{className:(0,i.Z)(A.label,null==_?void 0:_.className),children:I}))),(0,g.jsxs)(Z,(0,s.Z)({className:(0,i.Z)(A.root,b),ownerState:D,ref:l},E,{children:[t.cloneElement(N,T),L?(0,g.jsxs)(d.Z,{display:"block",children:[I,(0,g.jsxs)(w,{ownerState:D,"aria-hidden":!0,className:A.asterisk,children:["\u2009","*"]})]}):I]}))}))},79012:(e,l,a)=>{a.d(l,{Z:()=>f});var r=a(63366),s=a(87462),t=a(72791),i=a(63733),n=a(94419),o=a(66934),d=a(31402),c=a(75878),m=a(21217);function h(e){return(0,m.Z)("MuiFormGroup",e)}(0,c.Z)("MuiFormGroup",["root","row","error"]);var u=a(52930),p=a(76147),b=a(80184);const x=["className","row"],v=(0,o.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,l)=>{const{ownerState:a}=e;return[l.root,a.row&&l.row]}})((e=>{let{ownerState:l}=e;return(0,s.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},l.row&&{flexDirection:"row"})})),f=t.forwardRef((function(e,l){const a=(0,d.Z)({props:e,name:"MuiFormGroup"}),{className:t,row:o=!1}=a,c=(0,r.Z)(a,x),m=(0,u.Z)(),f=(0,p.Z)({props:a,muiFormControl:m,states:["error"]}),g=(0,s.Z)({},a,{row:o,error:f.error}),j=(e=>{const{classes:l,row:a,error:r}=e,s={root:["root",a&&"row",r&&"error"]};return(0,n.Z)(s,h,l)})(g);return(0,b.jsx)(v,(0,s.Z)({className:(0,i.Z)(j.root,t),ownerState:g,ref:l},c))}))},88970:(e,l,a)=>{a.d(l,{Z:()=>u});var r=a(87462),s=a(63366),t=a(72791),i=a(79012),n=a(42071),o=a(98278),d=a(18672),c=a(67384),m=a(80184);const h=["actions","children","defaultValue","name","onChange","value"],u=t.forwardRef((function(e,l){const{actions:a,children:u,defaultValue:p,name:b,onChange:x,value:v}=e,f=(0,s.Z)(e,h),g=t.useRef(null),[j,Z]=(0,o.Z)({controlled:v,default:p,name:"RadioGroup"});t.useImperativeHandle(a,(()=>({focus:()=>{let e=g.current.querySelector("input:not(:disabled):checked");e||(e=g.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const w=(0,n.Z)(l,g),N=(0,c.Z)(b),k=t.useMemo((()=>({name:N,onChange(e){Z(e.target.value),x&&x(e,e.target.value)},value:j})),[N,x,Z,j]);return(0,m.jsx)(d.Z.Provider,{value:k,children:(0,m.jsx)(i.Z,(0,r.Z)({role:"radiogroup",ref:w},f,{children:u}))})}))}}]);
//# sourceMappingURL=1118.fda96328.chunk.js.map