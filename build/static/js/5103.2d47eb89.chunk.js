"use strict";(self.webpackChunkpr74_cgf_hrdd_web_front=self.webpackChunkpr74_cgf_hrdd_web_front||[]).push([[5103],{65103:(e,r,l)=>{l.r(r),l.d(r,{default:()=>R});var n=l(72791),a=l(57689),o=l(11087),t=l(45904),i=l(35527),s=l(97275),d=l(88970),c=l(85523),u=l(61419),m=l(55294),v=l(61134),p=l(27659),h=l(12820),g=l(76218),b=l(94677),f=l(12104),x=l(48086),y=l(46363),j=l(1260),Z=l(28386),N=l(14917),C=l(45736),w=l(80184);const S={countryCode:{validate:"Select the country code"},phoneNumber:{maxLength:"Max digits limit exceed",minLength:"Enter the valid phone number (Eg: 1234567890)",validate:"Enter the valid phone number (Eg: 1234567890)",pattern:"Invalid format"},name:{required:"Enter the CGF admin name",maxLength:"Max char limit exceed",minLength:"minimum 3 characters required",pattern:"Invalid format"},email:{required:"Enter the email",pattern:"Invalid format"},subRoleId:{required:"Select the role"}},R=()=>{var e;(0,j.j)("Edit Admin");const[r,l]=(0,n.useState)(!1),R=(0,a.s0)(),E=(0,a.UO)(),P=E["*"].includes("pending")?1:0,M=(0,n.useRef)(),[L,A]=(0,n.useState)([]),[I,T]=(0,n.useState)(!1),[F,k]=(0,n.useState)([]),[q,O]=(0,h.Z)({titleMessage:"",descriptionMessage:"",messageType:"error"}),[H,D]=(0,n.useState)({}),{handleSubmit:_,control:Y,formState:{errors:B},reset:G,watch:V,setValue:K,trigger:U}=(0,v.cI)({defaultValues:{name:"",email:"",subRoleId:"",phoneNumber:"",countryCode:{name:"India",countryCode:""},status:"",role:""}});(0,n.useEffect)((()=>{let e=!0,r=new AbortController;(async()=>{try{const l=await m.Z.get(g.od,{signal:r.signal});if(N.Y.info("Edit sub admin - fetchCountries  handler"),e){let e=null===l||void 0===l?void 0:l.data.map((e=>e.countryCode)),r=new Set(e);A([...r])}}catch(a){var l,n;if(N.Y.info("Edit sub admin - fetchCountries  handler catch error - ".concat(null===a||void 0===a||null===(l=a.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)),"ERR_CANCELED"===(null===a||void 0===a?void 0:a.code))return;(0,C.K)(a,O,M,R)}})();(async()=>{try{var n,a,o,t,i,s,d,c;l(!0);const u=await b.H.get(E["*"].includes("pending")?g.we+E.id:g.BJ+E.id,{signal:r.signal});l(!1),N.Y.info("Edit sub admin - fetchSubAdmin  handler"),e&&D(u.data),G({name:null===u||void 0===u||null===(n=u.data)||void 0===n?void 0:n.name,email:null===u||void 0===u||null===(a=u.data)||void 0===a?void 0:a.email,countryCode:null===u||void 0===u||null===(o=u.data)||void 0===o?void 0:o.countryCode,phoneNumber:null===u||void 0===u||null===(t=u.data)||void 0===t?void 0:t.phoneNumber,status:null!==u&&void 0!==u&&null!==(i=u.data)&&void 0!==i&&i.isActive?"active":"inactive",subRoleId:null!==(s=null===u||void 0===u||null===(d=u.data)||void 0===d||null===(c=d.subRoleId)||void 0===c?void 0:c._id)&&void 0!==s?s:""})}catch(v){var u,m;if("ERR_CANCELED"===(null===v||void 0===v?void 0:v.code))return;l(!1),N.Y.info("Edit sub admin - fetchSubAdmin  handler catch error -".concat(null===v||void 0===v||null===(u=v.response)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.message)),(0,C.K)(v,O,M,R,"/users/cgf-admin",P)}})();return(async()=>{try{const e=await b.H.get(g.Lp);N.Y.info("Edit sub admin - fetchRoles handler"),k(e.data)}catch(l){var e,r;N.Y.info("Edit sub admin - fetchRoles handler catch error ".concat(null===l||void 0===l||null===(e=l.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)),(0,C.K)(l,O,M,R)}})(),()=>{e=!1,r.abort()}}),[]);(0,a.TH)();return(0,w.jsxs)("div",{className:"page-wrapper",children:[(0,w.jsx)(p.Z,{myRef:M,titleMessage:q.titleMessage,descriptionMessage:q.descriptionMessage,messageType:q.messageType}),(0,w.jsx)("div",{className:"breadcrumb-wrapper",children:(0,w.jsx)("div",{className:"container",children:(0,w.jsxs)("ul",{className:"breadcrumb",children:[(0,w.jsx)("li",{children:(0,w.jsxs)(o.rU,{to:"/users/cgf-admin/",state:E["*"].includes("pending")?1:0,children:["Admins"," ",E["*"].includes("pending")?"(Pending)":"(Onboarded)"]})}),(0,w.jsx)("li",{children:(0,w.jsx)(o.rU,{to:E["*"].includes("pending")?"/users/cgf-admin/pending/view-cgf-admin/".concat(E.id):"/users/cgf-admin/view-cgf-admin/".concat(E.id),children:"View Admin"})}),(0,w.jsx)("li",{children:"Edit Admin"})]})})}),(0,w.jsx)("section",{children:(0,w.jsxs)("div",{className:"container",children:[(0,w.jsx)("div",{className:"form-header flex-between",children:(0,w.jsx)("h2",{className:"heading2",children:"Edit Admin"})}),r?(0,w.jsx)(Z.Z,{}):(0,w.jsx)("div",{className:"card-wrapper",children:(0,w.jsx)("form",{onSubmit:_((async e=>{N.Y.info("Edit sub admin - handleOnSubmit handler"),T(!0),l(!0);try{var r,n,a,o,t;const i=await b.H.put(E["*"].includes("pending")?g.v4+(null===E||void 0===E?void 0:E.id):g.pU+E.id,{name:null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:"",email:null!==(n=null===e||void 0===e?void 0:e.email)&&void 0!==n?n:"",subRoleId:null!==(a=null===e||void 0===e?void 0:e.subRoleId)&&void 0!==a?a:"",phoneNumber:null!==(o=null===e||void 0===e?void 0:e.phoneNumber)&&void 0!==o?o:"",countryCode:null!==(t=null===e||void 0===e?void 0:e.countryCode)&&void 0!==t?t:"",isActive:"active"===(null===e||void 0===e?void 0:e.status)});200==i.status&&(l(!1),O({titleMessage:"Success!",descriptionMessage:i.data.message,messageType:"success"},(()=>M.current())),setTimeout((()=>{R("/users/cgf-admin/",{state:P})}),2e3))}catch(d){var i,s;N.Y.info("Edit sub admin - handleOnSubmit handler catch error ".concat(null===d||void 0===d||null===(i=d.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message)),l(!1),T(!1),(0,C.K)(d,O,M,R)}})),children:(0,w.jsxs)("div",{className:"card-blk flex-between",children:[(0,w.jsx)("div",{className:"card-form-field",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsxs)("label",{htmlFor:"subAdminName",children:["Admin Name ",(0,w.jsx)("span",{className:"mandatory",children:"*"})]}),(0,w.jsx)(x.Z,{name:"name",onBlur:e=>{var r;return K("name",null===(r=e.target.value)||void 0===r?void 0:r.trim())},control:Y,placeholder:"Enter CGF admin name",myHelper:S,rules:{required:!0,maxLength:50,minLength:3,pattern:/^[a-zA-Z][a-zA-Z ]*$/}})]})}),(0,w.jsx)("div",{className:"card-form-field",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsxs)("label",{htmlFor:"email",children:["Email ",(0,w.jsx)("span",{className:"mandatory",children:"*"})]}),(0,w.jsx)(x.Z,{name:"email",onBlur:e=>{var r;return K("email",null===(r=e.target.value)||void 0===r?void 0:r.trim())},isDisabled:!E["*"].includes("pending"),control:Y,placeholder:"Enter email address",myHelper:S,rules:{required:!0,maxLength:50,minLength:3,pattern:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}})]})}),(0,w.jsx)("div",{className:"card-form-field",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsx)("label",{htmlFor:"phoneNumber",children:"Phone Number"}),(0,w.jsxs)("div",{className:"phone-number-field",children:[(0,w.jsx)("div",{className:"select-field country-code",children:(0,w.jsx)(v.Qr,{control:Y,name:"countryCode",rules:{validate:()=>{if(!V("countryCode")&&V("phoneNumber"))return"Invalid input"}},render:e=>{let{field:r,fieldState:{error:l}}=e;return(0,w.jsx)(t.Z,{className:"".concat(l&&"autocomplete-error"),PaperComponent:e=>{let{children:r}=e;return(0,w.jsx)(i.Z,{className:(null===L||void 0===L?void 0:L.length)>5?"autocomplete-option-txt autocomplete-option-limit":"autocomplete-option-txt",children:r})},popupIcon:(0,w.jsx)(f.Z,{}),...r,onChange:(e,r)=>{K("countryCode",r&&"object"===typeof r?r.name:r),U("countryCode"),U("phoneNumber")},options:L||[],autoHighlight:!0,getOptionLabel:e=>e,renderOption:(e,r)=>(0,w.jsx)("li",{...e,children:r}),renderInput:e=>(0,w.jsx)(s.Z,{...e,inputProps:{...e.inputProps},onChange:()=>U("countryCode"),placeholder:"+00",helperText:l?S.countryCode[null===l||void 0===l?void 0:l.type]:" "})})}})}),(0,w.jsx)(x.Z,{name:"phoneNumber",myOnChange:e=>((e,r,l)=>{K(r,e.target.value),U(r),U(l)})(e,"phoneNumber","countryCode"),onBlur:e=>{var r;return K("phoneNumber",null===(r=e.target.value)||void 0===r?void 0:r.trim())},control:Y,myHelper:S,placeholder:"1234567890",rules:{maxLength:15,minLength:7,validate:e=>!V("phoneNumber")&&V("countryCode")?"invalid input":e&&!Number(e)?"Invalid input":void 0}})]})]})}),(0,w.jsx)("div",{className:"card-form-field",children:(0,w.jsxs)("div",{className:"form-group",children:[(0,w.jsxs)("label",{htmlFor:"role",children:["Role ",(0,w.jsx)("span",{className:"mandatory",children:"*"})]}),(0,w.jsx)("div",{className:"select-field",children:(0,w.jsx)(y.Z,{name:"subRoleId",control:Y,options:F,rules:{required:!0},myHelper:S,placeholder:"Select role"})}),(0,w.jsx)("p",{className:"input-error-msg",children:null===(e=B.role)||void 0===e?void 0:e.message})]})}),(0,w.jsx)("div",{className:"card-form-field",children:(0,w.jsxs)("div",{className:"form-group",hidden:E["*"].includes("pending"),children:[(0,w.jsx)("label",{htmlFor:"cgfAdmin-status",children:"Status"}),(0,w.jsx)("div",{className:"radio-btn-field",children:(0,w.jsx)(v.Qr,{name:"status",control:Y,render:e=>{let{field:r}=e;return(0,w.jsxs)(d.Z,{...r,"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",className:"radio-btn",children:[(0,w.jsx)(c.Z,{value:"active",control:(0,w.jsx)(u.Z,{}),label:"Active"}),(0,w.jsx)(c.Z,{value:"inactive",control:(0,w.jsx)(u.Z,{}),label:"Inactive"})]})}})})]})}),(0,w.jsxs)("div",{className:"form-btn flex-between add-members-btn",children:[(0,w.jsx)("button",{onClick:()=>{R("/users/cgf-admin/",{state:P})},type:"reset",className:"secondary-button mr-10",children:"Cancel"}),(0,w.jsx)("button",{type:"submit",className:"primary-button add-button",disabled:I,children:"Update"})]})]})})})]})})]})}},48086:(e,r,l)=>{l.d(r,{Z:()=>t});var n=l(97275),a=(l(72791),l(61134)),o=l(80184);const t=e=>{let{control:r,name:l,myHelper:t,placeholder:i,myOnChange:s,rules:d,onBlur:c,multiline:u,isDisabled:m}=e;const{field:{onChange:v,value:p,ref:h},fieldState:{error:g}}=(0,a.bc)({name:l,control:r,rules:d,defaultValue:""});return(0,o.jsx)(n.Z,{disabled:m,className:"input-field ".concat(g&&"input-error"),placeholder:i,onChange:s||v,onBlur:c,value:p,inputRef:h,inputProps:{maxLength:(null===d||void 0===d?void 0:d.maxLength)&&d.maxLength},helperText:g?t&&t[l]&&t[l][g.type]?t[l][g.type]:"Invalid Input":" ",variant:"outlined"})}},45736:(e,r,l)=>{l.d(r,{K:()=>n});const n=async function(e,r,l,n,a){var o,t,i;let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if("ERR_CANCELED"===(null===e||void 0===e?void 0:e.code))return null;if(401==(null===e||void 0===e||null===(o=e.response)||void 0===o?void 0:o.status))r({titleMessage:"Oops!",descriptionMessage:"Session Timeout: Please login again!",messageType:"error"},(()=>l.current())),setTimeout((()=>{n("/login")}),3e3);else if(403===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)){var d,c,u,m;r({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(d=e.response)&&void 0!==d&&null!==(c=d.data)&&void 0!==c&&c.message?null===e||void 0===e||null===(u=e.response)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>l.current())),setTimeout((()=>{n("/home")}),3e3)}else if(404===(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.status)){var v,p,h,g;r({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(v=e.response)&&void 0!==v&&null!==(p=v.data)&&void 0!==p&&p.message?null===e||void 0===e||null===(h=e.response)||void 0===h||null===(g=h.data)||void 0===g?void 0:g.message:"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>l.current()))}else{var b,f,x,y;console.log("error - ",e),r({titleMessage:"Oops!",descriptionMessage:null!==e&&void 0!==e&&null!==(b=e.response)&&void 0!==b&&null!==(f=b.data)&&void 0!==f&&f.message?null===e||void 0===e||null===(x=e.response)||void 0===x||null===(y=x.data)||void 0===y?void 0:y.message:null!==e&&void 0!==e&&e.message?"File not uploaded yet":"Oops! Something went wrong. Please try again later.",messageType:"error"},(()=>l.current())),a&&setTimeout((()=>{n(a,{state:s})}),3e3)}}},1260:(e,r,l)=>{l.d(r,{j:()=>a});var n=l(72791);const a=e=>((0,n.useEffect)((()=>{document.title="HRDD System - ".concat(e)}),[e]),null)},85523:(e,r,l)=>{l.d(r,{Z:()=>N});var n=l(63366),a=l(87462),o=l(72791),t=l(63733),i=l(94419),s=l(52930),d=l(53767),c=l(20890),u=l(14036),m=l(66934),v=l(31402),p=l(75878),h=l(21217);function g(e){return(0,h.Z)("MuiFormControlLabel",e)}const b=(0,p.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);var f=l(76147),x=l(80184);const y=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],j=(0,m.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:l}=e;return[{["& .".concat(b.label)]:r.label},r.root,r["labelPlacement".concat((0,u.Z)(l.labelPlacement))]]}})((e=>{let{theme:r,ownerState:l}=e;return(0,a.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(b.disabled)]:{cursor:"default"}},"start"===l.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===l.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===l.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(b.label)]:{["&.".concat(b.disabled)]:{color:(r.vars||r).palette.text.disabled}}})})),Z=(0,m.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,r)=>r.asterisk})((e=>{let{theme:r}=e;return{["&.".concat(b.error)]:{color:(r.vars||r).palette.error.main}}})),N=o.forwardRef((function(e,r){var l,m;const p=(0,v.Z)({props:e,name:"MuiFormControlLabel"}),{className:h,componentsProps:b={},control:N,disabled:C,disableTypography:w,label:S,labelPlacement:R="end",required:E,slotProps:P={}}=p,M=(0,n.Z)(p,y),L=(0,s.Z)(),A=null!=(l=null!=C?C:N.props.disabled)?l:null==L?void 0:L.disabled,I=null!=E?E:N.props.required,T={disabled:A,required:I};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof N.props[e]&&"undefined"!==typeof p[e]&&(T[e]=p[e])}));const F=(0,f.Z)({props:p,muiFormControl:L,states:["error"]}),k=(0,a.Z)({},p,{disabled:A,labelPlacement:R,required:I,error:F.error}),q=(e=>{const{classes:r,disabled:l,labelPlacement:n,error:a,required:o}=e,t={root:["root",l&&"disabled","labelPlacement".concat((0,u.Z)(n)),a&&"error",o&&"required"],label:["label",l&&"disabled"],asterisk:["asterisk",a&&"error"]};return(0,i.Z)(t,g,r)})(k),O=null!=(m=P.typography)?m:b.typography;let H=S;return null==H||H.type===c.Z||w||(H=(0,x.jsx)(c.Z,(0,a.Z)({component:"span"},O,{className:(0,t.Z)(q.label,null==O?void 0:O.className),children:H}))),(0,x.jsxs)(j,(0,a.Z)({className:(0,t.Z)(q.root,h),ownerState:k,ref:r},M,{children:[o.cloneElement(N,T),I?(0,x.jsxs)(d.Z,{display:"block",children:[H,(0,x.jsxs)(Z,{ownerState:k,"aria-hidden":!0,className:q.asterisk,children:["\u2009","*"]})]}):H]}))}))},79012:(e,r,l)=>{l.d(r,{Z:()=>f});var n=l(63366),a=l(87462),o=l(72791),t=l(63733),i=l(94419),s=l(66934),d=l(31402),c=l(75878),u=l(21217);function m(e){return(0,u.Z)("MuiFormGroup",e)}(0,c.Z)("MuiFormGroup",["root","row","error"]);var v=l(52930),p=l(76147),h=l(80184);const g=["className","row"],b=(0,s.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:l}=e;return[r.root,l.row&&r.row]}})((e=>{let{ownerState:r}=e;return(0,a.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},r.row&&{flexDirection:"row"})})),f=o.forwardRef((function(e,r){const l=(0,d.Z)({props:e,name:"MuiFormGroup"}),{className:o,row:s=!1}=l,c=(0,n.Z)(l,g),u=(0,v.Z)(),f=(0,p.Z)({props:l,muiFormControl:u,states:["error"]}),x=(0,a.Z)({},l,{row:s,error:f.error}),y=(e=>{const{classes:r,row:l,error:n}=e,a={root:["root",l&&"row",n&&"error"]};return(0,i.Z)(a,m,r)})(x);return(0,h.jsx)(b,(0,a.Z)({className:(0,t.Z)(y.root,o),ownerState:x,ref:r},c))}))},88970:(e,r,l)=>{l.d(r,{Z:()=>v});var n=l(87462),a=l(63366),o=l(72791),t=l(79012),i=l(42071),s=l(98278),d=l(18672),c=l(67384),u=l(80184);const m=["actions","children","defaultValue","name","onChange","value"],v=o.forwardRef((function(e,r){const{actions:l,children:v,defaultValue:p,name:h,onChange:g,value:b}=e,f=(0,a.Z)(e,m),x=o.useRef(null),[y,j]=(0,s.Z)({controlled:b,default:p,name:"RadioGroup"});o.useImperativeHandle(l,(()=>({focus:()=>{let e=x.current.querySelector("input:not(:disabled):checked");e||(e=x.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const Z=(0,i.Z)(r,x),N=(0,c.Z)(h),C=o.useMemo((()=>({name:N,onChange(e){j(e.target.value),g&&g(e,e.target.value)},value:y})),[N,g,j,y]);return(0,u.jsx)(d.Z.Provider,{value:C,children:(0,u.jsx)(t.Z,(0,n.Z)({role:"radiogroup",ref:Z},f,{children:v}))})}))}}]);
//# sourceMappingURL=5103.2d47eb89.chunk.js.map